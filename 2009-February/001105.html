<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [BulmaGés]Gettext y los gloriosos mensajes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bulmages-main/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%0A%09%3D%3Futf-8%3Fq%3FGettext_y_los_gloriosos_me%3F%3D%20%3D%3Futf-8%3Fq%3Fnsajes%3F%3D&In-Reply-To=%3C200902162033.47889.tborras%40conetxia.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="001104.html">
   <LINK REL="Next"  HREF="001108.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[BulmaGés]Gettext y los gloriosos mensajes </H1>
    <B>Tomeu Borras</B> 
    <A HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%0A%09%3D%3Futf-8%3Fq%3FGettext_y_los_gloriosos_me%3F%3D%20%3D%3Futf-8%3Fq%3Fnsajes%3F%3D&In-Reply-To=%3C200902162033.47889.tborras%40conetxia.com%3E"
       TITLE="[BulmaGés]Gettext y los gloriosos mensajes">tborras en conetxia.com
       </A><BR>
    <I>Lun Feb 16 20:33:47 CET 2009</I>
    <P><UL>
        <LI>Mensaje anterior: <A HREF="001104.html">[BulmaGés]Gettext y los gloriosos mensajes
</A></li>
        <LI>Próximo mensaje: <A HREF="001108.html">[BulmaGés]Gettext y los gloriosos mensajes
</A></li>
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#1105">[ fecha ]</a>
              <a href="thread.html#1105">[ hilo ]</a>
              <a href="subject.html#1105">[ asunto ]</a>
              <a href="author.html#1105">[ autor ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Raül, ets una capsa de sorpreses !!!!

Ara m'has deixat parat. Enhorabona.

Sobre lo de les traduccions doncs básicament es aixó pero una mica mes 
rebuscat (o elaborat). No son variables globals sino una estructura que ja 
incorpora gettext i no se posen referencies al codi sino macros.

El problema es en la organització i que al esser &quot;Multilitic&quot; (Com diria en 
Xavi Drudis) doncs la infraestructura necessaria, organització i demés se 
dispara i estan cercant la forma de fer-ho el menys complicat posible.
De totes formes val a dir que ja ho tenen força encaminat i que lo que queda 
es pulir coses.

Salut

El Monday 16 February 2009 20:17:39 Raül Martínez i Peris escribió:
&gt;<i> Me imagino que la única/mejor manera de hacer multi-idioma es la que hay en
</I>&gt;<i> funcionamiento, pero, por si acaso, cuento como lo solucioné yo mismo en
</I>&gt;<i> una página web (que ya sé que no es lo mismo).
</I>&gt;<i>
</I>&gt;<i> Para empezar tuve que utilizar python (sin comentarios) ya que la página en
</I>&gt;<i> cuestión tenía programación a medida y utilizaba dicho 'lenguaje'. Como el
</I>&gt;<i> diseño original no suponía el multi-lenguaje no se optó por preparar la
</I>&gt;<i> página para ello, con lo cual, toda la programación llevaba escritos los
</I>&gt;<i> mensajes a través de las órdenes de python o a través de mensajes en html
</I>&gt;<i> directamente en cada página o código de programa. Para solucionarlo creé
</I>&gt;<i> una variable global con varias dimensiones (una para cada lenguaje) y en un
</I>&gt;<i> archivo separado (el cual se llamaría posteriormente desde un include) puse
</I>&gt;<i> todas las referencias, primero en castellano, y después en el otro idioma.
</I>&gt;<i> Ahora en la página html solo hay variables, en ningún caso hay ningún
</I>&gt;<i> mensaje en ningún idioma. El paso de la orden de un idioma a otro lo hice
</I>&gt;<i> con javascript que encontré rulando por alguna web, de forma que cambiando
</I>&gt;<i> las características de la decoración css se cambiaba tanto el diseño
</I>&gt;<i> frontal como el idioma.
</I>&gt;<i>
</I>&gt;<i> Me imagino que en bulmagés no será posible crear una variable global y en
</I>&gt;<i> ella introducir los textos y que después la línea de programa en cuestión
</I>&gt;<i> solo tenga que leer la variable de su idioma. Pero, por si acaso... ya está
</I>&gt;<i> dicho.
</I>&gt;<i>
</I>&gt;<i> Aunque, en el caso de que se pudiera hacer de esta forma ello implicaría un
</I>&gt;<i> problema inmediato: habría que reescribir todas las salidas de texto para
</I>&gt;<i> que imprimieran desde la variable.
</I>&gt;<i>
</I>&gt;<i> Un saludo.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> El 15 de febrero de 2009 22:02, Raül Martínez i Peris
</I>&gt;<i>
</I>&gt;<i> &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">elferrer en gmail.com</A>&gt;escribió:
</I>&gt;<i> &gt; 2009/2/15 Fco. Javier M. C. &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">fcojavmc en todo-redes.com</A>&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hola Leo.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Ayer Tomeu creó un plugin nuevo (saco la gestión de trabajadores) y no
</I>&gt;<i> &gt;&gt; sabía como crear los .po con las traducciones. No se si es la mejor
</I>&gt;<i> &gt;&gt; manera de hacerlo o existe algún atajo. Yo le pasé estas instrucciones.
</I>&gt;<i> &gt;&gt; Te las mando para que veas como lo hizo y si se puede mejorar el
</I>&gt;<i> &gt;&gt; procedimiento porque es muy engorroso.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; 1)- editar el archivo CMakeLists.txt del directorio del código fuente
</I>&gt;<i> &gt;&gt; del plugin y comentar las siguientes líneas de
</I>&gt;<i> &gt;&gt; GETTEXT_CREATE_TRANSLATIONS:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; if(USE_GETTEXT)
</I>&gt;<i> &gt;&gt;   set(plugin_i18n ${plugin_SRC} ${plugin_MOC_SRCS} ${plugin_UIS_H}
</I>&gt;<i> &gt;&gt;                        ${plugin_SRCS} ${plugin_MOCS})
</I>&gt;<i> &gt;&gt;   GETTEXT_CREATE_TEMPLATE(${plugin} ${CMAKE_CURRENT_BINARY_DIR}
</I>&gt;<i> &gt;&gt;                                ${CMAKE_CURRENT_SOURCE_DIR} plugin_i18n)
</I>&gt;<i> &gt;&gt; #  
</I>&gt;<i> &gt;&gt; GETTEXT_CREATE_TRANSLATIONS(${CMAKE_CURRENT_BINARY_DIR}/${plugin}.pot # 
</I>&gt;<i> &gt;&gt;                               ALL LANGUAGES es_ES.UTF-8 ca_ES.UTF-8)
</I>&gt;<i> &gt;&gt; endif(USE_GETTEXT)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; 2)- cmake (como siempre)
</I>&gt;<i> &gt;&gt; 3)- make
</I>&gt;<i> &gt;&gt; 4)- make translations
</I>&gt;<i> &gt;&gt; 5)- entrar en el directorio del plugin en el directorio de compilación y
</I>&gt;<i> &gt;&gt; ejecutar 'make pluginbf_trabajador_pot' para generar el archivo '.pot'
</I>&gt;<i> &gt;&gt; con las cadenas a traducir.
</I>&gt;<i> &gt;&gt; 6)- crear directorio 'po' en el directorio del plugin (código fuente).
</I>&gt;<i> &gt;&gt; 7)- copiar el archivo '.pot' desde el directorio de compilación.
</I>&gt;<i> &gt;&gt; 8)- copiar el archivo '.pot' para cada idioma con extensión '.po'. Ej:
</I>&gt;<i> &gt;&gt; pluginbf_trabajador_es_ES.UTF-8.po
</I>&gt;<i> &gt;&gt; 9)- descomentar las líneas de CMakeLists.txt
</I>&gt;<i> &gt;&gt; 10)- cambiar, de los archivos '.po' las líneas 16 ...&quot; charser=CHARSET&quot;
</I>&gt;<i> &gt;&gt; por &quot;charset=UTF-8&quot; porque sino dará error en el siguiente paso.
</I>&gt;<i> &gt;&gt; 11)- make translations (otra vez. esto traducirá las cadenas que pueda
</I>&gt;<i> &gt;&gt; de forma automática, rellenando los archivos '.po' de cada idioma)
</I>&gt;<i> &gt;&gt; 12)- copiar los archivos '.po' del directorio de compilación (que ya
</I>&gt;<i> &gt;&gt; está traducido) al directorio del código fuente del plugin.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ... y todo eso sin respirar
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Un saludo.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Leopold Palomo Avellaneda escribió:
</I>&gt;<i> &gt;&gt; &gt; Bones,
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; una de las cosas que te permite tener un único catálogo de mensajes es
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; ver los
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; gloriosos mensajes que se han ido utilizando en Bulmages. para quién
</I>&gt;<i> &gt;&gt; &gt; no
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; lo
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; sepa, cada uno de ellos es diferente y se tiene que traducir (*).
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Apartura tarde
</I>&gt;<i> &gt;&gt; &gt; Apertura Tarde
</I>&gt;<i> &gt;&gt; &gt; Apertura tardes
</I>&gt;<i> &gt;&gt; &gt; Apertura Manyana
</I>&gt;<i> &gt;&gt; &gt; Apertura manyana
</I>&gt;<i> &gt;&gt; &gt; Apertura manyanas
</I>&gt;<i> &gt;&gt; &gt; Apellidos
</I>&gt;<i> &gt;&gt; &gt; Apellidos:
</I>&gt;<i> &gt;&gt; &gt; Articulo
</I>&gt;<i> &gt;&gt; &gt; Articulo:
</I>&gt;<i> &gt;&gt; &gt; Articulos
</I>&gt;<i> &gt;&gt; &gt; &amp;Articulos
</I>&gt;<i> &gt;&gt; &gt; Articulo&amp;s
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Leo
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; (*) pensar que con qtranslator se habían de traducir TODOS los
</I>&gt;<i> &gt;&gt; &gt; mensajes, incluso los repetidos. Por lo que si tenias un mensaje 15
</I>&gt;<i> &gt;&gt; &gt; veces, lo
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; tenias
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; que traducir 15 veces.
</I>&gt;<i> &gt;&gt; &gt; _______________________________________________
</I>&gt;<i> &gt;&gt; &gt; Bulmages-main mailing list
</I>&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">Bulmages-main en lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">https://lists.berlios.de/mailman/listinfo/bulmages-main</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; --
</I>&gt;<i> &gt;&gt; Fco. Javier M. C.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; Bulmages-main mailing list
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">Bulmages-main en lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">https://lists.berlios.de/mailman/listinfo/bulmages-main</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Raül Martínez i Peris
</I>


-- 
Tomeu Borrás Riera
Conetxia Soluciones Informáticas
902 88 11 66
971 29 06 29

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Mensaje anterior: <A HREF="001104.html">[BulmaGés]Gettext y los gloriosos mensajes
</A></li>
	<LI>Próximo mensaje: <A HREF="001108.html">[BulmaGés]Gettext y los gloriosos mensajes
</A></li>
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#1105">[ fecha ]</a>
              <a href="thread.html#1105">[ hilo ]</a>
              <a href="subject.html#1105">[ asunto ]</a>
              <a href="author.html#1105">[ autor ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bulmages-main">Más información sobre la lista de distribución Bulmages-main </a><br>
</body></html>
