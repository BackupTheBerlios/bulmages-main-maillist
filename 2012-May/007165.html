<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [BulmaGés] [Gitorious] Activity: tborras pushed 5	commits to master...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bulmages-main/2012-May/index.html" >
   <LINK REL="made" HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%20%5BGitorious%5D%20Activity%3A%20tborras%20pushed%205%0A%09commits%20to%20master...&In-Reply-To=%3C20120502214819.CAC5B2C357%40steelheart.shortcut.kunder.linpro.no%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="007164.html">
   <LINK REL="Next"  HREF="007166.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[BulmaGés] [Gitorious] Activity: tborras pushed 5	commits to master... </H1>
    <B>Gitorious</B> 
    <A HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%20%5BGitorious%5D%20Activity%3A%20tborras%20pushed%205%0A%09commits%20to%20master...&In-Reply-To=%3C20120502214819.CAC5B2C357%40steelheart.shortcut.kunder.linpro.no%3E"
       TITLE="[BulmaGés] [Gitorious] Activity: tborras pushed 5	commits to master...">no-reply en gitorious.org
       </A><BR>
    <I>Mie Mayo  2 23:48:19 CEST 2012</I>
    <P><UL>
        <LI>Mensaje anterior: <A HREF="007164.html">[BulmaGés] [Gitorious] Activity: tborras pushed 1	commits to listado...
</A></li>
        <LI>Próximo mensaje: <A HREF="007166.html">[BulmaGés] [Gitorious] Activity: tborras pushed 2	commits to master...
</A></li>
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#7165">[ fecha ]</a>
              <a href="thread.html#7165">[ hilo ]</a>
              <a href="subject.html#7165">[ asunto ]</a>
              <a href="author.html#7165">[ autor ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Hello bulmagesmailing,

One of your favorites has a new activity:
------------------------------------------------------------------------
tborras pushed 5 commits to master
master changed from 41df88e to 919a4cf

View the commit log at <A HREF="https://gitorious.org/bulmages/bulmages/commits">https://gitorious.org/bulmages/bulmages/commits</A>

View the diff online: <A HREF="https://gitorious.org/bulmages/bulmages/commit/41df88e9b54a0d08243aaa55ceaa6a9f510932f1/diffs/919a4cf8c69c524cb8d311f6df21f4bb59d69671">https://gitorious.org/bulmages/bulmages/commit/41df88e9b54a0d08243aaa55ceaa6a9f510932f1/diffs/919a4cf8c69c524cb8d311f6df21f4bb59d69671</A>

Diff: 

commit 919a4cf8c69c524cb8d311f6df21f4bb59d69671
Merge: 3aab07b 9fe1834
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Wed May 2 23:47:56 2012 +0200

    Merge branch 'listadospersonalizados'


commit 9fe183484c5ddea78aa7432c36e7beeca316a7ff
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Wed May 2 23:47:02 2012 +0200

    agrego archivos faltantes

diff --git a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/openreports/ca/listado_z.rml b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/openreports/ca/listado_z.rml
new file mode 100644
index 0000000..15808f7
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/openreports/ca/listado_z.rml
@@ -0,0 +1,84 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
+&lt;document&gt;
+&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Listado&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+	&lt;pageTemplate id=&quot;main&quot;&gt;
+		&lt;pageGraphics&gt;
+		&lt;!-- EL LOGO DE CABECERA --&gt;
+		&lt;!--&lt;image x=&quot;0.5cm&quot; y=&quot;18.2cm&quot; width=&quot;7cm&quot; file=&quot;logo.jpg&quot;/&gt;--&gt;
+
+		&lt;!-- EL DRAFT --&gt;
+			&lt;!-- setFont name=&quot;Helvetica&quot; size=&quot;100&quot;/&gt;
+			&lt;fill color=&quot;(1,0.9,0.9)&quot;/&gt;
+			&lt;stroke color=&quot;(1,0.9,0.9)&quot;/&gt;
+			&lt;translate dx=&quot;13cm&quot; dy=&quot;-10.5cm&quot;/&gt;
+			&lt;rotate degrees=&quot;30&quot;/&gt;
+			&lt;drawString x=&quot;23mm&quot; y=&quot;15.7cm&quot;&gt;BORRADOR&lt;/drawString&gt;
+			&lt;lineMode width=&quot;4mm&quot;/&gt;
+			&lt;rect round=&quot;1cm&quot; x=&quot;18mm&quot; y=&quot;15cm&quot; width=&quot;21cm&quot; height=&quot;4cm&quot; fill=&quot;no&quot; stroke=&quot;yes&quot;/&gt;	
+		&lt;rotate degrees=&quot;-30&quot;/&gt;
+		&lt;translate dx=&quot;-13cm&quot; dy=&quot;10.5cm&quot;/ --&gt;
+
+		&lt;!-- EL PIE DE PAGINA --&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		&lt;drawString x=&quot;13.3cm&quot; y=&quot;0.5cm&quot;&gt;<A HREF="http://www.iglues.org&lt;/drawString">http://www.iglues.org&lt;/drawString</A>&gt;
+		&lt;drawString x=&quot;0.3cm&quot; y=&quot;0.2cm&quot;&gt;Estas plantillas son de demostracion.&lt;/drawString&gt;	
+
+
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
+		&lt;drawString x=&quot;18cm&quot; y=&quot;19.5cm&quot;&gt;[titulo]&lt;/drawString&gt;
+		&lt;/pageGraphics&gt;
+	&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;1cm&quot; width=&quot;27cm&quot; height=&quot;17.5cm&quot;/&gt;
+	&lt;/pageTemplate&gt;
+&lt;/template&gt;
+&lt;stylesheet&gt;
+	&lt;blockTableStyle id=&quot;tabla&quot;&gt;
+		&lt;blockAlignment value=&quot;RIGHT&quot; start=&quot;2,1&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockAlignment value=&quot;CENTER&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockBackground colorName=&quot;(0.7,0.7,0.7)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockTextColor colorName=&quot;(0,0,0)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;lineStyle kind=&quot;LINEBEFORE&quot; colorName=&quot;(0.5,0.5,0.5)&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;lineStyle kind=&quot;LINEBELOW&quot; colorName=&quot;(0,0,0)&quot;  start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;lineStyle kind=&quot;OUTLINE&quot; colorName=&quot;black&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;10&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;10&quot; start=&quot;0,1&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;8&quot; start=&quot;0,0&quot; stop=&quot;0,-1&quot;/&gt;
+		&lt;blockValign value=&quot;TOP&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+	&lt;/blockTableStyle&gt;
+	&lt;paraStyle name=&quot;text&quot;
+		fontName=&quot;Helvetica&quot;
+		fontSize=&quot;10&quot;
+		alignment=&quot;LEFT&quot;
+		leftIndent=&quot;0.15cm&quot;
+		rightIndent=&quot;0.15cm&quot;
+	/&gt;
+	&lt;paraStyle name=&quot;checked&quot;
+		fontName=&quot;Helvetica-Bold&quot;
+		fontSize=&quot;12&quot;
+		alignment=&quot;CENTER&quot;
+	/&gt;
+	&lt;paraStyle name=&quot;number&quot;
+		fontName=&quot;Helvetica&quot;
+		fontSize=&quot;10&quot;
+		alignment=&quot;RIGHT&quot;
+		leftIndent=&quot;0.15cm&quot;
+		rightIndent=&quot;0.15cm&quot;
+	/&gt;
+&lt;/stylesheet&gt;
+
+&lt;story&gt;
+	[story]
+	&lt;spacer length=&quot;5mm&quot; width=&quot;1mm&quot;/&gt;	
+
+[m_fechain] [m_fecha_in]
+&lt;!--IF QUERY=&quot;SELECT 1 WHERE '[m_fechain]' &lt;&gt; '' AND '[m_fechafin]' &lt;&gt; ''&quot; --&gt;
+&lt;!--QUERY=&quot;SELECT sum(totalz) AS totalzs from z WHERE fechaz&gt;='[m_fechain]'::date AND fechaz&lt;='[m_fechafin]'::date&quot;--&gt;
+	  &lt;para&gt;La suma total es: [totalzs]&lt;/para&gt;
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+&lt;/story&gt;
+&lt;/document&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/openreports/en/listado_z.rml b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/openreports/en/listado_z.rml
new file mode 100644
index 0000000..15808f7
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/openreports/en/listado_z.rml
@@ -0,0 +1,84 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
+&lt;document&gt;
+&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Listado&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+	&lt;pageTemplate id=&quot;main&quot;&gt;
+		&lt;pageGraphics&gt;
+		&lt;!-- EL LOGO DE CABECERA --&gt;
+		&lt;!--&lt;image x=&quot;0.5cm&quot; y=&quot;18.2cm&quot; width=&quot;7cm&quot; file=&quot;logo.jpg&quot;/&gt;--&gt;
+
+		&lt;!-- EL DRAFT --&gt;
+			&lt;!-- setFont name=&quot;Helvetica&quot; size=&quot;100&quot;/&gt;
+			&lt;fill color=&quot;(1,0.9,0.9)&quot;/&gt;
+			&lt;stroke color=&quot;(1,0.9,0.9)&quot;/&gt;
+			&lt;translate dx=&quot;13cm&quot; dy=&quot;-10.5cm&quot;/&gt;
+			&lt;rotate degrees=&quot;30&quot;/&gt;
+			&lt;drawString x=&quot;23mm&quot; y=&quot;15.7cm&quot;&gt;BORRADOR&lt;/drawString&gt;
+			&lt;lineMode width=&quot;4mm&quot;/&gt;
+			&lt;rect round=&quot;1cm&quot; x=&quot;18mm&quot; y=&quot;15cm&quot; width=&quot;21cm&quot; height=&quot;4cm&quot; fill=&quot;no&quot; stroke=&quot;yes&quot;/&gt;	
+		&lt;rotate degrees=&quot;-30&quot;/&gt;
+		&lt;translate dx=&quot;-13cm&quot; dy=&quot;10.5cm&quot;/ --&gt;
+
+		&lt;!-- EL PIE DE PAGINA --&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		&lt;drawString x=&quot;13.3cm&quot; y=&quot;0.5cm&quot;&gt;<A HREF="http://www.iglues.org&lt;/drawString">http://www.iglues.org&lt;/drawString</A>&gt;
+		&lt;drawString x=&quot;0.3cm&quot; y=&quot;0.2cm&quot;&gt;Estas plantillas son de demostracion.&lt;/drawString&gt;	
+
+
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
+		&lt;drawString x=&quot;18cm&quot; y=&quot;19.5cm&quot;&gt;[titulo]&lt;/drawString&gt;
+		&lt;/pageGraphics&gt;
+	&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;1cm&quot; width=&quot;27cm&quot; height=&quot;17.5cm&quot;/&gt;
+	&lt;/pageTemplate&gt;
+&lt;/template&gt;
+&lt;stylesheet&gt;
+	&lt;blockTableStyle id=&quot;tabla&quot;&gt;
+		&lt;blockAlignment value=&quot;RIGHT&quot; start=&quot;2,1&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockAlignment value=&quot;CENTER&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockBackground colorName=&quot;(0.7,0.7,0.7)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockTextColor colorName=&quot;(0,0,0)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;lineStyle kind=&quot;LINEBEFORE&quot; colorName=&quot;(0.5,0.5,0.5)&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;lineStyle kind=&quot;LINEBELOW&quot; colorName=&quot;(0,0,0)&quot;  start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;lineStyle kind=&quot;OUTLINE&quot; colorName=&quot;black&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;10&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;10&quot; start=&quot;0,1&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;8&quot; start=&quot;0,0&quot; stop=&quot;0,-1&quot;/&gt;
+		&lt;blockValign value=&quot;TOP&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+	&lt;/blockTableStyle&gt;
+	&lt;paraStyle name=&quot;text&quot;
+		fontName=&quot;Helvetica&quot;
+		fontSize=&quot;10&quot;
+		alignment=&quot;LEFT&quot;
+		leftIndent=&quot;0.15cm&quot;
+		rightIndent=&quot;0.15cm&quot;
+	/&gt;
+	&lt;paraStyle name=&quot;checked&quot;
+		fontName=&quot;Helvetica-Bold&quot;
+		fontSize=&quot;12&quot;
+		alignment=&quot;CENTER&quot;
+	/&gt;
+	&lt;paraStyle name=&quot;number&quot;
+		fontName=&quot;Helvetica&quot;
+		fontSize=&quot;10&quot;
+		alignment=&quot;RIGHT&quot;
+		leftIndent=&quot;0.15cm&quot;
+		rightIndent=&quot;0.15cm&quot;
+	/&gt;
+&lt;/stylesheet&gt;
+
+&lt;story&gt;
+	[story]
+	&lt;spacer length=&quot;5mm&quot; width=&quot;1mm&quot;/&gt;	
+
+[m_fechain] [m_fecha_in]
+&lt;!--IF QUERY=&quot;SELECT 1 WHERE '[m_fechain]' &lt;&gt; '' AND '[m_fechafin]' &lt;&gt; ''&quot; --&gt;
+&lt;!--QUERY=&quot;SELECT sum(totalz) AS totalzs from z WHERE fechaz&gt;='[m_fechain]'::date AND fechaz&lt;='[m_fechafin]'::date&quot;--&gt;
+	  &lt;para&gt;La suma total es: [totalzs]&lt;/para&gt;
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+&lt;/story&gt;
+&lt;/document&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/openreports/es/listado_z.rml b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/openreports/es/listado_z.rml
new file mode 100644
index 0000000..15808f7
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/openreports/es/listado_z.rml
@@ -0,0 +1,84 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
+&lt;document&gt;
+&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Listado&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+	&lt;pageTemplate id=&quot;main&quot;&gt;
+		&lt;pageGraphics&gt;
+		&lt;!-- EL LOGO DE CABECERA --&gt;
+		&lt;!--&lt;image x=&quot;0.5cm&quot; y=&quot;18.2cm&quot; width=&quot;7cm&quot; file=&quot;logo.jpg&quot;/&gt;--&gt;
+
+		&lt;!-- EL DRAFT --&gt;
+			&lt;!-- setFont name=&quot;Helvetica&quot; size=&quot;100&quot;/&gt;
+			&lt;fill color=&quot;(1,0.9,0.9)&quot;/&gt;
+			&lt;stroke color=&quot;(1,0.9,0.9)&quot;/&gt;
+			&lt;translate dx=&quot;13cm&quot; dy=&quot;-10.5cm&quot;/&gt;
+			&lt;rotate degrees=&quot;30&quot;/&gt;
+			&lt;drawString x=&quot;23mm&quot; y=&quot;15.7cm&quot;&gt;BORRADOR&lt;/drawString&gt;
+			&lt;lineMode width=&quot;4mm&quot;/&gt;
+			&lt;rect round=&quot;1cm&quot; x=&quot;18mm&quot; y=&quot;15cm&quot; width=&quot;21cm&quot; height=&quot;4cm&quot; fill=&quot;no&quot; stroke=&quot;yes&quot;/&gt;	
+		&lt;rotate degrees=&quot;-30&quot;/&gt;
+		&lt;translate dx=&quot;-13cm&quot; dy=&quot;10.5cm&quot;/ --&gt;
+
+		&lt;!-- EL PIE DE PAGINA --&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		&lt;drawString x=&quot;13.3cm&quot; y=&quot;0.5cm&quot;&gt;<A HREF="http://www.iglues.org&lt;/drawString">http://www.iglues.org&lt;/drawString</A>&gt;
+		&lt;drawString x=&quot;0.3cm&quot; y=&quot;0.2cm&quot;&gt;Estas plantillas son de demostracion.&lt;/drawString&gt;	
+
+
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
+		&lt;drawString x=&quot;18cm&quot; y=&quot;19.5cm&quot;&gt;[titulo]&lt;/drawString&gt;
+		&lt;/pageGraphics&gt;
+	&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;1cm&quot; width=&quot;27cm&quot; height=&quot;17.5cm&quot;/&gt;
+	&lt;/pageTemplate&gt;
+&lt;/template&gt;
+&lt;stylesheet&gt;
+	&lt;blockTableStyle id=&quot;tabla&quot;&gt;
+		&lt;blockAlignment value=&quot;RIGHT&quot; start=&quot;2,1&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockAlignment value=&quot;CENTER&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockBackground colorName=&quot;(0.7,0.7,0.7)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockTextColor colorName=&quot;(0,0,0)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;lineStyle kind=&quot;LINEBEFORE&quot; colorName=&quot;(0.5,0.5,0.5)&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;lineStyle kind=&quot;LINEBELOW&quot; colorName=&quot;(0,0,0)&quot;  start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;lineStyle kind=&quot;OUTLINE&quot; colorName=&quot;black&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;10&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;10&quot; start=&quot;0,1&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;8&quot; start=&quot;0,0&quot; stop=&quot;0,-1&quot;/&gt;
+		&lt;blockValign value=&quot;TOP&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+	&lt;/blockTableStyle&gt;
+	&lt;paraStyle name=&quot;text&quot;
+		fontName=&quot;Helvetica&quot;
+		fontSize=&quot;10&quot;
+		alignment=&quot;LEFT&quot;
+		leftIndent=&quot;0.15cm&quot;
+		rightIndent=&quot;0.15cm&quot;
+	/&gt;
+	&lt;paraStyle name=&quot;checked&quot;
+		fontName=&quot;Helvetica-Bold&quot;
+		fontSize=&quot;12&quot;
+		alignment=&quot;CENTER&quot;
+	/&gt;
+	&lt;paraStyle name=&quot;number&quot;
+		fontName=&quot;Helvetica&quot;
+		fontSize=&quot;10&quot;
+		alignment=&quot;RIGHT&quot;
+		leftIndent=&quot;0.15cm&quot;
+		rightIndent=&quot;0.15cm&quot;
+	/&gt;
+&lt;/stylesheet&gt;
+
+&lt;story&gt;
+	[story]
+	&lt;spacer length=&quot;5mm&quot; width=&quot;1mm&quot;/&gt;	
+
+[m_fechain] [m_fecha_in]
+&lt;!--IF QUERY=&quot;SELECT 1 WHERE '[m_fechain]' &lt;&gt; '' AND '[m_fechafin]' &lt;&gt; ''&quot; --&gt;
+&lt;!--QUERY=&quot;SELECT sum(totalz) AS totalzs from z WHERE fechaz&gt;='[m_fechain]'::date AND fechaz&lt;='[m_fechafin]'::date&quot;--&gt;
+	  &lt;para&gt;La suma total es: [totalzs]&lt;/para&gt;
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+&lt;/story&gt;
+&lt;/document&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/openreports/fr/listado_z.rml b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/openreports/fr/listado_z.rml
new file mode 100644
index 0000000..15808f7
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/openreports/fr/listado_z.rml
@@ -0,0 +1,84 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
+&lt;document&gt;
+&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Listado&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+	&lt;pageTemplate id=&quot;main&quot;&gt;
+		&lt;pageGraphics&gt;
+		&lt;!-- EL LOGO DE CABECERA --&gt;
+		&lt;!--&lt;image x=&quot;0.5cm&quot; y=&quot;18.2cm&quot; width=&quot;7cm&quot; file=&quot;logo.jpg&quot;/&gt;--&gt;
+
+		&lt;!-- EL DRAFT --&gt;
+			&lt;!-- setFont name=&quot;Helvetica&quot; size=&quot;100&quot;/&gt;
+			&lt;fill color=&quot;(1,0.9,0.9)&quot;/&gt;
+			&lt;stroke color=&quot;(1,0.9,0.9)&quot;/&gt;
+			&lt;translate dx=&quot;13cm&quot; dy=&quot;-10.5cm&quot;/&gt;
+			&lt;rotate degrees=&quot;30&quot;/&gt;
+			&lt;drawString x=&quot;23mm&quot; y=&quot;15.7cm&quot;&gt;BORRADOR&lt;/drawString&gt;
+			&lt;lineMode width=&quot;4mm&quot;/&gt;
+			&lt;rect round=&quot;1cm&quot; x=&quot;18mm&quot; y=&quot;15cm&quot; width=&quot;21cm&quot; height=&quot;4cm&quot; fill=&quot;no&quot; stroke=&quot;yes&quot;/&gt;	
+		&lt;rotate degrees=&quot;-30&quot;/&gt;
+		&lt;translate dx=&quot;-13cm&quot; dy=&quot;10.5cm&quot;/ --&gt;
+
+		&lt;!-- EL PIE DE PAGINA --&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		&lt;drawString x=&quot;13.3cm&quot; y=&quot;0.5cm&quot;&gt;<A HREF="http://www.iglues.org&lt;/drawString">http://www.iglues.org&lt;/drawString</A>&gt;
+		&lt;drawString x=&quot;0.3cm&quot; y=&quot;0.2cm&quot;&gt;Estas plantillas son de demostracion.&lt;/drawString&gt;	
+
+
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
+		&lt;drawString x=&quot;18cm&quot; y=&quot;19.5cm&quot;&gt;[titulo]&lt;/drawString&gt;
+		&lt;/pageGraphics&gt;
+	&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;1cm&quot; width=&quot;27cm&quot; height=&quot;17.5cm&quot;/&gt;
+	&lt;/pageTemplate&gt;
+&lt;/template&gt;
+&lt;stylesheet&gt;
+	&lt;blockTableStyle id=&quot;tabla&quot;&gt;
+		&lt;blockAlignment value=&quot;RIGHT&quot; start=&quot;2,1&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockAlignment value=&quot;CENTER&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockBackground colorName=&quot;(0.7,0.7,0.7)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockTextColor colorName=&quot;(0,0,0)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;lineStyle kind=&quot;LINEBEFORE&quot; colorName=&quot;(0.5,0.5,0.5)&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;lineStyle kind=&quot;LINEBELOW&quot; colorName=&quot;(0,0,0)&quot;  start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;lineStyle kind=&quot;OUTLINE&quot; colorName=&quot;black&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;10&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;10&quot; start=&quot;0,1&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;8&quot; start=&quot;0,0&quot; stop=&quot;0,-1&quot;/&gt;
+		&lt;blockValign value=&quot;TOP&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+	&lt;/blockTableStyle&gt;
+	&lt;paraStyle name=&quot;text&quot;
+		fontName=&quot;Helvetica&quot;
+		fontSize=&quot;10&quot;
+		alignment=&quot;LEFT&quot;
+		leftIndent=&quot;0.15cm&quot;
+		rightIndent=&quot;0.15cm&quot;
+	/&gt;
+	&lt;paraStyle name=&quot;checked&quot;
+		fontName=&quot;Helvetica-Bold&quot;
+		fontSize=&quot;12&quot;
+		alignment=&quot;CENTER&quot;
+	/&gt;
+	&lt;paraStyle name=&quot;number&quot;
+		fontName=&quot;Helvetica&quot;
+		fontSize=&quot;10&quot;
+		alignment=&quot;RIGHT&quot;
+		leftIndent=&quot;0.15cm&quot;
+		rightIndent=&quot;0.15cm&quot;
+	/&gt;
+&lt;/stylesheet&gt;
+
+&lt;story&gt;
+	[story]
+	&lt;spacer length=&quot;5mm&quot; width=&quot;1mm&quot;/&gt;	
+
+[m_fechain] [m_fecha_in]
+&lt;!--IF QUERY=&quot;SELECT 1 WHERE '[m_fechain]' &lt;&gt; '' AND '[m_fechafin]' &lt;&gt; ''&quot; --&gt;
+&lt;!--QUERY=&quot;SELECT sum(totalz) AS totalzs from z WHERE fechaz&gt;='[m_fechain]'::date AND fechaz&lt;='[m_fechafin]'::date&quot;--&gt;
+	  &lt;para&gt;La suma total es: [totalzs]&lt;/para&gt;
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+&lt;/story&gt;
+&lt;/document&gt;

commit 3aab07bb4d74b4c0188b46a372681e116cb3b01d
Merge: 41df88e 8fa0fda
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Wed May 2 23:31:16 2012 +0200

    Merge branch 'listadospersonalizados'


commit 8fa0fda081d859b5c136a65268d1ed9cb59a2682
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Wed May 2 23:24:45 2012 +0200

    Arreglo problema con las plantillas que se procesan multiples veces

diff --git a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/CMakeLists.txt b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/CMakeLists.txt
index e96d76a..ed87d2f 100644
--- a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/CMakeLists.txt
+++ b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/CMakeLists.txt
@@ -116,3 +116,9 @@ add_dependencies(${plugin} bulmafact bulmalib bulmatpv pluginbf_clientealbaran p
 install(DIRECTORY dbmodels/ 
 		DESTINATION share/bulmages/dbmodels/plugins
 		PATTERN &quot;.svn&quot; EXCLUDE)
+
+
+install(DIRECTORY openreports/ 
+      DESTINATION share/bulmages/openreports
+      PATTERN &quot;.svn&quot; EXCLUDE)
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.ca b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.ca
index ad9cb6a..681de4e 100644
--- a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.ca
+++ b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.ca
@@ -28,4 +28,6 @@ Categorias: Facturació avançada;
 
 Orden: 900
 
+Reports: listado_z.rml
+
 Comentarios: És imprescindible tenir la funcionalitat de TPV instal·lada o sinó aquest plugin no funcionarà.
diff --git a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.en b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.en
index 6b9b0a1..3b78954 100644
--- a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.en
+++ b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.en
@@ -28,4 +28,6 @@ Categorias: Advanced invoicing;
 
 Orden: 900
 
+Reports: listado_z.rml
+
 Comentarios: It is essential to have the POS functionality installed or otherwise this plugin will not work.
diff --git a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.es b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.es
index 57a3d92..aeb4b31 100644
--- a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.es
+++ b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.es
@@ -29,4 +29,6 @@ Categorias: Facturacion avanzada;
 
 Orden: 900
 
+Reports: listado_z.rml
+
 Comentarios: Es imprescindible tener la funcionalidad de TPV instalada o sino este plugin no funcionará.
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.fr b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.fr
index 6f1d533..16bba36 100644
--- a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.fr
+++ b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/README.fr
@@ -28,4 +28,6 @@ Categorias: Facturation avancees;
 
 Orden: 900
 
+Reports: listado_z.rml
+
 Comentarios: On doit avoir la fonctionalité de TPV installée sinon ce plugin ne fonctionnera pas
diff --git a/bulmages/bulmalib/src/bldb.cpp b/bulmages/bulmalib/src/bldb.cpp
index 5c54f5d..903e0a0 100644
--- a/bulmages/bulmalib/src/bldb.cpp
+++ b/bulmages/bulmalib/src/bldb.cpp
@@ -1003,6 +1003,10 @@ QString BlDbRecord::story ( void )
 int BlDbRecord::generateRML ( const QString &amp;arch )
 {
     BL_FUNC_DEBUG
+
+    QString archivo;
+    QString archivod = arch;
+
     /// Disparamos los plugins
     int res = g_plugins-&gt;run ( &quot;BlDbRecord_generateRML&quot;, this );
     if ( res != 0 ) {
@@ -1016,19 +1020,20 @@ int BlDbRecord::generateRML ( const QString &amp;arch )
     else if ( arch.right ( 3 ) == &quot;pys&quot; )
         tipoescape = 2;
 
-    /// Copiamos el archivo.
-    QString archivo = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + arch;
-    QString archivod = g_confpr-&gt;value( CONF_DIR_USER ) + arch;
-    if(!blCopyFile(archivo, archivod)){
-        blMsgError(_(&quot;Error al copiar el archivo RML [ bldb-&gt;generateRML() ]&quot;));
+    /// Copiamos el archivo desde openreports en caso de que sea preciso.
+    if ( ! archivod.contains(g_confpr-&gt;value( CONF_DIR_USER ))) {
+	archivo = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + arch;
+	archivod = g_confpr-&gt;value( CONF_DIR_USER ) + arch;
+	if(!blCopyFile(archivo, archivod)){
+	    blMsgError(_(&quot;Error al copiar el archivo RML [ BlDbRecord-&gt;generateRML() ]&quot;));
+	} // end if
     } // end if
 
-
     /// Copiamos el logo
     QString ownlogo = g_confpr-&gt;value( CONF_DIR_USER ) + &quot;logo.jpg&quot;;
     QString archivologo = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + &quot;logo.jpg&quot;;
     if(!blCopyFile(archivologo, ownlogo)){
-        blMsgError(_(&quot;Error al copiar el archivo de logo [ bldb-&gt;generateRML() ]&quot;));
+        blMsgError(_(&quot;Error al copiar el archivo de logo [ BlDbRecord-&gt;generateRML() ]&quot;));
     } // end if
 
     QFile file;
diff --git a/bulmages/bulmalib/src/blformlist.cpp b/bulmages/bulmalib/src/blformlist.cpp
index c6a9314..6d983e4 100644
--- a/bulmages/bulmalib/src/blformlist.cpp
+++ b/bulmages/bulmalib/src/blformlist.cpp
@@ -875,6 +875,7 @@ void BlFormList::printPDF (  const QString &amp;titular )
         blMsgError(_(&quot;Error al copiar logo.jpg [ BlFormList-&gt;printPDF() ]&quot;));
     } // end if
 
+    
     QFile file;
     file.setFileName ( archivod );
     file.open ( QIODevice::ReadOnly );
@@ -906,10 +907,11 @@ void BlFormList::printPDF (  const QString &amp;titular )
         stream &lt;&lt; buff;
         file.close();
     } // end if
-    
+
     BlForm *ficha = new BlForm ( mainCompany(), 0 );
-    if ( !ficha-&gt;generateRML ( g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + fileName ))
+    if ( !ficha-&gt;generateRML ( archivod ))
 	return;
+    delete ficha;
 
     blCreateAndLoadPDF ( fileName.left ( fileName.size() - 4 ));
 }

commit eb8ae8b50225c582c9ba06fa48b7887d53d04e27
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Mon Apr 30 16:57:32 2012 +0200

    Con este cambio los BlFormList pueden imprimir mediante una plantilla personalizada por tabla. Si existe el archivo listado_tablename.rml se utilizara este en lugar del listado.rml mas generico. Ademas estas plantillas soportan la misma funcionalidad que reports y templates siendo ademas los objetos del filtraje pasados como parametros para poder reproducir los accesos a la base de datos

diff --git a/bulmages/bulmafact/plugins/pluginbf_actividad/actividadeslist.cpp b/bulmages/bulmafact/plugins/pluginbf_actividad/actividadeslist.cpp
index e7c6339..17b6392 100644
--- a/bulmages/bulmafact/plugins/pluginbf_actividad/actividadeslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_actividad/actividadeslist.cpp
@@ -153,7 +153,7 @@ void ActividadesList::imprimir()
 {
     BL_FUNC_DEBUG
     
-    mui_list-&gt;printPDF ( _ ( &quot;Actividades&quot; ) );
+    printPDF ( _ ( &quot;Actividades&quot; ) );
     
     
 }
diff --git a/bulmages/bulmafact/plugins/pluginbf_actividad/convocatoriaslist.cpp b/bulmages/bulmafact/plugins/pluginbf_actividad/convocatoriaslist.cpp
index 9b64a36..3532ab5 100644
--- a/bulmages/bulmafact/plugins/pluginbf_actividad/convocatoriaslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_actividad/convocatoriaslist.cpp
@@ -146,7 +146,7 @@ void ConvocatoriasList::crear()
 void ConvocatoriasList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Convocatorias&quot; ) );
+    printPDF ( _ ( &quot;Convocatorias&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_almacenamplia/almaceneslistview.cpp b/bulmages/bulmafact/plugins/pluginbf_almacenamplia/almaceneslistview.cpp
index ccc8b75..b5178b8 100644
--- a/bulmages/bulmafact/plugins/pluginbf_almacenamplia/almaceneslistview.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_almacenamplia/almaceneslistview.cpp
@@ -222,7 +222,7 @@ void AlmacenesListView::editar ( int row )
 void AlmacenesListView::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Almacenes&quot; ) );
+    printPDF ( _ ( &quot;Almacenes&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_alumno/alumnoslist.cpp b/bulmages/bulmafact/plugins/pluginbf_alumno/alumnoslist.cpp
index bad7936..4df67fa 100644
--- a/bulmages/bulmafact/plugins/pluginbf_alumno/alumnoslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_alumno/alumnoslist.cpp
@@ -215,7 +215,7 @@ void AlumnosList::crear()
 void AlumnosList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Alumnos&quot; ) );
+    printPDF ( _ ( &quot;Alumnos&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_articulo/articulolist.cpp b/bulmages/bulmafact/plugins/pluginbf_articulo/articulolist.cpp
index 3d5e98e..4c155b4 100644
--- a/bulmages/bulmafact/plugins/pluginbf_articulo/articulolist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_articulo/articulolist.cpp
@@ -234,7 +234,7 @@ QString ArticuloList::formaQuery()
 void ArticuloList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( &quot;Listado de articulos&quot; );
+    printPDF ( &quot;Listado de articulos&quot; );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_asociacion/comisioneslist.cpp b/bulmages/bulmafact/plugins/pluginbf_asociacion/comisioneslist.cpp
index 6aba6ab..aa2a760 100644
--- a/bulmages/bulmafact/plugins/pluginbf_asociacion/comisioneslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_asociacion/comisioneslist.cpp
@@ -148,7 +148,7 @@ void ComisionesList::crear()
 void ComisionesList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Actividades&quot; ) );
+    printPDF ( _ ( &quot;Actividades&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_asociacion/convreunionlist.cpp b/bulmages/bulmafact/plugins/pluginbf_asociacion/convreunionlist.cpp
index 95a3522..c20c60b 100644
--- a/bulmages/bulmafact/plugins/pluginbf_asociacion/convreunionlist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_asociacion/convreunionlist.cpp
@@ -149,7 +149,7 @@ void ConvReunionList::crear()
 void ConvReunionList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Reuniones&quot; ) );
+    printPDF ( _ ( &quot;Reuniones&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_asociacion/jdirectivalist.cpp b/bulmages/bulmafact/plugins/pluginbf_asociacion/jdirectivalist.cpp
index 1f8b30e..ed8037e 100644
--- a/bulmages/bulmafact/plugins/pluginbf_asociacion/jdirectivalist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_asociacion/jdirectivalist.cpp
@@ -159,7 +159,7 @@ void JDirectivaList::imprimir()
 {
     BL_FUNC_DEBUG
     
-    mui_list-&gt;printPDF ( _ ( &quot;Actividades&quot; ) );
+    printPDF ( _ ( &quot;Actividades&quot; ) );
     
     
 }
diff --git a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/zlist.cpp b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/zlist.cpp
index 75dc675..fc6a272 100644
--- a/bulmages/bulmafact/plugins/pluginbf_bulmatpv/zlist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_bulmatpv/zlist.cpp
@@ -190,7 +190,7 @@ void ZList::editar ( int row )
 void ZList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Cuadres de caja&quot; ) );
+    printPDF ( _ ( &quot;Cuadres de caja&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_carteracobros/carteracobroslist.cpp b/bulmages/bulmafact/plugins/pluginbf_carteracobros/carteracobroslist.cpp
index 51a8728..718a0b9 100644
--- a/bulmages/bulmafact/plugins/pluginbf_carteracobros/carteracobroslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_carteracobros/carteracobroslist.cpp
@@ -169,7 +169,7 @@ void CarteraCobrosList::editar ( int )
 void CarteraCobrosList::on_mui_imprimir_clicked()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( tr ( &quot;BlFormList de Vencimientos&quot; ) );
+    printPDF ( tr ( &quot;BlFormList de Vencimientos&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_carterapagos/carterapagoslist.cpp b/bulmages/bulmafact/plugins/pluginbf_carterapagos/carterapagoslist.cpp
index baf1699..7f0c176 100644
--- a/bulmages/bulmafact/plugins/pluginbf_carterapagos/carterapagoslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_carterapagos/carterapagoslist.cpp
@@ -166,7 +166,7 @@ void CarteraPagosList::editar ( int )
 void CarteraPagosList::on_mui_imprimir_clicked()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( tr ( &quot;Listado de Vencimientos&quot; ) );
+    printPDF ( tr ( &quot;Listado de Vencimientos&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_cliente/clientslist.cpp b/bulmages/bulmafact/plugins/pluginbf_cliente/clientslist.cpp
index cea8463..86c5099 100644
--- a/bulmages/bulmafact/plugins/pluginbf_cliente/clientslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_cliente/clientslist.cpp
@@ -158,7 +158,7 @@ void ClientsList::editar ( int row )
 void ClientsList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Listado de Clientes&quot; ) );
+    printPDF ( _ ( &quot;Listado de Clientes&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/albaranclientelist.cpp b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/albaranclientelist.cpp
index 4a6b30d..926e2f8 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/albaranclientelist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/albaranclientelist.cpp
@@ -347,7 +347,7 @@ void AlbaranClienteList::remove()
 void AlbaranClienteList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Albaranes a clientes&quot; ) );
+    printPDF ( _ ( &quot;Albaranes a clientes&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientecobro/cobroslist.cpp b/bulmages/bulmafact/plugins/pluginbf_clientecobro/cobroslist.cpp
index 946629b..d61c0ca 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientecobro/cobroslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_clientecobro/cobroslist.cpp
@@ -193,7 +193,7 @@ void CobrosList::crear()
 void CobrosList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Cobros a clientes&quot; ) );
+    printPDF ( _ ( &quot;Cobros a clientes&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/facturaslist.cpp b/bulmages/bulmafact/plugins/pluginbf_clientefactura/facturaslist.cpp
index 04c4751..e0a6b3b 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/facturaslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/facturaslist.cpp
@@ -273,7 +273,7 @@ void FacturasList::editar ( int row )
 void FacturasList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Facturas a clientes&quot; ) );
+    printPDF ( _ ( &quot;Facturas a clientes&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/pedidosclientelist.cpp b/bulmages/bulmafact/plugins/pluginbf_clientepedido/pedidosclientelist.cpp
index 25a234a..3ff45f3 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepedido/pedidosclientelist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/pedidosclientelist.cpp
@@ -251,7 +251,7 @@ void PedidosClienteList::editar ( int row )
 void PedidosClienteList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Pedidos de clientes&quot; ) );
+    printPDF ( _ ( &quot;Pedidos de clientes&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/presupuestolist.cpp b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/presupuestolist.cpp
index 4c55fcf..ceaf1b4 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/presupuestolist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/presupuestolist.cpp
@@ -307,7 +307,7 @@ void PresupuestoList::editar ( int row )
 void PresupuestoList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Presupuestos a clientes&quot; ) );
+    printPDF ( _ ( &quot;Presupuestos a clientes&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clienteticket/ticketclientelist.cpp b/bulmages/bulmafact/plugins/pluginbf_clienteticket/ticketclientelist.cpp
index 7868149..361a430 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clienteticket/ticketclientelist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_clienteticket/ticketclientelist.cpp
@@ -344,7 +344,7 @@ void TicketClienteList::remove()
 void TicketClienteList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Ticketes a clientes&quot; ) );
+    printPDF ( _ ( &quot;Ticketes a clientes&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_contrato/contratoslist.cpp b/bulmages/bulmafact/plugins/pluginbf_contrato/contratoslist.cpp
index d19bf95..e6b1af7 100644
--- a/bulmages/bulmafact/plugins/pluginbf_contrato/contratoslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_contrato/contratoslist.cpp
@@ -110,7 +110,7 @@ void ContratosList::remove() {
 void ContratosList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Listado de Contratos&quot; ) );
+    printPDF ( _ ( &quot;Listado de Contratos&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_minicontabilidad/presupuestocontablelist.cpp b/bulmages/bulmafact/plugins/pluginbf_minicontabilidad/presupuestocontablelist.cpp
index 0ca865e..6c2f15d 100644
--- a/bulmages/bulmafact/plugins/pluginbf_minicontabilidad/presupuestocontablelist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_minicontabilidad/presupuestocontablelist.cpp
@@ -130,7 +130,7 @@ void PresupuestoContableList::editar ( int row )
 void PresupuestoContableList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Listado de Presupuestos Contables&quot; ) );
+    printPDF ( _ ( &quot;Listado de Presupuestos Contables&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_profesor/profesoreslist.cpp b/bulmages/bulmafact/plugins/pluginbf_profesor/profesoreslist.cpp
index 28a2b43..5b9b30f 100644
--- a/bulmages/bulmafact/plugins/pluginbf_profesor/profesoreslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_profesor/profesoreslist.cpp
@@ -198,7 +198,7 @@ void ProfesoresList::imprimir()
 {
     BL_FUNC_DEBUG
     
-    mui_list-&gt;printPDF ( _ ( &quot;Profesores&quot; ) );
+    printPDF ( _ ( &quot;Profesores&quot; ) );
     
     
 }
diff --git a/bulmages/bulmafact/plugins/pluginbf_proveedor/providerslist.cpp b/bulmages/bulmafact/plugins/pluginbf_proveedor/providerslist.cpp
index 1efee23..159cc31 100644
--- a/bulmages/bulmafact/plugins/pluginbf_proveedor/providerslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_proveedor/providerslist.cpp
@@ -282,7 +282,7 @@ void ProveedorList::remove()
 void ProveedorList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Listado de Proveedores&quot; ) );
+    printPDF ( _ ( &quot;Listado de Proveedores&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_proveedoralbaran/albaranesproveedor.cpp b/bulmages/bulmafact/plugins/pluginbf_proveedoralbaran/albaranesproveedor.cpp
index 11ce77d..5e4de3b 100644
--- a/bulmages/bulmafact/plugins/pluginbf_proveedoralbaran/albaranesproveedor.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_proveedoralbaran/albaranesproveedor.cpp
@@ -328,7 +328,7 @@ void AlbaranesProveedor::editar ( int row )
 void AlbaranesProveedor::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Albaranes de proveedor&quot; ) );
+    printPDF ( _ ( &quot;Albaranes de proveedor&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_proveedorfactura/facturasplist.cpp b/bulmages/bulmafact/plugins/pluginbf_proveedorfactura/facturasplist.cpp
index 824eeb2..08dfb64 100644
--- a/bulmages/bulmafact/plugins/pluginbf_proveedorfactura/facturasplist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_proveedorfactura/facturasplist.cpp
@@ -272,7 +272,7 @@ void FacturasProveedorList::remove()
 void FacturasProveedorList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Facturas de proveedores&quot; ) );
+    printPDF ( _ ( &quot;Facturas de proveedores&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_proveedorpago/pagoslist.cpp b/bulmages/bulmafact/plugins/pluginbf_proveedorpago/pagoslist.cpp
index a39c6b5..a6ef604 100644
--- a/bulmages/bulmafact/plugins/pluginbf_proveedorpago/pagoslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_proveedorpago/pagoslist.cpp
@@ -192,7 +192,7 @@ void PagosList::crear()
 void PagosList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Pagos a proveedores&quot; ) );
+    printPDF ( _ ( &quot;Pagos a proveedores&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_proveedorpedido/pedidosproveedorlist.cpp b/bulmages/bulmafact/plugins/pluginbf_proveedorpedido/pedidosproveedorlist.cpp
index e8fcd1f..02591ce 100644
--- a/bulmages/bulmafact/plugins/pluginbf_proveedorpedido/pedidosproveedorlist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_proveedorpedido/pedidosproveedorlist.cpp
@@ -194,7 +194,7 @@ QString PedidosProveedorList::generarFiltro()
 void PedidosProveedorList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Pedidos a proveedores&quot; ) );
+    printPDF ( _ ( &quot;Pedidos a proveedores&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_recibo/reciboslist.cpp b/bulmages/bulmafact/plugins/pluginbf_recibo/reciboslist.cpp
index 19bffa0..8fe4cc4 100644
--- a/bulmages/bulmafact/plugins/pluginbf_recibo/reciboslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_recibo/reciboslist.cpp
@@ -213,7 +213,7 @@ void RecibosList::imprimir()
 {
     BL_FUNC_DEBUG
     
-    mui_list-&gt;printPDF ( _ ( &quot;Recibos&quot; ) );
+    printPDF ( _ ( &quot;Recibos&quot; ) );
     
     
 }
diff --git a/bulmages/bulmafact/plugins/pluginbf_socio/sociolist.cpp b/bulmages/bulmafact/plugins/pluginbf_socio/sociolist.cpp
index 1cf732d..0babc0b 100644
--- a/bulmages/bulmafact/plugins/pluginbf_socio/sociolist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_socio/sociolist.cpp
@@ -159,7 +159,7 @@ void SociosList::crear()
 void SociosList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Padres&quot; ) );
+    printPDF ( _ ( &quot;Padres&quot; ) );
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_tutor/tutoreslist.cpp b/bulmages/bulmafact/plugins/pluginbf_tutor/tutoreslist.cpp
index 1814cfc..154101f 100644
--- a/bulmages/bulmafact/plugins/pluginbf_tutor/tutoreslist.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_tutor/tutoreslist.cpp
@@ -148,7 +148,7 @@ void TutoresList::crear()
 void TutoresList::imprimir()
 {
     BL_FUNC_DEBUG
-    mui_list-&gt;printPDF ( _ ( &quot;Padres&quot; ) );
+    printPDF ( _ ( &quot;Padres&quot; ) );
     
 }
 
diff --git a/bulmages/bulmalib/src/blformlist.cpp b/bulmages/bulmalib/src/blformlist.cpp
index 4186b3b..c6a9314 100644
--- a/bulmages/bulmalib/src/blformlist.cpp
+++ b/bulmages/bulmalib/src/blformlist.cpp
@@ -249,13 +249,13 @@ void BlFormList::remove()
 }
 
 
-///
-/**
+/// Metodo que dispara la impresion si no es sobreescrito por las clases derivadas.
+/** Normalmente lanza la impresion del subformulario.
 **/
 void BlFormList::imprimir()
 {
     BL_FUNC_DEBUG
-    m_listado-&gt;printPDF ( &quot;&quot; );
+    printPDF ( &quot;&quot; );
     
 }
 
@@ -425,14 +425,14 @@ void BlFormList::on_mui_actualizar_clicked()
 }
 
 
-///
-/**
+/// Captura del boton de impresion.
+/** Antes de lanzar el metodo imprimir se puede caputurar este que no va derivado en las subclases y solo se ejecuta aqui.
 **/
 void BlFormList::on_mui_imprimir_clicked()
 {
     BL_FUNC_DEBUG
-    imprimir();
     
+    imprimir();
 }
 
 
@@ -507,18 +507,16 @@ void BlFormList::on_mui_list_customContextMenuRequested ( const QPoint &amp;p )
 }
 
 void BlFormList::contextMenuEvent ( QContextMenuEvent * ) {
-  BL_FUNC_DEBUG
-  QMenu *popup = new QMenu ( this );
+    BL_FUNC_DEBUG
+    QMenu *popup = new QMenu ( this );
 
-/// Si estamos en modo experto. Lo primero que hacemos es encabezar el menu con el nombre del objeto para tenerlo bien ubicado.
-if (g_confpr-&gt;value(CONF_MODO_EXPERTO) == &quot;TRUE&quot;) {
-  QAction *nombreobjeto = popup-&gt;addAction( objectName() );
-  nombreobjeto-&gt;setDisabled(TRUE);
-} // end if
+    /// Si estamos en modo experto. Lo primero que hacemos es encabezar el menu con el nombre del objeto para tenerlo bien ubicado.
+    if (g_confpr-&gt;value(CONF_MODO_EXPERTO) == &quot;TRUE&quot;) {
+      QAction *nombreobjeto = popup-&gt;addAction( objectName() );
+      nombreobjeto-&gt;setDisabled(TRUE);
+    } // end if
 
     QAction *opcion = popup-&gt;exec ( QCursor::pos() );
-    
-    
 }
 
 
@@ -780,3 +778,140 @@ const QString BlFormList::nameFileDefaultConfig()
   QString nombre = directorio + &quot;blformlist_&quot; + objectName() + &quot;_cfn.cfn&quot; ;
   return nombre;
 }
+
+
+
+
+
+/// Sustituye valores en el texto pasado como variables por su valor.
+void BlFormList::substrVars (QString &amp;buff )
+{
+
+    int pos = 0;
+    
+    ///\TODO: Este tratamiento esta repetido en BlForm::parseTags y en PedidoProveedorView::imprimir.
+    ///       Se puede simplificar?
+    /// Tratamos la sustitucion de los valores de configuracion.
+    for ( int i = 0; i &lt; 1000; i++ ) {
+        if ( g_confpr-&gt;name( i ) != &quot;&quot; ) {
+            buff.replace ( &quot;[&quot; + g_confpr-&gt;name( i ) + &quot;]&quot;, g_confpr-&gt;value( i ) );
+        } // end if
+    } // end for
+
+    pos =  0;
+
+    QLineEdit * lfiltro = findChild&lt;QLineEdit *&gt;(&quot;m_filtro&quot;);
+    if (lfiltro != 0) {
+        if (lfiltro-&gt;text() != &quot;&quot;) {
+	    buff.replace ( &quot;[m_filtro]&quot;, lfiltro-&gt;text() );
+	} // end if
+    } // end if
+
+    QList&lt;BlComboBox *&gt; l4 = findChildren&lt;BlComboBox *&gt;();
+    QListIterator&lt;BlComboBox *&gt; it4 ( l4 );
+    while ( it4.hasNext() ) {
+	BlComboBox * item = it4.next();
+        buff.replace ( &quot;[&quot;+item-&gt;objectName()+&quot;]&quot;, item-&gt;id() );
+    } // end while
+
+    QList&lt;QCheckBox *&gt; l6 = findChildren&lt;QCheckBox *&gt;();
+    QListIterator&lt;QCheckBox *&gt; it6 ( l6 );
+    while ( it6.hasNext() ) {
+	QCheckBox * item = it6.next();
+	if ( item-&gt;objectName().startsWith ( &quot;mui_&quot; ) &amp;&amp; item-&gt;isChecked()) {
+	    buff.replace ( &quot;[&quot;+item-&gt;objectName()+&quot;]&quot;, &quot;TRUE&quot; );
+	} else {
+	    buff.replace ( &quot;[&quot;+item-&gt;objectName()+&quot;]&quot;, &quot;FALSE&quot; );
+	} // end if
+    } // end while
+
+      QList&lt;BlDateSearch *&gt; l7 = findChildren&lt;BlDateSearch *&gt;();
+      QListIterator&lt;BlDateSearch *&gt; it7 ( l7 );
+      while ( it7.hasNext() ) {
+	    BlDateSearch * item = it7.next();
+	    buff.replace ( &quot;[&quot;+item-&gt;objectName()+&quot;]&quot;, item-&gt;text() );
+      } // end while
+
+    QList&lt;BlSearchWidget *&gt; l9 = findChildren&lt;BlSearchWidget *&gt;();
+    QListIterator&lt;BlSearchWidget *&gt; it9 ( l9 );
+    while ( it9.hasNext() ) {
+	BlSearchWidget * item = it9.next();
+	buff.replace ( &quot;[&quot;+item-&gt;objectName()+&quot;]&quot;, item-&gt;id() );
+    } // end while
+}
+
+
+
+///
+/**
+\param titular
+**/
+void BlFormList::printPDF (  const QString &amp;titular )
+{
+    BL_FUNC_DEBUG
+
+    QString fileName = &quot;listado.rml&quot;;
+
+    /// Si existe un modelo de listado mas preciso se utilizara ese.
+    if (QFile::exists(g_confpr-&gt;value( CONF_DIR_OPENREPORTS )+ &quot;listado_&quot; + m_listado-&gt;tableName() + &quot;.rml&quot;)) {
+	fileName =  &quot;listado_&quot; + m_listado-&gt;tableName() + &quot;.rml&quot;;
+    } // end if
+    
+
+    /// Los listados siempre usan la misma plantilla para imprimir listado.
+    QString archivo = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + fileName;
+    QString archivod = g_confpr-&gt;value( CONF_DIR_USER ) + fileName;
+    QString archivologo = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + &quot;logo.jpg&quot;;
+    QString ownlogo = g_confpr-&gt;value( CONF_DIR_USER ) + &quot;logo.jpg&quot;;
+
+    /// Copiamos el archivo.
+
+    if(!blCopyFile(archivo, archivod)){
+        blMsgError(_(&quot;Error al copiar listado.rml [ BlFormList-&gt;printPDF() ]&quot;));
+    } // end if
+    
+    /// Copiamos el logo.
+    if(!blCopyFile(archivologo, ownlogo)){
+        blMsgError(_(&quot;Error al copiar logo.jpg [ BlFormList-&gt;printPDF() ]&quot;));
+    } // end if
+
+    QFile file;
+    file.setFileName ( archivod );
+    file.open ( QIODevice::ReadOnly );
+
+    QTextStream stream ( &amp;file );
+    QString buff = stream.readAll();
+    file.close();
+    QString fitxersortidatxt;
+
+    fitxersortidatxt = &quot;&lt;blockTable style=\&quot;tabla\&quot; repeatRows=\&quot;1\&quot;&gt;&quot;;
+    fitxersortidatxt += m_listado-&gt;imprimir();
+    fitxersortidatxt += &quot;&lt;/blockTable&gt;&quot;;
+
+    /// Reemplazamos en la impresion el parametro [story] por el resultado de la impresion
+    buff.replace ( &quot;[story]&quot;, fitxersortidatxt );
+    /// La plantilla de listados admite unicamente el parametro titular que es lo que cambia
+    /// en todos los listados
+    buff.replace ( &quot;[titulo]&quot;, titular );
+
+    /// Ofrecer el uso de unas variables con la fecha y hora de impresi&oacute;n (por ejemplo, en el pie)
+    buff.replace ( &quot;[fecha_actual]&quot;, QDate::currentDate().toString ( Qt::DefaultLocaleShortDate ) );
+    buff.replace ( &quot;[hora_actual]&quot;, QTime::currentTime().toString ( &quot;HH:mm&quot; ) );
+
+    /// Parseamos las opciones de filtrado para que puedan ser devueltas.
+    substrVars(buff);
+    
+    if ( file.open ( QIODevice::WriteOnly ) ) {
+        QTextStream stream ( &amp;file );
+        stream &lt;&lt; buff;
+        file.close();
+    } // end if
+    
+    BlForm *ficha = new BlForm ( mainCompany(), 0 );
+    if ( !ficha-&gt;generateRML ( g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + fileName ))
+	return;
+
+    blCreateAndLoadPDF ( fileName.left ( fileName.size() - 4 ));
+}
+
+
diff --git a/bulmages/bulmalib/src/blformlist.h b/bulmages/bulmalib/src/blformlist.h
index 6258154..c1403c0 100644
--- a/bulmages/bulmalib/src/blformlist.h
+++ b/bulmages/bulmalib/src/blformlist.h
@@ -77,7 +77,8 @@ public:
     void guardaFiltrosXML();
     void cargaFiltrosXML();
     virtual const QString generaFiltro();
-
+    void substrVars (QString &amp;buff );
+    void printPDF (  const QString &amp;titular );
 
 public slots:
     virtual void on_mui_list_customContextMenuRequested ( const QPoint &amp; );
diff --git a/bulmages/bulmalib/src/blsubform.cpp b/bulmages/bulmalib/src/blsubform.cpp
index 761bd87..8e5ab31 100644
--- a/bulmages/bulmalib/src/blsubform.cpp
+++ b/bulmages/bulmalib/src/blsubform.cpp
@@ -41,6 +41,8 @@
 #include &quot;bldoublespinbox.h&quot;
 #include &quot;bltexteditdelegate.h&quot;
 
+#include &quot;blform.h&quot;
+
 // Necesito exportar algunos datos.
 QModelIndex BL_EXPORT g_index;
 QWidget BL_EXPORT *g_editor;
@@ -2979,15 +2981,15 @@ void BlSubForm::on_mui_paganterior_clicked()
 /**
 \param titular
 **/
-void BlSubForm::printPDF ( const QString &amp;titular )
+void BlSubForm::printPDF (  const QString &amp;titular )
 {
     BL_FUNC_DEBUG
 
+    QString fileName = &quot;listado.rml&quot;;
+
     /// Los listados siempre usan la misma plantilla para imprimir listado.
-    QString archivo = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + &quot;listado.rml&quot;;
-//    QString archivo = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + titular + &quot;.rml&quot;;
-    QString archivod = g_confpr-&gt;value( CONF_DIR_USER ) + &quot;listado.rml&quot;;
-//    QString archivod = g_confpr-&gt;value( CONF_DIR_USER ) + titular + &quot;.rml&quot;;
+    QString archivo = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + fileName;
+    QString archivod = g_confpr-&gt;value( CONF_DIR_USER ) + fileName;
     QString archivologo = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + &quot;logo.jpg&quot;;
     QString ownlogo = g_confpr-&gt;value( CONF_DIR_USER ) + &quot;logo.jpg&quot;;
 
@@ -3026,17 +3028,20 @@ void BlSubForm::printPDF ( const QString &amp;titular )
     buff.replace ( &quot;[hora_actual]&quot;, QTime::currentTime().toString ( &quot;HH:mm&quot; ) );
 
     if ( file.open ( QIODevice::WriteOnly ) ) {
-
         QTextStream stream ( &amp;file );
         stream &lt;&lt; buff;
-
         file.close();
     } // end if
-
-    blCreateAndLoadPDF ( &quot;listado&quot; );
     
+    BlForm *ficha = new BlForm ( mainCompany(), 0 );
+    if ( !ficha-&gt;generateRML ( g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + fileName ))
+	return;
+
+    blCreateAndLoadPDF ( fileName.left ( fileName.size() - 4 ));
 }
 
+
+
 void BlSubForm::preparaMenu() {
     BL_FUNC_DEBUG
 
diff --git a/bulmages/bulmalib/src/blsubform.h b/bulmages/bulmalib/src/blsubform.h
index da76c97..34ccc34 100644
--- a/bulmages/bulmalib/src/blsubform.h
+++ b/bulmages/bulmalib/src/blsubform.h
@@ -353,7 +353,7 @@ public:
     QString likeFilterSQL(const QString &amp;text);
 
 public slots:
-    virtual void printPDF ( const QString &amp; );
+    virtual void printPDF (const QString &amp; );
     virtual int remove();
     void columnMovedByUser(int column, int oldIndex, int newIndex);
     virtual void on_mui_list_cellRePosition ( int, int );


<A HREF="https://gitorious.org/bulmages">https://gitorious.org/bulmages</A>
------------------------------------------------------------------------

You are receiving this email because you have chosen to be notified by
email whenever this favorite has new activity. You can manage your
favorite subscriptions at <A HREF="https://gitorious.org/favorites">https://gitorious.org/favorites</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Mensaje anterior: <A HREF="007164.html">[BulmaGés] [Gitorious] Activity: tborras pushed 1	commits to listado...
</A></li>
	<LI>Próximo mensaje: <A HREF="007166.html">[BulmaGés] [Gitorious] Activity: tborras pushed 2	commits to master...
</A></li>
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#7165">[ fecha ]</a>
              <a href="thread.html#7165">[ hilo ]</a>
              <a href="subject.html#7165">[ asunto ]</a>
              <a href="author.html#7165">[ autor ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bulmages-main">Más información sobre la lista de distribución Bulmages-main </a><br>
</body></html>
