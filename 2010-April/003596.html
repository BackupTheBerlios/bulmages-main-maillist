<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [BulmaGés]Disponible la versión 1.0 de NxSpooler; impresión con FreeNX si se trabaja remotamente con  =?iso-8859-1?q?_Bulmag=E9s?=, por ejemplo.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bulmages-main/2010-April/index.html" >
   <LINK REL="made" HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3FDisponible_la_versi%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3F%3DF3n_1%3D2E0_de_NxSpooler%3D3B_impresi%3DF3n_con_FreeNX_si_se_tr%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fabaja_remotamente_con__%3D3D%3D3Fiso-8859-1%3D3Fq%3D3F%3D5FBulmag%3D3D%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3FE9s%3D3F%3D3D%3D2C_por_ejemplo%3D2E%3F%3D&In-Reply-To=%3C201004091018.08217.asmond%40orange.es%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="003589.html">
   <LINK REL="Next"  HREF="003590.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[BulmaGés]Disponible la versión 1.0 de NxSpooler; impresión con FreeNX si se trabaja remotamente con  =?iso-8859-1?q?_Bulmag=E9s?=, por ejemplo. </H1>
    <B>Toni Asensi Esteve</B> 
    <A HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3FDisponible_la_versi%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3F%3DF3n_1%3D2E0_de_NxSpooler%3D3B_impresi%3DF3n_con_FreeNX_si_se_tr%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fabaja_remotamente_con__%3D3D%3D3Fiso-8859-1%3D3Fq%3D3F%3D5FBulmag%3D3D%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3FE9s%3D3F%3D3D%3D2C_por_ejemplo%3D2E%3F%3D&In-Reply-To=%3C201004091018.08217.asmond%40orange.es%3E"
       TITLE="[BulmaGés]Disponible la versión 1.0 de NxSpooler; impresión con FreeNX si se trabaja remotamente con  =?iso-8859-1?q?_Bulmag=E9s?=, por ejemplo.">asmond en orange.es
       </A><BR>
    <I>Vie Abr  9 10:18:08 CEST 2010</I>
    <P><UL>
        <LI>Mensaje anterior: <A HREF="003589.html">[BulmaGés]Disponible la versión 1.0 de NxSpooler; impresión con FreeNX si se trabaja remotamente con  =?iso-8859-1?q?_Bulmag=E9s?=, por ejemplo.
</A></li>
        <LI>Próximo mensaje: <A HREF="003590.html">[BulmaGés] r3814 - trunk/bulmages/bulmalib/src
</A></li>
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#3596">[ fecha ]</a>
              <a href="thread.html#3596">[ hilo ]</a>
              <a href="subject.html#3596">[ asunto ]</a>
              <a href="author.html#3596">[ autor ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hola, Tomeu

&gt;<i>Esto pinta genial. Enhorabuena!!!!.
</I>Gracias :-)


&gt;&gt;<i>             - Se detecta una nueva extensión: .nxspooler-open
</I>&gt;&gt;<i>               Cuando NxSpooler encuentra un archivo de texto con esta
</I>&gt;&gt;<i> extensión, trata de abrir la carpeta mencionada en dicho archivo. Esto se
</I>&gt;&gt;<i>  hace así para que Bulmagés en el servidor pueda crear archivos
</I>&gt;&gt;<i>  .nxspooler-open y por tanto, para que programadamente Bulmagés pueda
</I>&gt;&gt;<i> hacer que en el ordenador del usuario se abran carpetas compartidas del
</I>&gt;&gt;<i> servidor (por ejemplo: la carpeta de archivos del proyecto 33, para que el
</I>&gt;&gt;<i> usuario pueda añadir archivos allí, abrirlos, etc).
</I>&gt;<i>
</I>&gt;<i>Si lo he entendido bien esta funcionalidad lo que implementa es un &quot;archivo
</I>&gt;<i>documental&quot; basandose en el nxspooler y asignando carpetas del servidor a
</I>&gt;<i> los diferentes proyectos.
</I>Sí, en el servidor hay una serie de carpetas, cada una refiriéndose a un 
proyecto determinado. En nuestra versión de Bulmafact el usuario accede a la 
&quot;ficha&quot; del proyecto que busca y pulsando en un botón consigue abrir la carpeta 
de dicho proyecto, pero en el ordenador del usuario. Allí ya coge archivos, 
deja otros, etc.


&gt;<i>Por lo que deduzco que teneis programado algún cambio en BulmaFact que
</I>&gt;<i> genera (o hace aparecer en el menu contextual de las fichas) los archvos
</I>&gt;<i> nxspooler- open. ¿Podriais dejarnos mirar un poco como lo habeis montado o
</I>&gt;<i> el código para incorporarlo al proyecto en forma de plugin?
</I>Sí, para comenzar te pasamos un método &quot;abrir_ruta_con_NxSpooler&quot; de TSystem, 
accesible por cualquier parte del código fuente, que consigue que se haga 
dicha &quot;comunicación&quot; de Bulmafact con NxSpooler:
_____________________________________________________________________

/*
En el constructor de TSystem...
   // Inicializamos el generador de números aleatorios
   qsrand( time( NULL ) )  ;
*/

//! Incitar a NxSpooler a abrir la ruta indicada como parámetro
/*!
   \param ruta Ruta (local) a abrir
   Creamos un fichero con la ruta de la carpeta.
   El NxSpooler del cliente abrirá la carpeta y borrará el fichero.
*/
void TSystem::abrir_ruta_con_NxSpooler( QDir ruta )
{
   _depura( &quot;TSystem::abrir_ruta_con_NxSpooler&quot;, 0 ) ;

   // Convertir la ruta local en una ruta remota al estilo Windows: 
\\servidor\smb\...
   QString ruta_win;

   ruta_win = conv_ruta_a_remota_win( ruta ) ;

   // Nombre del fichero de comunicación con NxSpooler (sólo contiene una ruta)
   QString nom_fic = QString( &quot;%1%2-%3.nxspooler-open&quot; )
                     .arg(g_confpr-&gt;valor( CONF_DIR_USER ))
                     .arg( qrand() )
                     .arg( qrand() );

   // Generar el fichero
   QFile fic_con_ruta( nom_fic ) ;
   fic_con_ruta.open( QIODevice::WriteOnly ) ;
   fic_con_ruta.write( ruta_win.toLatin1()  )  ;
   fic_con_ruta.close()  ;

   _depura( &quot;END TSystem::abrir_ruta_con_NxSpooler&quot;, 0 ) ;
}


//! Convierte una ruta Linux en una ruta remota Windows
/*!
  \param ruta Ruta a convertir
  \return cadena con la ruta en formato Windows accediendo remotamente al 
servidor Samba
  Este método sirve para rutas locales Unix: &quot;/A/B/C&quot;.
  La ruta Windows resultante será del tipo &quot;\\servidor\A\B\C&quot;
*/
QString TSystem::conv_ruta_a_remota_win( QDir ruta )
{
   _depura( &quot;TSystem::conv_ruta_local_a_remota_win&quot;, 0, ruta.absolutePath()  )  
;

   QString ruta_win = ruta.absolutePath()  ;

   QRegExp cad_al_comienzo( &quot;^&quot; + m_ruta_servidor ) ;

   ruta_win.replace( cad_al_comienzo, &quot;\\\\&quot; + m_nombre_servidor + &quot;\\&quot; ) ;
   ruta_win.replace( &quot;/&quot;, &quot;\\&quot; ) ;

   _depura( &quot;END TSystem::conv_ruta_local_a_remota_win&quot;, 0 ) ;

   return ruta_win;
}
_____________________________________________________________________

Si te hace falta más, puedes pregúntanoslo. 

Un saludo:
-- 
Aron Galdón Ginés y Toni Asensi Esteve.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Mensaje anterior: <A HREF="003589.html">[BulmaGés]Disponible la versión 1.0 de NxSpooler; impresión con FreeNX si se trabaja remotamente con  =?iso-8859-1?q?_Bulmag=E9s?=, por ejemplo.
</A></li>
	<LI>Próximo mensaje: <A HREF="003590.html">[BulmaGés] r3814 - trunk/bulmages/bulmalib/src
</A></li>
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#3596">[ fecha ]</a>
              <a href="thread.html#3596">[ hilo ]</a>
              <a href="subject.html#3596">[ asunto ]</a>
              <a href="author.html#3596">[ autor ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bulmages-main">Más información sobre la lista de distribución Bulmages-main </a><br>
</body></html>
