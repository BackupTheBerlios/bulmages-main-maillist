<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [BulmaGés] [Gitorious] Activity: tborras pushed 1	commits to master...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bulmages-main/2013-August/index.html" >
   <LINK REL="made" HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%20%5BGitorious%5D%20Activity%3A%20tborras%20pushed%201%0A%09commits%20to%20master...&In-Reply-To=%3C20130812112912.02F40427%40ratt.gitorious.c.bitbit.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="007699.html">
   <LINK REL="Next"  HREF="007701.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[BulmaGés] [Gitorious] Activity: tborras pushed 1	commits to master... </H1>
    <B>Gitorious</B> 
    <A HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%20%5BGitorious%5D%20Activity%3A%20tborras%20pushed%201%0A%09commits%20to%20master...&In-Reply-To=%3C20130812112912.02F40427%40ratt.gitorious.c.bitbit.net%3E"
       TITLE="[BulmaGés] [Gitorious] Activity: tborras pushed 1	commits to master...">no-reply en gitorious.org
       </A><BR>
    <I>Lun Ago 12 13:29:11 CEST 2013</I>
    <P><UL>
        <LI>Mensaje anterior: <A HREF="007699.html">[BulmaGés] [Gitorious] Activity: tborras pushed 1	commits to master...
</A></li>
        <LI>Próximo mensaje: <A HREF="007701.html">[BulmaGés] [Gitorious] Activity: tborras pushed 1	commits to master...
</A></li>
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#7700">[ fecha ]</a>
              <a href="thread.html#7700">[ hilo ]</a>
              <a href="subject.html#7700">[ asunto ]</a>
              <a href="author.html#7700">[ autor ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Hello bulmagesmailing,

One of your favorites has a new activity:
------------------------------------------------------------------------
tborras pushed 1 commits to master
master changed from 1ef2be0 to b4295d9

View the commit log at <A HREF="https://gitorious.org/bulmages/bulmages/commits">https://gitorious.org/bulmages/bulmages/commits</A>

View the diff online: <A HREF="https://gitorious.org/bulmages/bulmages/commit/1ef2be0f5a1dff0f3b56e8ede648c270086d012e/diffs/b4295d932242deb4cb88d9817d6e23b27afeb1fd">https://gitorious.org/bulmages/bulmages/commit/1ef2be0f5a1dff0f3b56e8ede648c270086d012e/diffs/b4295d932242deb4cb88d9817d6e23b27afeb1fd</A>

Diff: 

commit b4295d932242deb4cb88d9817d6e23b27afeb1fd
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Mon Aug 12 13:25:32 2013 +0200

    Creo la llamada a plugins open que permite realizar la apertura de una ficha pasando la tabla y el identificador.
    Es una llamada generica que se puede realizar desde cualquier parte (Evitando dependencias).
    Cambio todas las llamadas del pluginbf_corrector y de pluginbl_alarm para que usen esta llamada y dejen de compilarse con
    todas las dependencias.
    También creo una entrada para el corrector donde cada plugin agrega sus propias comprobaciones al corrector. De esta forma
    actuan como plugins descentralizados.

diff --git a/bulmages/bulmafact/plugins/pluginbf_cliente/pluginbf_cliente.cpp b/bulmages/bulmafact/plugins/pluginbf_cliente/pluginbf_cliente.cpp
index 48ec1e3..974916b 100644
--- a/bulmages/bulmafact/plugins/pluginbf_cliente/pluginbf_cliente.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_cliente/pluginbf_cliente.cpp
@@ -170,16 +170,37 @@ int Plugin_open(BfCompany * comp) {
 
 int CorrectorWidget_corregir(BlWidget *corrector) {
    BL_FUNC_DEBUG
-   QString query = &quot;SELECT * FROM cliente&quot;;
-   BlDbRecordSet *cur = corrector-&gt;mainCompany()-&gt;loadQuery ( query );
+   
+    /// En Windows no se soportan las rutas relativas para el HTML
+#ifdef Q_OS_WIN32
+	    QString cupath = QDir::currentPath().replace(&quot;program&quot;, &quot;&quot;).replace(&quot;.bulmages&quot;,&quot;&quot;);
+	    QString src= g_confpr-&gt;value( CONF_PROGDATA).replace(&quot;..&quot;,cupath);
+#else
+	    QString src = g_confpr-&gt;value( CONF_PROGDATA);
+#endif
+	  
+    QString query = &quot;SELECT * FROM cliente WHERE coalesce(length(cifcliente),0) &lt; 6&quot;;
+    BlDbRecordSet *cur = corrector-&gt;mainCompany() -&gt;loadQuery ( query );
+    while ( ! cur-&gt;eof() ) {
+
+           QString cadena = &quot;&lt;HR&gt;&lt;table&gt;&lt;tr&gt;&lt;td colspan=2&gt;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El cliente &lt;B&gt;&quot; + cur-&gt;value( &quot;nomcliente&quot; ) + &quot;&lt;/B&gt; no tiene CIF.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;a name='masinfo' href='abredoc?op=masinfo&amp;tabla=cliente&amp;id=&quot; + cur-&gt;value( &quot;idcliente&quot; ) + &quot;'&gt;+info&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;
+	   *(QString *) g_plugParams += cadena;
+	
+        cur-&gt;nextRecord();
+    } // end while
+    delete cur;
+	    
+	    
+    query = &quot;SELECT * FROM cliente&quot;;
+   cur = corrector-&gt;mainCompany()-&gt;loadQuery ( query );
    while ( ! cur-&gt;eof() ) {
        QChar digito;
        if ( ! blValidateSpainCIFNIFCode ( cur-&gt;value( &quot;cifcliente&quot; ), digito ) ) {
-           QString cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El cliente ,&quot; + cur-&gt;value( &quot;cifcliente&quot; ) + &quot; &lt;B&gt;&quot; + cur-&gt;value( &quot;nomcliente&quot; ) + &quot;&lt;/B&gt; tiene CIF invalido. Digito de Control:&quot; + QString ( digito );
-//            agregarError ( cadena, &quot;cliente&quot;, cur-&gt;value( &quot;idcliente&quot; ) );
+           QString cadena = &quot;&lt;HR&gt;&lt;table&gt;&lt;tr&gt;&lt;td colspan=2&gt;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El cliente ,&quot; + cur-&gt;value( &quot;cifcliente&quot; ) + &quot; &lt;B&gt;&quot; + cur-&gt;value( &quot;nomcliente&quot; ) + &quot;&lt;/B&gt; tiene CIF invalido. Digito de Control:&quot; + QString ( digito ) + &quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;a name='masinfo' href='abredoc?op=masinfo&amp;tabla=cliente&amp;id=&quot; + cur-&gt;value( &quot;idcliente&quot; ) + &quot;'&gt;+info&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;
 	   *(QString *) g_plugParams += cadena;
        } // end if
        cur-&gt;nextRecord();
    } // end while
    delete cur;
+   return 0;
 }
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/pluginbf_clientefactura.cpp b/bulmages/bulmafact/plugins/pluginbf_clientefactura/pluginbf_clientefactura.cpp
index 1ac8c0a..339dcb3 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/pluginbf_clientefactura.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/pluginbf_clientefactura.cpp
@@ -260,5 +260,27 @@ int Plugin_open(BfCompany * comp) {
 }
 
 
+int CorrectorWidget_corregir(BlWidget *corrector) {
+   BL_FUNC_DEBUG
+   
+    /// En Windows no se soportan las rutas relativas para el HTML
+#ifdef Q_OS_WIN32
+	    QString cupath = QDir::currentPath().replace(&quot;program&quot;, &quot;&quot;).replace(&quot;.bulmages&quot;,&quot;&quot;);
+	    QString src= g_confpr-&gt;value( CONF_PROGDATA).replace(&quot;..&quot;,cupath);
+#else
+	    QString src = g_confpr-&gt;value( CONF_PROGDATA);
+#endif
+	  
+    QString query = &quot;SELECT * from factura WHERE reffactura NOT IN (SELECT refalbaran FROM albaran)&quot;;
+    BlDbRecordSet *cur = corrector-&gt;mainCompany() -&gt;loadQuery ( query );
+    while ( ! cur-&gt;eof() ) {
+           QString cadena = &quot;&lt;HR&gt;&lt;table&gt;&lt;tr&gt;&lt;td colspan=2&gt;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;La factura num. &lt;B&gt;&quot; + cur-&gt;value( &quot;numfactura&quot; ) + &quot;&lt;/B&gt; No esta avalada por ningun albaran, esto puede ser causa de descontrol en el stock.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;a name='masinfo' href='abredoc?op=masinfo&amp;tabla=factura&amp;id=&quot; + cur-&gt;value( &quot;idfactura&quot; ) + &quot;'&gt;+info&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;
+	   *(QString *) g_plugParams += cadena;
+        cur-&gt;nextRecord();
+    } // end while
+    delete cur;
+   return 0;
+}
+
 
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/pluginbf_clientefactura.h b/bulmages/bulmafact/plugins/pluginbf_clientefactura/pluginbf_clientefactura.h
index 7d55aff..540ae94 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/pluginbf_clientefactura.h
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/pluginbf_clientefactura.h
@@ -45,4 +45,6 @@ extern &quot;C&quot; PLUGINBF_CLIENTEFACTURA_EXPORT int PedidoClienteView_PedidoClienteVie
 extern &quot;C&quot; PLUGINBF_CLIENTEFACTURA_EXPORT int PresupuestoView_PresupuestoView ( PresupuestoView * );
 extern &quot;C&quot; PLUGINBF_CLIENTEFACTURA_EXPORT int BlAction_actionTriggered(BlAction *);
 extern &quot;C&quot; PLUGINBF_CLIENTEFACTURA_EXPORT int Plugin_open(BfCompany *);
+extern &quot;C&quot; PLUGINBF_CLIENTEFACTURA_EXPORT int CorrectorWidget_corregir(BlWidget *);
+
 #endif
diff --git a/bulmages/bulmafact/plugins/pluginbf_corrector/CMakeLists.txt b/bulmages/bulmafact/plugins/pluginbf_corrector/CMakeLists.txt
index de7a0e1..dc1a1ab 100644
--- a/bulmages/bulmafact/plugins/pluginbf_corrector/CMakeLists.txt
+++ b/bulmages/bulmafact/plugins/pluginbf_corrector/CMakeLists.txt
@@ -80,7 +80,14 @@ set_target_properties( ${plugin} PROPERTIES
   SOVERSION &quot;${BULMAGES_VERSION_MAJOR}.${BULMAGES_VERSION_MINOR}&quot;
   VERSION &quot;${BULMAGES_VERSION}&quot;)
 
-target_link_libraries(${plugin} libbulmafact bulmalib ${QT_LIBRARIES} ${PGSQL_LIBRARIES})
+if(WIN32)
+target_link_libraries(${plugin} bulmalib libbulmafact ${QT_LIBRARIES} ${PGSQL_LIBRARIES})
+qt5_use_modules(${plugin} UiTools Xml Core Widgets Script Network WebKit WebKitWidgets)
+else(WIN32)
+target_link_libraries(${plugin} bulmalib libbulmafact)
+qt5_use_modules(${plugin} Widgets WebKit WebKitWidgets)
+endif(WIN32)
+
 install_targets(/lib/bulmafact/plugins ${plugin})
 
 configure_file( ${CMAKE_CURRENT_SOURCE_DIR}/README.es ${CMAKE_CURRENT_BINARY_DIR}/README.es @ONLY)
diff --git a/bulmages/bulmafact/plugins/pluginbf_corrector/correctorbase.ui b/bulmages/bulmafact/plugins/pluginbf_corrector/correctorbase.ui
index e152064..3e5b16e 100644
--- a/bulmages/bulmafact/plugins/pluginbf_corrector/correctorbase.ui
+++ b/bulmages/bulmafact/plugins/pluginbf_corrector/correctorbase.ui
@@ -65,6 +65,9 @@
      &lt;/item&gt;
      &lt;item&gt;
       &lt;widget class=&quot;QToolButton&quot; name=&quot;mui_configurar&quot;&gt;
+       &lt;property name=&quot;enabled&quot;&gt;
+        &lt;bool&gt;false&lt;/bool&gt;
+       &lt;/property&gt;
        &lt;property name=&quot;minimumSize&quot;&gt;
         &lt;size&gt;
          &lt;width&gt;32&lt;/width&gt;
@@ -117,10 +120,17 @@
     &lt;/layout&gt;
    &lt;/item&gt;
    &lt;item&gt;
-    &lt;widget class=&quot;QTextBrowser&quot; name=&quot;mui_browser&quot;/&gt;
+    &lt;widget class=&quot;QWebView&quot; name=&quot;mui_browser&quot; native=&quot;true&quot;/&gt;
    &lt;/item&gt;
   &lt;/layout&gt;
  &lt;/widget&gt;
+ &lt;customwidgets&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;QWebView&lt;/class&gt;
+   &lt;extends&gt;QWidget&lt;/extends&gt;
+   &lt;header&gt;qwebview.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+ &lt;/customwidgets&gt;
  &lt;resources&gt;
   &lt;include location=&quot;../../../bulmages.qrc&quot;/&gt;
  &lt;/resources&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_corrector/correctorwidget.cpp b/bulmages/bulmafact/plugins/pluginbf_corrector/correctorwidget.cpp
index f4dd5f3..81c1f9c 100644
--- a/bulmages/bulmafact/plugins/pluginbf_corrector/correctorwidget.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_corrector/correctorwidget.cpp
@@ -18,6 +18,10 @@
  *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
  ***************************************************************************/
 
+#include &lt;QtWebKitWidgets/QWebView&gt;
+#include &lt;QtWebKitWidgets/QWebPage&gt;
+#include &lt;QtWebKitWidgets/QWebFrame&gt;
+
 #include &quot;correctorwidget.h&quot;
 #include &quot;confreglasview.h&quot;
 #include &quot;clienteview.h&quot;
@@ -36,8 +40,10 @@ correctorwidget::correctorwidget ( QWidget* parent, Qt::WindowFlags fl )
 {
     BL_FUNC_DEBUG
     setupUi ( this );
-    QObject::connect ( mui_browser, SIGNAL ( anchorClicked ( const QUrl ) ), this, SLOT ( alink ( const QUrl ) ) );
-    
+
+    QObject::connect ( mui_browser, SIGNAL ( linkClicked ( const QUrl ) ), this, SLOT ( alink ( const QUrl ) ) );
+        
+    mui_browser-&gt;page()-&gt;setLinkDelegationPolicy ( QWebPage::DelegateAllLinks );
 }
 
 
@@ -70,72 +76,28 @@ void correctorwidget::on_mui_configurar_clicked()
     empresa y sacar la ventana de resultados. */
 /**
 **/
-void correctorwidget::on_mui_corregir_clicked()
+void correctorwidget::on_mui_corregir_released()
 {
     BL_FUNC_DEBUG
     textBrowser = &quot;&lt;HTML&gt;&lt;BODY BGCOLOR='#FFFFFF'&gt;&quot;;
     QString cadena;
-
-    QString query = &quot;SELECT * from factura WHERE reffactura NOT IN (SELECT refalbaran FROM albaran)&quot;;
-    BlDbRecordSet *cur = mainCompany() -&gt;loadQuery ( query );
-    while ( ! cur-&gt;eof() ) {
-        cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;La factura num. &lt;B&gt;&quot; + cur-&gt;value( &quot;numfactura&quot; ) + &quot;&lt;/B&gt; No esta avalada por ningun albaran, esto puede ser causa de descontrol en el stock.&quot;;
-        agregarError ( cadena, &quot;factura&quot;, cur-&gt;value( &quot;idfactura&quot; ) );
-        cur-&gt;nextRecord();
-    } // end while
-    delete cur;
-
-    query = &quot;SELECT * from cliente WHERE length(cifcliente) &lt; 6&quot;;
-    cur = mainCompany() -&gt;loadQuery ( query );
-    while ( ! cur-&gt;eof() ) {
-        cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El cliente &lt;B&gt;&quot; + cur-&gt;value( &quot;nomcliente&quot; ) + &quot;&lt;/B&gt; no tiene CIF.&quot;;
-        agregarError ( cadena, &quot;cliente&quot;,  cur-&gt;value( &quot;idcliente&quot; ) );
-        cur-&gt;nextRecord();
-    } // end while
-    delete cur;
-
-    query = &quot;SELECT * from proveedor WHERE length(cifproveedor) &lt; 6&quot;;
-    cur = mainCompany() -&gt;loadQuery ( query );
-    while ( ! cur-&gt;eof() ) {
-        cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El proveedor &lt;B&gt;&quot; + cur-&gt;value( &quot;nomproveedor&quot; ) + &quot;&lt;/B&gt; no tiene CIF.&quot;;
-        agregarError ( cadena, &quot;proveedor&quot;,  cur-&gt;value( &quot;idproveedor&quot; ) );
-        cur-&gt;nextRecord();
-    } // end while
-    delete cur;
-
-
-    query = &quot;SELECT * FROM cliente&quot;;
-    cur = mainCompany()-&gt;loadQuery ( query );
-    while ( ! cur-&gt;eof() ) {
-        QChar digito;
-        if ( ! blValidateSpainCIFNIFCode ( cur-&gt;value( &quot;cifcliente&quot; ), digito ) ) {
-            cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El cliente ,&quot; + cur-&gt;value( &quot;cifcliente&quot; ) + &quot; &lt;B&gt;&quot; + cur-&gt;value( &quot;nomcliente&quot; ) + &quot;&lt;/B&gt; tiene CIF invalido. Digito de Control:&quot; + QString ( digito );
-            agregarError ( cadena, &quot;cliente&quot;, cur-&gt;value( &quot;idcliente&quot; ) );
-        } // end if
-        cur-&gt;nextRecord();
-    } // end while
-    delete cur;
-
-    query = &quot;SELECT * FROM proveedor&quot;;
-    cur = mainCompany()-&gt;loadQuery ( query );
-    while ( ! cur-&gt;eof() ) {
-        QChar digito;
-        if ( ! blValidateSpainCIFNIFCode ( cur-&gt;value( &quot;cifproveedor&quot; ), digito ) ) {
-            cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El proveedor &lt;B&gt;&quot; + cur-&gt;value( &quot;nomproveedor&quot; ) + &quot;,&quot; + cur-&gt;value( &quot;cifproveedor&quot; ) + &quot;&lt;/B&gt; tiene CIF invalido. Digito de Control: &quot; + QString ( digito );
-            agregarError ( cadena, &quot;proveedor&quot;,  cur-&gt;value( &quot;idproveedor&quot; ) );
-        } // end if
-        cur-&gt;nextRecord();
-    } // end while
-    delete cur;
-
-
     
+    
+    /// En Windows no se soportan las rutas relativas para el HTML
+#ifdef Q_OS_WIN32
+	    QString cupath = QDir::currentPath().replace(&quot;program&quot;, &quot;&quot;).replace(&quot;.bulmages&quot;,&quot;&quot;);
+	    QString src= g_confpr-&gt;value( CONF_PROGDATA).replace(&quot;..&quot;,cupath);
+#else
+	    QString src = g_confpr-&gt;value( CONF_PROGDATA);
+#endif
+      
     /// Calculo de asientos abiertos.
+    QString query;
     query.sprintf ( &quot;SELECT *, asiento.idasiento AS idas FROM asiento LEFT JOIN (SELECT count(idborrador) AS numborr, idasiento FROM borrador GROUP BY idasiento) AS borr ON borr.idasiento = asiento.idasiento LEFT JOIN (SELECT count(idapunte) AS numap, idasiento FROM apunte GROUP BY idasiento) AS apunt ON apunt.idasiento = asiento.idasiento WHERE apunt.numap = 0 OR numap ISNULL&quot; );
-    cur = mainCompany()-&gt;loadQuery ( query );
+    BlDbRecordSet *cur = mainCompany()-&gt;loadQuery ( query );
     while ( !cur-&gt;eof() ) {
         QString cadena;
-        cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El asiento num. &lt;B&gt;&quot; + cur-&gt;value( &quot;ordenasiento&quot; ) + &quot;&lt;/B&gt; con fecha &lt;B&gt;&quot; + cur-&gt;value( &quot;fecha&quot; ) + &quot;&lt;/B&gt; esta abierto, esto causa que el asiento no modifique el estado de las cuentas.&quot;;
+        cadena = &quot;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El asiento num. &lt;B&gt;&quot; + cur-&gt;value( &quot;ordenasiento&quot; ) + &quot;&lt;/B&gt; con fecha &lt;B&gt;&quot; + cur-&gt;value( &quot;fecha&quot; ) + &quot;&lt;/B&gt; esta abierto, esto causa que el asiento no modifique el estado de las cuentas.&quot;;
         agregarError ( cadena, &quot;asiento&quot;,  cur-&gt;value( &quot;idas&quot; ) );
         cur-&gt;nextRecord();
     } // end while
@@ -147,7 +109,7 @@ void correctorwidget::on_mui_corregir_clicked()
     cur = mainCompany()-&gt;loadQuery ( query );
     while ( !cur-&gt;eof() ) {
         QString cadena;
-        cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_critical.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Critial Error:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El asiento num. &lt;B&gt;&quot; + cur-&gt;value( &quot;ordenasiento&quot; ) + &quot;&lt;/B&gt; tiene un apunte con la cuenta &lt;B&gt;&quot; + cur-&gt;value( &quot;codigo&quot; ) + &quot;&lt;/B&gt; no hija..&quot;;
+        cadena = &quot;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_critical.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Critial Error:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El asiento num. &lt;B&gt;&quot; + cur-&gt;value( &quot;ordenasiento&quot; ) + &quot;&lt;/B&gt; tiene un apunte con la cuenta &lt;B&gt;&quot; + cur-&gt;value( &quot;codigo&quot; ) + &quot;&lt;/B&gt; no hija..&quot;;
         agregarError ( cadena, &quot;asiento&quot;,  cur-&gt;value( &quot;idasiento&quot; ) );
         cur-&gt;nextRecord();
     } // end while
@@ -172,7 +134,7 @@ void correctorwidget::on_mui_corregir_clicked()
         net = cur-&gt;value( &quot;netos&quot; ).toFloat();
         if ( abs( act + gas + pas + net + ing ) &gt; 0.01 ) {
             QString cadena;
-            cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_critical.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Error critico:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El asiento num. &lt;B&gt;&quot; + cur-&gt;value( &quot;ordenasiento&quot; ) + &quot;&lt;/B&gt; no cumple la ecuacion fundamental.&quot; + QString::number ( act ) + &quot; + &quot; + QString::number ( gas ) + &quot; = &quot; + QString::number ( pas ) + &quot; + &quot; + QString::number ( net ) + &quot; + &quot; + QString::number ( ing );
+            cadena = &quot;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_critical.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Error critico:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El asiento num. &lt;B&gt;&quot; + cur-&gt;value( &quot;ordenasiento&quot; ) + &quot;&lt;/B&gt; no cumple la ecuacion fundamental.&quot; + QString::number ( act ) + &quot; + &quot; + QString::number ( gas ) + &quot; = &quot; + QString::number ( pas ) + &quot; + &quot; + QString::number ( net ) + &quot; + &quot; + QString::number ( ing );
             agregarError ( cadena, &quot;asiento&quot;,  cur-&gt;value( &quot;idasiento&quot; ) );
         } // end if
         cur-&gt;nextRecord();
@@ -186,7 +148,7 @@ void correctorwidget::on_mui_corregir_clicked()
     cur = mainCompany()-&gt;loadQuery ( query );
     while ( !cur-&gt;eof() ) {
         QString cadena;
-        cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El asiento num. &lt;B&gt;&quot; + cur-&gt;value( &quot;ordenasiento&quot; ) + &quot;&lt;/B&gt; tiene una insercion en el debe de la cuenta &lt;B&gt;&quot; + cur-&gt;value( &quot;codigo&quot; ) + &quot;&lt;/B&gt; que no permite inserciones en el debe de dicha cuenta.&quot;;
+        cadena = &quot;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El asiento num. &lt;B&gt;&quot; + cur-&gt;value( &quot;ordenasiento&quot; ) + &quot;&lt;/B&gt; tiene una insercion en el debe de la cuenta &lt;B&gt;&quot; + cur-&gt;value( &quot;codigo&quot; ) + &quot;&lt;/B&gt; que no permite inserciones en el debe de dicha cuenta.&quot;;
         agregarError ( cadena, &quot;asiento&quot;,  cur-&gt;value( &quot;idasiento&quot; ) );
         cur-&gt;nextRecord();
     } // end while
@@ -198,7 +160,7 @@ void correctorwidget::on_mui_corregir_clicked()
     cur = mainCompany()-&gt;loadQuery ( query );
     while ( !cur-&gt;eof() ) {
         QString cadena;
-        cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El asiento num. &lt;B&gt;&quot; + cur-&gt;value( &quot;ordenasiento&quot; ) + &quot;&lt;/B&gt; tiene una insercion en el haber de la cuenta &lt;B&gt;&quot; + cur-&gt;value( &quot;codigo&quot; ) + &quot;&lt;/B&gt; que no permite inserciones en el haber de dicha cuenta.&quot;;
+        cadena = &quot;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El asiento num. &lt;B&gt;&quot; + cur-&gt;value( &quot;ordenasiento&quot; ) + &quot;&lt;/B&gt; tiene una insercion en el haber de la cuenta &lt;B&gt;&quot; + cur-&gt;value( &quot;codigo&quot; ) + &quot;&lt;/B&gt; que no permite inserciones en el haber de dicha cuenta.&quot;;
         agregarError ( cadena, &quot;asiento&quot;, cur-&gt;value( &quot;idasiento&quot; ) );
         cur-&gt;nextRecord();
     } // end while
@@ -210,7 +172,7 @@ void correctorwidget::on_mui_corregir_clicked()
     cur = mainCompany()-&gt;loadQuery ( query );
     while ( !cur-&gt;eof() ) {
         QString cadena;
-        cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;La amortizacion num. &lt;B&gt;&quot; + cur-&gt;value( &quot;idamortizacion&quot; ) + &quot;&lt;/B&gt; tiene un plazo expirado &lt;B&gt;&quot; + cur-&gt;value( &quot;fechaprevista&quot; ) + &quot;&lt;/B&gt;.&quot;;
+        cadena = &quot;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;La amortizacion num. &lt;B&gt;&quot; + cur-&gt;value( &quot;idamortizacion&quot; ) + &quot;&lt;/B&gt; tiene un plazo expirado &lt;B&gt;&quot; + cur-&gt;value( &quot;fechaprevista&quot; ) + &quot;&lt;/B&gt;.&quot;;
         agregarError ( cadena, &quot;amortizacion&quot;, &quot;idamortizacion=&quot; + cur-&gt;value( &quot;idamortizacion&quot; ) );
         cur-&gt;nextRecord();
     } // end while
@@ -222,7 +184,7 @@ void correctorwidget::on_mui_corregir_clicked()
     cur = mainCompany()-&gt;loadQuery ( query );
     while ( !cur-&gt;eof() ) {
         QString cadena;
-        cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El asiento num. &lt;B&gt;&quot; + cur-&gt;value( &quot;orden&quot; ) + &quot;&lt;/B&gt; tiene una insercion en cuentas de IVA (&quot; + cur-&gt;value( &quot;codigo&quot; ) + &quot;) sin que haya una factura asociada.&quot;;
+        cadena = &quot;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El asiento num. &lt;B&gt;&quot; + cur-&gt;value( &quot;orden&quot; ) + &quot;&lt;/B&gt; tiene una insercion en cuentas de IVA (&quot; + cur-&gt;value( &quot;codigo&quot; ) + &quot;) sin que haya una factura asociada.&quot;;
         agregarError ( cadena, &quot;asiento&quot;,  cur-&gt;value( &quot;idasiento&quot; ) );
         cur-&gt;nextRecord();
     } // end while
@@ -245,7 +207,7 @@ void correctorwidget::on_mui_corregir_clicked()
 
     while ( !cur2-&gt;eof() ) {
 	QString cadena;
-	cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El codigo de la cuenta &lt;B&gt;&quot; + cur2-&gt;value( &quot;codigo&quot; ) + &quot;&lt;/B&gt; no tiene la longitud adecuada.&quot;;
+	cadena = &quot;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El codigo de la cuenta &lt;B&gt;&quot; + cur2-&gt;value( &quot;codigo&quot; ) + &quot;&lt;/B&gt; no tiene la longitud adecuada.&quot;;
 	agregarError ( cadena, &quot;cuenta&quot;, cur2-&gt;value(&quot;idcuenta&quot;) );
 	cur2-&gt;nextRecord();
     } // end while
@@ -263,7 +225,7 @@ void correctorwidget::on_mui_corregir_clicked()
 	QString cadena;
 	QString cadena2;
 	
-	cadena = &quot;&lt;img src='&quot; + g_confpr-&gt;value( CONF_PROGDATA ) + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El codigo de la cuenta &lt;B&gt;&quot; + cur-&gt;value( &quot;codigo&quot; ) + &quot;&lt;/B&gt; esta repedido &lt;B&gt;&quot; + cur-&gt;value( &quot;repeticiones&quot; ) + &quot;&lt;/B&gt; veces:&lt;BR&gt;&quot;;
+	cadena = &quot;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El codigo de la cuenta &lt;B&gt;&quot; + cur-&gt;value( &quot;codigo&quot; ) + &quot;&lt;/B&gt; esta repedido &lt;B&gt;&quot; + cur-&gt;value( &quot;repeticiones&quot; ) + &quot;&lt;/B&gt; veces:&lt;BR&gt;&quot;;
 	
 	
 	query = &quot;SELECT idcuenta, codigo, descripcion FROM cuenta WHERE codigo = '&quot; + cur-&gt;value( &quot;codigo&quot; ) + &quot;'&quot;;
@@ -274,8 +236,6 @@ void correctorwidget::on_mui_corregir_clicked()
 	    cur2-&gt;nextRecord();
 	} // end while
 	delete cur2;
-		
-	//agregarError ( cadena, &quot;idcuenta&quot;, &quot;idcuenta=&quot; + cur-&gt;value( &quot;idcuenta&quot; ) );
 	textBrowser += &quot;&lt;HR&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&quot; + cadena + &quot;&lt;/td&gt;&lt;/tr&gt;&quot; + cadena2 + &quot;&lt;/table&gt;&quot;;
 
 	cur-&gt;nextRecord();
@@ -283,14 +243,15 @@ void correctorwidget::on_mui_corregir_clicked()
     
     delete cur;    
     
-    
-    
+	
     g_plugParams = &textBrowser;
     g_plugins-&gt;run(&quot;CorrectorWidget_corregir&quot;, this);
     
     textBrowser += &quot;&lt;/BODY&gt;&lt;/HTML&gt;&quot;;
     mui_browser-&gt;setHtml ( textBrowser );
-    
+    mui_browser-&gt;page()-&gt;setLinkDelegationPolicy ( QWebPage::DelegateAllLinks );
+
+
 }
 
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_corrector/correctorwidget.h b/bulmages/bulmafact/plugins/pluginbf_corrector/correctorwidget.h
index 972af88..3aaeac7 100644
--- a/bulmages/bulmafact/plugins/pluginbf_corrector/correctorwidget.h
+++ b/bulmages/bulmafact/plugins/pluginbf_corrector/correctorwidget.h
@@ -61,7 +61,7 @@ public:
     void setMensaje ( QString mensaje );
 
 public slots:
-    virtual void on_mui_corregir_clicked();
+    virtual void on_mui_corregir_released();
     virtual void on_mui_configurar_clicked();
     virtual void alink ( const QUrl &amp;url );
     virtual void cambia ( bool a );
diff --git a/bulmages/bulmafact/plugins/pluginbf_corrector/pluginbf_corrector.cpp b/bulmages/bulmafact/plugins/pluginbf_corrector/pluginbf_corrector.cpp
index e670b0b..b6a53a1 100644
--- a/bulmages/bulmafact/plugins/pluginbf_corrector/pluginbf_corrector.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_corrector/pluginbf_corrector.cpp
@@ -76,8 +76,9 @@ int entryPoint ( BfBulmaFact *bcont )
 
     QObject::connect ( viewCorrector, SIGNAL ( toggled ( bool ) ), doc1, SLOT ( setVisibilityState ( bool ) ) );
     QObject::connect ( doc1, SIGNAL ( visibilityStateChanged ( bool ) ), viewCorrector, SLOT ( setChecked ( bool ) ) );
-    bcont-&gt;menuVentana-&gt;addSeparator();
-    bcont-&gt;menuVentana-&gt;addAction ( viewCorrector );
+    QMenu *pPluginMenu = bcont-&gt;newMenu(_(&quot;&amp;Herramientas&quot;), &quot;menuHerramientas&quot;, &quot;menuAcerca_de&quot;);
+    pPluginMenu-&gt;addSeparator();
+    pPluginMenu-&gt;addAction ( viewCorrector );
 
     BlFile file ( g_confpr-&gt;value( CONF_DIR_USER ) + &quot;plugincorrectorbf_&quot; + emp-&gt;dbName() + &quot;.cfn&quot; );
     if ( file.exists () ) {
diff --git a/bulmages/bulmafact/plugins/pluginbf_cuadrante/pluginbf_cuadrante.cpp b/bulmages/bulmafact/plugins/pluginbf_cuadrante/pluginbf_cuadrante.cpp
index 7af9ef3..3aa2921 100644
--- a/bulmages/bulmafact/plugins/pluginbf_cuadrante/pluginbf_cuadrante.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_cuadrante/pluginbf_cuadrante.cpp
@@ -54,16 +54,7 @@ int entryPoint ( BfBulmaFact *bges )
     g_pluginbf_cuadrante = bges;
 
     /// Creamos el men&uacute;.
-    QMenu *pPluginMenu;
-    
-    /// Miramos si existe un menu Herramientas
-    pPluginMenu = bges-&gt;menuBar() -&gt;findChild&lt;QMenu *&gt; ( &quot;Herramientas&quot; );
-
-    /// Creamos el men&uacute;.
-    if ( !pPluginMenu ) {
-        pPluginMenu = new QMenu ( _(&quot;&amp;Herramientas&quot;), bges-&gt;menuBar() );
-        pPluginMenu-&gt;setObjectName ( QString::fromUtf8 ( &quot;Herramientas&quot; ) );
-    } // end if
+    QMenu *pPluginMenu = bges-&gt;newMenu(_(&quot;&amp;Herramientas&quot;), &quot;menuHerramientas&quot;, &quot;menuAcerca_de&quot;);
 
     BlAction *accionA = new BlAction ( _(&quot;&amp;Cuadrante Semanal&quot;), 0 );
     accionA-&gt;setStatusTip ( _(&quot;Permite realizar Plannings Laborales&quot;) );
diff --git a/bulmages/bulmafact/plugins/pluginbf_debug/pluginbf_debug.cpp b/bulmages/bulmafact/plugins/pluginbf_debug/pluginbf_debug.cpp
index cdf3df9..e22da7c 100644
--- a/bulmages/bulmafact/plugins/pluginbf_debug/pluginbf_debug.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_debug/pluginbf_debug.cpp
@@ -59,8 +59,9 @@ int entryPoint ( BfBulmaFact *bcont )
     accionA-&gt;setStatusTip ( _ ( &quot;Activa/desactiva el modo de depuracion&quot; ) );
     accionA-&gt;setWhatsThis ( _ ( &quot;Depuracion.\n\nActiva/desactiva el modo de depuracion&quot; ) );
     accionA-&gt;setObjectName(&quot;mui_actionDebug&quot;);
-    bcont-&gt;menuVentana-&gt;addSeparator();
-    bcont-&gt;menuVentana-&gt;addAction ( accionA );
+    QMenu *pPluginMenu = bcont-&gt;newMenu(_(&quot;&amp;Herramientas&quot;), &quot;menuHerramientas&quot;, &quot;menuAcerca_de&quot;);
+    pPluginMenu-&gt;addSeparator();
+    pPluginMenu-&gt;addAction ( accionA );
     
     return 0;
 }
diff --git a/bulmages/bulmafact/plugins/pluginbf_example/pluginbf_example.cpp b/bulmages/bulmafact/plugins/pluginbf_example/pluginbf_example.cpp
index 1750461..a538fe0 100644
--- a/bulmages/bulmafact/plugins/pluginbf_example/pluginbf_example.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_example/pluginbf_example.cpp
@@ -46,15 +46,7 @@ int entryPoint ( BfBulmaFact *bges )
     /// del programa para indicar que el plugin se ha cargado.
     bges-&gt;setWindowTitle ( _ ( &quot;Prueba de plugin para BfBulmaFact.&quot; ) );
 
-    QMenu *pPluginMenu;
-    /// Miramos si existe un menu Herramientas
-    pPluginMenu = bges-&gt;menuBar() -&gt;findChild&lt;QMenu *&gt; ( &quot;Herramientas&quot; );
-
-    /// Creamos el men&uacute;.
-    if ( !pPluginMenu ) {
-        pPluginMenu = new QMenu ( _ ( &quot;&amp;Herramientas&quot; ), bges-&gt;menuBar() );
-        pPluginMenu-&gt;setObjectName ( QString::fromUtf8 ( &quot;Herramientas&quot; ) );
-    } // end if
+    QMenu *pPluginMenu = bges-&gt;newMenu(_(&quot;&amp;Herramientas&quot;), &quot;menuHerramientas&quot;, &quot;menuAcerca_de&quot;);
    
     /// Creamos el men&uacute;.
     BlAction *accionA = new BlAction ( _ ( &quot;&amp;Prueba de plugin&quot; ), 0 );
@@ -63,8 +55,6 @@ int entryPoint ( BfBulmaFact *bges )
     accionA-&gt;setObjectName(&quot;mui_actionExample&quot;);
     pPluginMenu-&gt;addAction ( accionA );
    
-    /// A&ntilde;adimos la nueva opci&oacute;n al men&uacute; principal del programa.
-    bges-&gt;menuBar() -&gt;insertMenu ( bges-&gt;menuVentana-&gt;menuAction(), pPluginMenu );
     return 0;
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_proveedor/pluginbf_proveedor.cpp b/bulmages/bulmafact/plugins/pluginbf_proveedor/pluginbf_proveedor.cpp
index e659a45..0e3ae9e 100644
--- a/bulmages/bulmafact/plugins/pluginbf_proveedor/pluginbf_proveedor.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_proveedor/pluginbf_proveedor.cpp
@@ -511,15 +511,52 @@ int Plugin_open(BfCompany * comp) {
   BL_FUNC_DEBUG
   QString cad = *((QString*)g_plugParams);
   QStringList args = cad.split(&quot;_&quot;);
-  if (args[0] == &quot;actividad&quot;) {
+  if (args[0] == &quot;proveedor&quot;) {
 	ProveedorView * bud = new ProveedorView ( comp, 0 );
         comp-&gt;m_pWorkspace-&gt;addSubWindow ( bud );
 	QString id =  args[1];
 	bud-&gt;load(id);
         bud-&gt;show();
-
-  } // end if
+  } // end if  
   return 0;
 }
 
 
+int CorrectorWidget_corregir(BlWidget *corrector) {
+   BL_FUNC_DEBUG
+   
+    /// En Windows no se soportan las rutas relativas para el HTML
+#ifdef Q_OS_WIN32
+	    QString cupath = QDir::currentPath().replace(&quot;program&quot;, &quot;&quot;).replace(&quot;.bulmages&quot;,&quot;&quot;);
+	    QString src= g_confpr-&gt;value( CONF_PROGDATA).replace(&quot;..&quot;,cupath);
+#else
+	    QString src = g_confpr-&gt;value( CONF_PROGDATA);
+#endif
+	  
+    QString query = &quot;SELECT * FROM proveedor WHERE coalesce(length(cifproveedor),0) &lt; 6&quot;;
+    BlDbRecordSet *cur = corrector-&gt;mainCompany() -&gt;loadQuery ( query );
+    while ( ! cur-&gt;eof() ) {
+
+           QString cadena = &quot;&lt;HR&gt;&lt;table&gt;&lt;tr&gt;&lt;td colspan=2&gt;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El proveedor &lt;B&gt;&quot; + cur-&gt;value( &quot;nomproveedor&quot; ) + &quot;&lt;/B&gt; no tiene CIF.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;a name='masinfo' href='abredoc?op=masinfo&amp;tabla=proveedor&amp;id=&quot; + cur-&gt;value( &quot;idproveedor&quot; ) + &quot;'&gt;+info&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;
+	   *(QString *) g_plugParams += cadena;
+	
+        cur-&gt;nextRecord();
+    } // end while
+    delete cur;
+	    
+	    
+    query = &quot;SELECT * FROM proveedor&quot;;
+   cur = corrector-&gt;mainCompany()-&gt;loadQuery ( query );
+   while ( ! cur-&gt;eof() ) {
+       QChar digito;
+       if ( ! blValidateSpainCIFNIFCode ( cur-&gt;value( &quot;cifproveedor&quot; ), digito ) ) {
+           QString cadena = &quot;&lt;HR&gt;&lt;table&gt;&lt;tr&gt;&lt;td colspan=2&gt;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src + &quot;icons/messagebox_warning.png'&gt;&nbsp;&nbsp;&lt;B&gt;&lt;I&gt;Warning:&lt;/I&gt;&lt;/B&gt;&lt;BR&gt;El proveedor ,&quot; + cur-&gt;value( &quot;cifproveedor&quot; ) + &quot; &lt;B&gt;&quot; + cur-&gt;value( &quot;nomproveedor&quot; ) + &quot;&lt;/B&gt; tiene CIF invalido. Digito de Control:&quot; + QString ( digito ) + &quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;a name='masinfo' href='abredoc?op=masinfo&amp;tabla=proveedor&amp;id=&quot; + cur-&gt;value( &quot;idproveedor&quot; ) + &quot;'&gt;+info&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;
+	   *(QString *) g_plugParams += cadena;
+       } // end if
+       cur-&gt;nextRecord();
+   } // end while
+   delete cur;
+   
+
+   return 0;
+}
diff --git a/bulmages/bulmafact/plugins/pluginbf_proveedor/pluginbf_proveedor.h b/bulmages/bulmafact/plugins/pluginbf_proveedor/pluginbf_proveedor.h
index 210f7b3..cdf43a9 100644
--- a/bulmages/bulmafact/plugins/pluginbf_proveedor/pluginbf_proveedor.h
+++ b/bulmages/bulmafact/plugins/pluginbf_proveedor/pluginbf_proveedor.h
@@ -44,7 +44,8 @@ extern &quot;C&quot; PLUGINBF_PROVEEDOR_EXPORT int BlSubFormDelegate_setEditorData(BlSubFo
 extern &quot;C&quot; PLUGINBF_PROVEEDOR_EXPORT int BlSubForm_editFinished(BlSubForm *);
 extern &quot;C&quot; PLUGINBF_PROVEEDOR_EXPORT int BlDbCompleterComboBox_textChanged (BlDbCompleterComboBox *);
 extern &quot;C&quot; PLUGINBF_PROVEEDOR_EXPORT int BlSubForm_preparaMenu ( BlSubForm *);
-
+extern &quot;C&quot; PLUGINBF_PROVEEDOR_EXPORT int CorrectorWidget_corregir(BlWidget *);
+extern &quot;C&quot; PLUGINBF_PROVEEDOR_EXPORT int Plugin_open(BfCompany *);
 
 class SubForm_Proveedor : public QObject
 {
diff --git a/bulmages/bulmafact/plugins/pluginbf_tallascolores/pluginbf_tallascolores.cpp b/bulmages/bulmafact/plugins/pluginbf_tallascolores/pluginbf_tallascolores.cpp
index d9d7958..9ebedfa 100644
--- a/bulmages/bulmafact/plugins/pluginbf_tallascolores/pluginbf_tallascolores.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_tallascolores/pluginbf_tallascolores.cpp
@@ -54,37 +54,23 @@ int entryPoint ( BfBulmaFact *bges )
     setlocale ( LC_ALL, &quot;&quot; );
     blBindTextDomain ( &quot;PluginBf_TallasColores&quot;, g_confpr-&gt;value( CONF_DIR_TRADUCCION ).toLatin1().constData() );
 
-
-
-
-
-    QMenu *pPluginMenuTallasColores;
-    /// Miramos si existe un menu Herramientas
-    pPluginMenuTallasColores = bges-&gt;menuBar() -&gt;findChild&lt;QMenu *&gt; (&quot;Tallas y colores&quot;);
+    QMenu *pPluginMenu = bges-&gt;newMenu(_(&quot;&amp;Tallas y colores&quot;), &quot;menuTallasyColores&quot;, &quot;menuAcerca_de&quot;);
 
     /// Creamos el men&uacute;.
-    if ( !pPluginMenuTallasColores ) {
-        pPluginMenuTallasColores = new QMenu ( _ ( &quot;&amp;Tallas y colores&quot; ), bges-&gt;menuBar() );
-        pPluginMenuTallasColores-&gt;setObjectName ( QString::fromUtf8 ( &quot;Tallas y colores&quot; ) );
-    } // end if
-    /// Creamos el men&uacute;.
 
     BlAction *accionA = new BlAction ( _ ( &quot;&amp;Tallas&quot; ), 0 );
     accionA-&gt;setStatusTip ( _ ( &quot;Tallas&quot; ) );
     accionA-&gt;setWhatsThis ( _ ( &quot;Tallas&quot; ) );
     accionA-&gt;setObjectName(&quot;mui_actionTallas&quot;);    
     
-    pPluginMenuTallasColores-&gt;addAction ( accionA );
+    pPluginMenu-&gt;addAction ( accionA );
 
     BlAction *accionB = new BlAction ( _ ( &quot;&amp;Colores&quot; ), 0 );
     accionB-&gt;setStatusTip ( _ ( &quot;Colores&quot; ) );
     accionB-&gt;setWhatsThis ( _ ( &quot;Colores&quot; ) );
     accionB-&gt;setObjectName(&quot;mui_actionColores&quot;);
 
-    pPluginMenuTallasColores-&gt;addAction ( accionB );
-
-    /// A&ntilde;adimos la nueva opci&oacute;n al men&uacute; principal del programa.
-    bges-&gt;menuBar() -&gt;insertMenu ( bges-&gt;menuVentana-&gt;menuAction(), pPluginMenuTallasColores );
+    pPluginMenu-&gt;addAction ( accionB );
 
     return 0;
 }
diff --git a/bulmages/bulmalib/plugins/pluginbl_alarm/README.es b/bulmages/bulmalib/plugins/pluginbl_alarm/README.es
index a3c3ff0..574858d 100644
--- a/bulmages/bulmalib/plugins/pluginbl_alarm/README.es
+++ b/bulmages/bulmalib/plugins/pluginbl_alarm/README.es
@@ -8,7 +8,7 @@ Nombre: Alarmas
 
 Biblioteca: libpluginbl_alarm.so
 
-Descripción: &lt;H1&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/images/chrono.png&quot; WIDTH=&quot;48&quot;/&gt;&lt;BR&gt;Alarmas&lt;/H1&gt;
+Descripción: &lt;H1&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/icons/chrono.png&quot; WIDTH=&quot;48&quot;/&gt;&lt;BR&gt;Alarmas&lt;/H1&gt;
 &lt;P&gt;Permite crear avisos programados sobre las fichas del programa, a modo de recordatorios y con fecha de aviso. Sobre una misma ficha se pueden gestionar varios avisos.&lt;/P&gt;
 &lt;P&gt; El plugin proporciona un gestor de avisos que permite ver todos los avisos pendientes, posponeros, borrarlos y acceder a las fichas en las cuales estan generados de forma muy sencilla. Además los avisos expirados aparecen destacados en color rojo. &lt;/P&gt;
 &lt;P&gt; Se pueden poner avisos sobre cualquier ficha, tanto si esta realizada con autoforms como si esta generada 
@@ -16,11 +16,11 @@ mediante un plugin&lt;/P&gt;
 &lt;h2&gt;Instalación&lt;/h2&gt;
 &lt;P&gt;Este módulo no requiere de intervención del usuario en su instalación si se realiza con bulmasetup&lt;/P&gt;
 &lt;P&gt;En la instalación manual debe tenerse en cuenta que hay que instalar un componente en la base de datos&lt;/P&gt;
-&lt;P&gt;Una vez instalado el plugin en todas las fichas del programa aparecerá la opción &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/images/chrono.png&quot; WIDTH=&quot;16&quot;/&gt; en el menú y en el menú contextual de la ficha que nos permitirá agregar avisos, mostrar los avisos programados y borrarlos.&lt;/P&gt;
+&lt;P&gt;Una vez instalado el plugin en todas las fichas del programa aparecerá la opción &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/icons/chrono.png&quot; WIDTH=&quot;16&quot;/&gt; en el menú y en el menú contextual de la ficha que nos permitirá agregar avisos, mostrar los avisos programados y borrarlos.&lt;/P&gt;
 &lt;P&gt;Cuando expira un aviso aparece remarcado en rojo en el gestor de alarmas, a través del cual se permite acceder de forma rápida a la ficha que lo ha generado &lt;/P&gt;
 &lt;P&gt;El plugin no tiene dependencias, ni utiliza componentes externos.&lt;/P&gt;
 &lt;BR&gt;
-&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/images/chrono.png&quot; WIDTH=&quot;48&quot;/&gt;
+&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/icons/chrono.png&quot; WIDTH=&quot;48&quot;/&gt;
 &lt;HR&gt;
 
 ParmBD: PluginBl_Alarm
diff --git a/bulmages/bulmalib/plugins/pluginbl_alarm/icons/technoargia_chrono.svg b/bulmages/bulmalib/plugins/pluginbl_alarm/icons/technoargia_chrono.svg
deleted file mode 100644
index 097730f..0000000
--- a/bulmages/bulmalib/plugins/pluginbl_alarm/icons/technoargia_chrono.svg
+++ /dev/null
@@ -1,74 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;
-&lt;!-- Created with Inkscape (<A HREF="http://www.inkscape.org/">http://www.inkscape.org/</A>) --&gt;
-&lt;svg xmlns:dc=&quot;<A HREF="http://purl.org/dc/elements/1.1/">http://purl.org/dc/elements/1.1/</A>&quot; xmlns:cc=&quot;<A HREF="http://web.resource.org/cc/">http://web.resource.org/cc/</A>&quot; xmlns:rdf=&quot;<A HREF="http://www.w3.org/1999/02/22-rdf-syntax-ns#">http://www.w3.org/1999/02/22-rdf-syntax-ns#</A>&quot; xmlns:svg=&quot;<A HREF="http://www.w3.org/2000/svg">http://www.w3.org/2000/svg</A>&quot; xmlns=&quot;<A HREF="http://www.w3.org/2000/svg">http://www.w3.org/2000/svg</A>&quot; xmlns:sodipodi=&quot;<A HREF="http://inkscape.sourceforge.net/DTD/sodipodi-0.dtd">http://inkscape.sourceforge.net/DTD/sodipodi-0.dtd</A>&quot; xmlns:inkscape=&quot;<A HREF="http://www.inkscape.org/namespaces/inkscape">http://www.inkscape.org/namespaces/inkscape</A>&quot; width=&quot;301.28pt&quot; height=&quot;400pt&quot; id=&quot;svg2&quot; sodipodi:version=&quot;0.32&quot; inkscape:version=&quot;0.43&quot; sodipodi:docbase=&quot;/home/f5soh/Swf/Tutoriel/svg&quot; sodipodi:docname=&quot;chrono2.svg&quot; version=&quot;1.0&quot;&gt;
-  &lt;defs id=&quot;defs4&quot;&gt;
-    &lt;marker inkscape:stockid=&quot;StopM&quot; orient=&quot;auto&quot; refY=&quot;0&quot; refX=&quot;0&quot; id=&quot;StopM&quot; style=&quot;overflow:visible&quot;&gt;
-      &lt;path id=&quot;path14689&quot; d=&quot;M 0,5.65 L 0,-5.65&quot; style=&quot;fill:none;fill-opacity:0.75;fill-rule:evenodd;stroke:#000000;stroke-width:1pt&quot; transform=&quot;scale(0.4,0.4)&quot;/&gt;
-    &lt;/marker&gt;
-    &lt;marker inkscape:stockid=&quot;StopS&quot; orient=&quot;auto&quot; refY=&quot;0&quot; refX=&quot;0&quot; id=&quot;StopS&quot; style=&quot;overflow:visible&quot;&gt;
-      &lt;path id=&quot;path14686&quot; d=&quot;M 0,5.65 L 0,-5.65&quot; style=&quot;fill:none;fill-opacity:0.75;fill-rule:evenodd;stroke:#000000;stroke-width:1pt&quot; transform=&quot;scale(0.2,0.2)&quot;/&gt;
-    &lt;/marker&gt;
-    &lt;marker inkscape:stockid=&quot;StopL&quot; orient=&quot;auto&quot; refY=&quot;0&quot; refX=&quot;0&quot; id=&quot;StopL&quot; style=&quot;overflow:visible&quot;&gt;
-      &lt;path id=&quot;path14692&quot; d=&quot;M 0,5.65 L 0,-5.65&quot; style=&quot;fill:none;fill-opacity:0.75;fill-rule:evenodd;stroke:#000000;stroke-width:1pt&quot; transform=&quot;scale(0.8,0.8)&quot;/&gt;
-    &lt;/marker&gt;
-    &lt;linearGradient id=&quot;linearGradient6669&quot;&gt;
-      &lt;stop style=&quot;stop-color:#8b7b7b;stop-opacity:1;&quot; offset=&quot;0&quot; id=&quot;stop6671&quot;/&gt;
-      &lt;stop id=&quot;stop6677&quot; offset=&quot;0.11&quot; style=&quot;stop-color:#8b7b7b;stop-opacity:0.92241377;&quot;/&gt;
-      &lt;stop style=&quot;stop-color:#1c1414;stop-opacity:0.81034482;&quot; offset=&quot;1&quot; id=&quot;stop6673&quot;/&gt;
-    &lt;/linearGradient&gt;
-  &lt;/defs&gt;
-  &lt;sodipodi:namedview id=&quot;base&quot; pagecolor=&quot;#ffffff&quot; bordercolor=&quot;#666666&quot; borderopacity=&quot;1.0&quot; inkscape:pageopacity=&quot;0.0&quot; inkscape:pageshadow=&quot;2&quot; inkscape:zoom=&quot;0.80105501&quot; inkscape:cx=&quot;372.04724&quot; inkscape:cy=&quot;176.64205&quot; inkscape:document-units=&quot;px&quot; inkscape:current-layer=&quot;layer1&quot; inkscape:window-width=&quot;1272&quot; inkscape:window-height=&quot;996&quot; inkscape:window-x=&quot;0&quot; inkscape:window-y=&quot;0&quot;/&gt;
-  &lt;g inkscape:label=&quot;Calque 1&quot; inkscape:groupmode=&quot;layer&quot; id=&quot;layer1&quot;&gt;
-    &lt;g id=&quot;g4026&quot; style=&quot;fill:#000000;fill-opacity:0.41778977;fill-rule:nonzero;stroke:#000000;stroke-opacity:1&quot; transform=&quot;matrix(0.940559,0.166725,-0.154489,0.965491,238.345,-250.082)&quot;&gt;
-      &lt;path transform=&quot;translate(-84.00711,26.8968)&quot; sodipodi:nodetypes=&quot;csccsssccccccccsccccccccssssccssssccccsccccc&quot; id=&quot;path4028&quot; d=&quot;M 129.5,251.96875 C 93.528564,252.83932 64.78125,271.79806 64.78125,293 C 64.78126,308.6168 77.47717,322.09488 98.4375,328.4375 C 104.27112,339.749 117.8265,352.73138 117.03125,363.96875 C 43.379957,366.01631 -38.37501,441.43586 -38.375,536.875 C -38.374999,632.31415 39.092117,709.75002 134.53125,709.75 C 229.97039,709.75001 307.40627,632.31414 307.40625,536.875 C 307.40625,480.28258 280.06086,433.97432 245.18628,402.39502 C 245.37514,402.22442 245.54874,402.03178 245.71753,401.83252 L 250.96753,395.61377 L 252.34253,396.70752 C 254.37883,398.36921 257.13447,398.32936 258.56128,396.64502 L 262.15503,392.42627 C 263.58182,390.74192 263.09761,388.05671 261.06128,386.39502 L 243.87378,372.36377 C 243.77831,372.28589 243.69109,372.21552 243.59253,372.14502 C 241.58892,370.7113 238.9837,370.78965 237.62378,372.39502 L 234.03003,376.64502 C 232.60
 322,378.3294 233.08747,381.01459 235.12378,382.67627 L 236.96753,384.17627 L 231.68628,390.39502 C 231.27226,390.88378 233.79842,393.66042 230.74878,391.95752 C 206.94839,376.54467 174.97829,364.02045 148,363.21875 C 146.50446,354.67715 158.4239,340.12727 163.46664,327.21875 C 182.33901,320.46084 199.4375,307.66252 199.4375,293 C 199.43752,271.29226 169.29365,251.96876 132.125,251.96875 C 131.54426,251.96875 130.95225,251.95938 130.375,251.96875 C 130.23294,251.97107 130.07934,251.96588 129.9375,251.96875 C 129.79622,251.97161 129.64106,251.96534 129.5,251.96875 z M 130.28125,262.5625 C 130.50433,262.55694 130.74497,262.5665 130.96875,262.5625 C 131.08108,262.5605 131.2,262.56411 131.3125,262.5625 C 131.76966,262.55595 132.22758,262.5625 132.6875,262.5625 C 162.12234,262.56251 186,276.08079 186,292.71875 C 186.00001,301.95863 176.83561,312.89499 166.17082,318.26668 C 164.02373,314.56894 155.92202,309.07368 147.4633,306.59709 C 133.32337,307.91947 124.51924,307.19053 111.125,
 306.0625 C 102.19231,308.77466 97.85555,312.28607 96.40625,316.3125 C 85.55021,310.79356 79.34375,302.27258 79.34375,292.71875 C 79.34377,276.5322 101.95053,263.26855 130.28125,262.5625 z M 111.125,306.0625 L 149.16081,307.16292 C 167.23749,280.37197 138.35024,280.10213 133.5625,280.8125 C 129.28576,279.86245 93.72895,276.96495 111.125,306.0625 z &quot; style=&quot;fill:#000000;fill-opacity:0.41778977;fill-rule:nonzero;stroke:none;stroke-width:1.301;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dashoffset:0;stroke-opacity:1&quot;/&gt;
-    &lt;/g&gt;
-    &lt;path style=&quot;fill:#5e62c6;fill-opacity:1;fill-rule:nonzero;stroke:#221d1d;stroke-width:0.91592032;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dashoffset:0;stroke-opacity:1&quot; d=&quot;M 319.77635,162.8291 C 318.04124,161.1258 315.46094,160.78206 313.86767,162.09375 L 309.66486,165.55384 C 307.99319,166.93008 308.04336,169.59236 309.7738,171.51924 L 311.32523,173.24677 L 305.15571,178.32601 C 302.76766,180.29202 302.52256,183.74263 304.60618,186.06274 L 309.00185,190.95742 C 311.08547,193.27752 314.68541,193.56256 317.07344,191.59655 L 323.24299,186.51735 L 324.39479,187.79989 C 326.12522,189.72678 328.84337,190.147 330.51502,188.77079 L 334.71785,185.31073 C 336.38948,183.93449 336.36286,181.29839 334.6324,179.37151 L 320.01143,163.09084 C 319.9303,163.00053 319.8617,162.91286 319.77635,162.8291 z &quot; id=&quot;rect5779&quot;/&gt;
-    &lt;path style=&quot;fill:#7974a8;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:1.27857912;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dashoffset:0;stroke-opacity:1&quot; d=&quot;M 223.0524,93.392398 C 219.20011,98.704778 220.79297,105.62745 228.65735,104.11755 C 247.53689,106.04993 269.29127,103.79515 282.98494,89.743078 C 291.53155,81.164928 292.51219,67.114948 285.67902,57.149218 C 273.03517,37.845598 249.49078,28.210998 227.13016,24.917308 C 206.13162,22.269808 182.33966,24.681928 166.10423,39.000198 C 156.09779,47.483898 154.91659,62.847688 162.02845,73.553488 C 172.71995,90.249948 193.01343,98.102208 212.02094,101.4074 C 222.09756,100.05458 213.99805,89.275788 206.86457,90.878118 C 192.27602,87.073628 175.98331,78.722268 172.26607,63.153438 C 169.50702,52.054588 178.53557,42.304938 188.5998,38.788528 C 209.88339,30.831538 234.55144,34.037878 254.75882,43.892278 C 265.52916,49.496368 277.39598,58.802198 277.00409,71.857078 C 275.74273,85.42926
 8 261.25817,92.315258 248.87428,93.952788 C 240.32834,95.223948 231.57215,94.817478 223.0524,93.392398 z &quot; id=&quot;path3133&quot;/&gt;
-    &lt;path style=&quot;fill:#6b63c3;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:1.27857876;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dashoffset:0;stroke-opacity:1&quot; d=&quot;M 230.68841,83.607798 C 260.79502,55.758918 216.23959,54.778838 221.85357,55.837248 C 227.46755,56.895668 179.40916,42.718558 201.14572,78.676068 C 214.10799,81.969338 217.15468,82.629988 231.24368,83.701318 C 270.35194,102.35192 222.67978,122.92638 222.8305,136.90303 C 301.04237,152.41759 366.667,238.10198 351.28366,329.4434 C 335.90032,420.78482 247.40408,482.1155 153.74737,466.34223 C 60.090681,450.56897 -3.4355294,363.63531 11.947811,272.29389 C 27.331151,180.95247 119.72775,122.2939 192.33355,132.50664 C 197.01909,113.30038 162.32162,83.559408 201.70099,78.769588&quot; id=&quot;path2257&quot; sodipodi:nodetypes=&quot;csccccsscc&quot;/&gt;
-    &lt;path transform=&quot;matrix(1.025422,0.173911,-0.168428,1.007103,-82.22658,-326.0864)&quot; d=&quot;M 509.32831 562.38336 A 159.1651 159.1651 0 1 1  190.99811,562.38336 A 159.1651 159.1651 0 1 1  509.32831 562.38336 z&quot; sodipodi:ry=&quot;159.1651&quot; sodipodi:rx=&quot;159.1651&quot; sodipodi:cy=&quot;562.38336&quot; sodipodi:cx=&quot;350.16321&quot; id=&quot;path7568&quot; style=&quot;opacity:1;fill:#e7e9e7;fill-opacity:0.35309975;fill-rule:nonzero;stroke:#686871;stroke-width:1.301;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1&quot; sodipodi:type=&quot;arc&quot;/&gt;
-    &lt;path id=&quot;path1382&quot; style=&quot;opacity:0.97146738;fill:#e7e9e7;fill-opacity:1;fill-rule:nonzero;stroke:#686871;stroke-width:3.50099993;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dashoffset:0;stroke-opacity:1&quot; d=&quot;M 331.1427,354.10204 C 302.27579,434.33832 212.07768,475.43559 129.80763,445.83704 C 47.537571,416.23848 4.1958906,327.09718 33.062801,246.86091 C 61.929711,166.62464 152.12782,125.52736 234.39788,155.12591 C 316.66792,184.72447 360.00961,273.86578 331.1427,354.10204 M 160.7773,427.74309 L 156.39602,452.02612 M 52.746101,276.49548 L 28.008081,272.03211 M 337.47025,327.867 L 312.73222,323.40363 M 131.54351,154.34651 L 139.89073,177.56686 M 227.6164,421.60294 L 235.96362,444.8233 M 58.434831,344.63427 L 34.779391,353.13788 M 328.43597,248.33242 L 304.78052,256.83604 M 64.077151,198.44332 L 82.916221,214.37914 M 283.64086,384.99032 L 302.47995,400.92614 M 98.578471,399.61385 L 82.344061,418.80591 M 281.31207,183.257 L 265.07765,202.44908 M 205
 .22212,148.49616 L 200.84084,172.77919&quot;/&gt;
-    &lt;path id=&quot;path13754&quot; style=&quot;opacity:0.625;fill:#c3c0c0;fill-opacity:0.61590295;fill-rule:nonzero;stroke:#4f4c4c;stroke-width:3.50099993;stroke-linecap:round;stroke-linejoin:round;marker-mid:none;marker-end:none;stroke-miterlimit:4;stroke-dashoffset:2.45069995;stroke-opacity:0.61455539&quot; d=&quot;M 216.83495,399.07891 C 212.20268,426.8324 185.91858,445.59745 158.16509,440.96518 C 130.4116,436.33291 111.64655,410.04881 116.27882,382.29533 C 120.91109,354.54183 147.19519,335.77678 174.94867,340.40905 C 202.70217,345.04132 221.46722,371.32542 216.83495,399.07891 z M 173.98796,340.2487 L 171.52921,354.97986 M 215.76732,399.55904 L 201.03618,397.1003 M 158.59224,440.37813 L 161.05098,425.64699 M 116.91885,384.37712 L 131.65,386.83587 M 147.63667,343.35584 L 153.59776,357.04954 M 212.84327,371.30326 L 199.14956,377.26435 M 187.12389,436.67681 L 181.1628,422.98311 M 121.6733,412.40737 L 135.36701,406.44628 M 126.88404,360.97812 L 139.34155,369.21598 M 196.88493,350.02997 L 188.64705,36
 2.48749 M 205.15454,421.85232 L 192.69703,413.61445 M 136.72612,431.16703 L 144.964,418.70952&quot;/&gt;
-    &lt;path id=&quot;path17471&quot; style=&quot;opacity:0.625;fill:#c3c0c0;fill-opacity:0.61590295;fill-rule:nonzero;stroke:#241f1f;stroke-width:5.32200003;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:2.45069995;stroke-opacity:0.98382748&quot; d=&quot;M 174.67369,394.25853 C 174.67369,398.91822 170.89191,402.70001 166.23221,402.70001 C 161.57251,402.70001 157.79072,398.91822 157.79072,394.25853 C 157.79072,389.59883 161.57251,385.81704 166.23221,385.81704 C 170.89191,385.81704 174.67369,389.59883 174.67369,394.25853 z M 165.58286,385.81703 L 164.28417,350.10306&quot;/&gt;
-    &lt;path id=&quot;path18352&quot; style=&quot;opacity:0.83831524;fill:none;fill-opacity:0.61590295;fill-rule:nonzero;stroke:#060505;stroke-width:7.32200003;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:2.45069995;stroke-opacity:0.99730458&quot; d=&quot;M 195.57556,292.15176 C 201.23107,300.00515 199.44729,310.96889 191.5939,316.6244 C 183.74051,322.27991 172.77677,320.49613 167.12125,312.64273 C 161.46575,304.78934 163.24953,293.82561 171.10293,288.17009 C 178.95632,282.51458 189.92005,284.29836 195.57556,292.15176 z M 171.10291,288.17006 L 95.210401,182.78372&quot;/&gt;
-  &lt;/g&gt;
-  &lt;metadata&gt;
-    &lt;rdf:RDF&gt;
-      &lt;cc:Work&gt;
-        &lt;dc:format&gt;image/svg+xml&lt;/dc:format&gt;
-        &lt;dc:type rdf:resource=&quot;<A HREF="http://purl.org/dc/dcmitype/StillImage">http://purl.org/dc/dcmitype/StillImage</A>&quot;/&gt;
-        &lt;cc:license rdf:resource=&quot;<A HREF="http://creativecommons.org/licenses/publicdomain/">http://creativecommons.org/licenses/publicdomain/</A>&quot;/&gt;
-        &lt;dc:publisher&gt;
-          &lt;cc:Agent rdf:about=&quot;<A HREF="http://openclipart.org/">http://openclipart.org/</A>&quot;&gt;
-            &lt;dc:title&gt;Open Clip Art Library&lt;/dc:title&gt;
-          &lt;/cc:Agent&gt;
-        &lt;/dc:publisher&gt;
-        &lt;dc:title&gt;chrono&lt;/dc:title&gt;
-        &lt;dc:date&gt;2006-09-18T07:01:59&lt;/dc:date&gt;
-        &lt;dc:description&gt;A chronometer : )&lt;/dc:description&gt;
-        &lt;dc:source&gt;<A HREF="http://openclipart.org/detail/162/chrono-by-technoargia&lt;/dc:source">http://openclipart.org/detail/162/chrono-by-technoargia&lt;/dc:source</A>&gt;
-        &lt;dc:creator&gt;
-          &lt;cc:Agent&gt;
-            &lt;dc:title&gt;technoargia&lt;/dc:title&gt;
-          &lt;/cc:Agent&gt;
-        &lt;/dc:creator&gt;
-        &lt;dc:subject&gt;
-          &lt;rdf:Bag&gt;
-            &lt;rdf:li&gt;chronometer&lt;/rdf:li&gt;
-            &lt;rdf:li&gt;clip art&lt;/rdf:li&gt;
-            &lt;rdf:li&gt;clipart&lt;/rdf:li&gt;
-            &lt;rdf:li&gt;clock&lt;/rdf:li&gt;
-            &lt;rdf:li&gt;contour&lt;/rdf:li&gt;
-            &lt;rdf:li&gt;meter&lt;/rdf:li&gt;
-            &lt;rdf:li&gt;pocket watch&lt;/rdf:li&gt;
-            &lt;rdf:li&gt;time&lt;/rdf:li&gt;
-          &lt;/rdf:Bag&gt;
-        &lt;/dc:subject&gt;
-      &lt;/cc:Work&gt;
-      &lt;cc:License rdf:about=&quot;<A HREF="http://creativecommons.org/licenses/publicdomain/">http://creativecommons.org/licenses/publicdomain/</A>&quot;&gt;
-        &lt;cc:permits rdf:resource=&quot;<A HREF="http://creativecommons.org/ns#Reproduction">http://creativecommons.org/ns#Reproduction</A>&quot;/&gt;
-        &lt;cc:permits rdf:resource=&quot;<A HREF="http://creativecommons.org/ns#Distribution">http://creativecommons.org/ns#Distribution</A>&quot;/&gt;
-        &lt;cc:permits rdf:resource=&quot;<A HREF="http://creativecommons.org/ns#DerivativeWorks">http://creativecommons.org/ns#DerivativeWorks</A>&quot;/&gt;
-      &lt;/cc:License&gt;
-    &lt;/rdf:RDF&gt;
-  &lt;/metadata&gt;
-&lt;/svg&gt;
diff --git a/bulmages/bulmalib/plugins/pluginbl_alarm/visoralarm.cpp b/bulmages/bulmalib/plugins/pluginbl_alarm/visoralarm.cpp
index 0df90f5..28987f3 100644
--- a/bulmages/bulmalib/plugins/pluginbl_alarm/visoralarm.cpp
+++ b/bulmages/bulmalib/plugins/pluginbl_alarm/visoralarm.cpp
@@ -131,9 +131,24 @@ void visoralarm::presentar() {
     BlDbRecordSet *cur = mainCompany() -&gt;loadQuery ( query );
     while ( ! cur-&gt;eof() ) {
         if (cur-&gt;value(&quot;expirada&quot;) == &quot;f&quot;) {
+	#ifdef Q_OS_WIN32
+	    QString cupath = QDir::currentPath().replace(&quot;program&quot;, &quot;&quot;).replace(&quot;.bulmages&quot;,&quot;&quot;);
+	    QString src= g_confpr-&gt;value( CONF_PROGDATA).replace(&quot;..&quot;,cupath);
+	    cadena = &quot;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src +&quot;icons/chrono.png'&gt;&nbsp;&nbsp;  &lt;BR&gt; &quot; +cur-&gt;value( &quot;fechaalarma&quot; ) +&quot; &quot; + cur-&gt;value( &quot;horaalarma&quot; )  +&quot; &lt;br&gt;&lt;b&gt;&quot; +cur-&gt;value( &quot;subjectalarma&quot; ) +&quot;&lt;/b&gt;&lt;BR&gt;&quot; + cur-&gt;value(&quot;textoalarma&quot;);
+	#else
 	    cadena = &quot;&lt;img src='<A HREF="file://">file://</A>&quot; + g_confpr-&gt;value( CONF_PROGDATA ) +&quot;icons/chrono.png'&gt;&nbsp;&nbsp;  &lt;BR&gt; &quot; +cur-&gt;value( &quot;fechaalarma&quot; ) +&quot; &quot; + cur-&gt;value( &quot;horaalarma&quot; )  +&quot; &lt;br&gt;&lt;b&gt;&quot; +cur-&gt;value( &quot;subjectalarma&quot; ) +&quot;&lt;/b&gt;&lt;BR&gt;&quot; + cur-&gt;value(&quot;textoalarma&quot;);
+	#endif
+
 	} else {
-	    cadena = &quot;&lt;br&gt;&lt;img src='<A HREF="file://">file://</A>&quot; + g_confpr-&gt;value( CONF_PROGDATA ) +&quot;icons/chrono.png'&gt;&nbsp;&nbsp;  &lt;BR&gt; &quot; +&quot; &lt;font color='red'&gt;&quot; + cur-&gt;value( &quot;fechaalarma&quot; )  + cur-&gt;value( &quot;horaalarma&quot; )  +&quot; &lt;br&gt;&lt;b&gt;&quot; +cur-&gt;value( &quot;subjectalarma&quot; ) +&quot;&lt;/b&gt;&lt;BR&gt;&quot; + cur-&gt;value(&quot;textoalarma&quot;) + &quot; &lt;/font&gt;&quot;;
+	#ifdef Q_OS_WIN32
+	    QString cupath = QDir::currentPath().replace(&quot;program&quot;, &quot;&quot;).replace(&quot;.bulmages&quot;,&quot;&quot;);
+	    QString src= g_confpr-&gt;value( CONF_PROGDATA).replace(&quot;..&quot;,cupath);
+	  cadena = &quot;&lt;br&gt;&lt;img src='<A HREF="file:///">file:///</A>&quot; + src +&quot;icons/chrono.png'&gt;&nbsp;&nbsp;  &lt;BR&gt; &quot; +&quot; &lt;font color='red'&gt;&quot; + cur-&gt;value( &quot;fechaalarma&quot; )  + cur-&gt;value( &quot;horaalarma&quot; )  +&quot; &lt;br&gt;&lt;b&gt;&quot; +cur-&gt;value( &quot;subjectalarma&quot; ) +&quot;&lt;/b&gt;&lt;BR&gt;&quot; + cur-&gt;value(&quot;textoalarma&quot;) + &quot; &lt;/font&gt;&quot;;
+		
+	#else
+	  cadena = &quot;&lt;br&gt;&lt;img src='<A HREF="file://">file://</A>&quot; + g_confpr-&gt;value( CONF_PROGDATA ) +&quot;icons/chrono.png'&gt;&nbsp;&nbsp;  &lt;BR&gt; &quot; +&quot; &lt;font color='red'&gt;&quot; + cur-&gt;value( &quot;fechaalarma&quot; )  + cur-&gt;value( &quot;horaalarma&quot; )  +&quot; &lt;br&gt;&lt;b&gt;&quot; +cur-&gt;value( &quot;subjectalarma&quot; ) +&quot;&lt;/b&gt;&lt;BR&gt;&quot; + cur-&gt;value(&quot;textoalarma&quot;) + &quot; &lt;/font&gt;&quot;;
+	#endif
+
 	} // end if
         agregarError ( cadena, &quot;alarma&quot;, cur-&gt;value( &quot;idalarma&quot; ) );
         cur-&gt;nextRecord();
diff --git a/bulmages/bulmalib/src/blsync.cpp b/bulmages/bulmalib/src/blsync.cpp
index 71c265c..168f746 100644
--- a/bulmages/bulmalib/src/blsync.cpp
+++ b/bulmages/bulmalib/src/blsync.cpp
@@ -95,6 +95,9 @@ void BlSync::sync() {
 		      while (!lline.isNull()) {
 			  if (!lline.startsWith(&quot;#&quot;) &amp;&amp; !(lline == &quot;\n&quot;)) {
 			      QStringList larch = lline.split(&quot; &quot;);
+#ifdef CONFIG_DEBUG
+			      fprintf( stderr,&quot; Tratando %s, %s, %s, %s\n&quot;, larch[0].toLatin1().constData(), larch[1].toLatin1().constData(), larch[2].toLatin1().constData(), larch[3].toLatin1().constData() );
+#endif
 			      if (filename == larch[0] &amp;&amp; date == larch[2]) {
 				descarga = false;
 				break;


<A HREF="https://gitorious.org/bulmages">https://gitorious.org/bulmages</A>
------------------------------------------------------------------------

You are receiving this email because you have chosen to be notified by
email whenever this favorite has new activity. You can manage your
favorite subscriptions at <A HREF="https://gitorious.org/favorites">https://gitorious.org/favorites</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Mensaje anterior: <A HREF="007699.html">[BulmaGés] [Gitorious] Activity: tborras pushed 1	commits to master...
</A></li>
	<LI>Próximo mensaje: <A HREF="007701.html">[BulmaGés] [Gitorious] Activity: tborras pushed 1	commits to master...
</A></li>
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#7700">[ fecha ]</a>
              <a href="thread.html#7700">[ hilo ]</a>
              <a href="subject.html#7700">[ asunto ]</a>
              <a href="author.html#7700">[ autor ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bulmages-main">Más información sobre la lista de distribución Bulmages-main </a><br>
</body></html>
