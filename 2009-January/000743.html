<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [BulmaGés]r2884 - in trunk/bulmages/bulmafact: plugins plugins/pluginalbaran plugins/pluginalbaranprov plugins/pluginbarcodeopen plugins/plugincobros plugins/plugincompraventa plugins/pluginetiquetado plugins/pluginetiquetas plugins/pluginfactura plugins/pluginfacturaprov plugins/pluginfacturar plugins/pluginimpresionesmultiples plugins/pluginmail plugins/pluginmailthunderbird plugins/pluginpedido plugins/pluginpedidoprov plugins/pluginpresupuesto plugins/pluginq19 plugins/pluginticket plugins/plugintrazabilidad src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bulmages-main/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fr2884_-_in_trunk/bulm%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fages/bulmafact%3D3A_plugins_plugins/pluginalbaran_plugins/pl%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fuginalbaranprov_plugins/pluginbarcodeopen_plugins/pluginco%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fbros_plugins/plugincompraventa_plugins/pluginetiquetado_pl%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fugins/pluginetiquetas_plugins/pluginfactura_plugins/plugin%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Ffacturaprov_plugins/pluginfacturar_plugins/pluginimpresion%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fesmultiples_plugins/pluginmail_plugins/pluginmailthunderbi%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Frd_plugins/pluginpedido_plugins/pluginpedidoprov_plugins/p%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fluginpresupuesto_plugins/pluginq19_plugins/pluginticket_pl%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fugins/plugintrazabilidad_src%3F%3D&In-Reply-To=%3C200901070226.30317.tborras%40conetxia.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="000742.html">
   <LINK REL="Next"  HREF="000745.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[BulmaGés]r2884 - in trunk/bulmages/bulmafact: plugins plugins/pluginalbaran plugins/pluginalbaranprov plugins/pluginbarcodeopen plugins/plugincobros plugins/plugincompraventa plugins/pluginetiquetado plugins/pluginetiquetas plugins/pluginfactura plugins/pluginfacturaprov plugins/pluginfacturar plugins/pluginimpresionesmultiples plugins/pluginmail plugins/pluginmailthunderbird plugins/pluginpedido plugins/pluginpedidoprov plugins/pluginpresupuesto plugins/pluginq19 plugins/pluginticket plugins/plugintrazabilidad src </H1>
    <B>Tomeu Borras</B> 
    <A HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fr2884_-_in_trunk/bulm%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fages/bulmafact%3D3A_plugins_plugins/pluginalbaran_plugins/pl%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fuginalbaranprov_plugins/pluginbarcodeopen_plugins/pluginco%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fbros_plugins/plugincompraventa_plugins/pluginetiquetado_pl%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fugins/pluginetiquetas_plugins/pluginfactura_plugins/plugin%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Ffacturaprov_plugins/pluginfacturar_plugins/pluginimpresion%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fesmultiples_plugins/pluginmail_plugins/pluginmailthunderbi%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Frd_plugins/pluginpedido_plugins/pluginpedidoprov_plugins/p%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fluginpresupuesto_plugins/pluginq19_plugins/pluginticket_pl%3F%3D%0A%20%3D%3Fiso-8859-1%3Fq%3Fugins/plugintrazabilidad_src%3F%3D&In-Reply-To=%3C200901070226.30317.tborras%40conetxia.com%3E"
       TITLE="[BulmaGés]r2884 - in trunk/bulmages/bulmafact: plugins plugins/pluginalbaran plugins/pluginalbaranprov plugins/pluginbarcodeopen plugins/plugincobros plugins/plugincompraventa plugins/pluginetiquetado plugins/pluginetiquetas plugins/pluginfactura plugins/pluginfacturaprov plugins/pluginfacturar plugins/pluginimpresionesmultiples plugins/pluginmail plugins/pluginmailthunderbird plugins/pluginpedido plugins/pluginpedidoprov plugins/pluginpresupuesto plugins/pluginq19 plugins/pluginticket plugins/plugintrazabilidad src">tborras en conetxia.com
       </A><BR>
    <I>Mie Ene  7 02:26:30 CET 2009</I>
    <P><UL>
        <LI>Mensaje anterior: <A HREF="000742.html">[BulmaGés] r2884 - in trunk/bulmages/bulmafact:	plugins plugins/pluginalbaran plugins/pluginalbaranprov	plugins/pluginbarcodeopen plugins/plugincobros	plugins/plugincompraventa plugins/pluginetiquetado	plugins/pluginetiquetas plugins/pluginfactura	plugins/pluginfacturaprov plugins/pluginfacturar	plugins/pluginimpresionesmultiples plugins/pluginmail	plugins/pluginmailthunderbird plugins/pluginpedido	plugins/pluginpedidoprov plugins/pluginpresupuesto	plugins/pluginq19 plugins/pluginticket	plugins/plugintrazabilidad src
</A></li>
        <LI>Próximo mensaje: <A HREF="000745.html">[BulmaGés]r2884 - in trunk/bulmages/bulmafact: plugins plugins/pluginalbaran plugins/pluginalbaranprov plugins/pluginbarcodeopen plugins/plugincobros plugins/plugincompraventa plugins/pluginetiquetado plugins/pluginetiquetas plugins/pluginfactura plugins/pluginfacturaprov plugins/pluginfacturar plugins/pluginimpresionesmultiples plugins/pluginmail plugins/pluginmailthunderbird plugins/pluginpedido plugins/pluginpedidoprov plugins/pluginpresupuesto plugins/pluginq19 plugins/pluginticket plugins/plugintrazabilidad	src
</A></li>
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#743">[ fecha ]</a>
              <a href="thread.html#743">[ hilo ]</a>
              <a href="subject.html#743">[ asunto ]</a>
              <a href="author.html#743">[ autor ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Buenas.

Con este commit creo que ya dejo, por el momento, de sacar cosas fuera y me 
centraré en probar como se comporta el sistema con esta vuelta de tuerca.

Quiero comentar los aspectos negativos (pifias) y las cosas a mejorar. 

Problema con los UIC
============

	- Una de las cosas que más problemas ha dado esta en las interdependencias 
entre plugins y en el orden de compilado.
Hay que entender como trabaja Qt primero procesando los ui's con uic i luego 
procesando el codigo con moc para finalmente compilar. 
El uic genera archivos .h de descripcion de la interfaz (ui_xxxxxx.h) que a su 
vez son incluidos por los archivos de clase y eso genera el siguiente 
problema.

PluginFactura tiene:
facturabase.ui que generará ui_facturabase.h
factura.h tiene un include de ui_facturabase.h

PluginPresupuesto tiene una inclusión de factura.h y por tanto tambien tiene 
una inclusion de ui_facturabase.h

cmake compila cada directorio del proyecto por separado pasando en cada 
directorio el uic, luego el moc y finalmente compila.

Por tanto si compilamos PluginPresupuesto sin antes haber compilado 
PluginFactura nos encontraremos con un error de compilación en el hecho de 
que ui_facturabase.h aun no existe.

El problema es, casi siempre salvable, estableciendo ordenes de compilacion y 
dependencias entre plugins. Pero, como no, podemos tener dependencias 
cíclicas que nos fastidian todo el tinglado. 

Por esto me he visto obligado a hacer una guarrada en los CMakeList para que 
en algun caso concreto el uic genere tambien las pantallas de otro plugin. 
Aunque la mejor forma de solucionarlo es conseguir que cmake haga uic en 
todos los subproyectos para luego compilar.


Casting Obligatorio en los Plugins + variable global
==============================

Este es el tema que mencioné en un correo anterior que nos obligaba a tener 
una variable global adicional en plugins.h para poder recuperar punteros 
(void *) y reformarlos con un casting a la clase que nos interesa.
Me preocupa porque asi como esta ahora podría ser un foco de errores con 
multiples Threads.


No estan arreglados los menus de primer nivel
============================

Si no cargamos ningún plugin de compras o de ventas nos quedaran en el 
programa los menus de primer nivel &quot;Compras&quot; o &quot;Ventas&quot; que estarán vacios 
(Sin opciones seleccionabgles). No es un problema de funcionamiento pero si 
es nefasto a nivel visual.

La solución al problema  pasa por quitar dichas opciones de menu y que cada 
uno de los plugins que se adieren al menu comprueben la existencia de dicho 
menu y si estuviese creado colgarse del creado y si no estuviese creado crear 
el menu y colgarse de este.

Esto ya se hace en plugininformes y en plugininformesODS con las opciones de 
informes.

Sin embargo hay un problema que aun no he logrado arreglar y es que al crear 
el menu lo queremos poser en una posición determinada y no al final. Si se 
tratase de intercalar un solo menu esta chupado saber en que posicion debe 
ir. Pero al tratarse de intercalar multiples menus adivinar la posición que 
le corresponde es muy difícil ya que dependiendo del orden en que esten 
colocados los plugins en el archivo de configuracion las posiciones tambien 
variarán.






Bueno, quitando estas tres cosillas (que no parecen muy graves) el tema va 
bien. Además hemos quitado una clase centralizadora (Company ) que marcaba 
demasiado las diferencias entre lo que era plugin y lo que no.

Salut

	


El Wednesday 07 January 2009 01:52:02 <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">svn en mail.berlios.de</A> escribió:
&gt;<i> Author: tborras
</I>&gt;<i> Date: 2009-01-07 01:51:44 +0100 (Wed, 07 Jan 2009)
</I>&gt;<i> New Revision: 2884
</I>&gt;<i>
</I>&gt;<i> Added:
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginpresupuesto/
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginpresupuesto/CMakeLists.txt
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginpresupuesto/README.es
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginpresupuesto/genpreqtoolbutton.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginpresupuesto/genpreqtoolbutton.h
</I>&gt;<i>   
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginpresupuesto/listdescpresupuestoview.
</I>&gt;<i>cpp
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginpresupuesto/listdescpresupuestoview.
</I>&gt;<i>h
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginpresupuesto/listlinpresupuestoview.c
</I>&gt;<i>pp
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginpresupuesto/listlinpresupuestoview.h
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginpresupuesto/pluginpresupuesto.cpp
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginpresupuesto/pluginpresupuesto.h
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginpresupuesto/presupuestoclientebase.u
</I>&gt;<i>i trunk/bulmages/bulmafact/plugins/pluginpresupuesto/presupuestolist.cpp
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginpresupuesto/presupuestolist.h
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginpresupuesto/presupuestoslistbase.ui
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginpresupuesto/presupuestoview.cpp
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginpresupuesto/presupuestoview.h
</I>&gt;<i> Removed:
</I>&gt;<i>    trunk/bulmages/bulmafact/src/listdescpresupuestoview.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/src/listdescpresupuestoview.h
</I>&gt;<i>    trunk/bulmages/bulmafact/src/listlinpresupuestoview.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/src/listlinpresupuestoview.h
</I>&gt;<i>    trunk/bulmages/bulmafact/src/presupuestoclientebase.ui
</I>&gt;<i>    trunk/bulmages/bulmafact/src/presupuestolist.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/src/presupuestolist.h
</I>&gt;<i>    trunk/bulmages/bulmafact/src/presupuestoslistbase.ui
</I>&gt;<i>    trunk/bulmages/bulmafact/src/presupuestoview.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/src/presupuestoview.h
</I>&gt;<i> Modified:
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/CMakeLists.txt
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginalbaran/CMakeLists.txt
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginalbaran/albaranclienteview.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginalbaran/albaranclienteview.h
</I>&gt;<i>   
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginalbaranprov/albaranesproveedor.cpp
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginalbaranprov/albaranproveedorview.cpp
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginbarcodeopen/CMakeLists.txt
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginbarcodeopen/pluginbarcodeopen.cpp
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/plugincobros/CMakeLists.txt
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/plugincompraventa/compraventaview.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginetiquetado/ticketqtoolbutton.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginetiquetas/pluginetiquetas.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginetiquetas/ticketqtoolbutton.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginfactura/CMakeLists.txt
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginfactura/facturaview.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginfactura/facturaview.h
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginfacturaprov/facturapview.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginfacturar/CMakeLists.txt
</I>&gt;<i>   
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginimpresionesmultiples/CMakeLists.txt
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginimpresionesmultiples/impmultqtoolbut
</I>&gt;<i>ton.cpp trunk/bulmages/bulmafact/plugins/pluginmail/CMakeLists.txt
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginmailthunderbird/CMakeLists.txt
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginpedido/CMakeLists.txt
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginpedido/pedidoclientebase.ui
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginpedido/pedidoclienteview.cpp
</I>&gt;<i>   
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginpedidoprov/pedidoproveedorview.cpp
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginpedidoprov/pedidoproveedorview.h
</I>&gt;<i> trunk/bulmages/bulmafact/plugins/pluginq19/pluginq19.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/pluginticket/CMakeLists.txt
</I>&gt;<i>    trunk/bulmages/bulmafact/plugins/plugintrazabilidad/movimientosview.h
</I>&gt;<i>    trunk/bulmages/bulmafact/src/bulmafact.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/src/bulmafact.h
</I>&gt;<i>    trunk/bulmages/bulmafact/src/bulmafactbase.ui
</I>&gt;<i>    trunk/bulmages/bulmafact/src/busquedareferencia.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/src/clientebase.ui
</I>&gt;<i>    trunk/bulmages/bulmafact/src/clienteview.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/src/company.cpp
</I>&gt;<i>    trunk/bulmages/bulmafact/src/company.h
</I>&gt;<i> Log:
</I>&gt;<i> Saco la parte de presupuestos a plugin. Y con esto termino de momento de
</I>&gt;<i> sacar cosas. Tambien hago limpieza en las clases company y bulmafact que
</I>&gt;<i> quedan mucho mas reducidas y pierden la mayor parte de referencias a clases
</I>&gt;<i> que ahora estan distribuidas.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Bulmages-main mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">Bulmages-main en lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">https://lists.berlios.de/mailman/listinfo/bulmages-main</A>
</I>


-- 
Tomeu Borrás Riera
Conetxia Soluciones Informáticas
902 88 11 66
971 29 06 29

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Mensaje anterior: <A HREF="000742.html">[BulmaGés] r2884 - in trunk/bulmages/bulmafact:	plugins plugins/pluginalbaran plugins/pluginalbaranprov	plugins/pluginbarcodeopen plugins/plugincobros	plugins/plugincompraventa plugins/pluginetiquetado	plugins/pluginetiquetas plugins/pluginfactura	plugins/pluginfacturaprov plugins/pluginfacturar	plugins/pluginimpresionesmultiples plugins/pluginmail	plugins/pluginmailthunderbird plugins/pluginpedido	plugins/pluginpedidoprov plugins/pluginpresupuesto	plugins/pluginq19 plugins/pluginticket	plugins/plugintrazabilidad src
</A></li>
	<LI>Próximo mensaje: <A HREF="000745.html">[BulmaGés]r2884 - in trunk/bulmages/bulmafact: plugins plugins/pluginalbaran plugins/pluginalbaranprov plugins/pluginbarcodeopen plugins/plugincobros plugins/plugincompraventa plugins/pluginetiquetado plugins/pluginetiquetas plugins/pluginfactura plugins/pluginfacturaprov plugins/pluginfacturar plugins/pluginimpresionesmultiples plugins/pluginmail plugins/pluginmailthunderbird plugins/pluginpedido plugins/pluginpedidoprov plugins/pluginpresupuesto plugins/pluginq19 plugins/pluginticket plugins/plugintrazabilidad	src
</A></li>
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#743">[ fecha ]</a>
              <a href="thread.html#743">[ hilo ]</a>
              <a href="subject.html#743">[ asunto ]</a>
              <a href="author.html#743">[ autor ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bulmages-main">Más información sobre la lista de distribución Bulmages-main </a><br>
</body></html>
