<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [BulmaGés] [Gitorious] Activity: tborras pushed 8	commits to master...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bulmages-main/2012-April/index.html" >
   <LINK REL="made" HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%20%5BGitorious%5D%20Activity%3A%20tborras%20pushed%208%0A%09commits%20to%20master...&In-Reply-To=%3C20120403125537.C8F87758FB%40steelheart.shortcut.kunder.linpro.no%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="007022.html">
   <LINK REL="Next"  HREF="007024.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[BulmaGés] [Gitorious] Activity: tborras pushed 8	commits to master... </H1>
    <B>Gitorious</B> 
    <A HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%20%5BGitorious%5D%20Activity%3A%20tborras%20pushed%208%0A%09commits%20to%20master...&In-Reply-To=%3C20120403125537.C8F87758FB%40steelheart.shortcut.kunder.linpro.no%3E"
       TITLE="[BulmaGés] [Gitorious] Activity: tborras pushed 8	commits to master...">no-reply en gitorious.org
       </A><BR>
    <I>Mar Abr  3 14:55:37 CEST 2012</I>
    <P><UL>
        <LI>Mensaje anterior: <A HREF="007022.html">[BulmaGés] [Gitorious] Activity: cgarde pushed 2	commits to masterm...
</A></li>
        <LI>Próximo mensaje: <A HREF="007024.html">[BulmaGés] [Gitorious] Activity: cgarde pushed 2	commits to masterm...
</A></li>
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#7023">[ fecha ]</a>
              <a href="thread.html#7023">[ hilo ]</a>
              <a href="subject.html#7023">[ asunto ]</a>
              <a href="author.html#7023">[ autor ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Hello bulmagesmailing,

One of your favorites has a new activity:
------------------------------------------------------------------------
tborras pushed 8 commits to master
master changed from 08774cc to a233fb7

View the commit log at <A HREF="https://gitorious.org/bulmages/bulmages/commits">https://gitorious.org/bulmages/bulmages/commits</A>

View the diff online: <A HREF="https://gitorious.org/bulmages/bulmages/commit/08774cce97430c090feacd9633bc033ee006c844/diffs/a233fb7fc4a0c2a58b89cb643c9837e2bf11c9e7">https://gitorious.org/bulmages/bulmages/commit/08774cce97430c090feacd9633bc033ee006c844/diffs/a233fb7fc4a0c2a58b89cb643c9837e2bf11c9e7</A>

Diff: 

commit a233fb7fc4a0c2a58b89cb643c9837e2bf11c9e7
Merge: 93a39b7 585d4a6
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Tue Apr 3 14:59:57 2012 +0200

    Merge branch 'mirrama'


commit 93a39b7dd8967c5019f607e49ff14b28193c8c0f
Merge: 08774cc cc36422
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Tue Apr 3 14:59:24 2012 +0200

    Merge remote branch 'tborras'


commit 585d4a6126eb08a4f29a681ab06c608f8b30edfd
Merge: 24b6a67 08774cc
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Tue Apr 3 14:58:50 2012 +0200

    Merge branch 'master' into mirrama


commit 24b6a67a9e03d85f14c842e0e60c850dbfb65282
Merge: ca7032a 1761410
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Tue Apr 3 14:56:58 2012 +0200

    Merge branch 'master' into mirrama


commit ca7032accbd0b2a0b18be36941a7523fb04c3227
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Tue Apr 3 14:56:07 2012 +0200

    Agrego un parametro para activar o desactivar el uso de BlScript

diff --git a/bulmages/bulmalib/src/blconfiguration.cpp b/bulmages/bulmalib/src/blconfiguration.cpp
index aaf1caf..5b7c14c 100644
--- a/bulmages/bulmalib/src/blconfiguration.cpp
+++ b/bulmages/bulmalib/src/blconfiguration.cpp
@@ -461,6 +461,8 @@ QString BlConfiguration::name( int i )
         return &quot;CONF_CUPS_TICKET_PRINTER&quot;;
     if ( i == CONF_TPV_CATEGORY_TREE )
        return &quot;CONF_TPV_CATEGORY_TREE&quot;;
+    if ( i == CONF_USE_QSCRIPT )
+       return &quot;CONF_USE_QSCRIPT&quot;;
     return &quot;&quot;;
 }
 
diff --git a/bulmages/bulmalib/src/blconfiguration.h b/bulmages/bulmalib/src/blconfiguration.h
index 90ef64e..771a08f 100644
--- a/bulmages/bulmalib/src/blconfiguration.h
+++ b/bulmages/bulmalib/src/blconfiguration.h
@@ -57,6 +57,9 @@
 #define CONF_USE_DESCARTICULO         53
 
 
+/// Habilitar el uso de scripts de QScript.
+#define CONF_USE_QSCRIPT           70
+
 ///Indica el color de fondo del libro diario. (obsoleto)
 #define CONF_BG_DIARIO               106
 /// Indica el color de la letra del diario en el pijama opcion 1.(obsoleto)
diff --git a/bulmages/bulmalib/src/blform.cpp b/bulmages/bulmalib/src/blform.cpp
index 5091df6..48fe689 100644
--- a/bulmages/bulmalib/src/blform.cpp
+++ b/bulmages/bulmalib/src/blform.cpp
@@ -80,41 +80,45 @@ Importa el script y lo lanza.
 void BlForm::blScript(QObject * obj) {
     BL_FUNC_DEBUG
     
-    QString fileName = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + &quot;blform_&quot;+metaObject()-&gt;className()+&quot;.qs&quot;;
-    QFile scriptFile1(fileName);
-    if (scriptFile1.open(QIODevice::ReadOnly)) {
-	  QTextStream stream(&amp;scriptFile1);
-	  QString contents = stream.readAll();
-	  QScriptValue objectValue = m_myEngine.newQObject(this);
-	  m_myEngine.globalObject().setProperty(metaObject()-&gt;className(), objectValue);
-	  QScriptValue objectValue1 = m_myEngine.newQObject(mainCompany());
-	  m_myEngine.globalObject().setProperty(&quot;MainCompany&quot;, objectValue1);
-	  m_myEngine.importExtension(&quot;qt.core&quot;);
-	  m_myEngine.importExtension(&quot;qt.gui&quot;); 
-	  m_myEngine.evaluate(contents);
-	  scriptFile1.close();
-	  if (m_myEngine.hasUncaughtException()) {
-	    blMsgInfo(m_myEngine.uncaughtException().toString());
-	  } // end if
-    } // end if
+    if (g_confpr-&gt;value(CONF_USE_QSCRIPT) == &quot;TRUE&quot; || g_confpr-&gt;value(CONF_USE_QSCRIPT) == &quot;T&quot; || g_confpr-&gt;value(CONF_USE_QSCRIPT) == &quot;1&quot; ) {
     
+	QString fileName = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + &quot;blform_&quot;+metaObject()-&gt;className()+&quot;.qs&quot;;
+	QFile scriptFile1(fileName);
+	if (scriptFile1.open(QIODevice::ReadOnly)) {
+	      QTextStream stream(&amp;scriptFile1);
+	      QString contents = stream.readAll();
+	      QScriptValue objectValue = m_myEngine.newQObject(this);
+	      m_myEngine.globalObject().setProperty(metaObject()-&gt;className(), objectValue);
+	      QScriptValue objectValue1 = m_myEngine.newQObject(mainCompany());
+	      m_myEngine.globalObject().setProperty(&quot;MainCompany&quot;, objectValue1);
+	      m_myEngine.importExtension(&quot;qt.core&quot;);
+	      m_myEngine.importExtension(&quot;qt.gui&quot;); 
+	      m_myEngine.evaluate(contents);
+	      scriptFile1.close();
+	      if (m_myEngine.hasUncaughtException()) {
+		blMsgInfo(m_myEngine.uncaughtException().toString());
+	      } // end if
+	} // end if
+	
+	
+	fileName = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + &quot;blform&quot;+&quot;.qs&quot;;
+	scriptFile1.setFileName(fileName);
+	if (scriptFile1.open(QIODevice::ReadOnly)) {
+	      QTextStream stream(&amp;scriptFile1);
+	      QString contents = stream.readAll();
+	      QScriptValue objectValue = m_myEngine.newQObject(this);
+	      m_myEngine.globalObject().setProperty(&quot;BlForm&quot;, objectValue);
+	      QScriptValue objectValue1 = m_myEngine.newQObject(mainCompany());
+	      m_myEngine.globalObject().setProperty(&quot;MainCompany&quot;, objectValue1);
+	      m_myEngine.importExtension(&quot;qt.core&quot;);
+	      m_myEngine.importExtension(&quot;qt.gui&quot;); 
+	      m_myEngine.evaluate(contents);
+	      scriptFile1.close();
+	      if (m_myEngine.hasUncaughtException()) {
+		blMsgInfo(m_myEngine.uncaughtException().toString());
+	      } // end if
+	} // end if
     
-    fileName = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + &quot;blform&quot;+&quot;.qs&quot;;
-    scriptFile1.setFileName(fileName);
-    if (scriptFile1.open(QIODevice::ReadOnly)) {
-	  QTextStream stream(&amp;scriptFile1);
-	  QString contents = stream.readAll();
-	  QScriptValue objectValue = m_myEngine.newQObject(this);
-	  m_myEngine.globalObject().setProperty(&quot;BlForm&quot;, objectValue);
-	  QScriptValue objectValue1 = m_myEngine.newQObject(mainCompany());
-	  m_myEngine.globalObject().setProperty(&quot;MainCompany&quot;, objectValue1);
-	  m_myEngine.importExtension(&quot;qt.core&quot;);
-	  m_myEngine.importExtension(&quot;qt.gui&quot;); 
-	  m_myEngine.evaluate(contents);
-	  scriptFile1.close();
-	  if (m_myEngine.hasUncaughtException()) {
-	    blMsgInfo(m_myEngine.uncaughtException().toString());
-	  } // end if
     } // end if
 }
 
@@ -138,26 +142,7 @@ BlForm::BlForm ( BlMainCompany *emp, QWidget *parent, Qt::WFlags f, edmode modo
     setContextMenuPolicy ( Qt::CustomContextMenu );
     connect ( this, SIGNAL ( customContextMenuRequested ( const QPoint &amp; ) ), this, SLOT ( on_customContextMenuRequested ( const QPoint &amp; ) ) );
     m_modo = modo;
-    dialogChanges_readValues();
-    
-    
-    QString fileName = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + &quot;blform.qs&quot;;
-    QFile scriptFile(fileName);
-    if (scriptFile.open(QIODevice::ReadOnly)) {
-	  // handle error
-	  QTextStream stream(&amp;scriptFile);
-	  QString contents = stream.readAll();
-	  QScriptValue objectValue = m_myEngine.newQObject(this);
-	  m_myEngine.globalObject().setProperty(&quot;BlForm&quot;, objectValue);
-	  m_myEngine.importExtension(&quot;qt.core&quot;);
-	  m_myEngine.importExtension(&quot;qt.gui&quot;); 
-	  m_myEngine.evaluate(contents);
-	  scriptFile.close();
-	  if (m_myEngine.hasUncaughtException()) {
-	    blMsgInfo(m_myEngine.uncaughtException().toString());
-	  } // end if
-    } // end if
-    
+    dialogChanges_readValues();    
     
 }
 
diff --git a/bulmages/bulmalib/src/blformlist.cpp b/bulmages/bulmalib/src/blformlist.cpp
index 6c68be4..4186b3b 100644
--- a/bulmages/bulmalib/src/blformlist.cpp
+++ b/bulmages/bulmalib/src/blformlist.cpp
@@ -43,43 +43,48 @@ Importa el script y lo lanza.
 */
 void BlFormList::blScript(QObject * obj) {
     
-    /// Lanzamos los scripts de QScript
-    QString fileName = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + &quot;blformlist_&quot;+metaObject()-&gt;className()+&quot;.qs&quot;;
-    QFile scriptFile1(fileName);
-    if (scriptFile1.open(QIODevice::ReadOnly)) {
-	  QTextStream stream(&amp;scriptFile1);
-	  QString contents = stream.readAll();
-	  QScriptValue objectValue = m_myEngine.newQObject(this);
-	  m_myEngine.globalObject().setProperty(metaObject()-&gt;className(), objectValue);
-	  QScriptValue objectValue1 = m_myEngine.newQObject(mainCompany());
-	  m_myEngine.globalObject().setProperty(&quot;MainCompany&quot;, objectValue1);
-	  m_myEngine.importExtension(&quot;qt.core&quot;);
-	  m_myEngine.importExtension(&quot;qt.gui&quot;); 
-	  m_myEngine.evaluate(contents);
-	  scriptFile1.close();
-	  if (m_myEngine.hasUncaughtException()) {
-	    blMsgInfo(m_myEngine.uncaughtException().toString());
+    if (g_confpr-&gt;value(CONF_USE_QSCRIPT) == &quot;TRUE&quot; || g_confpr-&gt;value(CONF_USE_QSCRIPT) == &quot;T&quot; || g_confpr-&gt;value(CONF_USE_QSCRIPT) == &quot;1&quot; ) {
+  
+	  /// Lanzamos los scripts de QScript
+	  QString fileName = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + &quot;blformlist_&quot;+metaObject()-&gt;className()+&quot;.qs&quot;;
+	  QFile scriptFile1(fileName);
+	  if (scriptFile1.open(QIODevice::ReadOnly)) {
+		QTextStream stream(&amp;scriptFile1);
+		QString contents = stream.readAll();
+		QScriptValue objectValue = m_myEngine.newQObject(this);
+		m_myEngine.globalObject().setProperty(metaObject()-&gt;className(), objectValue);
+		QScriptValue objectValue1 = m_myEngine.newQObject(mainCompany());
+		m_myEngine.globalObject().setProperty(&quot;MainCompany&quot;, objectValue1);
+		m_myEngine.importExtension(&quot;qt.core&quot;);
+		m_myEngine.importExtension(&quot;qt.gui&quot;); 
+		m_myEngine.evaluate(contents);
+		scriptFile1.close();
+		if (m_myEngine.hasUncaughtException()) {
+		  blMsgInfo(m_myEngine.uncaughtException().toString());
+		} // end if
 	  } // end if
-    } // end if
-    
-    
-    fileName = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + &quot;blformlist&quot;+&quot;.qs&quot;;
-    scriptFile1.setFileName(fileName);
-    if (scriptFile1.open(QIODevice::ReadOnly)) {
-	  QTextStream stream(&amp;scriptFile1);
-	  QString contents = stream.readAll();
-	  QScriptValue objectValue = m_myEngine.newQObject(this);
-	  m_myEngine.globalObject().setProperty(&quot;BlForm&quot;, objectValue);
-	  QScriptValue objectValue1 = m_myEngine.newQObject(mainCompany());
-	  m_myEngine.globalObject().setProperty(&quot;MainCompany&quot;, objectValue1);
-	  m_myEngine.importExtension(&quot;qt.core&quot;);
-	  m_myEngine.importExtension(&quot;qt.gui&quot;); 
-	  m_myEngine.evaluate(contents);
-	  scriptFile1.close();
-	  if (m_myEngine.hasUncaughtException()) {
-	    blMsgInfo(m_myEngine.uncaughtException().toString());
+	  
+	  
+	  fileName = g_confpr-&gt;value( CONF_DIR_OPENREPORTS ) + &quot;blformlist&quot;+&quot;.qs&quot;;
+	  scriptFile1.setFileName(fileName);
+	  if (scriptFile1.open(QIODevice::ReadOnly)) {
+		QTextStream stream(&amp;scriptFile1);
+		QString contents = stream.readAll();
+		QScriptValue objectValue = m_myEngine.newQObject(this);
+		m_myEngine.globalObject().setProperty(&quot;BlForm&quot;, objectValue);
+		QScriptValue objectValue1 = m_myEngine.newQObject(mainCompany());
+		m_myEngine.globalObject().setProperty(&quot;MainCompany&quot;, objectValue1);
+		m_myEngine.importExtension(&quot;qt.core&quot;);
+		m_myEngine.importExtension(&quot;qt.gui&quot;); 
+		m_myEngine.evaluate(contents);
+		scriptFile1.close();
+		if (m_myEngine.hasUncaughtException()) {
+		  blMsgInfo(m_myEngine.uncaughtException().toString());
+		} // end if
 	  } // end if
+    
     } // end if
+    
 }
 
 
diff --git a/bulmages/installbulmages/bulmages.conf.in b/bulmages/installbulmages/bulmages.conf.in
index d228a9c..0ca2d7f 100644
--- a/bulmages/installbulmages/bulmages.conf.in
+++ b/bulmages/installbulmages/bulmages.conf.in
@@ -110,6 +110,9 @@ CONF_ASK_BEFORE_EXIT			TRUE
 # Si se tiene el VisorHTML Instalado esta es la URL que hay que visitar
 CONF_URL_CONTENTS		<A HREF="http://www.iglues.org">http://www.iglues.org</A>
 
+# Usar QScript (llamar a los archivos .qs de openreports)
+CONF_USE_QSCRIPT                        FALSE
+
 # NOTA PARA DESARROLLADORES:
 # --------------------------
 # Atencion: Las lineas que se agregen en este archivo deben
diff --git a/bulmages/installbulmages/rev-conf/rev-bulmages-0_13.conf b/bulmages/installbulmages/rev-conf/rev-bulmages-0_13.conf
index fc570be..ae5526c 100644
--- a/bulmages/installbulmages/rev-conf/rev-bulmages-0_13.conf
+++ b/bulmages/installbulmages/rev-conf/rev-bulmages-0_13.conf
@@ -1,2 +1,5 @@
 #Impresora de tickets por defecto.
-CONF_CUPS_TICKET_PRINTER        None
\ No newline at end of file
+CONF_CUPS_TICKET_PRINTER        None
+
+# Usar QScript
+CONF_USE_QSCRIPT                FALSE
\ No newline at end of file

commit cc364227062c1d95382efa04b9e4f15c29ac43f2
Merge: db6cf1b 3d52b4e
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Mon Apr 2 20:02:47 2012 +0200

    Merge branch 'mirrama'


commit 3d52b4e9fdf36e646d0f86c9f840cb39d0b286e5
Merge: 6c72cab 7d06dd2
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Mon Apr 2 19:54:18 2012 +0200

    Merge branch 'master' into mirrama


commit 6c72cab4d7de208d994c60146985771a2d0f349d
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Mon Apr 2 19:53:27 2012 +0200

    Cambios en los README actualizando información

diff --git a/bulmages/README.es b/bulmages/README.es
index ece05d5..4fe2218 100644
--- a/bulmages/README.es
+++ b/bulmages/README.es
@@ -1,7 +1,7 @@
 ========================================
 Software de Gestión Empresarial BulmaGés
 
-(C) 2003 - 2010 Asociación IGLUES
+(C) 2003 - 2012 Asociación IGLUES
 <A HREF="http://www.iglues.org">http://www.iglues.org</A>
 
 ========================================


<A HREF="https://gitorious.org/bulmages">https://gitorious.org/bulmages</A>
------------------------------------------------------------------------

You are receiving this email because you have chosen to be notified by
email whenever this favorite has new activity. You can manage your
favorite subscriptions at <A HREF="https://gitorious.org/favorites">https://gitorious.org/favorites</A>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Mensaje anterior: <A HREF="007022.html">[BulmaGés] [Gitorious] Activity: cgarde pushed 2	commits to masterm...
</A></li>
	<LI>Próximo mensaje: <A HREF="007024.html">[BulmaGés] [Gitorious] Activity: cgarde pushed 2	commits to masterm...
</A></li>
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#7023">[ fecha ]</a>
              <a href="thread.html#7023">[ hilo ]</a>
              <a href="subject.html#7023">[ asunto ]</a>
              <a href="author.html#7023">[ autor ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bulmages-main">Más información sobre la lista de distribución Bulmages-main </a><br>
</body></html>
