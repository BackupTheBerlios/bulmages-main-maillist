<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [BulmaGÈs] [Gitorious] Activity: tborras pushed 20	commits to master...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bulmages-main/2013-April/index.html" >
   <LINK REL="made" HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%20%5BGitorious%5D%20Activity%3A%20tborras%20pushed%2020%0A%09commits%20to%20master...&In-Reply-To=%3C20130427102324.9F71AF45%40ratt.gitorious.c.bitbit.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <LINK REL="Previous"  HREF="007569.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[BulmaGÈs] [Gitorious] Activity: tborras pushed 20	commits to master... </H1>
    <B>Gitorious</B> 
    <A HREF="mailto:bulmages-main%40lists.berlios.de?Subject=Re%3A%20%3D%3Futf-8%3Fb%3FW0J1bG1hR8Opc10%3D%3F%3D%20%5BGitorious%5D%20Activity%3A%20tborras%20pushed%2020%0A%09commits%20to%20master...&In-Reply-To=%3C20130427102324.9F71AF45%40ratt.gitorious.c.bitbit.net%3E"
       TITLE="[BulmaGÈs] [Gitorious] Activity: tborras pushed 20	commits to master...">no-reply en gitorious.org
       </A><BR>
    <I>Sab Abr 27 12:23:24 CEST 2013</I>
    <P><UL>
        <LI>Mensaje anterior: <A HREF="007569.html">[BulmaGÈs] [Gitorious] Activity: tborras deleted	branch plantillasim...
</A></li>
        
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#7570">[ fecha ]</a>
              <a href="thread.html#7570">[ hilo ]</a>
              <a href="subject.html#7570">[ asunto ]</a>
              <a href="author.html#7570">[ autor ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Hello bulmagesmailing,

One of your favorites has a new activity:
------------------------------------------------------------------------
tborras pushed 20 commits to master
master changed from 8343d54 to abe49d7

View the commit log at <A HREF="https://gitorious.org/bulmages/bulmages/commits">https://gitorious.org/bulmages/bulmages/commits</A>

View the diff online: <A HREF="https://gitorious.org/bulmages/bulmages/commit/8343d54269e443658e0b21ece581670001fe66b9/diffs/abe49d79f03782b7ad24307d735db880ca7c88ad">https://gitorious.org/bulmages/bulmages/commit/8343d54269e443658e0b21ece581670001fe66b9/diffs/abe49d79f03782b7ad24307d735db880ca7c88ad</A>

Diff: 

commit abe49d79f03782b7ad24307d735db880ca7c88ad
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Sat Apr 27 12:22:11 2013 +0200

    Arreglo las plantillas de impresion para que usen plantillas

diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/contrato_plantilla1.odt b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/contrato_plantilla1.odt
index 1416913..4ec0dc6 100644
Binary files a/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/contrato_plantilla1.odt and b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/contrato_plantilla1.odt differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/README.es b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/README.es
index aa82472..205e137 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/README.es
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/README.es
@@ -38,7 +38,7 @@ Dependencias: libpluginbf_cliente.so
 
 Incompatibles:
 
-Reports: albaran.rml; blform_AlbaranClienteView.qs
+Reports: albaran.rml; blform_AlbaranClienteView.qs; plantilla_frame.rml; plantilla_finalbaran.rml; plantilla_barcodealbaran.rml; plantilla_desalbaran.rml; plantilla_cliente.rml; plantilla_empresa.rml; plantilla_cabeceraalbaran.rml
 
 Categorias: Facturacion generica;Talleres;Distribuci√≥n;Distribuci√≥n Alimentaria;Servicios Generales;
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/ca/plantilla_barcodealbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/ca/plantilla_barcodealbaran.rml
new file mode 100644
index 0000000..5fe9631
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/ca/plantilla_barcodealbaran.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;ALB [idalbaran] [numalbaran] [refalbaran]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/ca/plantilla_cabeceraalbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/ca/plantilla_cabeceraalbaran.rml
new file mode 100644
index 0000000..a30f771
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/ca/plantilla_cabeceraalbaran.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha albaran--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha albar√°n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ albar√°n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fechaalbaran]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numalbaran]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refalbaran]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/ca/plantilla_desalbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/ca/plantilla_desalbaran.rml
new file mode 100644
index 0000000..6884602
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/ca/plantilla_desalbaran.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lalbaran WHERE descuentolalbaran &gt; 0 AND idalbaran=[idalbaran])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlalbaran*pvplalbaran*(1-descuentolalbaran/100))::NUMERIC(12,2) AS totallalbaran FROM lalbaran LEFT JOIN articulo ON lalbaran.idarticulo=articulo.idarticulo WHERE idalbaran= [idalbaran]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclalbaran]&lt;/td&gt;
+&lt;td&gt;[cantlalbaran]&lt;/td&gt;
+&lt;td&gt;[pvplalbaran]&lt;/td&gt;
+&lt;td&gt;[totallalbaran]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlalbaran*pvplalbaran*(1-descuentolalbaran/100))::NUMERIC(12,2) AS totallalbaran FROM lalbaran LEFT JOIN articulo ON lalbaran.idarticulo=articulo.idarticulo WHERE idalbaran= [idalbaran]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclalbaran]&lt;/td&gt;
+&lt;td&gt;[cantlalbaran]&lt;/td&gt;
+&lt;td&gt;[pvplalbaran]&lt;/td&gt;
+&lt;td&gt;[descuentolalbaran]%&lt;/td&gt;
+&lt;td&gt;[totallalbaran]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dalbaran WHERE idalbaran=[idalbaran]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dalbaran WHERE idalbaran=[idalbaran]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdalbaran]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondalbaran]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentalbaran FROM albaran WHERE length(comentalbaran) &gt; 0 AND idalbaran = [idalbaran]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentalbaran,'&lt;','\n') AS comment FROM albaran WHERE length(comentalbaran) &gt; 0 AND idalbaran = [idalbaran]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/ca/plantilla_finalbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/ca/plantilla_finalbaran.rml
new file mode 100644
index 0000000..3fafd48
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/ca/plantilla_finalbaran.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT falbaran FROM albaran WHERE idalbaran = [idalbaran]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT falbaran FROM albaran WHERE idalbaran = [idalbaran]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondalbaran/100),0) AS tdesc FROM dalbaran WHERE idalbaran=[idalbaran]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalalbaran FROM lalbaran WHERE idalbaran = [idalbaran]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlalbaran * pvplalbaran * (1-descuentolalbaran/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlalbaran * pvplalbaran * (1-descuentolalbaran/100)*(ivalalbaran/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lalbaran WHERE idalbaran=[idalbaran] AND ivalalbaran=[ivalalbaran]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalalbaran]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT falbaran FROM albaran WHERE idalbaran = [idalbaran]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[falbaran]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idalbaran=[idalbaran]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idalbaran=[idalbaran]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM albaran WHERE idalbaran=[idalbaran] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/en/plantilla_barcodealbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/en/plantilla_barcodealbaran.rml
new file mode 100644
index 0000000..5fe9631
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/en/plantilla_barcodealbaran.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;ALB [idalbaran] [numalbaran] [refalbaran]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/en/plantilla_cabeceraalbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/en/plantilla_cabeceraalbaran.rml
new file mode 100644
index 0000000..a30f771
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/en/plantilla_cabeceraalbaran.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha albaran--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha albar√°n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ albar√°n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fechaalbaran]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numalbaran]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refalbaran]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/en/plantilla_desalbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/en/plantilla_desalbaran.rml
new file mode 100644
index 0000000..6884602
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/en/plantilla_desalbaran.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lalbaran WHERE descuentolalbaran &gt; 0 AND idalbaran=[idalbaran])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlalbaran*pvplalbaran*(1-descuentolalbaran/100))::NUMERIC(12,2) AS totallalbaran FROM lalbaran LEFT JOIN articulo ON lalbaran.idarticulo=articulo.idarticulo WHERE idalbaran= [idalbaran]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclalbaran]&lt;/td&gt;
+&lt;td&gt;[cantlalbaran]&lt;/td&gt;
+&lt;td&gt;[pvplalbaran]&lt;/td&gt;
+&lt;td&gt;[totallalbaran]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlalbaran*pvplalbaran*(1-descuentolalbaran/100))::NUMERIC(12,2) AS totallalbaran FROM lalbaran LEFT JOIN articulo ON lalbaran.idarticulo=articulo.idarticulo WHERE idalbaran= [idalbaran]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclalbaran]&lt;/td&gt;
+&lt;td&gt;[cantlalbaran]&lt;/td&gt;
+&lt;td&gt;[pvplalbaran]&lt;/td&gt;
+&lt;td&gt;[descuentolalbaran]%&lt;/td&gt;
+&lt;td&gt;[totallalbaran]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dalbaran WHERE idalbaran=[idalbaran]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dalbaran WHERE idalbaran=[idalbaran]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdalbaran]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondalbaran]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentalbaran FROM albaran WHERE length(comentalbaran) &gt; 0 AND idalbaran = [idalbaran]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentalbaran,'&lt;','\n') AS comment FROM albaran WHERE length(comentalbaran) &gt; 0 AND idalbaran = [idalbaran]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/en/plantilla_finalbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/en/plantilla_finalbaran.rml
new file mode 100644
index 0000000..3fafd48
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/en/plantilla_finalbaran.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT falbaran FROM albaran WHERE idalbaran = [idalbaran]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT falbaran FROM albaran WHERE idalbaran = [idalbaran]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondalbaran/100),0) AS tdesc FROM dalbaran WHERE idalbaran=[idalbaran]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalalbaran FROM lalbaran WHERE idalbaran = [idalbaran]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlalbaran * pvplalbaran * (1-descuentolalbaran/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlalbaran * pvplalbaran * (1-descuentolalbaran/100)*(ivalalbaran/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lalbaran WHERE idalbaran=[idalbaran] AND ivalalbaran=[ivalalbaran]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalalbaran]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT falbaran FROM albaran WHERE idalbaran = [idalbaran]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[falbaran]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idalbaran=[idalbaran]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idalbaran=[idalbaran]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM albaran WHERE idalbaran=[idalbaran] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/albaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/albaran.rml
index 5647585..6579bfb 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/albaran.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/albaran.rml
@@ -9,66 +9,23 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha albaran:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ albaran:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fechaalbaran]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numalbaran]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refalbaran]&lt;/drawString&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cabeceraalbaran.rml&quot; --&gt;
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- ALBAR√ÅN -&lt;/drawCentredString&gt;
 
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
 
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,141 +35,13 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descalbaran, cantalbaran, pvpalbaran, subtotalalbaran]	
-		
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;Total dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdalbaran]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondalbaran]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdalbaran]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentalbaran FROM albaran WHERE length(comentalbaran) &gt; 0 AND idalbaran = [idalbaran]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentalbaran FROM albaran WHERE length(comentalbaran) &gt; 0 AND idalbaran = [idalbaran]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentalbaran,l]&lt;/para&gt;&lt;/td&gt;
-
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desalbaran.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechaalbaran]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechaalbaran]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;/blockTable&gt;
-                                        &lt;/td&gt;
-                                &lt;/tr&gt;
-                                &lt;tr&gt;
-                                        &lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-                                                &lt;!--TOTALES--&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechaalbaran]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf)::NUMERIC(12,2) AS teirpf FROM irpf WHERE fechairpf &lt;= '[fechaalbaran]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[teirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;!--END TOTALES--&gt;
-                                                &lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-
-
-&lt;storyPlace x=&quot;16cm&quot; y=&quot;0cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;16cm&quot; y=&quot;0cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;ALB [idalbaran] [numalbaran] [refalbaran]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finalbaran.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodealbaran.rml&quot; --&gt;
 
 
 &lt;/story&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/plantilla_barcodealbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/plantilla_barcodealbaran.rml
new file mode 100644
index 0000000..5fe9631
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/plantilla_barcodealbaran.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;ALB [idalbaran] [numalbaran] [refalbaran]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/plantilla_cabeceraalbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/plantilla_cabeceraalbaran.rml
new file mode 100644
index 0000000..a30f771
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/plantilla_cabeceraalbaran.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha albaran--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha albar√°n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ albar√°n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fechaalbaran]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numalbaran]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refalbaran]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/plantilla_desalbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/plantilla_desalbaran.rml
new file mode 100644
index 0000000..6884602
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/plantilla_desalbaran.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lalbaran WHERE descuentolalbaran &gt; 0 AND idalbaran=[idalbaran])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlalbaran*pvplalbaran*(1-descuentolalbaran/100))::NUMERIC(12,2) AS totallalbaran FROM lalbaran LEFT JOIN articulo ON lalbaran.idarticulo=articulo.idarticulo WHERE idalbaran= [idalbaran]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclalbaran]&lt;/td&gt;
+&lt;td&gt;[cantlalbaran]&lt;/td&gt;
+&lt;td&gt;[pvplalbaran]&lt;/td&gt;
+&lt;td&gt;[totallalbaran]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlalbaran*pvplalbaran*(1-descuentolalbaran/100))::NUMERIC(12,2) AS totallalbaran FROM lalbaran LEFT JOIN articulo ON lalbaran.idarticulo=articulo.idarticulo WHERE idalbaran= [idalbaran]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclalbaran]&lt;/td&gt;
+&lt;td&gt;[cantlalbaran]&lt;/td&gt;
+&lt;td&gt;[pvplalbaran]&lt;/td&gt;
+&lt;td&gt;[descuentolalbaran]%&lt;/td&gt;
+&lt;td&gt;[totallalbaran]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dalbaran WHERE idalbaran=[idalbaran]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dalbaran WHERE idalbaran=[idalbaran]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdalbaran]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondalbaran]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentalbaran FROM albaran WHERE length(comentalbaran) &gt; 0 AND idalbaran = [idalbaran]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentalbaran,'&lt;','\n') AS comment FROM albaran WHERE length(comentalbaran) &gt; 0 AND idalbaran = [idalbaran]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/plantilla_finalbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/plantilla_finalbaran.rml
new file mode 100644
index 0000000..3fafd48
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/es/plantilla_finalbaran.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT falbaran FROM albaran WHERE idalbaran = [idalbaran]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT falbaran FROM albaran WHERE idalbaran = [idalbaran]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondalbaran/100),0) AS tdesc FROM dalbaran WHERE idalbaran=[idalbaran]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalalbaran FROM lalbaran WHERE idalbaran = [idalbaran]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlalbaran * pvplalbaran * (1-descuentolalbaran/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlalbaran * pvplalbaran * (1-descuentolalbaran/100)*(ivalalbaran/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lalbaran WHERE idalbaran=[idalbaran] AND ivalalbaran=[ivalalbaran]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalalbaran]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT falbaran FROM albaran WHERE idalbaran = [idalbaran]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[falbaran]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idalbaran=[idalbaran]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idalbaran=[idalbaran]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM albaran WHERE idalbaran=[idalbaran] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/fr/plantilla_barcodealbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/fr/plantilla_barcodealbaran.rml
new file mode 100644
index 0000000..5fe9631
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/fr/plantilla_barcodealbaran.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;ALB [idalbaran] [numalbaran] [refalbaran]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/fr/plantilla_cabeceraalbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/fr/plantilla_cabeceraalbaran.rml
new file mode 100644
index 0000000..a30f771
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/fr/plantilla_cabeceraalbaran.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha albaran--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha albar√°n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ albar√°n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fechaalbaran]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numalbaran]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refalbaran]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/fr/plantilla_desalbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/fr/plantilla_desalbaran.rml
new file mode 100644
index 0000000..6884602
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/fr/plantilla_desalbaran.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lalbaran WHERE descuentolalbaran &gt; 0 AND idalbaran=[idalbaran])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlalbaran*pvplalbaran*(1-descuentolalbaran/100))::NUMERIC(12,2) AS totallalbaran FROM lalbaran LEFT JOIN articulo ON lalbaran.idarticulo=articulo.idarticulo WHERE idalbaran= [idalbaran]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclalbaran]&lt;/td&gt;
+&lt;td&gt;[cantlalbaran]&lt;/td&gt;
+&lt;td&gt;[pvplalbaran]&lt;/td&gt;
+&lt;td&gt;[totallalbaran]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlalbaran*pvplalbaran*(1-descuentolalbaran/100))::NUMERIC(12,2) AS totallalbaran FROM lalbaran LEFT JOIN articulo ON lalbaran.idarticulo=articulo.idarticulo WHERE idalbaran= [idalbaran]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclalbaran]&lt;/td&gt;
+&lt;td&gt;[cantlalbaran]&lt;/td&gt;
+&lt;td&gt;[pvplalbaran]&lt;/td&gt;
+&lt;td&gt;[descuentolalbaran]%&lt;/td&gt;
+&lt;td&gt;[totallalbaran]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dalbaran WHERE idalbaran=[idalbaran]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dalbaran WHERE idalbaran=[idalbaran]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdalbaran]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondalbaran]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentalbaran FROM albaran WHERE length(comentalbaran) &gt; 0 AND idalbaran = [idalbaran]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentalbaran,'&lt;','\n') AS comment FROM albaran WHERE length(comentalbaran) &gt; 0 AND idalbaran = [idalbaran]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/fr/plantilla_finalbaran.rml b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/fr/plantilla_finalbaran.rml
new file mode 100644
index 0000000..3fafd48
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientealbaran/openreports/fr/plantilla_finalbaran.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT falbaran FROM albaran WHERE idalbaran = [idalbaran]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT falbaran FROM albaran WHERE idalbaran = [idalbaran]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondalbaran/100),0) AS tdesc FROM dalbaran WHERE idalbaran=[idalbaran]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalalbaran FROM lalbaran WHERE idalbaran = [idalbaran]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlalbaran * pvplalbaran * (1-descuentolalbaran/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlalbaran * pvplalbaran * (1-descuentolalbaran/100)*(ivalalbaran/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lalbaran WHERE idalbaran=[idalbaran] AND ivalalbaran=[ivalalbaran]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalalbaran]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT falbaran FROM albaran WHERE idalbaran = [idalbaran]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[falbaran]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idalbaran=[idalbaran]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idalbaran=[idalbaran]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM albaran WHERE idalbaran=[idalbaran] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.ca b/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.ca
index 33f74ea..830ec3e 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.ca
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.ca
@@ -36,7 +36,7 @@ Dependencias: libpluginbf_cliente.so
 
 Incompatibles:
 
-Reports: factura.rml; blform_FacturaView.qs; inf_detalleventasarticulo.pys; inf_resumcompras.pys; inf_familiacliente.pys; inf_ventas.ui; impers_factura_grafica.rml; impers_factura_copia.rml; impers_factura_pagada.rml
+Reports: factura.rml; blform_FacturaView.qs; inf_detalleventasarticulo.pys; inf_resumcompras.pys; inf_familiacliente.pys; inf_ventas.ui; impers_factura_grafica.rml; impers_factura_copia.rml; impers_factura_pagada.rml; plantilla_frame.rml; plantilla_finfra.rml; plantilla_barcode.rml; plantilla_desfactura.rml; plantilla_cliente.rml; plantilla_empresa.rml; plantilla_cabecerafactura.rml
 
 Categorias: Facturaci√≥ gen√®rica;
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.en b/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.en
index d3df149..31b103e 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.en
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.en
@@ -30,7 +30,7 @@ Dependencias: libpluginbf_cliente.so
 
 Incompatibles:
 
-Reports: factura.rml; blform_FacturaView.qs; inf_detalleventasarticulo.pys; inf_resumcompras.pys; inf_familiacliente.pys; inf_ventas.ui; impers_factura_grafica.rml; impers_factura_copia.rml; impers_factura_pagada.rml
+Reports: factura.rml; blform_FacturaView.qs; inf_detalleventasarticulo.pys; inf_resumcompras.pys; inf_familiacliente.pys; inf_ventas.ui; impers_factura_grafica.rml; impers_factura_copia.rml; impers_factura_pagada.rml; plantilla_frame.rml; plantilla_finfra.rml; plantilla_barcode.rml; plantilla_desfactura.rml; plantilla_cliente.rml; plantilla_empresa.rml; plantilla_cabecerafactura.rml
 
 Categorias: Generic invoicing;
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.es b/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.es
index c204f70..879a23b 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.es
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.es
@@ -36,7 +36,7 @@ Dependencias: libpluginbf_cliente.so
 
 Incompatibles:
 
-Reports: factura.rml; blform_FacturaView.qs; inf_detalleventasarticulo.pys; inf_resumcompras.pys; inf_familiacliente.pys; inf_ventas.ui; impers_factura_grafica.rml; impers_factura_copia.rml; impers_factura_pagada.rml
+Reports: factura.rml; blform_FacturaView.qs; inf_detalleventasarticulo.pys; inf_resumcompras.pys; inf_familiacliente.pys; inf_ventas.ui; impers_factura_grafica.rml; impers_factura_copia.rml; impers_factura_pagada.rml; plantilla_frame.rml; plantilla_finfra.rml; plantilla_barcode.rml; plantilla_desfactura.rml; plantilla_cliente.rml; plantilla_empresa.rml; plantilla_cabecerafactura.rml
 
 Categorias: Facturacion generica;Talleres;Distribuci√≥n; Distribuci√≥n Alimentaria;Servicios Generales;Alquileres;
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.fr b/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.fr
index 4752e87..e063761 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.fr
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.fr
@@ -29,7 +29,7 @@ Dependencias: libpluginbf_cliente.so
 
 Incompatibles:
 
-Reports: factura.rml; blform_FacturaView.qs; inf_detalleventasarticulo.pys; inf_resumcompras.pys; inf_familiacliente.pys; inf_ventas.ui; impers_factura_grafica.rml; impers_factura_copia.rml; impers_factura_pagada.rml
+Reports: factura.rml; blform_FacturaView.qs; inf_detalleventasarticulo.pys; inf_resumcompras.pys; inf_familiacliente.pys; inf_ventas.ui; impers_factura_grafica.rml; impers_factura_copia.rml; impers_factura_pagada.rml; plantilla_frame.rml; plantilla_finfra.rml; plantilla_barcode.rml; plantilla_desfactura.rml; plantilla_cliente.rml; plantilla_empresa.rml; plantilla_cabecerafactura.rml
 
 Categorias: Facturation generique;
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/factura.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/factura.rml
index 0c5ca9c..e0dd7f5 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/factura.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/factura.rml
@@ -9,66 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,155 +30,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--LINEAS DETALLE--&gt;
-&lt;tr&gt;
-&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
-&lt;td&gt;[desclfactura]&lt;/td&gt;
-&lt;td&gt;[cantlfactura]&lt;/td&gt;
-&lt;td&gt;[pvplfactura]&lt;/td&gt;
-&lt;td&gt;[totallfactura]&lt;/td&gt;
-&lt;/tr&gt;
-&lt;!--END LINEAS DETALLE--&gt;
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-
-
-&lt;!-- QUERY = &quot;SELECT * FROM factura WHERE idfactura=[idfactura] AND idforma_pago = 8 &quot;--&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
-  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; 2100 0650 44 0200224097&lt;/para&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-
-&lt;!-- END QUERY --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
+
+
 
 &lt;/story&gt;
 &lt;/document&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/impers_factura_copia.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/impers_factura_copia.rml
index ec91620..26f225f 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/impers_factura_copia.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/impers_factura_copia.rml
@@ -6,9 +6,6 @@
 		&lt;pageGraphics&gt;
 		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
 
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-
 		&lt;!-- PAGADA --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;34&quot;/&gt;
 		&lt;fill color=&quot;(1,0.3,0.3)&quot;/&gt;
@@ -21,67 +18,21 @@
 		&lt;rotate degrees=&quot;-20&quot;/&gt;                                                                         
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;6.5cm&quot;/&gt; 
 		
-		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;		
+		
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -91,137 +42,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descfactura, cantfactura, pvpfactura, subtotalfactura]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/impers_factura_grafica.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/impers_factura_grafica.rml
index ecffe5d..3d27c60 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/impers_factura_grafica.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/impers_factura_grafica.rml
@@ -9,67 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -79,130 +30,13 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descfactura, cantfactura, pvpfactura, subtotalfactura]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
+	
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
 
-	&lt;/blockTable&gt;
 
-	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
 
 
 &lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;5cm&quot; height=&quot;5cm&quot;&gt;
@@ -254,12 +88,5 @@ ORDER BY fin&quot;--&gt;
 &lt;/place --&gt;
 &lt;/storyPlace&gt;
 
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-
-
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/impers_factura_pagada.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/impers_factura_pagada.rml
index 89d518a..9b78a93 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/impers_factura_pagada.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/impers_factura_pagada.rml
@@ -6,9 +6,6 @@
 		&lt;pageGraphics&gt;
 		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
 
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-
 		&lt;!-- PAGADA --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;34&quot;/&gt;
 		&lt;fill color=&quot;(1,0.3,0.3)&quot;/&gt;
@@ -21,67 +18,21 @@
 		&lt;rotate degrees=&quot;-20&quot;/&gt;                                                                         
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;6.5cm&quot;/&gt; 
 		
-		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -91,137 +42,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descfactura, cantfactura, pvpfactura, subtotalfactura]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/plantilla_barcode.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/plantilla_barcode.rml
new file mode 100644
index 0000000..427aa0f
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/plantilla_barcode.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/plantilla_cabecerafactura.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/plantilla_cabecerafactura.rml
new file mode 100644
index 0000000..a1771d9
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/plantilla_cabecerafactura.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha factura--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/plantilla_desfactura.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/plantilla_desfactura.rml
new file mode 100644
index 0000000..1f34048
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/plantilla_desfactura.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lfactura WHERE descuentolfactura &gt; 0 AND idfactura=[idfactura])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlfactura*pvplfactura*(1-descuentolfactura/100))::NUMERIC(12,2) AS totallfactura FROM lfactura LEFT JOIN articulo ON lfactura.idarticulo=articulo.idarticulo WHERE idfactura= [idfactura]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclfactura]&lt;/td&gt;
+&lt;td&gt;[cantlfactura]&lt;/td&gt;
+&lt;td&gt;[pvplfactura]&lt;/td&gt;
+&lt;td&gt;[totallfactura]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlfactura*pvplfactura*(1-descuentolfactura/100))::NUMERIC(12,2) AS totallfactura FROM lfactura LEFT JOIN articulo ON lfactura.idarticulo=articulo.idarticulo WHERE idfactura= [idfactura]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclfactura]&lt;/td&gt;
+&lt;td&gt;[cantlfactura]&lt;/td&gt;
+&lt;td&gt;[pvplfactura]&lt;/td&gt;
+&lt;td&gt;[descuentolfactura]%&lt;/td&gt;
+&lt;td&gt;[totallfactura]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dfactura WHERE idfactura=[idfactura]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dfactura WHERE idfactura=[idfactura]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentfactura,'&lt;','\n') AS comment FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/plantilla_finfra.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/plantilla_finfra.rml
new file mode 100644
index 0000000..27c28bc
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/ca/plantilla_finfra.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = [idfactura]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = [idfactura]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondfactura/100),0) AS tdesc FROM dfactura WHERE idfactura=[idfactura]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalfactura FROM lfactura WHERE idfactura = [idfactura]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlfactura * pvplfactura * (1-descuentolfactura/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlfactura * pvplfactura * (1-descuentolfactura/100)*(ivalfactura/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lfactura WHERE idfactura=[idfactura] AND ivalfactura=[ivalfactura]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalfactura]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = [idfactura]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM factura WHERE idfactura=[idfactura] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/factura.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/factura.rml
index 0c5ca9c..e0dd7f5 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/factura.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/factura.rml
@@ -9,66 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,155 +30,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--LINEAS DETALLE--&gt;
-&lt;tr&gt;
-&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
-&lt;td&gt;[desclfactura]&lt;/td&gt;
-&lt;td&gt;[cantlfactura]&lt;/td&gt;
-&lt;td&gt;[pvplfactura]&lt;/td&gt;
-&lt;td&gt;[totallfactura]&lt;/td&gt;
-&lt;/tr&gt;
-&lt;!--END LINEAS DETALLE--&gt;
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-
-
-&lt;!-- QUERY = &quot;SELECT * FROM factura WHERE idfactura=[idfactura] AND idforma_pago = 8 &quot;--&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
-  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; 2100 0650 44 0200224097&lt;/para&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-
-&lt;!-- END QUERY --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
+
+
 
 &lt;/story&gt;
 &lt;/document&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/impers_factura_copia.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/impers_factura_copia.rml
index ec91620..26f225f 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/impers_factura_copia.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/impers_factura_copia.rml
@@ -6,9 +6,6 @@
 		&lt;pageGraphics&gt;
 		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
 
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-
 		&lt;!-- PAGADA --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;34&quot;/&gt;
 		&lt;fill color=&quot;(1,0.3,0.3)&quot;/&gt;
@@ -21,67 +18,21 @@
 		&lt;rotate degrees=&quot;-20&quot;/&gt;                                                                         
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;6.5cm&quot;/&gt; 
 		
-		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;		
+		
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -91,137 +42,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descfactura, cantfactura, pvpfactura, subtotalfactura]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/impers_factura_grafica.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/impers_factura_grafica.rml
index ecffe5d..3d27c60 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/impers_factura_grafica.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/impers_factura_grafica.rml
@@ -9,67 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -79,130 +30,13 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descfactura, cantfactura, pvpfactura, subtotalfactura]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
+	
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
 
-	&lt;/blockTable&gt;
 
-	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
 
 
 &lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;5cm&quot; height=&quot;5cm&quot;&gt;
@@ -254,12 +88,5 @@ ORDER BY fin&quot;--&gt;
 &lt;/place --&gt;
 &lt;/storyPlace&gt;
 
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-
-
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/impers_factura_pagada.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/impers_factura_pagada.rml
index 89d518a..9b78a93 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/impers_factura_pagada.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/impers_factura_pagada.rml
@@ -6,9 +6,6 @@
 		&lt;pageGraphics&gt;
 		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
 
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-
 		&lt;!-- PAGADA --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;34&quot;/&gt;
 		&lt;fill color=&quot;(1,0.3,0.3)&quot;/&gt;
@@ -21,67 +18,21 @@
 		&lt;rotate degrees=&quot;-20&quot;/&gt;                                                                         
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;6.5cm&quot;/&gt; 
 		
-		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -91,137 +42,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descfactura, cantfactura, pvpfactura, subtotalfactura]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/plantilla_barcode.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/plantilla_barcode.rml
new file mode 100644
index 0000000..427aa0f
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/plantilla_barcode.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/plantilla_cabecerafactura.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/plantilla_cabecerafactura.rml
new file mode 100644
index 0000000..a1771d9
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/plantilla_cabecerafactura.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha factura--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/plantilla_desfactura.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/plantilla_desfactura.rml
new file mode 100644
index 0000000..1f34048
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/plantilla_desfactura.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lfactura WHERE descuentolfactura &gt; 0 AND idfactura=[idfactura])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlfactura*pvplfactura*(1-descuentolfactura/100))::NUMERIC(12,2) AS totallfactura FROM lfactura LEFT JOIN articulo ON lfactura.idarticulo=articulo.idarticulo WHERE idfactura= [idfactura]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclfactura]&lt;/td&gt;
+&lt;td&gt;[cantlfactura]&lt;/td&gt;
+&lt;td&gt;[pvplfactura]&lt;/td&gt;
+&lt;td&gt;[totallfactura]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlfactura*pvplfactura*(1-descuentolfactura/100))::NUMERIC(12,2) AS totallfactura FROM lfactura LEFT JOIN articulo ON lfactura.idarticulo=articulo.idarticulo WHERE idfactura= [idfactura]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclfactura]&lt;/td&gt;
+&lt;td&gt;[cantlfactura]&lt;/td&gt;
+&lt;td&gt;[pvplfactura]&lt;/td&gt;
+&lt;td&gt;[descuentolfactura]%&lt;/td&gt;
+&lt;td&gt;[totallfactura]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dfactura WHERE idfactura=[idfactura]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dfactura WHERE idfactura=[idfactura]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentfactura,'&lt;','\n') AS comment FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/plantilla_finfra.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/plantilla_finfra.rml
new file mode 100644
index 0000000..27c28bc
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/en/plantilla_finfra.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = [idfactura]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = [idfactura]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondfactura/100),0) AS tdesc FROM dfactura WHERE idfactura=[idfactura]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalfactura FROM lfactura WHERE idfactura = [idfactura]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlfactura * pvplfactura * (1-descuentolfactura/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlfactura * pvplfactura * (1-descuentolfactura/100)*(ivalfactura/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lfactura WHERE idfactura=[idfactura] AND ivalfactura=[ivalfactura]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalfactura]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = [idfactura]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM factura WHERE idfactura=[idfactura] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/factura.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/factura.rml
index 630b7be..aeabbd9 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/factura.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/factura.rml
@@ -9,66 +9,23 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cabecerafactura.rml&quot; --&gt;
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-
+		
+		
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,178 +35,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--LINEAS DETALLE--&gt;
-&lt;tr&gt;
-&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
-&lt;td&gt;[desclfactura]&lt;/td&gt;
-&lt;td&gt;[cantlfactura]&lt;/td&gt;
-&lt;td&gt;[pvplfactura]&lt;/td&gt;
-&lt;td&gt;[totallfactura]&lt;/td&gt;
-&lt;/tr&gt;
-&lt;!--END LINEAS DETALLE--&gt;
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;Total dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
- 
- &lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT replace(comentfactura,'&lt;','\n') AS comment FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-
-
- &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
- 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
-		&lt;tr&gt;
-		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
- &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
-
-				&lt;tr&gt;
-					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
-					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
-				&lt;/tr&gt;
-
- &lt;!-- END QUERY--&gt;
- 			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt; 
- &lt;!-- END IF QUERY--&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-
-
-&lt;!-- QUERY = &quot;SELECT * FROM factura WHERE idfactura=[idfactura] AND idforma_pago = 8 &quot;--&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
-  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-
-&lt;!-- END QUERY --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
+
+
 
 &lt;/story&gt;
 &lt;/document&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/impers_factura_copia.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/impers_factura_copia.rml
index ec91620..1eb2c56 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/impers_factura_copia.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/impers_factura_copia.rml
@@ -6,9 +6,6 @@
 		&lt;pageGraphics&gt;
 		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
 
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-
 		&lt;!-- PAGADA --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;34&quot;/&gt;
 		&lt;fill color=&quot;(1,0.3,0.3)&quot;/&gt;
@@ -21,67 +18,26 @@
 		&lt;rotate degrees=&quot;-20&quot;/&gt;                                                                         
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;6.5cm&quot;/&gt; 
 		
-		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;		
+		
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cabecerafactura.rml&quot; --&gt;
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-
+		
+		
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -91,137 +47,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descfactura, cantfactura, pvpfactura, subtotalfactura]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/impers_factura_grafica.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/impers_factura_grafica.rml
index ecffe5d..bf2af68 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/impers_factura_grafica.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/impers_factura_grafica.rml
@@ -9,67 +9,23 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cabecerafactura.rml&quot; --&gt;
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-
+		
+		
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -79,130 +35,13 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descfactura, cantfactura, pvpfactura, subtotalfactura]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
+	
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
 
-	&lt;/blockTable&gt;
 
-	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
 
 
 &lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;5cm&quot; height=&quot;5cm&quot;&gt;
@@ -254,12 +93,5 @@ ORDER BY fin&quot;--&gt;
 &lt;/place --&gt;
 &lt;/storyPlace&gt;
 
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-
-
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/impers_factura_pagada.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/impers_factura_pagada.rml
index 89d518a..535cf0b 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/impers_factura_pagada.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/impers_factura_pagada.rml
@@ -6,9 +6,6 @@
 		&lt;pageGraphics&gt;
 		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
 
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-
 		&lt;!-- PAGADA --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;34&quot;/&gt;
 		&lt;fill color=&quot;(1,0.3,0.3)&quot;/&gt;
@@ -21,67 +18,26 @@
 		&lt;rotate degrees=&quot;-20&quot;/&gt;                                                                         
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;6.5cm&quot;/&gt; 
 		
-		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cabecerafactura.rml&quot; --&gt;
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-
+		
+		
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -91,137 +47,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descfactura, cantfactura, pvpfactura, subtotalfactura]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/plantilla_barcode.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/plantilla_barcode.rml
new file mode 100644
index 0000000..427aa0f
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/plantilla_barcode.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/plantilla_cabecerafactura.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/plantilla_cabecerafactura.rml
new file mode 100644
index 0000000..a1771d9
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/plantilla_cabecerafactura.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha factura--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/plantilla_desfactura.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/plantilla_desfactura.rml
new file mode 100644
index 0000000..1f34048
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/plantilla_desfactura.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lfactura WHERE descuentolfactura &gt; 0 AND idfactura=[idfactura])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlfactura*pvplfactura*(1-descuentolfactura/100))::NUMERIC(12,2) AS totallfactura FROM lfactura LEFT JOIN articulo ON lfactura.idarticulo=articulo.idarticulo WHERE idfactura= [idfactura]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclfactura]&lt;/td&gt;
+&lt;td&gt;[cantlfactura]&lt;/td&gt;
+&lt;td&gt;[pvplfactura]&lt;/td&gt;
+&lt;td&gt;[totallfactura]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlfactura*pvplfactura*(1-descuentolfactura/100))::NUMERIC(12,2) AS totallfactura FROM lfactura LEFT JOIN articulo ON lfactura.idarticulo=articulo.idarticulo WHERE idfactura= [idfactura]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclfactura]&lt;/td&gt;
+&lt;td&gt;[cantlfactura]&lt;/td&gt;
+&lt;td&gt;[pvplfactura]&lt;/td&gt;
+&lt;td&gt;[descuentolfactura]%&lt;/td&gt;
+&lt;td&gt;[totallfactura]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dfactura WHERE idfactura=[idfactura]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dfactura WHERE idfactura=[idfactura]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentfactura,'&lt;','\n') AS comment FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/plantilla_finfra.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/plantilla_finfra.rml
new file mode 100644
index 0000000..502628d
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/es/plantilla_finfra.rml
@@ -0,0 +1,95 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = [idfactura]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = [idfactura]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondfactura/100),0) AS tdesc FROM dfactura WHERE idfactura=[idfactura]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalfactura FROM lfactura WHERE idfactura = [idfactura]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlfactura * pvplfactura * (1-descuentolfactura/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlfactura * pvplfactura * (1-descuentolfactura/100)*(ivalfactura/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lfactura WHERE idfactura=[idfactura] AND ivalfactura=[ivalfactura]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalfactura]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = [idfactura]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+&lt;!-- END QUERY1 --&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM factura WHERE idfactura=[idfactura] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/factura.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/factura.rml
index 0c5ca9c..e0dd7f5 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/factura.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/factura.rml
@@ -9,66 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,155 +30,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--LINEAS DETALLE--&gt;
-&lt;tr&gt;
-&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
-&lt;td&gt;[desclfactura]&lt;/td&gt;
-&lt;td&gt;[cantlfactura]&lt;/td&gt;
-&lt;td&gt;[pvplfactura]&lt;/td&gt;
-&lt;td&gt;[totallfactura]&lt;/td&gt;
-&lt;/tr&gt;
-&lt;!--END LINEAS DETALLE--&gt;
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-
-
-&lt;!-- QUERY = &quot;SELECT * FROM factura WHERE idfactura=[idfactura] AND idforma_pago = 8 &quot;--&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
-  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; 2100 0650 44 0200224097&lt;/para&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-
-&lt;!-- END QUERY --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
+
+
 
 &lt;/story&gt;
 &lt;/document&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/impers_factura_copia.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/impers_factura_copia.rml
index ec91620..26f225f 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/impers_factura_copia.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/impers_factura_copia.rml
@@ -6,9 +6,6 @@
 		&lt;pageGraphics&gt;
 		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
 
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-
 		&lt;!-- PAGADA --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;34&quot;/&gt;
 		&lt;fill color=&quot;(1,0.3,0.3)&quot;/&gt;
@@ -21,67 +18,21 @@
 		&lt;rotate degrees=&quot;-20&quot;/&gt;                                                                         
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;6.5cm&quot;/&gt; 
 		
-		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;		
+		
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -91,137 +42,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descfactura, cantfactura, pvpfactura, subtotalfactura]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/impers_factura_grafica.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/impers_factura_grafica.rml
index ecffe5d..3d27c60 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/impers_factura_grafica.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/impers_factura_grafica.rml
@@ -9,67 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -79,130 +30,13 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descfactura, cantfactura, pvpfactura, subtotalfactura]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
+	
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
 
-	&lt;/blockTable&gt;
 
-	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
 
 
 &lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;5cm&quot; height=&quot;5cm&quot;&gt;
@@ -254,12 +88,5 @@ ORDER BY fin&quot;--&gt;
 &lt;/place --&gt;
 &lt;/storyPlace&gt;
 
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-
-
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/impers_factura_pagada.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/impers_factura_pagada.rml
index 89d518a..9b78a93 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/impers_factura_pagada.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/impers_factura_pagada.rml
@@ -6,9 +6,6 @@
 		&lt;pageGraphics&gt;
 		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
 
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-
 		&lt;!-- PAGADA --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;34&quot;/&gt;
 		&lt;fill color=&quot;(1,0.3,0.3)&quot;/&gt;
@@ -21,67 +18,21 @@
 		&lt;rotate degrees=&quot;-20&quot;/&gt;                                                                         
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;6.5cm&quot;/&gt; 
 		
-		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha factura--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
-
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -91,137 +42,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descfactura, cantfactura, pvpfactura, subtotalfactura]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdfactura]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentfactura]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_desfactura.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finfra.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcode.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/plantilla_barcode.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/plantilla_barcode.rml
new file mode 100644
index 0000000..427aa0f
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/plantilla_barcode.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/plantilla_cabecerafactura.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/plantilla_cabecerafactura.rml
new file mode 100644
index 0000000..a1771d9
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/plantilla_cabecerafactura.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha factura--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/plantilla_desfactura.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/plantilla_desfactura.rml
new file mode 100644
index 0000000..1f34048
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/plantilla_desfactura.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lfactura WHERE descuentolfactura &gt; 0 AND idfactura=[idfactura])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlfactura*pvplfactura*(1-descuentolfactura/100))::NUMERIC(12,2) AS totallfactura FROM lfactura LEFT JOIN articulo ON lfactura.idarticulo=articulo.idarticulo WHERE idfactura= [idfactura]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclfactura]&lt;/td&gt;
+&lt;td&gt;[cantlfactura]&lt;/td&gt;
+&lt;td&gt;[pvplfactura]&lt;/td&gt;
+&lt;td&gt;[totallfactura]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlfactura*pvplfactura*(1-descuentolfactura/100))::NUMERIC(12,2) AS totallfactura FROM lfactura LEFT JOIN articulo ON lfactura.idarticulo=articulo.idarticulo WHERE idfactura= [idfactura]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclfactura]&lt;/td&gt;
+&lt;td&gt;[cantlfactura]&lt;/td&gt;
+&lt;td&gt;[pvplfactura]&lt;/td&gt;
+&lt;td&gt;[descuentolfactura]%&lt;/td&gt;
+&lt;td&gt;[totallfactura]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dfactura WHERE idfactura=[idfactura]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dfactura WHERE idfactura=[idfactura]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentfactura,'&lt;','\n') AS comment FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/plantilla_finfra.rml b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/plantilla_finfra.rml
new file mode 100644
index 0000000..27c28bc
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/openreports/fr/plantilla_finfra.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = [idfactura]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = [idfactura]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondfactura/100),0) AS tdesc FROM dfactura WHERE idfactura=[idfactura]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalfactura FROM lfactura WHERE idfactura = [idfactura]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlfactura * pvplfactura * (1-descuentolfactura/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlfactura * pvplfactura * (1-descuentolfactura/100)*(ivalfactura/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lfactura WHERE idfactura=[idfactura] AND ivalfactura=[ivalfactura]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalfactura]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = [idfactura]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM factura WHERE idfactura=[idfactura] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/README.es b/bulmages/bulmafact/plugins/pluginbf_clientepedido/README.es
index 8755acc..6a3e69b 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepedido/README.es
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/README.es
@@ -40,7 +40,7 @@ Incompatibles:
 
 Categorias: Facturacion generica;Talleres;Distribuci√≥n;Distribuci√≥n Alimentaria;Servicios Generales;
 
-Reports: blform_PedidoClienteView.qs; pedidocliente.rml; impers_pedidocliente_urgente.rml
+Reports: blform_PedidoClienteView.qs; pedidocliente.rml; impers_pedidocliente_urgente.rml; plantilla_frame.rml; plantilla_finpedido.rml; plantilla_barcodepedido.rml; plantilla_despedido.rml; plantilla_cliente.rml; plantilla_empresa.rml; plantilla_cabecerapedido.rml
 
 Orden: 621
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/ca/plantilla_barcodepedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/ca/plantilla_barcodepedido.rml
new file mode 100644
index 0000000..7d7ffd8
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/ca/plantilla_barcodepedido.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;16cm&quot; y=&quot;0cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PED [idpedidocliente] [numpedidocliente] [refpedidocliente]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/ca/plantilla_cabecerapedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/ca/plantilla_cabecerapedido.rml
new file mode 100644
index 0000000..edbf4c2
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/ca/plantilla_cabecerapedido.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha pedidocliente--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha pedido:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ pedido:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fechapedidocliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpedidocliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpedidocliente]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/ca/plantilla_despedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/ca/plantilla_despedido.rml
new file mode 100644
index 0000000..e264ac4
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/ca/plantilla_despedido.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lpedidocliente WHERE descuentolpedidocliente &gt; 0 AND idpedidocliente=[idpedidocliente])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpedidocliente*pvplpedidocliente*(1-descuentolpedidocliente/100))::NUMERIC(12,2) AS totallpedidocliente FROM lpedidocliente LEFT JOIN articulo ON lpedidocliente.idarticulo=articulo.idarticulo WHERE idpedidocliente= [idpedidocliente]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpedidocliente]&lt;/td&gt;
+&lt;td&gt;[cantlpedidocliente]&lt;/td&gt;
+&lt;td&gt;[pvplpedidocliente]&lt;/td&gt;
+&lt;td&gt;[totallpedidocliente]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpedidocliente*pvplpedidocliente*(1-descuentolpedidocliente/100))::NUMERIC(12,2) AS totallpedidocliente FROM lpedidocliente LEFT JOIN articulo ON lpedidocliente.idarticulo=articulo.idarticulo WHERE idpedidocliente= [idpedidocliente]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpedidocliente]&lt;/td&gt;
+&lt;td&gt;[cantlpedidocliente]&lt;/td&gt;
+&lt;td&gt;[pvplpedidocliente]&lt;/td&gt;
+&lt;td&gt;[descuentolpedidocliente]%&lt;/td&gt;
+&lt;td&gt;[totallpedidocliente]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dpedidocliente WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dpedidocliente WHERE idpedidocliente=[idpedidocliente]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpedidocliente]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondpedidocliente]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentpedidocliente FROM pedidocliente WHERE length(comentpedidocliente) &gt; 0 AND idpedidocliente = [idpedidocliente]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentpedidocliente,'&lt;','\n') AS comment FROM pedidocliente WHERE length(comentpedidocliente) &gt; 0 AND idpedidocliente = [idpedidocliente]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/ca/plantilla_finpedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/ca/plantilla_finpedido.rml
new file mode 100644
index 0000000..d366a59
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/ca/plantilla_finpedido.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpedidocliente FROM pedidocliente WHERE idpedidocliente = [idpedidocliente]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpedidocliente FROM pedidocliente WHERE idpedidocliente = [idpedidocliente]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondpedidocliente/100),0) AS tdesc FROM dpedidocliente WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalpedidocliente FROM lpedidocliente WHERE idpedidocliente = [idpedidocliente]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlpedidocliente * pvplpedidocliente * (1-descuentolpedidocliente/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlpedidocliente * pvplpedidocliente * (1-descuentolpedidocliente/100)*(ivalpedidocliente/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lpedidocliente WHERE idpedidocliente=[idpedidocliente] AND ivalpedidocliente=[ivalpedidocliente]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalpedidocliente]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpedidocliente FROM pedidocliente WHERE idpedidocliente = [idpedidocliente]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[fpedidocliente]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM pedidocliente WHERE idpedidocliente=[idpedidocliente] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/en/plantilla_barcodepedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/en/plantilla_barcodepedido.rml
new file mode 100644
index 0000000..7d7ffd8
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/en/plantilla_barcodepedido.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;16cm&quot; y=&quot;0cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PED [idpedidocliente] [numpedidocliente] [refpedidocliente]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/en/plantilla_cabecerapedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/en/plantilla_cabecerapedido.rml
new file mode 100644
index 0000000..edbf4c2
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/en/plantilla_cabecerapedido.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha pedidocliente--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha pedido:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ pedido:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fechapedidocliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpedidocliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpedidocliente]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/en/plantilla_despedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/en/plantilla_despedido.rml
new file mode 100644
index 0000000..e264ac4
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/en/plantilla_despedido.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lpedidocliente WHERE descuentolpedidocliente &gt; 0 AND idpedidocliente=[idpedidocliente])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpedidocliente*pvplpedidocliente*(1-descuentolpedidocliente/100))::NUMERIC(12,2) AS totallpedidocliente FROM lpedidocliente LEFT JOIN articulo ON lpedidocliente.idarticulo=articulo.idarticulo WHERE idpedidocliente= [idpedidocliente]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpedidocliente]&lt;/td&gt;
+&lt;td&gt;[cantlpedidocliente]&lt;/td&gt;
+&lt;td&gt;[pvplpedidocliente]&lt;/td&gt;
+&lt;td&gt;[totallpedidocliente]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpedidocliente*pvplpedidocliente*(1-descuentolpedidocliente/100))::NUMERIC(12,2) AS totallpedidocliente FROM lpedidocliente LEFT JOIN articulo ON lpedidocliente.idarticulo=articulo.idarticulo WHERE idpedidocliente= [idpedidocliente]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpedidocliente]&lt;/td&gt;
+&lt;td&gt;[cantlpedidocliente]&lt;/td&gt;
+&lt;td&gt;[pvplpedidocliente]&lt;/td&gt;
+&lt;td&gt;[descuentolpedidocliente]%&lt;/td&gt;
+&lt;td&gt;[totallpedidocliente]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dpedidocliente WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dpedidocliente WHERE idpedidocliente=[idpedidocliente]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpedidocliente]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondpedidocliente]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentpedidocliente FROM pedidocliente WHERE length(comentpedidocliente) &gt; 0 AND idpedidocliente = [idpedidocliente]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentpedidocliente,'&lt;','\n') AS comment FROM pedidocliente WHERE length(comentpedidocliente) &gt; 0 AND idpedidocliente = [idpedidocliente]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/en/plantilla_finpedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/en/plantilla_finpedido.rml
new file mode 100644
index 0000000..d366a59
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/en/plantilla_finpedido.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpedidocliente FROM pedidocliente WHERE idpedidocliente = [idpedidocliente]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpedidocliente FROM pedidocliente WHERE idpedidocliente = [idpedidocliente]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondpedidocliente/100),0) AS tdesc FROM dpedidocliente WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalpedidocliente FROM lpedidocliente WHERE idpedidocliente = [idpedidocliente]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlpedidocliente * pvplpedidocliente * (1-descuentolpedidocliente/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlpedidocliente * pvplpedidocliente * (1-descuentolpedidocliente/100)*(ivalpedidocliente/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lpedidocliente WHERE idpedidocliente=[idpedidocliente] AND ivalpedidocliente=[ivalpedidocliente]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalpedidocliente]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpedidocliente FROM pedidocliente WHERE idpedidocliente = [idpedidocliente]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[fpedidocliente]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM pedidocliente WHERE idpedidocliente=[idpedidocliente] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/impers_pedidocliente_urgente.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/impers_pedidocliente_urgente.rml
index 56b51c5..2a2ab4c 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/impers_pedidocliente_urgente.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/impers_pedidocliente_urgente.rml
@@ -21,66 +21,25 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha pedidocliente--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha pedido:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ pedido:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fechapedidocliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpedidocliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpedidocliente]&lt;/drawString&gt;
-
+		
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cabecerapedido.rml&quot; --&gt;
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PEDIDO -&lt;/drawCentredString&gt;
 
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
 
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -90,137 +49,12 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpedidocliente, cantpedidocliente, pvppedidocliente, subtotalpedidocliente]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpedidocliente]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpedidocliente]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpedidocliente]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpedidocliente FROM pedidocliente WHERE length(comentpedidocliente) &gt; 0 AND idpedidocliente = [idpedidocliente]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpedidocliente FROM pedidocliente WHERE length(comentpedidocliente) &gt; 0 AND idpedidocliente = [idpedidocliente]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpedidocliente]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despedido.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapedidocliente]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapedidocliente]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;/blockTable&gt;
-                                        &lt;/td&gt;
-                                &lt;/tr&gt;
-                                &lt;tr&gt;
-                                        &lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-                                                &lt;!--TOTALES--&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapedidocliente]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf)::NUMERIC(12,2) AS teirpf FROM irpf WHERE fechairpf &lt;= '[fechapedidocliente]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[teirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;!--END TOTALES--&gt;
-                                                &lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;ALB [idpedidocliente] [numpedidocliente] [refpedidocliente]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpedido.rml&quot; --&gt;
 
 
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepedido.rml&quot; --&gt;
 &lt;/story&gt;
 &lt;/document&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/pedidocliente.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/pedidocliente.rml
index 8711b93..3f928d3 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/pedidocliente.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/pedidocliente.rml
@@ -9,66 +9,22 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha pedidocliente--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha pedido:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ pedido:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fechapedidocliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpedidocliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpedidocliente]&lt;/drawString&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cabecerapedido.rml&quot; --&gt;
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PEDIDO -&lt;/drawCentredString&gt;
 
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
 
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
 
 	&lt;/pageGraphics&gt;
 
-
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,155 +34,13 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpedidocliente, cantpedidocliente, pvppedidocliente, subtotalpedidocliente]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;Total dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpedidocliente]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpedidocliente]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpedidocliente]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpedidocliente FROM pedidocliente WHERE length(comentpedidocliente) &gt; 0 AND idpedidocliente = [idpedidocliente]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpedidocliente FROM pedidocliente WHERE length(comentpedidocliente) &gt; 0 AND idpedidocliente = [idpedidocliente]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
-
-=======
-&gt;&gt;&gt;&gt;&gt;&gt;&gt; release
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpedidocliente,l]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despedido.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapedidocliente]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapedidocliente]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;/blockTable&gt;
-                                        &lt;/td&gt;
-                                &lt;/tr&gt;
-                                &lt;tr&gt;
-                                        &lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-                                                &lt;!--TOTALES--&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapedidocliente]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf)::NUMERIC(12,2) AS teirpf FROM irpf WHERE fechairpf &lt;= '[fechapedidocliente]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[teirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;!--END TOTALES--&gt;
-                                                &lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-
-&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PED [idpedidocliente] [numpedidocliente] [refpedidocliente]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-
-=======
-&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;16cm&quot; y=&quot;0cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PED [idpedidocliente] [numpedidocliente] [refpedidocliente]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
-&gt;&gt;&gt;&gt;&gt;&gt;&gt; release
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpedido.rml&quot; --&gt;
+
 
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepedido.rml&quot; --&gt;
 
 &lt;/story&gt;
 &lt;/document&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/plantilla_barcodepedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/plantilla_barcodepedido.rml
new file mode 100644
index 0000000..7d7ffd8
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/plantilla_barcodepedido.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;16cm&quot; y=&quot;0cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PED [idpedidocliente] [numpedidocliente] [refpedidocliente]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/plantilla_cabecerapedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/plantilla_cabecerapedido.rml
new file mode 100644
index 0000000..edbf4c2
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/plantilla_cabecerapedido.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha pedidocliente--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha pedido:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ pedido:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fechapedidocliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpedidocliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpedidocliente]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/plantilla_despedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/plantilla_despedido.rml
new file mode 100644
index 0000000..e264ac4
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/plantilla_despedido.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lpedidocliente WHERE descuentolpedidocliente &gt; 0 AND idpedidocliente=[idpedidocliente])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpedidocliente*pvplpedidocliente*(1-descuentolpedidocliente/100))::NUMERIC(12,2) AS totallpedidocliente FROM lpedidocliente LEFT JOIN articulo ON lpedidocliente.idarticulo=articulo.idarticulo WHERE idpedidocliente= [idpedidocliente]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpedidocliente]&lt;/td&gt;
+&lt;td&gt;[cantlpedidocliente]&lt;/td&gt;
+&lt;td&gt;[pvplpedidocliente]&lt;/td&gt;
+&lt;td&gt;[totallpedidocliente]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpedidocliente*pvplpedidocliente*(1-descuentolpedidocliente/100))::NUMERIC(12,2) AS totallpedidocliente FROM lpedidocliente LEFT JOIN articulo ON lpedidocliente.idarticulo=articulo.idarticulo WHERE idpedidocliente= [idpedidocliente]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpedidocliente]&lt;/td&gt;
+&lt;td&gt;[cantlpedidocliente]&lt;/td&gt;
+&lt;td&gt;[pvplpedidocliente]&lt;/td&gt;
+&lt;td&gt;[descuentolpedidocliente]%&lt;/td&gt;
+&lt;td&gt;[totallpedidocliente]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dpedidocliente WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dpedidocliente WHERE idpedidocliente=[idpedidocliente]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpedidocliente]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondpedidocliente]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentpedidocliente FROM pedidocliente WHERE length(comentpedidocliente) &gt; 0 AND idpedidocliente = [idpedidocliente]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentpedidocliente,'&lt;','\n') AS comment FROM pedidocliente WHERE length(comentpedidocliente) &gt; 0 AND idpedidocliente = [idpedidocliente]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/plantilla_finpedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/plantilla_finpedido.rml
new file mode 100644
index 0000000..979cbb7
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/es/plantilla_finpedido.rml
@@ -0,0 +1,72 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fechapedidocliente FROM pedidocliente WHERE idpedidocliente = [idpedidocliente]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fechapedidocliente FROM pedidocliente WHERE idpedidocliente = [idpedidocliente]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondpedidocliente/100),0) AS tdesc FROM dpedidocliente WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalpedidocliente FROM lpedidocliente WHERE idpedidocliente = [idpedidocliente]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlpedidocliente * pvplpedidocliente * (1-descuentolpedidocliente/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlpedidocliente * pvplpedidocliente * (1-descuentolpedidocliente/100)*(ivalpedidocliente/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lpedidocliente WHERE idpedidocliente=[idpedidocliente] AND ivalpedidocliente=[ivalpedidocliente]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalpedidocliente]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fechapedidocliente FROM pedidocliente WHERE idpedidocliente = [idpedidocliente]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[fechapedidocliente]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM pedidocliente WHERE idpedidocliente=[idpedidocliente] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/fr/plantilla_barcodepedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/fr/plantilla_barcodepedido.rml
new file mode 100644
index 0000000..7d7ffd8
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/fr/plantilla_barcodepedido.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;16cm&quot; y=&quot;0cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PED [idpedidocliente] [numpedidocliente] [refpedidocliente]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/fr/plantilla_cabecerapedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/fr/plantilla_cabecerapedido.rml
new file mode 100644
index 0000000..edbf4c2
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/fr/plantilla_cabecerapedido.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha pedidocliente--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha pedido:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ pedido:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fechapedidocliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpedidocliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpedidocliente]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/fr/plantilla_despedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/fr/plantilla_despedido.rml
new file mode 100644
index 0000000..e264ac4
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/fr/plantilla_despedido.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lpedidocliente WHERE descuentolpedidocliente &gt; 0 AND idpedidocliente=[idpedidocliente])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpedidocliente*pvplpedidocliente*(1-descuentolpedidocliente/100))::NUMERIC(12,2) AS totallpedidocliente FROM lpedidocliente LEFT JOIN articulo ON lpedidocliente.idarticulo=articulo.idarticulo WHERE idpedidocliente= [idpedidocliente]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpedidocliente]&lt;/td&gt;
+&lt;td&gt;[cantlpedidocliente]&lt;/td&gt;
+&lt;td&gt;[pvplpedidocliente]&lt;/td&gt;
+&lt;td&gt;[totallpedidocliente]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpedidocliente*pvplpedidocliente*(1-descuentolpedidocliente/100))::NUMERIC(12,2) AS totallpedidocliente FROM lpedidocliente LEFT JOIN articulo ON lpedidocliente.idarticulo=articulo.idarticulo WHERE idpedidocliente= [idpedidocliente]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpedidocliente]&lt;/td&gt;
+&lt;td&gt;[cantlpedidocliente]&lt;/td&gt;
+&lt;td&gt;[pvplpedidocliente]&lt;/td&gt;
+&lt;td&gt;[descuentolpedidocliente]%&lt;/td&gt;
+&lt;td&gt;[totallpedidocliente]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dpedidocliente WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dpedidocliente WHERE idpedidocliente=[idpedidocliente]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpedidocliente]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondpedidocliente]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentpedidocliente FROM pedidocliente WHERE length(comentpedidocliente) &gt; 0 AND idpedidocliente = [idpedidocliente]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentpedidocliente,'&lt;','\n') AS comment FROM pedidocliente WHERE length(comentpedidocliente) &gt; 0 AND idpedidocliente = [idpedidocliente]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/fr/plantilla_finpedido.rml b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/fr/plantilla_finpedido.rml
new file mode 100644
index 0000000..d366a59
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepedido/openreports/fr/plantilla_finpedido.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpedidocliente FROM pedidocliente WHERE idpedidocliente = [idpedidocliente]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpedidocliente FROM pedidocliente WHERE idpedidocliente = [idpedidocliente]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondpedidocliente/100),0) AS tdesc FROM dpedidocliente WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalpedidocliente FROM lpedidocliente WHERE idpedidocliente = [idpedidocliente]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlpedidocliente * pvplpedidocliente * (1-descuentolpedidocliente/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlpedidocliente * pvplpedidocliente * (1-descuentolpedidocliente/100)*(ivalpedidocliente/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lpedidocliente WHERE idpedidocliente=[idpedidocliente] AND ivalpedidocliente=[ivalpedidocliente]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalpedidocliente]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpedidocliente FROM pedidocliente WHERE idpedidocliente = [idpedidocliente]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[fpedidocliente]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idpedidocliente=[idpedidocliente]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM pedidocliente WHERE idpedidocliente=[idpedidocliente] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.ca b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.ca
index 82e3c76..758376a 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.ca
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.ca
@@ -30,7 +30,7 @@ Dependencias: libpluginbf_trabajador.so; libpluginbf_almacen.so; libpluginbf_for
 
 Incompatibles:
 
-Reports: presupuesto.rml; blform_PresupuestoView.qs; impers_presupuesto_fproforma.rml
+Reports: presupuesto.rml; blform_PresupuestoView.qs; impers_presupuesto_fproforma.rml; impers_presupuesto_excel.pys; impers_presupuesto_sin_total.rml; impers_presupuesto_solo_totales.rml; impers_presupuesto_urgente.rml; plantilla_frame.rml; plantilla_finpresupuesto.rml; plantilla_barcodepresupuesto.rml; plantilla_despresupuesto.rml; plantilla_cliente.rml; plantilla_empresa.rml; plantilla_cabecerapresupuesto.rml
 
 Categorias: Facturaci√≥ gen√®rica;
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.en b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.en
index 1889f3f..ea1f059 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.en
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.en
@@ -32,7 +32,7 @@ Dependencias: libpluginbf_trabajador.so; libpluginbf_almacen.so; libpluginbf_for
 
 Incompatibles:
 
-Reports: presupuesto.rml; blform_PresupuestoView.qs; impers_presupuesto_fproforma.rml
+Reports: presupuesto.rml; blform_PresupuestoView.qs; impers_presupuesto_fproforma.rml; impers_presupuesto_excel.pys; impers_presupuesto_sin_total.rml; impers_presupuesto_solo_totales.rml; impers_presupuesto_urgente.rml; plantilla_frame.rml; plantilla_finpresupuesto.rml; plantilla_barcodepresupuesto.rml; plantilla_despresupuesto.rml; plantilla_cliente.rml; plantilla_empresa.rml; plantilla_cabecerapresupuesto.rml
 
 Categorias: Generic invoicing;
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.es b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.es
index 2ae8b5a..5d15b79 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.es
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.es
@@ -36,7 +36,7 @@ Dependencias: libpluginbf_trabajador.so; libpluginbf_almacen.so; libpluginbf_for
 
 Incompatibles:
 
-Reports: presupuesto.rml; blform_PresupuestoView.qs; impers_presupuesto_fproforma.rml; impers_presupuesto_excel.pys; impers_presupuesto_sin_total.rml; impers_presupuesto_solo_totales.rml; impers_presupuesto_urgente.rml
+Reports: presupuesto.rml; blform_PresupuestoView.qs; impers_presupuesto_fproforma.rml; impers_presupuesto_excel.pys; impers_presupuesto_sin_total.rml; impers_presupuesto_solo_totales.rml; impers_presupuesto_urgente.rml; plantilla_frame.rml; plantilla_finpresupuesto.rml; plantilla_barcodepresupuesto.rml; plantilla_despresupuesto.rml; plantilla_cliente.rml; plantilla_empresa.rml; plantilla_cabecerapresupuesto.rml
 
 Categorias: Facturacion generica;Talleres;Distribuci√≥n;Distribuci√≥n Alimentaria;Servicios Generales;
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.fr b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.fr
index d5d7efa..93bd8c2 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.fr
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/README.fr
@@ -30,8 +30,7 @@ Dependencias: libpluginbf_trabajador.so; libpluginbf_almacen.so; libpluginbf_for
 
 Incompatibles:
 
-Reports: presupuesto.rml; blform_PresupuestoView.qs; impers_presupuesto_fproforma.rml
-
+Reports: presupuesto.rml; blform_PresupuestoView.qs; impers_presupuesto_fproforma.rml; impers_presupuesto_excel.pys; impers_presupuesto_sin_total.rml; impers_presupuesto_solo_totales.rml; impers_presupuesto_urgente.rml; plantilla_frame.rml; plantilla_finpresupuesto.rml; plantilla_barcodepresupuesto.rml; plantilla_despresupuesto.rml; plantilla_cliente.rml; plantilla_empresa.rml; plantilla_cabecerapresupuesto.rml
 Categorias: Facturation generique;
 
 Orden: 620
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_excel.pys b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_excel.pys
index 97855a9..87149b4 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_excel.pys
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_excel.pys
@@ -9,33 +9,65 @@ import ooolib
 # Crea el documento
 doc = ooolib.Calc(&quot;Presupuesto&quot;)
 
-doc.set_column_property(1, 'width', '0.5in')
-doc.set_column_property(2, 'width', '5in')
+doc.set_column_property(1, 'width', '1in')
+doc.set_column_property(2, 'width', '4in')
 doc.set_cell_property('bold', True)
 doc.set_cell_value(2, 2, 'string', 'PRESUPUESTO')
 doc.set_cell_value(3, 2, 'string', u'[numpresupuesto]')
 doc.set_cell_value(4, 2, 'string', u'[refpresupuesto]')
 
-i=4
+i=3
 doc.set_cell_value(1,i,'string','CIF')
 doc.set_cell_value(2,i,'string','NOMBRE')
 doc.set_cell_value(3,i,'string','DIRECCION')
 doc.set_cell_value(4,i,'string','CP')
 doc.set_cell_value(5,i,'string','POBLACION')
-doc.set_cell_value(6,i,'string','BASE')
-doc.set_cell_value(7,i,'string','IMPUESTOS')
-doc.set_cell_value(8,i,'string','TOTAL')
+i = i + 1
+
+&lt;!-- QUERY=&quot;SELECT * FROM cliente WHERE idcliente=[idcliente]&quot;--&gt;
+doc.set_cell_value(1,i,'string','[cifcliente]')
+doc.set_cell_value(2,i,'string','[nomcliente]')
+doc.set_cell_value(3,i,'string','[dircliente]')
+doc.set_cell_value(4,i,'string','[cpcliente]')
+doc.set_cell_value(5,i,'string','[poblcliente]')
+&lt;!-- END QUERY--&gt;
+
+i=6
+doc.set_cell_value(1,i,'string','CODIGO')
+doc.set_cell_value(2,i,'string','NOMBRE')
+doc.set_cell_value(3,i,'string','CANTIDAD')
+doc.set_cell_value(4,i,'string','PVP UND')
+doc.set_cell_value(5,i,'string','IVA')
+doc.set_cell_value(6,i,'string','TOTAL')
 
-#i=7
-&lt;!-- QUERY=&quot;SELECT * FROM lpresupuesto where idpresupuesto=[idpresupuesto]&quot;--&gt;
+i=7
+&lt;!-- QUERY=&quot;SELECT *, (cantlpresupuesto * pvplpresupuesto)::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo = articulo.idarticulo WHERE idpresupuesto = [idpresupuesto] ORDER BY ordenlpresupuesto&quot;--&gt;
 doc.set_cell_value(1,i,'string', u'[codigocompletoarticulo]')
 doc.set_cell_value(2,i,'string', u'[desclpresupuesto]')
-doc.set_cell_value(3,i,'string', u'[cantlpresupuesto]')
-doc.set_cell_value(4,i,'string', u'[pvplpresupuesto]')
-doc.set_cell_value(6,i,'string', u'[ivalpresupuesto]')
+doc.set_cell_value(3,i,'float', u'[cantlpresupuesto]')
+doc.set_cell_value(4,i,'float', u'[pvplpresupuesto]')
+doc.set_cell_value(5,i,'float', u'[ivalpresupuesto]')
+doc.set_cell_value(6,i,'float', u'[totallpresupuesto]')
 i = i + 1
 &lt;!--END QUERY--&gt;
+j = i
+i =  i + 3
 
+&lt;!-- QUERY=&quot;SELECT ivalpresupuesto::INTEGER, SUM (cantlpresupuesto * pvplpresupuesto)::NUMERIC(12,2) AS bimp FROM lpresupuesto WHERE idpresupuesto = [idpresupuesto] GROUP BY ivalpresupuesto  ORDER BY ivalpresupuesto&quot;--&gt;
+doc.set_cell_value(5,i,'string', u'Base: [ivalpresupuesto]%')
+#doc.set_cell_value(7,i,'formula', u&quot;=SUMAR.SI(E7:E&quot;+str(j)+&quot;;\&quot;=[ivalpresupuesto]\&quot;;F7:F&quot;+str(j)+&quot;)&quot;)
+doc.set_cell_value(6,i,'float', '[bimp]')
+i = i + 1
+&lt;!--END QUERY--&gt;
+
+i =  i +3
+doc.set_row_property(i, 'height', '0.5in')
+doc.set_cell_property('color', '#0000ff')
+#doc.set_cell_property('background', '#ff0000')
+doc.set_cell_property('fontsize', '14')
+doc.set_cell_value(5,i,'string', u'TOTAL')
+doc.set_cell_property('bold', True)
+doc.set_cell_value(6,i,'formula', u'=SUM(F7:F'+str(j-1)+')')
 
 # Guardamos el documento
 doc.save(&quot;impers_presupuesto_excel.ods&quot;)
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_fproforma.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_fproforma.rml
index 63c25fd..991d1c7 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_fproforma.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_fproforma.rml
@@ -9,6 +9,8 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		
 &lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
 &lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
 
@@ -53,22 +55,20 @@
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- F. PROFORMA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-
+		
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- F. PROFORMA -&lt;/drawCentredString&gt;
+		
+		
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,139 +78,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_sin_total.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_sin_total.rml
index 1e7c3b5..64958b0 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_sin_total.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_sin_total.rml
@@ -9,66 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,138 +30,10 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
-	
-	&lt;!-- storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
 
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
 
 
 &lt;/story&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_solo_totales.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_solo_totales.rml
index 394c65b..fb0cd1a 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_solo_totales.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_solo_totales.rml
@@ -9,66 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,149 +30,104 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lpresupuesto WHERE descuentolpresupuesto &gt; 0 AND idpresupuesto=[idpresupuesto])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
 		&lt;tr&gt;
 			&lt;td&gt;Codigo&lt;/td&gt;
 			&lt;td&gt;Concepto&lt;/td&gt;
 			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
 		&lt;/tr&gt;
-
-&lt;!--LINEAS DETALLE--&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
 &lt;tr&gt;
 &lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
 &lt;td&gt;[desclpresupuesto]&lt;/td&gt;
 &lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+&lt;td&gt;[pvplpresupuesto]&lt;/td&gt;
+&lt;td&gt;[totallpresupuesto]&lt;/td&gt;
 &lt;/tr&gt;
-&lt;!--END LINEAS DETALLE--&gt;
-	
-	
-		
-&lt;!--IF DESCUENTOS--&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
 		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpresupuesto]&lt;/td&gt;
+&lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
+&lt;td&gt;&lt;/td&gt;
+&lt;td&gt;&lt;/td&gt;
+&lt;td&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
 
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 
-&lt;!--LINEAS DESCUENTO--&gt;
 		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot;--&gt;
+		&lt;tr&gt;
+
 			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
 
+ 
 &lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentpresupuesto,'&lt;','\n') AS comment FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 &lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
 &lt;!--END IF QUERY--&gt;
 
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
+	
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
 
-	&lt;/blockTable&gt;
 
-	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_urgente.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_urgente.rml
index a2e3dee..4f02614 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_urgente.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/impers_presupuesto_urgente.rml
@@ -6,9 +6,6 @@
 		&lt;pageGraphics&gt;
 		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
 
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-
 		&lt;!-- URGENTE --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;34&quot;/&gt;
 		&lt;fill color=&quot;(1,0.3,0.3)&quot;/&gt;
@@ -21,66 +18,21 @@
 		&lt;rotate degrees=&quot;-20&quot;/&gt;                                                                         
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;6.5cm&quot;/&gt; 
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -90,139 +42,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/plantilla_barcodepresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/plantilla_barcodepresupuesto.rml
new file mode 100644
index 0000000..3280ae1
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/plantilla_barcodepresupuesto.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/plantilla_cabecerapresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/plantilla_cabecerapresupuesto.rml
new file mode 100644
index 0000000..2a691e4
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/plantilla_cabecerapresupuesto.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha presupuesto--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha presupuesto:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ presupuesto:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_presupuesto] / [numpresupuesto]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/plantilla_despresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/plantilla_despresupuesto.rml
new file mode 100644
index 0000000..fa5744e
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/plantilla_despresupuesto.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lpresupuesto WHERE descuentolpresupuesto &gt; 0 AND idpresupuesto=[idpresupuesto])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpresupuesto]&lt;/td&gt;
+&lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
+&lt;td&gt;[pvplpresupuesto]&lt;/td&gt;
+&lt;td&gt;[totallpresupuesto]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpresupuesto]&lt;/td&gt;
+&lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
+&lt;td&gt;[pvplpresupuesto]&lt;/td&gt;
+&lt;td&gt;[descuentolpresupuesto]%&lt;/td&gt;
+&lt;td&gt;[totallpresupuesto]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentpresupuesto,'&lt;','\n') AS comment FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/plantilla_finpresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/plantilla_finpresupuesto.rml
new file mode 100644
index 0000000..3d8b240
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/plantilla_finpresupuesto.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpresupuesto FROM presupuesto WHERE idpresupuesto = [idpresupuesto]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpresupuesto FROM presupuesto WHERE idpresupuesto = [idpresupuesto]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondpresupuesto/100),0) AS tdesc FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalpresupuesto FROM lpresupuesto WHERE idpresupuesto = [idpresupuesto]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlpresupuesto * pvplpresupuesto * (1-descuentolpresupuesto/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlpresupuesto * pvplpresupuesto * (1-descuentolpresupuesto/100)*(ivalpresupuesto/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lpresupuesto WHERE idpresupuesto=[idpresupuesto] AND ivalpresupuesto=[ivalpresupuesto]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalpresupuesto]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpresupuesto FROM presupuesto WHERE idpresupuesto = [idpresupuesto]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[fpresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM presupuesto WHERE idpresupuesto=[idpresupuesto] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/presupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/presupuesto.rml
index 7529c0a..c3ae680 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/presupuesto.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/ca/presupuesto.rml
@@ -9,66 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,139 +30,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_excel.pys b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_excel.pys
index 97855a9..87149b4 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_excel.pys
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_excel.pys
@@ -9,33 +9,65 @@ import ooolib
 # Crea el documento
 doc = ooolib.Calc(&quot;Presupuesto&quot;)
 
-doc.set_column_property(1, 'width', '0.5in')
-doc.set_column_property(2, 'width', '5in')
+doc.set_column_property(1, 'width', '1in')
+doc.set_column_property(2, 'width', '4in')
 doc.set_cell_property('bold', True)
 doc.set_cell_value(2, 2, 'string', 'PRESUPUESTO')
 doc.set_cell_value(3, 2, 'string', u'[numpresupuesto]')
 doc.set_cell_value(4, 2, 'string', u'[refpresupuesto]')
 
-i=4
+i=3
 doc.set_cell_value(1,i,'string','CIF')
 doc.set_cell_value(2,i,'string','NOMBRE')
 doc.set_cell_value(3,i,'string','DIRECCION')
 doc.set_cell_value(4,i,'string','CP')
 doc.set_cell_value(5,i,'string','POBLACION')
-doc.set_cell_value(6,i,'string','BASE')
-doc.set_cell_value(7,i,'string','IMPUESTOS')
-doc.set_cell_value(8,i,'string','TOTAL')
+i = i + 1
+
+&lt;!-- QUERY=&quot;SELECT * FROM cliente WHERE idcliente=[idcliente]&quot;--&gt;
+doc.set_cell_value(1,i,'string','[cifcliente]')
+doc.set_cell_value(2,i,'string','[nomcliente]')
+doc.set_cell_value(3,i,'string','[dircliente]')
+doc.set_cell_value(4,i,'string','[cpcliente]')
+doc.set_cell_value(5,i,'string','[poblcliente]')
+&lt;!-- END QUERY--&gt;
+
+i=6
+doc.set_cell_value(1,i,'string','CODIGO')
+doc.set_cell_value(2,i,'string','NOMBRE')
+doc.set_cell_value(3,i,'string','CANTIDAD')
+doc.set_cell_value(4,i,'string','PVP UND')
+doc.set_cell_value(5,i,'string','IVA')
+doc.set_cell_value(6,i,'string','TOTAL')
 
-#i=7
-&lt;!-- QUERY=&quot;SELECT * FROM lpresupuesto where idpresupuesto=[idpresupuesto]&quot;--&gt;
+i=7
+&lt;!-- QUERY=&quot;SELECT *, (cantlpresupuesto * pvplpresupuesto)::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo = articulo.idarticulo WHERE idpresupuesto = [idpresupuesto] ORDER BY ordenlpresupuesto&quot;--&gt;
 doc.set_cell_value(1,i,'string', u'[codigocompletoarticulo]')
 doc.set_cell_value(2,i,'string', u'[desclpresupuesto]')
-doc.set_cell_value(3,i,'string', u'[cantlpresupuesto]')
-doc.set_cell_value(4,i,'string', u'[pvplpresupuesto]')
-doc.set_cell_value(6,i,'string', u'[ivalpresupuesto]')
+doc.set_cell_value(3,i,'float', u'[cantlpresupuesto]')
+doc.set_cell_value(4,i,'float', u'[pvplpresupuesto]')
+doc.set_cell_value(5,i,'float', u'[ivalpresupuesto]')
+doc.set_cell_value(6,i,'float', u'[totallpresupuesto]')
 i = i + 1
 &lt;!--END QUERY--&gt;
+j = i
+i =  i + 3
 
+&lt;!-- QUERY=&quot;SELECT ivalpresupuesto::INTEGER, SUM (cantlpresupuesto * pvplpresupuesto)::NUMERIC(12,2) AS bimp FROM lpresupuesto WHERE idpresupuesto = [idpresupuesto] GROUP BY ivalpresupuesto  ORDER BY ivalpresupuesto&quot;--&gt;
+doc.set_cell_value(5,i,'string', u'Base: [ivalpresupuesto]%')
+#doc.set_cell_value(7,i,'formula', u&quot;=SUMAR.SI(E7:E&quot;+str(j)+&quot;;\&quot;=[ivalpresupuesto]\&quot;;F7:F&quot;+str(j)+&quot;)&quot;)
+doc.set_cell_value(6,i,'float', '[bimp]')
+i = i + 1
+&lt;!--END QUERY--&gt;
+
+i =  i +3
+doc.set_row_property(i, 'height', '0.5in')
+doc.set_cell_property('color', '#0000ff')
+#doc.set_cell_property('background', '#ff0000')
+doc.set_cell_property('fontsize', '14')
+doc.set_cell_value(5,i,'string', u'TOTAL')
+doc.set_cell_property('bold', True)
+doc.set_cell_value(6,i,'formula', u'=SUM(F7:F'+str(j-1)+')')
 
 # Guardamos el documento
 doc.save(&quot;impers_presupuesto_excel.ods&quot;)
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_fproforma.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_fproforma.rml
index 63c25fd..991d1c7 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_fproforma.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_fproforma.rml
@@ -9,6 +9,8 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		
 &lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
 &lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
 
@@ -53,22 +55,20 @@
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- F. PROFORMA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-
+		
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- F. PROFORMA -&lt;/drawCentredString&gt;
+		
+		
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,139 +78,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_sin_total.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_sin_total.rml
index 1e7c3b5..64958b0 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_sin_total.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_sin_total.rml
@@ -9,66 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,138 +30,10 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
-	
-	&lt;!-- storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
 
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
 
 
 &lt;/story&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_solo_totales.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_solo_totales.rml
index 394c65b..fb0cd1a 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_solo_totales.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_solo_totales.rml
@@ -9,66 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,149 +30,104 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lpresupuesto WHERE descuentolpresupuesto &gt; 0 AND idpresupuesto=[idpresupuesto])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
 		&lt;tr&gt;
 			&lt;td&gt;Codigo&lt;/td&gt;
 			&lt;td&gt;Concepto&lt;/td&gt;
 			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
 		&lt;/tr&gt;
-
-&lt;!--LINEAS DETALLE--&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
 &lt;tr&gt;
 &lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
 &lt;td&gt;[desclpresupuesto]&lt;/td&gt;
 &lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+&lt;td&gt;[pvplpresupuesto]&lt;/td&gt;
+&lt;td&gt;[totallpresupuesto]&lt;/td&gt;
 &lt;/tr&gt;
-&lt;!--END LINEAS DETALLE--&gt;
-	
-	
-		
-&lt;!--IF DESCUENTOS--&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
 		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpresupuesto]&lt;/td&gt;
+&lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
+&lt;td&gt;&lt;/td&gt;
+&lt;td&gt;&lt;/td&gt;
+&lt;td&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
 
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 
-&lt;!--LINEAS DESCUENTO--&gt;
 		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot;--&gt;
+		&lt;tr&gt;
+
 			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
 
+ 
 &lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentpresupuesto,'&lt;','\n') AS comment FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 &lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
 &lt;!--END IF QUERY--&gt;
 
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
+	
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
 
-	&lt;/blockTable&gt;
 
-	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_urgente.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_urgente.rml
index a2e3dee..4f02614 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_urgente.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/impers_presupuesto_urgente.rml
@@ -6,9 +6,6 @@
 		&lt;pageGraphics&gt;
 		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
 
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-
 		&lt;!-- URGENTE --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;34&quot;/&gt;
 		&lt;fill color=&quot;(1,0.3,0.3)&quot;/&gt;
@@ -21,66 +18,21 @@
 		&lt;rotate degrees=&quot;-20&quot;/&gt;                                                                         
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;6.5cm&quot;/&gt; 
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -90,139 +42,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/plantilla_barcodepresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/plantilla_barcodepresupuesto.rml
new file mode 100644
index 0000000..3280ae1
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/plantilla_barcodepresupuesto.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/plantilla_cabecerapresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/plantilla_cabecerapresupuesto.rml
new file mode 100644
index 0000000..2a691e4
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/plantilla_cabecerapresupuesto.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha presupuesto--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha presupuesto:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ presupuesto:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_presupuesto] / [numpresupuesto]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/plantilla_despresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/plantilla_despresupuesto.rml
new file mode 100644
index 0000000..fa5744e
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/plantilla_despresupuesto.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lpresupuesto WHERE descuentolpresupuesto &gt; 0 AND idpresupuesto=[idpresupuesto])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpresupuesto]&lt;/td&gt;
+&lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
+&lt;td&gt;[pvplpresupuesto]&lt;/td&gt;
+&lt;td&gt;[totallpresupuesto]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpresupuesto]&lt;/td&gt;
+&lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
+&lt;td&gt;[pvplpresupuesto]&lt;/td&gt;
+&lt;td&gt;[descuentolpresupuesto]%&lt;/td&gt;
+&lt;td&gt;[totallpresupuesto]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentpresupuesto,'&lt;','\n') AS comment FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/plantilla_finpresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/plantilla_finpresupuesto.rml
new file mode 100644
index 0000000..3d8b240
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/plantilla_finpresupuesto.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpresupuesto FROM presupuesto WHERE idpresupuesto = [idpresupuesto]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpresupuesto FROM presupuesto WHERE idpresupuesto = [idpresupuesto]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondpresupuesto/100),0) AS tdesc FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalpresupuesto FROM lpresupuesto WHERE idpresupuesto = [idpresupuesto]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlpresupuesto * pvplpresupuesto * (1-descuentolpresupuesto/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlpresupuesto * pvplpresupuesto * (1-descuentolpresupuesto/100)*(ivalpresupuesto/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lpresupuesto WHERE idpresupuesto=[idpresupuesto] AND ivalpresupuesto=[ivalpresupuesto]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalpresupuesto]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpresupuesto FROM presupuesto WHERE idpresupuesto = [idpresupuesto]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[fpresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM presupuesto WHERE idpresupuesto=[idpresupuesto] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/presupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/presupuesto.rml
index 7529c0a..c3ae680 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/presupuesto.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/en/presupuesto.rml
@@ -9,66 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,139 +30,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_fproforma.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_fproforma.rml
index d1f6a6c..9c2aae7 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_fproforma.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_fproforma.rml
@@ -9,6 +9,9 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cabecerapresupuesto.rml&quot; --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		
 &lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
 &lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
 
@@ -51,24 +54,20 @@
 
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
 
+		
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- F. PROFORMA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-
+		
+		
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,147 +77,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;/blockTable&gt;
-                                        &lt;/td&gt;
-                                &lt;/tr&gt;
-                                &lt;tr&gt;
-                                        &lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-                                                &lt;!--TOTALES--&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf)::NUMERIC(12,2) AS teirpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[teirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;!--END TOTALES--&gt;
-                                                &lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_sin_total.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_sin_total.rml
index 1e7c3b5..a346af6 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_sin_total.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_sin_total.rml
@@ -9,66 +9,23 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cabecerapresupuesto.rml&quot; --&gt;
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
 
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-
+		
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,138 +35,10 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
-
-	
-	&lt;!-- storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace --&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_solo_totales.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_solo_totales.rml
index 7415d6e..eb94e67 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_solo_totales.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_solo_totales.rml
@@ -9,66 +9,23 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cabecerapresupuesto.rml&quot; --&gt;
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
 
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-
+		
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,157 +35,83 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
 		&lt;tr&gt;
 			&lt;td&gt;Codigo&lt;/td&gt;
 			&lt;td&gt;Concepto&lt;/td&gt;
 			&lt;td&gt;Unid:&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
-
-&lt;!--LINEAS DETALLE--&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
 &lt;tr&gt;
 &lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
 &lt;td&gt;[desclpresupuesto]&lt;/td&gt;
 &lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+&lt;td&gt;&lt;/td&gt;
+&lt;td&gt;&lt;/td&gt;
+&lt;td&gt;&lt;/td&gt;
 &lt;/tr&gt;
-&lt;!--END LINEAS DETALLE--&gt;
-	
-	
-		
-&lt;!--IF DESCUENTOS--&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 
 		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 
-&lt;!--LINEAS DESCUENTO--&gt;
+&lt;!--QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot;--&gt;
 		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
+
 			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
 
+ 
 &lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentpresupuesto,'&lt;','\n') AS comment FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 &lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
 &lt;!--END IF QUERY--&gt;
 
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
+	
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
 
-	&lt;/blockTable&gt;
 
-	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;/blockTable&gt;
-                                        &lt;/td&gt;
-                                &lt;/tr&gt;
-                                &lt;tr&gt;
-                                        &lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-                                                &lt;!--TOTALES--&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf)::NUMERIC(12,2) AS teirpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[teirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;!--END TOTALES--&gt;
-                                                &lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_urgente.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_urgente.rml
index 3077183..a971a7e 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_urgente.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_urgente.rml
@@ -6,9 +6,6 @@
 		&lt;pageGraphics&gt;
 		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
 
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-
 		&lt;!-- URGENTE --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;34&quot;/&gt;
 		&lt;fill color=&quot;(1,0.3,0.3)&quot;/&gt;
@@ -21,66 +18,26 @@
 		&lt;rotate degrees=&quot;-20&quot;/&gt;                                                                         
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;6.5cm&quot;/&gt; 
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cabecerapresupuesto.rml&quot; --&gt;
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
 
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-
+		
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -90,147 +47,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;/blockTable&gt;
-                                        &lt;/td&gt;
-                                &lt;/tr&gt;
-                                &lt;tr&gt;
-                                        &lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-                                                &lt;!--TOTALES--&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf)::NUMERIC(12,2) AS teirpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[teirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;!--END TOTALES--&gt;
-                                                &lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/plantilla_barcodepresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/plantilla_barcodepresupuesto.rml
new file mode 100644
index 0000000..3280ae1
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/plantilla_barcodepresupuesto.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/plantilla_cabecerapresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/plantilla_cabecerapresupuesto.rml
new file mode 100644
index 0000000..49c35ef
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/plantilla_cabecerapresupuesto.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha presupuesto--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha presupuesto:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ presupuesto:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/plantilla_despresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/plantilla_despresupuesto.rml
new file mode 100644
index 0000000..fa5744e
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/plantilla_despresupuesto.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lpresupuesto WHERE descuentolpresupuesto &gt; 0 AND idpresupuesto=[idpresupuesto])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpresupuesto]&lt;/td&gt;
+&lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
+&lt;td&gt;[pvplpresupuesto]&lt;/td&gt;
+&lt;td&gt;[totallpresupuesto]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpresupuesto]&lt;/td&gt;
+&lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
+&lt;td&gt;[pvplpresupuesto]&lt;/td&gt;
+&lt;td&gt;[descuentolpresupuesto]%&lt;/td&gt;
+&lt;td&gt;[totallpresupuesto]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentpresupuesto,'&lt;','\n') AS comment FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/plantilla_finpresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/plantilla_finpresupuesto.rml
new file mode 100644
index 0000000..3d8b240
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/plantilla_finpresupuesto.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpresupuesto FROM presupuesto WHERE idpresupuesto = [idpresupuesto]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpresupuesto FROM presupuesto WHERE idpresupuesto = [idpresupuesto]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondpresupuesto/100),0) AS tdesc FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalpresupuesto FROM lpresupuesto WHERE idpresupuesto = [idpresupuesto]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlpresupuesto * pvplpresupuesto * (1-descuentolpresupuesto/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlpresupuesto * pvplpresupuesto * (1-descuentolpresupuesto/100)*(ivalpresupuesto/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lpresupuesto WHERE idpresupuesto=[idpresupuesto] AND ivalpresupuesto=[ivalpresupuesto]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalpresupuesto]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpresupuesto FROM presupuesto WHERE idpresupuesto = [idpresupuesto]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[fpresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM presupuesto WHERE idpresupuesto=[idpresupuesto] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/presupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/presupuesto.rml
index a998e11..8d3e5ee 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/presupuesto.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/presupuesto.rml
@@ -9,65 +9,24 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cabecerapresupuesto.rml&quot; --&gt;
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-
+		
+		
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
+
 		
 	&lt;/pageTemplate&gt;
 
@@ -76,155 +35,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;Total dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto,l]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-&lt;!-- IF QUERY = &quot;SELECT vencpresupuesto FROM presupuesto WHERE idpresupuesto=[idpresupuesto] AND vencpresupuesto IS NOT NULL&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;Este presupuesto es v√°lido hasta: &lt;b&gt;[vencpresupuesto]&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!-- END IF QUERY --&gt;
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;Total:&lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;/blockTable&gt;
-                                        &lt;/td&gt;
-                                &lt;/tr&gt;
-                                &lt;tr&gt;
-                                        &lt;td&gt;
-                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
-                                                &lt;!--TOTALES--&gt;
-                                                        &lt;tr&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[bimp]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;[iva]&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf)::NUMERIC(12,2) AS teirpf FROM irpf WHERE fechairpf &lt;= '[fechapresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[teirpf]&lt;!-- END QUERY--&gt;&lt;/td&gt;
-                                                                &lt;td&gt;  &lt;/td&gt;
-                                                        &lt;/tr&gt;
-                                                &lt;!--END TOTALES--&gt;
-                                                &lt;/blockTable&gt;
-                                        &lt;/td&gt;
-
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_excel.pys b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_excel.pys
index 97855a9..87149b4 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_excel.pys
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_excel.pys
@@ -9,33 +9,65 @@ import ooolib
 # Crea el documento
 doc = ooolib.Calc(&quot;Presupuesto&quot;)
 
-doc.set_column_property(1, 'width', '0.5in')
-doc.set_column_property(2, 'width', '5in')
+doc.set_column_property(1, 'width', '1in')
+doc.set_column_property(2, 'width', '4in')
 doc.set_cell_property('bold', True)
 doc.set_cell_value(2, 2, 'string', 'PRESUPUESTO')
 doc.set_cell_value(3, 2, 'string', u'[numpresupuesto]')
 doc.set_cell_value(4, 2, 'string', u'[refpresupuesto]')
 
-i=4
+i=3
 doc.set_cell_value(1,i,'string','CIF')
 doc.set_cell_value(2,i,'string','NOMBRE')
 doc.set_cell_value(3,i,'string','DIRECCION')
 doc.set_cell_value(4,i,'string','CP')
 doc.set_cell_value(5,i,'string','POBLACION')
-doc.set_cell_value(6,i,'string','BASE')
-doc.set_cell_value(7,i,'string','IMPUESTOS')
-doc.set_cell_value(8,i,'string','TOTAL')
+i = i + 1
+
+&lt;!-- QUERY=&quot;SELECT * FROM cliente WHERE idcliente=[idcliente]&quot;--&gt;
+doc.set_cell_value(1,i,'string','[cifcliente]')
+doc.set_cell_value(2,i,'string','[nomcliente]')
+doc.set_cell_value(3,i,'string','[dircliente]')
+doc.set_cell_value(4,i,'string','[cpcliente]')
+doc.set_cell_value(5,i,'string','[poblcliente]')
+&lt;!-- END QUERY--&gt;
+
+i=6
+doc.set_cell_value(1,i,'string','CODIGO')
+doc.set_cell_value(2,i,'string','NOMBRE')
+doc.set_cell_value(3,i,'string','CANTIDAD')
+doc.set_cell_value(4,i,'string','PVP UND')
+doc.set_cell_value(5,i,'string','IVA')
+doc.set_cell_value(6,i,'string','TOTAL')
 
-#i=7
-&lt;!-- QUERY=&quot;SELECT * FROM lpresupuesto where idpresupuesto=[idpresupuesto]&quot;--&gt;
+i=7
+&lt;!-- QUERY=&quot;SELECT *, (cantlpresupuesto * pvplpresupuesto)::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo = articulo.idarticulo WHERE idpresupuesto = [idpresupuesto] ORDER BY ordenlpresupuesto&quot;--&gt;
 doc.set_cell_value(1,i,'string', u'[codigocompletoarticulo]')
 doc.set_cell_value(2,i,'string', u'[desclpresupuesto]')
-doc.set_cell_value(3,i,'string', u'[cantlpresupuesto]')
-doc.set_cell_value(4,i,'string', u'[pvplpresupuesto]')
-doc.set_cell_value(6,i,'string', u'[ivalpresupuesto]')
+doc.set_cell_value(3,i,'float', u'[cantlpresupuesto]')
+doc.set_cell_value(4,i,'float', u'[pvplpresupuesto]')
+doc.set_cell_value(5,i,'float', u'[ivalpresupuesto]')
+doc.set_cell_value(6,i,'float', u'[totallpresupuesto]')
 i = i + 1
 &lt;!--END QUERY--&gt;
+j = i
+i =  i + 3
 
+&lt;!-- QUERY=&quot;SELECT ivalpresupuesto::INTEGER, SUM (cantlpresupuesto * pvplpresupuesto)::NUMERIC(12,2) AS bimp FROM lpresupuesto WHERE idpresupuesto = [idpresupuesto] GROUP BY ivalpresupuesto  ORDER BY ivalpresupuesto&quot;--&gt;
+doc.set_cell_value(5,i,'string', u'Base: [ivalpresupuesto]%')
+#doc.set_cell_value(7,i,'formula', u&quot;=SUMAR.SI(E7:E&quot;+str(j)+&quot;;\&quot;=[ivalpresupuesto]\&quot;;F7:F&quot;+str(j)+&quot;)&quot;)
+doc.set_cell_value(6,i,'float', '[bimp]')
+i = i + 1
+&lt;!--END QUERY--&gt;
+
+i =  i +3
+doc.set_row_property(i, 'height', '0.5in')
+doc.set_cell_property('color', '#0000ff')
+#doc.set_cell_property('background', '#ff0000')
+doc.set_cell_property('fontsize', '14')
+doc.set_cell_value(5,i,'string', u'TOTAL')
+doc.set_cell_property('bold', True)
+doc.set_cell_value(6,i,'formula', u'=SUM(F7:F'+str(j-1)+')')
 
 # Guardamos el documento
 doc.save(&quot;impers_presupuesto_excel.ods&quot;)
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_fproforma.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_fproforma.rml
index 63c25fd..991d1c7 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_fproforma.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_fproforma.rml
@@ -9,6 +9,8 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+		
 &lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
 &lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
 
@@ -53,22 +55,20 @@
 
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- F. PROFORMA -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-
+		
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- F. PROFORMA -&lt;/drawCentredString&gt;
+		
+		
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,139 +78,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_sin_total.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_sin_total.rml
index 1e7c3b5..64958b0 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_sin_total.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_sin_total.rml
@@ -9,66 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,138 +30,10 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
-	
-	&lt;!-- storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace --&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
 
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
 
 
 &lt;/story&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_solo_totales.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_solo_totales.rml
index 394c65b..fb0cd1a 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_solo_totales.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_solo_totales.rml
@@ -9,66 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,149 +30,104 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lpresupuesto WHERE descuentolpresupuesto &gt; 0 AND idpresupuesto=[idpresupuesto])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
 		&lt;tr&gt;
 			&lt;td&gt;Codigo&lt;/td&gt;
 			&lt;td&gt;Concepto&lt;/td&gt;
 			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
 		&lt;/tr&gt;
-
-&lt;!--LINEAS DETALLE--&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
 &lt;tr&gt;
 &lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
 &lt;td&gt;[desclpresupuesto]&lt;/td&gt;
 &lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+&lt;td&gt;[pvplpresupuesto]&lt;/td&gt;
+&lt;td&gt;[totallpresupuesto]&lt;/td&gt;
 &lt;/tr&gt;
-&lt;!--END LINEAS DETALLE--&gt;
-	
-	
-		
-&lt;!--IF DESCUENTOS--&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
 		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpresupuesto]&lt;/td&gt;
+&lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
+&lt;td&gt;&lt;/td&gt;
+&lt;td&gt;&lt;/td&gt;
+&lt;td&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
 
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 
-&lt;!--LINEAS DESCUENTO--&gt;
 		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot;--&gt;
+		&lt;tr&gt;
+
 			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
 
+ 
 &lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentpresupuesto,'&lt;','\n') AS comment FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 
 		&lt;tr&gt;
 			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
 		&lt;/tr&gt;
 &lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
 &lt;!--END IF QUERY--&gt;
 
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
+	
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
 
-	&lt;/blockTable&gt;
 
-	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_urgente.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_urgente.rml
index a2e3dee..4f02614 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_urgente.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/impers_presupuesto_urgente.rml
@@ -6,9 +6,6 @@
 		&lt;pageGraphics&gt;
 		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
 
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-
 		&lt;!-- URGENTE --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;34&quot;/&gt;
 		&lt;fill color=&quot;(1,0.3,0.3)&quot;/&gt;
@@ -21,66 +18,21 @@
 		&lt;rotate degrees=&quot;-20&quot;/&gt;                                                                         
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;6.5cm&quot;/&gt; 
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ fra:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -90,139 +42,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/plantilla_barcodepresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/plantilla_barcodepresupuesto.rml
new file mode 100644
index 0000000..3280ae1
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/plantilla_barcodepresupuesto.rml
@@ -0,0 +1,5 @@
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/plantilla_cabecerapresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/plantilla_cabecerapresupuesto.rml
new file mode 100644
index 0000000..2a691e4
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/plantilla_cabecerapresupuesto.rml
@@ -0,0 +1,10 @@
+		&lt;!--Fecha presupuesto--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha presupuesto:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ presupuesto:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_presupuesto] / [numpresupuesto]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/plantilla_despresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/plantilla_despresupuesto.rml
new file mode 100644
index 0000000..fa5744e
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/plantilla_despresupuesto.rml
@@ -0,0 +1,91 @@
+&lt;!-- IF =&quot;NOT EXISTS (SELECT * FROM lpresupuesto WHERE descuentolpresupuesto &gt; 0 AND idpresupuesto=[idpresupuesto])&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpresupuesto]&lt;/td&gt;
+&lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
+&lt;td&gt;[pvplpresupuesto]&lt;/td&gt;
+&lt;td&gt;[totallpresupuesto]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- ELSE --&gt;
+
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;2.50cm, 6.5cm, 1.8cm, 2cm, 2.5cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;% Descuento:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlpresupuesto*pvplpresupuesto*(1-descuentolpresupuesto/100))::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo=articulo.idarticulo WHERE idpresupuesto= [idpresupuesto]&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclpresupuesto]&lt;/td&gt;
+&lt;td&gt;[cantlpresupuesto]&lt;/td&gt;
+&lt;td&gt;[pvplpresupuesto]&lt;/td&gt;
+&lt;td&gt;[descuentolpresupuesto]%&lt;/td&gt;
+&lt;td&gt;[totallpresupuesto]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+
+&lt;!-- END IF --&gt;
+
+&lt;!--IF QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;13.00cm, 2.5cm, 3.00cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+&lt;!--QUERY=&quot;SELECT * FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot;--&gt;
+		&lt;tr&gt;
+
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentpresupuesto,'&lt;','\n') AS comment FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
+&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;1.00cm, 17.5cm&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;/blockTable&gt;
+&lt;!--END IF QUERY--&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/plantilla_finpresupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/plantilla_finpresupuesto.rml
new file mode 100644
index 0000000..3d8b240
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/plantilla_finpresupuesto.rml
@@ -0,0 +1,96 @@
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpresupuesto FROM presupuesto WHERE idpresupuesto = [idpresupuesto]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpresupuesto FROM presupuesto WHERE idpresupuesto = [idpresupuesto]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+&lt;!-- QUERY1 = &quot;SELECT COALESCE(SUM(proporciondpresupuesto/100),0) AS tdesc FROM dpresupuesto WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+
+&lt;!-- QUERY2 = &quot;SELECT DISTINCT ivalpresupuesto FROM lpresupuesto WHERE idpresupuesto = [idpresupuesto]&quot;--&gt;
+
+&lt;!-- QUERY3 = &quot;SELECT SUM(cantlpresupuesto * pvplpresupuesto * (1-descuentolpresupuesto/100)*(1-[tdesc]))::NUMERIC(12,2) AS bimp, SUM(cantlpresupuesto * pvplpresupuesto * (1-descuentolpresupuesto/100)*(ivalpresupuesto/100)*(1-[tdesc]))::NUMERIC(12,2) AS iva  FROM lpresupuesto WHERE idpresupuesto=[idpresupuesto] AND ivalpresupuesto=[ivalpresupuesto]&quot; --&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[ivalpresupuesto]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY4=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpresupuesto FROM presupuesto WHERE idpresupuesto = [idpresupuesto]) AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY4--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY5=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[fpresupuesto]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY5--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+&lt;!-- END QUERY3 --&gt;
+&lt;!-- END QUERY2 --&gt;
+
+&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idpresupuesto=[idpresupuesto]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM presupuesto WHERE idpresupuesto=[idpresupuesto] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/presupuesto.rml b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/presupuesto.rml
index 7529c0a..c3ae680 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/presupuesto.rml
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/fr/presupuesto.rml
@@ -9,66 +9,18 @@
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		
-&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
-		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
-
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
-
-
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
-		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
-
-		&lt;!--Fecha presupuesto--&gt;
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
-
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ presupuesto:&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
-
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[fpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[numpresupuesto]&lt;/drawString&gt;
-		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[refpresupuesto]&lt;/drawString&gt;
-
 		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
-
-		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- PRESUPUESTO -&lt;/drawCentredString&gt;
-
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_cliente.rml&quot; --&gt;
 
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
 		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
 
-		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
-		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
 
 	&lt;/pageGraphics&gt;
 
 
-		&lt;!-- FRAME DE CONTENIDOS --&gt;
-		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_frame.rml&quot; --&gt;
 
 		
 	&lt;/pageTemplate&gt;
@@ -78,139 +30,15 @@
 &lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
 
 &lt;story&gt;	
-	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
-		&lt;tr&gt;
-			&lt;td&gt;Codigo&lt;/td&gt;
-			&lt;td&gt;Concepto&lt;/td&gt;
-			&lt;td&gt;Unid:&lt;/td&gt;
-			&lt;td&gt;Precio/u:&lt;/td&gt;
-			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
-		&lt;/tr&gt;
-		[story codigocompletoarticulo, descpresupuesto, cantpresupuesto, pvppresupuesto, subtotalpresupuesto]
-	
-&lt;!--IF DESCUENTOS--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Descuento/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;% Dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;&lt;u&gt;Total dto:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-&lt;!--LINEAS DESCUENTO--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;[proporciondpresupuesto]%&lt;/td&gt;
-			&lt;td&gt;[totaldescdpresupuesto]&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END LINEAS DESCUENTO--&gt;
-&lt;!--END IF DESCUENTOS--&gt;
-
-
-&lt;!--IF QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-&lt;!--QUERY=&quot;SELECT comentpresupuesto FROM presupuesto WHERE length(comentpresupuesto) &gt; 0 AND idpresupuesto = [idpresupuesto]&quot;--&gt;
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;&lt;u&gt;Comentario/s:&lt;/u&gt;&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comentpresupuesto]&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-&lt;!--END QUERY--&gt;
-&lt;!--END IF QUERY--&gt;
-
-		&lt;tr&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Este presupuesto es v√°lido hasta: [vencpresupuesto]&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;
-			NOTA: Es imprescindible la presentaci√≥n de este presupuesto para mantener los precios y condiciones.
-			&lt;/para&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-			&lt;td&gt;&lt;/td&gt;
-		&lt;/tr&gt;
-
-	&lt;/blockTable&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_despresupuesto.rml&quot; --&gt;
 
 	
-	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
-		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
-			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
-				&lt;tr&gt;
-					&lt;td colspan=&quot;2&quot;&gt;
-						&lt;blockTable style=&quot;titulo&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Base Imponible:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;I.V.A.%:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Tot I.V.A.:&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;Total:&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-				&lt;tr&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;contenido&quot; colWidths=&quot;5.5cm, 3.2cm, 1.4cm, 1.75cm, 1.4cm, 1.9cm, 1.15cm&quot; &gt;
-						&lt;!--TOTALES--&gt;
-							&lt;tr&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[bimp]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[tbimp]%&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-								&lt;td&gt;[iva]&lt;/td&gt;
-								&lt;td&gt;  &lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;!--END TOTALES--&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-					&lt;td&gt;
-						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
-							&lt;tr&gt;
-								&lt;td&gt;[total] ‚Ç¨&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/blockTable&gt;
-					&lt;/td&gt;
-				&lt;/tr&gt;
-			&lt;/blockTable&gt;
-		&lt;/place&gt;
-	&lt;/storyPlace&gt;
-
-&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
-&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;PRE [idpresupuesto] [numpresupuesto] [refpresupuesto]&lt;/barCode&gt;
-&lt;/place&gt;
-&lt;/storyPlace&gt;
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_finpresupuesto.rml&quot; --&gt;
+
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_barcodepresupuesto.rml&quot; --&gt;
+
 
 
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/bulmafact/plugins/pluginbf_contrato/contratoview.cpp b/bulmages/bulmafact/plugins/pluginbf_contrato/contratoview.cpp
index ce77aac..e17357e 100644
--- a/bulmages/bulmafact/plugins/pluginbf_contrato/contratoview.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_contrato/contratoview.cpp
@@ -90,6 +90,22 @@ ContratoView::ContratoView ( BfCompany *comp, QWidget *parent )
 }
 
 
+/** Pintar un contrato.
+*/
+/**
+\param idbudget
+\return
+**/
+void ContratoView::pintarPost ( )
+{
+    BL_FUNC_DEBUG
+
+    /// Escribimos como descripcion el nombre del cliente para que aparezca en el titulo y en el dockwidget
+    setDescripcion( mui_idcliente-&gt;fieldValue(&quot;nomcliente&quot;) + &quot;\n&quot; + dbValue(&quot;nomcontrato&quot;));
+}
+
+
+
 /** Al destruir la clase provocamos que se refresque el listado de contratos.
     Para que salga actualizado.
 */
diff --git a/bulmages/bulmafact/plugins/pluginbf_contrato/contratoview.h b/bulmages/bulmafact/plugins/pluginbf_contrato/contratoview.h
index 920fa4a..2a3e10f 100644
--- a/bulmages/bulmafact/plugins/pluginbf_contrato/contratoview.h
+++ b/bulmages/bulmafact/plugins/pluginbf_contrato/contratoview.h
@@ -65,6 +65,7 @@ public:
     void inicializar();
     virtual int afterSave();
     virtual int cargarPost ( QString id );
+    virtual void pintarPost ( );
 
 public slots:
     virtual void on_subform2_itemDoubleClicked ( QTableWidgetItem * );
diff --git a/bulmages/bulmafact/plugins/pluginbf_correo/chosemailer.cpp b/bulmages/bulmafact/plugins/pluginbf_correo/chosemailer.cpp
index e2f3ac1..1e4e5ee 100644
--- a/bulmages/bulmafact/plugins/pluginbf_correo/chosemailer.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_correo/chosemailer.cpp
@@ -61,7 +61,7 @@ ChoseMailer::ChoseMailer(QWidget *parent) :
     /// Ejemplo: mui_mailclients-&gt;addItem(QString(&quot;Programa Ejemplo&quot;), QString(&quot;ejemplo&quot;) );
     
     mui_mailclients-&gt;addItem(QString(_(&quot;Seleccione su cliente de correo&quot;)), QString(&quot;0&quot;) );
-    mui_mailclients-&gt;addItem(QString(&quot;Mozilla Thunderbird&quot;), QString(&quot;thunderbird&quot;) );
+    mui_mailclients-&gt;addItem(QString(&quot;Mozilla Thunderbird (Recomendado!!)&quot;), QString(&quot;thunderbird&quot;) );
     mui_mailclients-&gt;addItem(QString(&quot;Kmail&quot;), QString(&quot;kmail&quot;) );
     mui_mailclients-&gt;addItem(QString(&quot;Evolution&quot;), QString(&quot;evolution&quot;) );
     #ifdef Q_OS_WIN32
diff --git a/bulmages/bulmafact/src/bfform.cpp b/bulmages/bulmafact/src/bfform.cpp
index 4990414..18b94d3 100644
--- a/bulmages/bulmafact/src/bfform.cpp
+++ b/bulmages/bulmafact/src/bfform.cpp
@@ -305,14 +305,20 @@ void BfForm::parseTagsBf ( QString &amp;buff, int tipoEscape )
 
         BlFixed irpf ( &quot;0&quot; );
         
-        cur = mainCompany() -&gt;loadQuery ( &quot;SELECT * FROM configuracion WHERE nombre = 'IRPF'&quot; );
-        
-        if ( cur ) {
-            if ( !cur-&gt;eof() ) {
-                irpf = BlFixed ( cur-&gt;value( &quot;valor&quot; ) );
-            } // end if
-            delete cur;
-        } // end if
+	/// El calculo del IRPF basandonos en la fecha.
+	QString campfecha = &quot;fecha&quot; +  tableName();
+	if (!exists(campfecha)) 
+	  campfecha = &quot;f&quot; + tableName();
+	if (exists(campfecha)) {
+	    QString query = &quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= &quot;+QString (dbValue(campfecha)==&quot;&quot; ? &quot;now()&quot; : &quot;'&quot; + dbValue(campfecha) +&quot;'::DATE&quot;) + &quot; ORDER BY fechairpf DESC LIMIT 1&quot;;
+	    BlDbRecordSet *cur = mainCompany() -&gt;loadQuery ( query);
+	    if ( cur ) {
+		if ( !cur-&gt;eof() ) {
+		    irpf = BlFixed ( cur-&gt;value( &quot;tasairpf&quot; ) );
+		} // end if
+		delete cur;
+	    } // end if
+	} // end if
 
         if ( exists ( &quot;id&quot; + tableName() ) )
             buff.replace ( &quot;[id&quot; + tableName() + &quot;]&quot;, blStringEscape ( dbValue ( &quot;id&quot; + tableName() ), tipoEscape ) );
diff --git a/bulmages/installbulmages/dbmodels/actualizar/rev-1.5.sql b/bulmages/installbulmages/dbmodels/actualizar/rev-1.5.sql
new file mode 100644
index 0000000..93c1b0f
--- /dev/null
+++ b/bulmages/installbulmages/dbmodels/actualizar/rev-1.5.sql
@@ -0,0 +1,110 @@
+--
+-- ACTUALIZACION DE LA BASE DE DATOS DE BULMACONT
+--
+
+
+-- Ocultamos las noticias
+SET client_min_messages TO warning;
+
+
+BEGIN;
+
+--
+-- Estas primeras funciones cambiaran los tipos de columnas que estan como flotantes a NUMERIC.
+-- Se trata de un parche que se desea aplicar para almacenar los tipos monetarios
+-- ya que actualmente se encuantran almacenados como 'doubles' y es preferible
+-- que se almacenen como tipo 'numeric'.
+-- Todas devuelven como valor numerico el nmero de filas influenciadas por el cambio
+-- NOTA: Si alguien sabe como pasar por parametro un nombre de tabla y campo a modificar se
+-- hara mucho mas sencillito porque solo habran que implementar un funcion ya que siempre
+-- hay que hacer lo mismo.
+--
+
+--
+-- Funci√≥n auxiliar para borrar funciones limpiamente
+--
+CREATE OR REPLACE FUNCTION drop_if_exists_table(text) RETURNS INTEGER AS '
+DECLARE
+    tbl_name ALIAS FOR $1;
+BEGIN
+    IF (select count(*) from pg_tables where tablename=$1) THEN
+	EXECUTE ''DROP TABLE '' || $1;
+	RETURN 1;
+    END IF;
+    RETURN 0;
+END;
+'
+language 'plpgsql';
+
+
+CREATE OR REPLACE FUNCTION drop_if_exists_proc(text, text) RETURNS INTEGER AS '
+DECLARE
+    proc_name ALIAS FOR $1;
+    proc_params ALIAS FOR $2;
+BEGIN
+    IF (select count(*) from pg_proc where proname=$1) THEN
+	EXECUTE ''DROP FUNCTION '' || $1 || ''(''||$2||'') CASCADE'';
+	RETURN 1;
+    END IF;
+    RETURN 0;
+END;
+'
+language 'plpgsql';
+
+
+-- ======================== COMPROBACION DE CUAL ES LA ULTIMA VERSION ==================================
+
+
+CREATE OR REPLACE FUNCTION compruebarevision() RETURNS INTEGER AS '
+DECLARE
+	rs RECORD;
+BEGIN
+	SELECT INTO rs * FROM configuracion WHERE nombre=''DatabaseRevision'' AND ( valor LIKE ''0.14.1%'' OR valor = ''0.13.1-0002'' OR valor LIKE ''1.5.%'');
+	IF FOUND THEN
+		RETURN 0;
+	ELSE
+		RAISE EXCEPTION ''La base de datos no tiene la version adecuada para aplicar este parche'';
+		RETURN -1;		 
+	END IF;
+END;
+'   LANGUAGE plpgsql;
+SELECT compruebarevision();
+DROP FUNCTION compruebarevision() CASCADE;
+\echo &quot;Comprobada la revision&quot;
+
+
+
+
+
+
+-- ================================= A PARTIR DE AQUI EL PARCHE=========================
+-- =====================================================================================
+
+-- ================================== FIN PARCHE. ACTUALIZACION  =======================
+-- =====================================================================================
+
+-- Agregamos nuevos parametros de configuracion
+--
+CREATE OR REPLACE FUNCTION actualizarevision() RETURNS INTEGER AS '
+DECLARE
+	rs RECORD;
+BEGIN
+	SELECT INTO rs * FROM configuracion WHERE nombre = ''DatabaseRevision'';
+	IF FOUND THEN
+		UPDATE CONFIGURACION SET valor = ''1.5.1-0001'' WHERE nombre = ''DatabaseRevision'';
+	ELSE
+		INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''1.5.1-0001'');
+	END IF;
+	RETURN 0;
+END;
+'   LANGUAGE plpgsql;
+SELECT actualizarevision();
+DROP FUNCTION actualizarevision() CASCADE;
+\echo &quot;Actualizada la revision de la base de datos a la version 1.5.1&quot;
+
+DROP FUNCTION drop_if_exists_table(text) CASCADE;
+DROP FUNCTION drop_if_exists_proc(text, text) CASCADE;
+
+
+COMMIT;
+
diff --git a/bulmages/installbulmages/dbmodels/actualizar/revf-1.5.sql b/bulmages/installbulmages/dbmodels/actualizar/revf-1.5.sql
new file mode 100644
index 0000000..9e6cf51
--- /dev/null
+++ b/bulmages/installbulmages/dbmodels/actualizar/revf-1.5.sql
@@ -0,0 +1,338 @@
+--
+-- ACTUALIZACION DE LA BASE DE DATOS DE BULMAFACT
+--
+
+
+-- Ocultamos las noticias
+SET client_min_messages TO warning;
+
+
+BEGIN;
+
+--
+-- Estas primeras funciones cambiaran los tipos de columnas que estan como flotantes a NUMERIC.
+-- Se trata de un parche que se desea aplicar para almacenar los tipos monetarios
+-- ya que actualmente se encuantran almacenados como 'doubles' y es preferible
+-- que se almacenen como tipo 'numeric'.
+-- Todas devuelven como valor numerico el nmero de filas influenciadas por el cambio
+-- NOTA: Si alguien sabe como pasar por parametro un nombre de tabla y campo a modificarse
+-- hara mucho mas sencillito porque solo habra que implementar un funcion ya que siempre
+-- hay que hacer lo mismo.
+--
+
+--
+-- Funcion auxiliar para borrar funciones limpiamente
+--
+CREATE OR REPLACE FUNCTION drop_if_exists_table (text) RETURNS INTEGER AS '
+DECLARE
+    tbl_name ALIAS FOR $1;
+BEGIN
+    IF (select count(*) from pg_tables where tablename=$1) THEN
+	EXECUTE ''DROP TABLE '' || $1;
+	RETURN 1;
+    END IF;
+    RETURN 0;
+END;
+'
+language 'plpgsql';
+
+
+CREATE OR REPLACE FUNCTION drop_if_exists_proc (text, text) RETURNS INTEGER AS '
+DECLARE
+    proc_name ALIAS FOR $1;
+    proc_params ALIAS FOR $2;
+BEGIN
+    IF (select count(*) from pg_proc where proname=$1) THEN
+	EXECUTE ''DROP FUNCTION '' || $1 || ''(''||$2||'') CASCADE'';
+	RETURN 1;
+    END IF;
+    RETURN 0;
+END;
+'
+language 'plpgsql';
+
+-- SELECT drop_if_exists_proc ('calculacodigocompletoarticulo','');
+
+-- ======================== COMPROBACION DE CUAL ES LA ULTIMA VERSION ==================================
+
+CREATE OR REPLACE FUNCTION compruebarevision() RETURNS INTEGER AS '
+DECLARE
+	rs RECORD;
+BEGIN
+	SELECT INTO rs * FROM configuracion WHERE nombre=''DatabaseRevision'' AND ( valor LIKE ''0.14.1%'' OR valor = ''0.13.1-0006'' OR valor LIKE ''1.5.%'');
+	IF FOUND THEN
+		RETURN 0;
+	ELSE
+		RAISE EXCEPTION '' Version de la base de datos invalida, aplique parches anteriores'';
+		RETURN -1;
+	END IF;
+END;
+'   LANGUAGE plpgsql;
+SELECT compruebarevision();
+DROP FUNCTION compruebarevision() CASCADE;
+\echo &quot;Comprobada la revision&quot;
+
+-- ========================  FIN DE LA COMPROBACION ============================
+
+
+-- ================================== ACTUALIZACION  ===================================
+
+-- Creamos la tabla de gestion de IRPF
+\echo -n ':: Creamos la tabla de gestion de IRPF '
+CREATE OR REPLACE FUNCTION aux() RETURNS INTEGER AS '
+DECLARE
+    rs RECORD;
+BEGIN
+
+    SELECT INTO rs * FROM pg_tables WHERE tablename=''irpf'';
+    IF NOT FOUND THEN
+	CREATE TABLE irpf (
+	    idirpf serial PRIMARY KEY,
+	    fechairpf date NOT NULL,
+	    tasairpf  numeric(12,2)
+	);
+
+    END IF;
+
+    DELETE FROM configuracion WHERE nombre=''IRPF'';
+
+   RETURN 0;
+END;
+' LANGUAGE plpgsql;
+SELECT aux();
+DROP FUNCTION aux() CASCADE;
+
+
+
+\echo -n ':: Funcion que calcula el total de una factura ... '
+CREATE OR REPLACE FUNCTION calctotalfactura(integer) RETURNS numeric(12, 2)
+AS '
+DECLARE
+    idp ALIAS FOR $1;
+    totalBImponibleLineas numeric(12, 2);
+    totalIRPF numeric(12, 2);
+    totalIVA numeric(12, 2);
+    totalRE numeric(12, 2);
+    totalTotal numeric(12, 2);
+    rs RECORD;
+
+BEGIN
+    totalBImponibleLineas := 0;
+    totalIRPF := 0;
+    totalIVA := 0;
+    totalRE := 0;
+    totalTotal := 0;
+
+    FOR rs IN SELECT cantlfactura * pvplfactura * (1 - descuentolfactura / 100) AS subtotal1 FROM lfactura WHERE idfactura = idp LOOP
+	totalBImponibleLineas := totalBImponibleLineas + rs.subtotal1;
+    END LOOP;
+
+
+    SELECT INTO rs tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = idp) ORDER BY fechairpf DESC LIMIT 1;
+    IF FOUND THEN
+        totalIRPF := totalBImponibleLineas * (rs.tasairpf / 100);
+    END IF;
+
+    FOR rs IN SELECT cantlfactura * pvplfactura * (1 - descuentolfactura / 100) * (ivalfactura / 100) AS subtotal1 FROM lfactura WHERE idfactura = idp LOOP
+	totalIVA := totalIVA + rs.subtotal1;
+    END LOOP;
+
+    FOR rs IN SELECT cantlfactura * pvplfactura * (1 - descuentolfactura / 100) * (reqeqlfactura / 100) AS subtotal1 FROM lfactura WHERE idfactura = idp LOOP
+	totalRE := totalRE + rs.subtotal1;
+    END LOOP;
+
+    FOR rs IN SELECT proporciondfactura FROM dfactura WHERE idfactura = idp LOOP
+	totalBImponibleLineas := totalBImponibleLineas * (1 - rs.proporciondfactura / 100);
+	totalIRPF := totalIRPF * (1 - rs.proporciondfactura / 100);
+	totalIVA := totalIVA * (1 - rs.proporciondfactura / 100);
+	totalRE := totalRE * (1 - rs.proporciondfactura / 100);
+    END LOOP;
+
+    totalTotal = totalBImponibleLineas - totalIRPF + totalIVA + totalRE;
+
+    RETURN totalTotal;
+END;
+' LANGUAGE plpgsql;
+
+
+
+\echo -n ':: Funcion que calcula el total de un presupuesto a cliente ... '
+CREATE OR REPLACE FUNCTION calctotalpres(integer) RETURNS numeric(12, 2)
+AS '
+DECLARE
+    idp ALIAS FOR $1;
+    totalBImponibleLineas numeric(12, 2);
+    totalIRPF numeric(12, 2);
+    totalIVA numeric(12, 2);
+    totalRE numeric(12, 2);
+    totalTotal numeric(12, 2);
+    rs RECORD;
+    rs2 RECORD;
+
+BEGIN
+    totalBImponibleLineas := 0;
+    totalIRPF := 0;
+    totalIVA := 0;
+    totalRE := 0;
+    totalTotal := 0;
+
+    FOR rs IN SELECT cantlpresupuesto * pvplpresupuesto * (1 - descuentolpresupuesto / 100) AS subtotal1 FROM lpresupuesto WHERE idpresupuesto = idp LOOP
+	totalBImponibleLineas := totalBImponibleLineas + rs.subtotal1;
+    END LOOP;
+
+    SELECT INTO rs tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fpresupuesto FROM presupuesto WHERE idpresupuesto = idp) ORDER BY fechairpf DESC LIMIT 1;
+    IF FOUND THEN
+        totalIRPF := totalBImponibleLineas * (rs.tasairpf / 100);
+    END IF;
+
+    FOR rs IN SELECT cantlpresupuesto * pvplpresupuesto * (1 - descuentolpresupuesto / 100) * (ivalpresupuesto / 100) AS subtotal1 FROM lpresupuesto WHERE idpresupuesto = idp LOOP
+	totalIVA := totalIVA + rs.subtotal1;
+    END LOOP;
+
+    FOR rs IN SELECT cantlpresupuesto * pvplpresupuesto * (1 - descuentolpresupuesto / 100) * (reqeqlpresupuesto / 100) AS subtotal1 FROM lpresupuesto WHERE idpresupuesto = idp LOOP
+	totalRE := totalRE + rs.subtotal1;
+    END LOOP;
+
+    FOR rs IN SELECT proporciondpresupuesto FROM dpresupuesto WHERE idpresupuesto = idp LOOP
+	totalBImponibleLineas := totalBImponibleLineas * (1 - rs.proporciondpresupuesto / 100);
+	totalIRPF := totalIRPF * (1 - rs.proporciondpresupuesto / 100);
+	totalIVA := totalIVA * (1 - rs.proporciondpresupuesto / 100);
+	totalRE := totalRE * (1 - rs.proporciondpresupuesto / 100);
+    END LOOP;
+
+    totalTotal = totalBImponibleLineas - totalIRPF + totalIVA + totalRE;
+
+    RETURN totalTotal;
+END;
+' LANGUAGE plpgsql;
+
+
+\echo -n ':: Funcion que calcula el total de un pedido de cliente ... '
+CREATE OR REPLACE FUNCTION calctotalpedcli(integer) RETURNS numeric(12, 2)
+AS '
+DECLARE
+    idp ALIAS FOR $1;
+    totalBImponibleLineas numeric(12, 2);
+    totalIRPF numeric(12, 2);
+    totalIVA numeric(12, 2);
+    totalRE numeric(12, 2);
+    totalTotal numeric(12, 2);
+    rs RECORD;
+    rs2 RECORD;
+
+BEGIN
+    totalBImponibleLineas := 0;
+    totalIRPF := 0;
+    totalIVA := 0;
+    totalRE := 0;
+    totalTotal := 0;
+
+    FOR rs IN SELECT cantlpedidocliente * pvplpedidocliente * (1 - descuentolpedidocliente / 100) AS subtotal1 FROM lpedidocliente WHERE idpedidocliente = idp LOOP
+	totalBImponibleLineas := totalBImponibleLineas + rs.subtotal1;
+    END LOOP;
+
+    SELECT INTO rs tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fechapedidocliente FROM pedidocliente WHERE idpedidocliente = idp) ORDER BY fechairpf DESC LIMIT 1;
+    IF FOUND THEN
+        totalIRPF := totalBImponibleLineas * (rs.tasairpf / 100);
+    END IF;
+
+    FOR rs IN SELECT cantlpedidocliente * pvplpedidocliente * (1 - descuentolpedidocliente / 100) * (ivalpedidocliente / 100) AS subtotal1 FROM lpedidocliente WHERE idpedidocliente = idp LOOP
+	totalIVA := totalIVA + rs.subtotal1;
+    END LOOP;
+
+    FOR rs IN SELECT cantlpedidocliente * pvplpedidocliente * (1 - descuentolpedidocliente / 100) * (reqeqlpedidocliente / 100) AS subtotal1 FROM lpedidocliente WHERE idpedidocliente = idp LOOP
+	totalRE := totalRE + rs.subtotal1;
+    END LOOP;
+
+    FOR rs IN SELECT proporciondpedidocliente FROM dpedidocliente WHERE idpedidocliente = idp LOOP
+	totalBImponibleLineas := totalBImponibleLineas * (1 - rs.proporciondpedidocliente / 100);
+	totalIRPF := totalIRPF * (1 - rs.proporciondpedidocliente / 100);
+	totalIVA := totalIVA * (1 - rs.proporciondpedidocliente / 100);
+	totalRE := totalRE * (1 - rs.proporciondpedidocliente / 100);
+    END LOOP;
+
+    totalTotal = totalBImponibleLineas - totalIRPF + totalIVA + totalRE;
+
+    RETURN totalTotal;
+END;
+' LANGUAGE plpgsql;
+
+
+\echo -n ':: Funcion que calcula el total de un albaran a cliente ... '
+CREATE OR REPLACE FUNCTION calctotalalbaran(integer) RETURNS numeric(12, 2)
+AS '
+DECLARE
+    idp ALIAS FOR $1;
+    totalBImponibleLineas numeric(12, 2);
+    totalIRPF numeric(12, 2);
+    totalIVA numeric(12, 2);
+    totalRE numeric(12, 2);
+    totalTotal numeric(12, 2);
+    rs RECORD;
+    rs2 RECORD;
+
+BEGIN
+    totalBImponibleLineas := 0;
+    totalIRPF := 0;
+    totalIVA := 0;
+    totalRE := 0;
+    totalTotal := 0;
+
+    FOR rs IN SELECT cantlalbaran * pvplalbaran * (1 - descuentolalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
+	totalBImponibleLineas := totalBImponibleLineas + rs.subtotal1;
+    END LOOP;
+
+    SELECT INTO rs tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fechaalbaran FROM albaran WHERE idalbaran = idp) ORDER BY fechairpf DESC LIMIT 1;
+    IF FOUND THEN
+        totalIRPF := totalBImponibleLineas * (rs.tasairpf / 100);
+    END IF;
+
+    FOR rs IN SELECT cantlalbaran * pvplalbaran * (1 - descuentolalbaran / 100) * (ivalalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
+	totalIVA := totalIVA + rs.subtotal1;
+    END LOOP;
+
+    FOR rs IN SELECT cantlalbaran * pvplalbaran * (1 - descuentolalbaran / 100) * (reqeqlalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
+	totalRE := totalRE + rs.subtotal1;
+    END LOOP;
+
+    FOR rs IN SELECT proporciondalbaran FROM dalbaran WHERE idalbaran = idp LOOP
+	totalBImponibleLineas := totalBImponibleLineas * (1 - rs.proporciondalbaran / 100);
+	totalIRPF := totalIRPF * (1 - rs.proporciondalbaran / 100);
+	totalIVA := totalIVA * (1 - rs.proporciondalbaran / 100);
+	totalRE := totalRE * (1 - rs.proporciondalbaran / 100);
+    END LOOP;
+
+    totalTotal = totalBImponibleLineas - totalIRPF + totalIVA + totalRE;
+
+    RETURN totalTotal;
+END;
+' LANGUAGE plpgsql;
+
+
+-- =====================================================================================
+
+-- Agregamos nuevos parametros de configuracion
+--
+CREATE OR REPLACE FUNCTION actualizarevision() RETURNS INTEGER AS '
+DECLARE
+	rs RECORD;
+BEGIN
+	SELECT INTO rs * FROM configuracion WHERE nombre = ''DatabaseRevision'';
+	IF FOUND THEN
+		UPDATE CONFIGURACION SET valor = ''1.5.1-0002'' WHERE nombre = ''DatabaseRevision'';
+	ELSE
+		INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''1.5.1-0002'');
+	END IF;
+	RETURN 0;
+END;
+'   LANGUAGE plpgsql;
+SELECT actualizarevision();
+DROP FUNCTION actualizarevision() CASCADE;
+\echo &quot;Actualizada la revision de la base de datos a la version 1.5.2&quot;
+
+DROP FUNCTION drop_if_exists_table(text) CASCADE;
+DROP FUNCTION drop_if_exists_proc(text, text) CASCADE;
+
+
+COMMIT;
+
diff --git a/bulmages/installbulmages/openreports/ca/canuales.rml b/bulmages/installbulmages/openreports/ca/canuales.rml
index 2562056..002d445 100644
--- a/bulmages/installbulmages/openreports/ca/canuales.rml
+++ b/bulmages/installbulmages/openreports/ca/canuales.rml
@@ -1,7 +1,7 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;1cm&quot; rightMargin=&quot;0.5cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Comptes Anuals&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;1cm&quot; rightMargin=&quot;0.5cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Cuentas Anuales&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
 		&lt;!-- EL LOGO DE CABECERA --&gt;
@@ -23,8 +23,7 @@
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-&lt;!--		&lt;drawString x=&quot;9.5cm&quot; y=&quot;0.5cm&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en galdi.es</A>&lt;/drawString&gt;
-	--&gt;	&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;16&quot;/&gt;
 		&lt;drawString x=&quot;11cm&quot; y=&quot;26.2cm&quot;&gt;[titulo]&lt;/drawString&gt;
diff --git a/bulmages/installbulmages/openreports/ca/diario.rml b/bulmages/installbulmages/openreports/ca/diario.rml
index d55ea87..0463edf 100644
--- a/bulmages/installbulmages/openreports/ca/diario.rml
+++ b/bulmages/installbulmages/openreports/ca/diario.rml
@@ -11,7 +11,7 @@
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawString x=&quot;1.7cm&quot; y=&quot;25cm&quot;&gt;Nombre fiscal de tu Empresa&lt;/drawString&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
-		&lt;drawString x=&quot;15.3cm&quot; y=&quot;25cm&quot;&gt;Llibre Diari&lt;/drawString&gt;
+		&lt;drawString x=&quot;15.3cm&quot; y=&quot;25cm&quot;&gt;Libro Diario&lt;/drawString&gt;
 		&lt;!-- EL PIE DE PAGINA --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
diff --git a/bulmages/installbulmages/openreports/ca/estilos.rml b/bulmages/installbulmages/openreports/ca/estilos.rml
index de3cf24..a8a6782 100644
--- a/bulmages/installbulmages/openreports/ca/estilos.rml
+++ b/bulmages/installbulmages/openreports/ca/estilos.rml
@@ -4,6 +4,7 @@
 
 &lt;stylesheet&gt;
 
+
 	&lt;blockTableStyle id=&quot;tablavencimientos&quot;&gt;
 		&lt;blockAlignment value=&quot;RIGHT&quot; start=&quot;1,1&quot; stop=&quot;-1,-1&quot;/&gt;
 		&lt;blockAlignment value=&quot;LEFT&quot; start=&quot;0,0&quot; stop=&quot;0,-1&quot;/&gt;
@@ -17,7 +18,7 @@
 		&lt;blockBottomMargin length=&quot;0mm&quot; /&gt;
 		&lt;blockTopMargin length=&quot;-0cm&quot; /&gt;
 	&lt;/blockTableStyle&gt;
-	
+
 	&lt;blockTableStyle id=&quot;cabecera&quot;&gt;	
 		&lt;blockAlignment value=&quot;CENTER&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
 		&lt;blockTextColor colorName=&quot;(0,0,0)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;	
diff --git a/bulmages/installbulmages/openreports/ca/extracto.rml b/bulmages/installbulmages/openreports/ca/extracto.rml
index 076378a..43b7eac 100644
--- a/bulmages/installbulmages/openreports/ca/extracto.rml
+++ b/bulmages/installbulmages/openreports/ca/extracto.rml
@@ -1,11 +1,11 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Extracte de Comptes&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Extracto de Cuentas&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
 		&lt;!-- EL LOGO DE CABECERA --&gt;
-		&lt;image x=&quot;2.5cm&quot; y=&quot;18.54cm&quot; width=&quot;5cm&quot; file=&quot;logo.jpg&quot;/&gt;
+		&lt;image x=&quot;2.5cm&quot; y=&quot;28.54cm&quot; width=&quot;2.5cm&quot; file=&quot;logo.jpg&quot;/&gt;
 
 		&lt;!-- EL DRAFT --&gt;
 			&lt;!--setFont name=&quot;Helvetica&quot; size=&quot;100&quot;/&gt;
@@ -20,33 +20,49 @@
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;5.5cm&quot;/--&gt;
 
 		&lt;!-- EL PIE DE PAGINA --&gt;
-&lt;!--		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;7.3cm&quot; y=&quot;0.5cm&quot;&gt;www.iglues.org  <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> &lt;/drawString&gt;
---&gt;
+		&lt;drawString x=&quot;7.3cm&quot; y=&quot;0.5cm&quot;&gt;-Iglues-&lt;/drawString&gt;
+
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
-		&lt;drawString x=&quot;18cm&quot; y=&quot;19.5cm&quot;&gt;Extracte de Comptes&lt;/drawString&gt;
+		&lt;drawString x=&quot;18cm&quot; y=&quot;27.5cm&quot;&gt;Extracto de Cuentas&lt;/drawString&gt;
 		&lt;/pageGraphics&gt;
-	&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;1cm&quot; width=&quot;27cm&quot; height=&quot;17.5cm&quot;/&gt;
+	&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;1cm&quot; width=&quot;21cm&quot; height=&quot;26.5cm&quot;/&gt;
 	&lt;/pageTemplate&gt;
 &lt;/template&gt;
 &lt;stylesheet&gt;
 	&lt;blockTableStyle id=&quot;tabla&quot;&gt;
 		&lt;blockAlignment value=&quot;RIGHT&quot; start=&quot;2,1&quot; stop=&quot;-1,-1&quot;/&gt;
 		&lt;blockAlignment value=&quot;CENTER&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockTextColor colorName=&quot;(0,0,0)&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;7&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;7&quot; start=&quot;0,1&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;7&quot; start=&quot;1,1&quot; stop=&quot;1,-1&quot;/&gt;
+		&lt;blockValign value=&quot;TOP&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockTopPadding length=&quot;0.03cm&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockBottomPadding length=&quot;0.1cm&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+	&lt;/blockTableStyle&gt;
+	&lt;blockTableStyle id=&quot;tablaextracto&quot;&gt;
+		&lt;blockAlignment value=&quot;RIGHT&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockAlignment value=&quot;LEFT&quot; start=&quot;0,0&quot; stop=&quot;2,-1&quot;/&gt;
+		&lt;blockAlignment value=&quot;LEFT&quot; start=&quot;6,0&quot; stop=&quot;6,-1&quot;/&gt;
 		&lt;blockBackground colorName=&quot;(0.7,0.7,0.7)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
 		&lt;blockTextColor colorName=&quot;(0,0,0)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
 		&lt;lineStyle kind=&quot;LINEBEFORE&quot; colorName=&quot;(0.5,0.5,0.5)&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
 		&lt;lineStyle kind=&quot;LINEBELOW&quot; colorName=&quot;(0,0,0)&quot;  start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
 		&lt;lineStyle kind=&quot;OUTLINE&quot; colorName=&quot;black&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
-		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;10&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
-		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;10&quot; start=&quot;0,1&quot; stop=&quot;-1,-1&quot;/&gt;
-		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;8&quot; start=&quot;1,1&quot; stop=&quot;1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;6&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;7&quot; start=&quot;0,-1&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;7&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+
 		&lt;blockValign value=&quot;TOP&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockTopPadding length=&quot;-0.03cm&quot; start=&quot;0,1&quot; stop=&quot;-1,-2&quot;/&gt;
+		&lt;blockBottomPadding length=&quot;-0.15cm&quot; start=&quot;0,1&quot; stop=&quot;-1,-2&quot;/&gt;
 	&lt;/blockTableStyle&gt;
+
 &lt;/stylesheet&gt;
 
 &lt;story&gt;
diff --git a/bulmages/installbulmages/openreports/ca/ficha.rml b/bulmages/installbulmages/openreports/ca/ficha.rml
index 6714402..7263ba5 100644
--- a/bulmages/installbulmages/openreports/ca/ficha.rml
+++ b/bulmages/installbulmages/openreports/ca/ficha.rml
@@ -1,7 +1,7 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Fitxa&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Ficha&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
 
@@ -23,8 +23,8 @@
 &lt;story&gt;
 &lt;blockTable colWidths=&quot;2.5cm, 8cm, 8.5cm&quot; repeatRows=&quot;1&quot;&gt;
 &lt;tr&gt;
-&lt;td&gt;Nom BD&lt;/td&gt;
-&lt;td&gt;Nom&lt;/td&gt;
+&lt;td&gt;Nombre BD&lt;/td&gt;
+&lt;td&gt;Nombre&lt;/td&gt;
 &lt;td&gt;Valor&lt;/td&gt;
 &lt;/tr&gt;
 [story]
diff --git a/bulmages/installbulmages/openreports/ca/informereferencia.rml b/bulmages/installbulmages/openreports/ca/informereferencia.rml
index f8cbb9a..afb0cf9 100644
--- a/bulmages/installbulmages/openreports/ca/informereferencia.rml
+++ b/bulmages/installbulmages/openreports/ca/informereferencia.rml
@@ -1,22 +1,22 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Informe per refer√®ncia&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Informe por referencia&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
 		&lt;!-- EL LOGO DE CABECERA --&gt;
 		&lt;image x=&quot;3cm&quot; y=&quot;26cm&quot; width=&quot;8cm&quot; file=&quot;logo.jpg&quot;/&gt;
 
 		&lt;!-- EL PIE DE PAGINA --&gt;
-&lt;!--		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;7.3cm&quot; y=&quot;1.2cm&quot;&gt;www.iglues.org  <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> &lt;/drawString&gt;
---&gt;
+		&lt;drawString x=&quot;7.3cm&quot; y=&quot;1.2cm&quot;&gt;www.iglues.org -- <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> --&lt;/drawString&gt;
+
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;14&quot;/&gt;
-		&lt;drawString x=&quot;1.5cm&quot; y=&quot;24.5cm&quot;&gt;INFORME PER REFER√àNCIA&lt;/drawString&gt;
+		&lt;drawString x=&quot;1.5cm&quot; y=&quot;24.5cm&quot;&gt;INFORME REFERENCIA&lt;/drawString&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;16&quot;/&gt;
 		&lt;drawString x=&quot;1.5cm&quot; y=&quot;23.5cm&quot;&gt;[referencia]&lt;/drawString&gt;
 
@@ -26,17 +26,7 @@
 		&lt;lineMode width=&quot;0.3mm&quot;/&gt;
 		&lt;rect round=&quot;0.25cm&quot; x=&quot;7.5cm&quot; y=&quot;22.4cm&quot; width=&quot;11cm&quot; height=&quot;2.5cm&quot; fill=&quot;no&quot; stroke=&quot;yes&quot;/&gt;
 
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-&lt;place x=&quot;8cm&quot; y=&quot;22.4cm&quot; width=&quot;11cm&quot; height=&quot;2.5cm&quot;&gt;
-&lt;para&gt;&lt;b&gt;Clientela&lt;/b&gt;&lt;/para&gt;
-&lt;!--QUERY =&quot;SELECT * FROM cliente WHERE idcliente IN (SELECT idcliente FROM presupuesto WHERE refpresupuesto = '[referencia]' UNION SELECT idcliente FROM pedidocliente WHERE refpedidocliente = '[referencia]' UNION SELECT idcliente FROM albaran WHERE refalbaran = '[referencia]' UNION SELECT idcliente FROM factura WHERE reffactura = '[referencia]' UNION SELECT idcliente FROM cobro WHERE refcobro = '[referencia]')&quot;--&gt;
-&lt;para&gt;[nomcliente] ([cifcliente])&lt;/para&gt;
-&lt;!--END QUERY--&gt;
-&lt;para&gt;&lt;b&gt;Prove√Ødors/res&lt;/b&gt;&lt;/para&gt;
-&lt;!--QUERY =&quot;SELECT * FROM proveedor WHERE idproveedor IN ( SELECT idproveedor FROM pedidoproveedor WHERE refpedidoproveedor = '[referencia]' UNION SELECT idproveedor FROM albaranp WHERE refalbaranp = '[referencia]' UNION SELECT idproveedor FROM facturap WHERE reffacturap = '[referencia]' UNION SELECT idproveedor FROM pago WHERE refpago = '[referencia]')--&gt;
-&lt;para&gt;[nomproveedor] ([cifproveedor])&lt;/para&gt;
-&lt;!--END QUERY--&gt;
-&lt;/place&gt;
+
 		&lt;/pageGraphics&gt;
 
 		&lt;!-- FRAME DE CONTENIDOS --&gt;
@@ -77,14 +67,14 @@
 &lt;story&gt;
 
  &lt;spacer length=&quot;15&quot;/&gt;
-&lt;para&gt;Resum de vendes per article&lt;/para&gt;&quot;;
+&lt;para&gt;Resumen de ventas por articulo&lt;/para&gt;&quot;;
 &lt;blockTable style=&quot;tablaresumen&quot; colWidths=&quot;7cm, 3cm, 3cm, 3cm, 3cm&quot; repeatRows=&quot;1&quot;&gt;
 &lt;tr&gt;
-&lt;td&gt;Article&lt;/td&gt;
-&lt;td&gt;Press.&lt;/td&gt;
-&lt;td&gt;Demanat&lt;/td&gt;
-&lt;td&gt;Lliurat&lt;/td&gt;
-&lt;td&gt;Facturat&lt;/td&gt;
+&lt;td&gt;Articulo&lt;/td&gt;
+&lt;td&gt;Pres.&lt;/td&gt;
+&lt;td&gt;Pedido&lt;/td&gt;
+&lt;td&gt;Entregado&lt;/td&gt;
+&lt;td&gt;Facturado&lt;/td&gt;
 &lt;/tr&gt;
 &lt;!--QUERY=&quot;SELECT * FROM articulo LEFT JOIN (SELECT idarticulo, SUM(cantlpresupuesto) AS cantlpresupuestot  FROM lpresupuesto WHERE idpresupuesto IN (SELECT idpresupuesto FROM presupuesto WHERE refpresupuesto = '[referencia]') GROUP BY idarticulo) AS t1 ON t1.idarticulo = articulo.idarticulo LEFT JOIN (SELECT idarticulo, SUM(cantlpedidocliente) AS cantlpedidoclientet  FROM lpedidocliente WHERE idpedidocliente IN (SELECT idpedidocliente FROM pedidocliente WHERE refpedidocliente = '[referencia]') GROUP BY idarticulo) AS t2 ON t2.idarticulo = articulo.idarticulo LEFT JOIN (SELECT idarticulo, SUM(cantlalbaran) AS cantlalbarant  FROM lalbaran WHERE idalbaran IN (SELECT idalbaran FROM albaran WHERE refalbaran = '[referencia]') GROUP BY idarticulo) AS t3 ON t3.idarticulo = articulo.idarticulo LEFT JOIN (SELECT idarticulo, SUM(cantlfactura) AS cantlfacturat  FROM lfactura WHERE idfactura IN (SELECT idfactura FROM factura WHERE reffactura = '[referencia]') GROUP BY idarticulo) AS t4 
 ON t4.idarticulo = articulo.idarticulo WHERE  (cantlpresupuestot &lt;&gt;0 OR cantlpedidoclientet &lt;&gt; 0 OR cantlalbarant &lt;&gt; 0 OR cantlfacturat &lt;&gt; 0)&quot;--&gt;
 &lt;tr&gt;
@@ -100,13 +90,13 @@
 
 
 &lt;spacer length=&quot;15&quot;/&gt;
-&lt;para&gt;Resum de compres per article&lt;/para&gt;
+&lt;para&gt;Resumen de compras por articulo&lt;/para&gt;
 &lt;blockTable style=&quot;tablaresumen&quot; colWidths=&quot;10cm, 3cm, 3cm, 3cm&quot; repeatRows=&quot;1&quot;&gt;
 &lt;tr&gt;
-&lt;td&gt;Article&lt;/td&gt;
-&lt;td&gt;Demanat&lt;/td&gt;
-&lt;td&gt;Rebut&lt;/td&gt;
-&lt;td&gt;Facturat&lt;/td&gt;
+&lt;td&gt;Articulo&lt;/td&gt;
+&lt;td&gt;Pedido&lt;/td&gt;
+&lt;td&gt;Entregado&lt;/td&gt;
+&lt;td&gt;Facturado&lt;/td&gt;
 &lt;/tr&gt;
 &lt;!--QUERY=&quot; SELECT * FROM articulo LEFT JOIN (SELECT idarticulo, SUM(cantlpedidoproveedor) AS cantlpedidoproveedort FROM lpedidoproveedor WHERE idpedidoproveedor IN (SELECT idpedidoproveedor FROM pedidoproveedor WHERE refpedidoproveedor = '[referencia]') GROUP BY idarticulo) AS t2 ON t2.idarticulo = articulo.idarticulo LEFT JOIN (SELECT idarticulo, SUM(cantlalbaranp) AS cantlalbaranpt FROM lalbaranp WHERE idalbaranp IN (SELECT idalbaranp FROM albaranp WHERE refalbaranp = '[referencia]') GROUP BY idarticulo) AS t3 ON t3.idarticulo = articulo.idarticulo LEFT JOIN (SELECT idarticulo, SUM(cantlfacturap) AS cantlfacturapt FROM lfacturap WHERE idfacturap IN (SELECT idfacturap FROM facturap WHERE reffacturap = '[referencia]') GROUP BY idarticulo) AS t4 ON t4.idarticulo = articulo.idarticulo WHERE  ( cantlpedidoproveedort &lt;&gt; 0 OR cantlalbaranpt &lt;&gt; 0 OR cantlfacturapt &lt;&gt; 0)&quot;--&gt;
 &lt;tr&gt;
@@ -120,14 +110,14 @@
 
 
 &lt;spacer length=&quot;15&quot;/&gt;
-&lt;para&gt;Totals de vendes&lt;/para&gt;
+&lt;para&gt;Totales ventas&lt;/para&gt;
 &lt;blockTable style=&quot;tablatotales&quot; colWidths=&quot;3cm, 3cm, 3cm, 3cm, 3cm&quot; repeatRows=&quot;1&quot;&gt;
 &lt;tr&gt;
-&lt;td&gt;Press.&lt;/td&gt;
-&lt;td&gt;Demanat&lt;/td&gt;
-&lt;td&gt;Lliurat&lt;/td&gt;
-&lt;td&gt;Facturat&lt;/td&gt;
-&lt;td&gt;Cobrat&lt;/td&gt;
+&lt;td&gt;Pres&lt;/td&gt;
+&lt;td&gt;Pedido&lt;/td&gt;
+&lt;td&gt;Entregado&lt;/td&gt;
+&lt;td&gt;Facturado&lt;/td&gt;
+&lt;td&gt;Cobrado&lt;/td&gt;
 &lt;/tr&gt;
 
 &lt;tr&gt;
@@ -155,13 +145,13 @@
 
 
 &lt;spacer length=&quot;15&quot;/&gt;
-&lt;para&gt;Totals de compres&lt;/para&gt;
+&lt;para&gt;Totales compras&lt;/para&gt;
 &lt;blockTable style=&quot;tablatotales&quot; colWidths=&quot; 4cm, 4cm, 4cm, 3cm&quot; repeatRows=&quot;1&quot;&gt;
 &lt;tr&gt;
-&lt;td&gt;Demanat&lt;/td&gt;
-&lt;td&gt;Rebut&lt;/td&gt;
-&lt;td&gt;Facturat&lt;/td&gt;
-&lt;td&gt;Pagat&lt;/td&gt;
+&lt;td&gt;Pedido&lt;/td&gt;
+&lt;td&gt;Entregado&lt;/td&gt;
+&lt;td&gt;Facturado&lt;/td&gt;
+&lt;td&gt;Pagado&lt;/td&gt;
 &lt;/tr&gt;
 
 &lt;tr&gt;
@@ -170,14 +160,14 @@
 &lt;!--END QUERY--&gt;
 
 &lt;!--QUERY=&quot;SELECT SUM(totalalbaranp) AS talbp FROM albaranp WHERE refalbaranp='[referencia]'&quot;--&gt;
-&lt;td&gt;[talbp]&lt;/td&gt;\
+&lt;td&gt;[talbp]&lt;/td&gt;
 &lt;!--END QUERY--&gt;
 
 &lt;!--QUERY=&quot;SELECT SUM(totalfacturap) AS tfactp FROM facturap WHERE reffacturap = '[referencia]'&quot;--&gt;
 &lt;td&gt;[tfactp]&lt;/td&gt;
 &lt;!--END QUERY--&gt;
 
-&lt;!--QUERY=&quot;SELECT SUM(cantpago) AS tpago FROM pago WHERE refpago = '[referencia ]'&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT SUM(cantpago) AS tpago FROM pago WHERE refpago = '[referencia]'&quot;--&gt;
 &lt;td&gt;[tpago]&lt;/td&gt;
 &lt;!--END QUERY--&gt;
 
@@ -186,5 +176,20 @@
 
 &lt;spacer length=&quot;15&quot;/&gt;
 
+		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
+&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;1cm&quot; height=&quot;1cm&quot;&gt;
+
+&lt;place x=&quot;8cm&quot; y=&quot;22.4cm&quot; width=&quot;11cm&quot; height=&quot;2.5cm&quot;&gt;
+&lt;para&gt;&lt;b&gt;Clientes&lt;/b&gt;&lt;/para&gt;
+&lt;!-- QUERY = &quot;SELECT * FROM cliente WHERE idcliente IN (SELECT idcliente FROM presupuesto WHERE refpresupuesto = '[referencia]' UNION SELECT idcliente FROM pedidocliente WHERE refpedidocliente = '[referencia]' UNION SELECT idcliente FROM albaran WHERE refalbaran = '[referencia]' UNION SELECT idcliente FROM factura WHERE reffactura = '[referencia]' UNION SELECT idcliente FROM cobro WHERE refcobro = '[referencia]')&quot; --&gt;
+&lt;para&gt;[nomcliente] ([cifcliente])&lt;/para&gt;
+&lt;!-- END QUERY --&gt;
+&lt;para&gt;&lt;b&gt;Proveedores&lt;/b&gt;&lt;/para&gt;
+&lt;!-- QUERY = &quot;SELECT * FROM proveedor WHERE idproveedor IN ( SELECT idproveedor FROM pedidoproveedor WHERE refpedidoproveedor = '[referencia]' UNION SELECT idproveedor FROM albaranp WHERE refalbaranp = '[referencia]' UNION SELECT idproveedor FROM facturap WHERE reffacturap = '[referencia]' UNION SELECT idproveedor FROM pago WHERE refpago = '[referencia]')&quot;--&gt;
+&lt;para&gt;[nomproveedor] ([cifproveedor])&lt;/para&gt;
+&lt;!--END QUERY--&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/installbulmages/openreports/ca/listado.rml b/bulmages/installbulmages/openreports/ca/listado.rml
index 887b144..daced02 100644
--- a/bulmages/installbulmages/openreports/ca/listado.rml
+++ b/bulmages/installbulmages/openreports/ca/listado.rml
@@ -1,14 +1,14 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Llistat&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Listado&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
 		&lt;!-- EL LOGO DE CABECERA --&gt;
-		&lt;image x=&quot;0.5cm&quot; y=&quot;18.2cm&quot; width=&quot;7cm&quot; file=&quot;logo.jpg&quot;/&gt;
+		&lt;!--&lt;image x=&quot;0.5cm&quot; y=&quot;18.2cm&quot; width=&quot;7cm&quot; file=&quot;logo.jpg&quot;/&gt;--&gt;
 
 		&lt;!-- EL DRAFT --&gt;
-&lt;!--			&lt;setFont name=&quot;Helvetica&quot; size=&quot;100&quot;/&gt;
+			&lt;setFont name=&quot;Helvetica&quot; size=&quot;100&quot;/&gt;
 			&lt;fill color=&quot;(1,0.9,0.9)&quot;/&gt;
 			&lt;stroke color=&quot;(1,0.9,0.9)&quot;/&gt;
 			&lt;translate dx=&quot;13cm&quot; dy=&quot;-10.5cm&quot;/&gt;
@@ -18,15 +18,15 @@
 			&lt;rect round=&quot;1cm&quot; x=&quot;18mm&quot; y=&quot;15cm&quot; width=&quot;21cm&quot; height=&quot;4cm&quot; fill=&quot;no&quot; stroke=&quot;yes&quot;/&gt;	
 		&lt;rotate degrees=&quot;-30&quot;/&gt;
 		&lt;translate dx=&quot;-13cm&quot; dy=&quot;10.5cm&quot;/&gt;
---&gt;
+
 		&lt;!-- EL PIE DE PAGINA --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-&lt;!--		&lt;drawString x=&quot;13.3cm&quot; y=&quot;0.5cm&quot;&gt;www.iglues.org  <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> &lt;/drawString&gt;
+		&lt;drawString x=&quot;13.3cm&quot; y=&quot;0.5cm&quot;&gt;www.iglues.org -- <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> --&lt;/drawString&gt;
 		&lt;drawString x=&quot;0.3cm&quot; y=&quot;0.2cm&quot;&gt;Estas plantillas son de demostracion.&lt;/drawString&gt;	
 
---&gt;
+
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
@@ -46,9 +46,28 @@
 		&lt;lineStyle kind=&quot;OUTLINE&quot; colorName=&quot;black&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
 		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;10&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
 		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;10&quot; start=&quot;0,1&quot; stop=&quot;-1,-1&quot;/&gt;
-		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;8&quot; start=&quot;1,1&quot; stop=&quot;1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;8&quot; start=&quot;0,0&quot; stop=&quot;0,-1&quot;/&gt;
 		&lt;blockValign value=&quot;TOP&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
 	&lt;/blockTableStyle&gt;
+	&lt;paraStyle name=&quot;text&quot;
+		fontName=&quot;Helvetica&quot;
+		fontSize=&quot;10&quot;
+		alignment=&quot;LEFT&quot;
+		leftIndent=&quot;0.15cm&quot;
+		rightIndent=&quot;0.15cm&quot;
+	/&gt;
+	&lt;paraStyle name=&quot;checked&quot;
+		fontName=&quot;Helvetica-Bold&quot;
+		fontSize=&quot;12&quot;
+		alignment=&quot;CENTER&quot;
+	/&gt;
+	&lt;paraStyle name=&quot;number&quot;
+		fontName=&quot;Helvetica&quot;
+		fontSize=&quot;10&quot;
+		alignment=&quot;RIGHT&quot;
+		leftIndent=&quot;0.15cm&quot;
+		rightIndent=&quot;0.15cm&quot;
+	/&gt;
 &lt;/stylesheet&gt;
 
 &lt;story&gt;
diff --git a/bulmages/installbulmages/openreports/ca/listado_apaisado.rml b/bulmages/installbulmages/openreports/ca/listado_apaisado.rml
index 63411d1..a540758 100644
--- a/bulmages/installbulmages/openreports/ca/listado_apaisado.rml
+++ b/bulmages/installbulmages/openreports/ca/listado_apaisado.rml
@@ -1,7 +1,7 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Llistat apa√Øsat&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Listado apaisado&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
@@ -9,11 +9,11 @@
 			&lt;image x=&quot;6cm&quot; y=&quot;17cm&quot; width=&quot;17cm&quot; file=&quot;logo.jpg&quot;/&gt;
 	
 			&lt;!-- EL PIE DE PAGINA --&gt;
-&lt;!--			&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
+			&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
 			&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 			&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-			&lt;drawString x=&quot;11.4cm&quot; y=&quot;1.2cm&quot;&gt;www.iglues.org  <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> &lt;/drawString&gt;
-	--&gt;
+			&lt;drawString x=&quot;11.4cm&quot; y=&quot;1.2cm&quot;&gt;www.iglues.org -- <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> --&lt;/drawString&gt;
+	
 			&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 			&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 			&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
diff --git a/bulmages/installbulmages/openreports/ca/listado_normal.rml b/bulmages/installbulmages/openreports/ca/listado_normal.rml
index 722d01d..20b9033 100644
--- a/bulmages/installbulmages/openreports/ca/listado_normal.rml
+++ b/bulmages/installbulmages/openreports/ca/listado_normal.rml
@@ -1,7 +1,7 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;LListat&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Listado&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
@@ -9,11 +9,11 @@
 			&lt;image x=&quot;3cm&quot; y=&quot;26cm&quot; width=&quot;17cm&quot; file=&quot;logo.jpg&quot;/&gt;
 	
 			&lt;!-- EL PIE DE PAGINA --&gt;
-&lt;!--			&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
+			&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
 			&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 			&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-			&lt;drawString x=&quot;7.3cm&quot; y=&quot;1.2cm&quot;&gt;www.iglues.org <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> &lt;/drawString&gt;
-	--&gt;
+			&lt;drawString x=&quot;7.3cm&quot; y=&quot;1.2cm&quot;&gt;www.iglues.org -- <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> --&lt;/drawString&gt;
+	
 			&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 			&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 			&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
diff --git a/bulmages/installbulmages/openreports/ca/plantilla.rml b/bulmages/installbulmages/openreports/ca/plantilla.rml
index f305922..76fe50c 100644
--- a/bulmages/installbulmages/openreports/ca/plantilla.rml
+++ b/bulmages/installbulmages/openreports/ca/plantilla.rml
@@ -54,5 +54,8 @@
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
 		&lt;fill color=&quot;(0.18,0.38,0.42)&quot;/&gt;
 		&lt;rect x=&quot;9.9cm&quot; y=&quot;26.4cm&quot; width=&quot;9.8cm&quot; height=&quot;0.6cm&quot; fill=&quot;yes&quot; stroke=&quot;no&quot;/&gt;
+		
+		&lt;!-- EL NUMERO DE PAGINA --&gt;
+		&lt;drawRightString x=&quot;19.5cm&quot; y=&quot;0.3cm&quot;&gt;&lt;pageNumber/&gt;&lt;/drawRightString&gt; 
 
 &lt;/document&gt;
diff --git a/bulmages/installbulmages/openreports/ca/plantilla_cliente.rml b/bulmages/installbulmages/openreports/ca/plantilla_cliente.rml
new file mode 100644
index 0000000..2c380f4
--- /dev/null
+++ b/bulmages/installbulmages/openreports/ca/plantilla_cliente.rml
@@ -0,0 +1,51 @@
+&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
+		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
+
+		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
+
+		&lt;!--Fecha factura--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
+
+
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
+
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;F. pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
\ No newline at end of file
diff --git a/bulmages/installbulmages/openreports/ca/plantilla_frame.rml b/bulmages/installbulmages/openreports/ca/plantilla_frame.rml
new file mode 100644
index 0000000..24d9173
--- /dev/null
+++ b/bulmages/installbulmages/openreports/ca/plantilla_frame.rml
@@ -0,0 +1,2 @@
+		&lt;!-- FRAME DE CONTENIDOS --&gt;
+		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;6cm&quot; width=&quot;19cm&quot; height=&quot;16.6cm&quot; /&gt;
\ No newline at end of file
diff --git a/bulmages/installbulmages/openreports/ca/ticket_cocina_solocambios.txt b/bulmages/installbulmages/openreports/ca/ticket_cocina_solocambios.txt
new file mode 100644
index 0000000..9b330f7
--- /dev/null
+++ b/bulmages/installbulmages/openreports/ca/ticket_cocina_solocambios.txt
@@ -0,0 +1,13 @@
+&lt;!-- SETCHARACTERSIZE &quot;119&quot; --&gt;&lt;!-- SETCHARACTERPRINTMODE &quot; DOUBLE_WIDTH DOUBLE_HEIGHT CHARACTER_FONTA_SELECTED&quot; --&gt;
+[nomticket]
+&lt;!-- SETUNDERLINEMODE &quot;0&quot; --&gt;&lt;!-- SETCHARACTERSIZE &quot;32&quot; --&gt;&lt;!-- SETCHARACTERPRINTMODE &quot; CHARACTER_FONTA_SELECTED&quot; --&gt;
+&lt;!-- SETJUSTIFICATION &quot;LEFT&quot; --&gt;
+
+[cambioscocina]
+
+&lt;!-- SETUNDERLINEMODE &quot;0&quot; --&gt;&lt;!-- SETCHARACTERSIZE &quot;32&quot; --&gt;&lt;!-- SETCHARACTERPRINTMODE &quot; CHARACTER_FONTA_SELECTED&quot; --&gt;
+&lt;!-- SETCHARACTERPRINTMODE &quot; DOUBLE_WIDTH DOUBLE_HEIGHT CHARACTER_FONTA_SELECTED&quot; --&gt;
+&lt;!-- QUERY=&quot;SELECT now()::DATE AS fecha&quot; --&gt;[fecha]&lt;!-- END QUERY --&gt;   &lt;!-- QUERY=&quot;SELECT now()::TIME AS hora&quot; --&gt;[hora]&lt;!-- END QUERY --&gt;
+&lt;!-- QUERY=&quot;SELECT * FROM trabajador WHERE idtrabajador=[idtrabajador]&quot; --&gt;[nomtrabajador]&lt;!-- END QUERY --&gt;
+&lt;!-- SETBARCODEFORMAT &quot;2&quot; &quot;50&quot; &quot;BOTH&quot; &quot;FONTB&quot; --&gt;&lt;!-- PRINTBARCODE &quot;CODE39&quot; &quot;6&quot; &quot;[refalbaran]&quot; --&gt;
+&lt;!-- CUTPAPERANDFEED &quot;TRUE&quot; &quot;5&quot;--&gt;
diff --git a/bulmages/installbulmages/openreports/en/canuales.rml b/bulmages/installbulmages/openreports/en/canuales.rml
index 2562056..002d445 100644
--- a/bulmages/installbulmages/openreports/en/canuales.rml
+++ b/bulmages/installbulmages/openreports/en/canuales.rml
@@ -1,7 +1,7 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;1cm&quot; rightMargin=&quot;0.5cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Comptes Anuals&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;1cm&quot; rightMargin=&quot;0.5cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Cuentas Anuales&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
 		&lt;!-- EL LOGO DE CABECERA --&gt;
@@ -23,8 +23,7 @@
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-&lt;!--		&lt;drawString x=&quot;9.5cm&quot; y=&quot;0.5cm&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en galdi.es</A>&lt;/drawString&gt;
-	--&gt;	&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;16&quot;/&gt;
 		&lt;drawString x=&quot;11cm&quot; y=&quot;26.2cm&quot;&gt;[titulo]&lt;/drawString&gt;
diff --git a/bulmages/installbulmages/openreports/en/diario.rml b/bulmages/installbulmages/openreports/en/diario.rml
index d55ea87..0463edf 100644
--- a/bulmages/installbulmages/openreports/en/diario.rml
+++ b/bulmages/installbulmages/openreports/en/diario.rml
@@ -11,7 +11,7 @@
 		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
 		&lt;drawString x=&quot;1.7cm&quot; y=&quot;25cm&quot;&gt;Nombre fiscal de tu Empresa&lt;/drawString&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
-		&lt;drawString x=&quot;15.3cm&quot; y=&quot;25cm&quot;&gt;Llibre Diari&lt;/drawString&gt;
+		&lt;drawString x=&quot;15.3cm&quot; y=&quot;25cm&quot;&gt;Libro Diario&lt;/drawString&gt;
 		&lt;!-- EL PIE DE PAGINA --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
diff --git a/bulmages/installbulmages/openreports/en/estilos.rml b/bulmages/installbulmages/openreports/en/estilos.rml
index de3cf24..a8a6782 100644
--- a/bulmages/installbulmages/openreports/en/estilos.rml
+++ b/bulmages/installbulmages/openreports/en/estilos.rml
@@ -4,6 +4,7 @@
 
 &lt;stylesheet&gt;
 
+
 	&lt;blockTableStyle id=&quot;tablavencimientos&quot;&gt;
 		&lt;blockAlignment value=&quot;RIGHT&quot; start=&quot;1,1&quot; stop=&quot;-1,-1&quot;/&gt;
 		&lt;blockAlignment value=&quot;LEFT&quot; start=&quot;0,0&quot; stop=&quot;0,-1&quot;/&gt;
@@ -17,7 +18,7 @@
 		&lt;blockBottomMargin length=&quot;0mm&quot; /&gt;
 		&lt;blockTopMargin length=&quot;-0cm&quot; /&gt;
 	&lt;/blockTableStyle&gt;
-	
+
 	&lt;blockTableStyle id=&quot;cabecera&quot;&gt;	
 		&lt;blockAlignment value=&quot;CENTER&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
 		&lt;blockTextColor colorName=&quot;(0,0,0)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;	
diff --git a/bulmages/installbulmages/openreports/en/extracto.rml b/bulmages/installbulmages/openreports/en/extracto.rml
index 076378a..43b7eac 100644
--- a/bulmages/installbulmages/openreports/en/extracto.rml
+++ b/bulmages/installbulmages/openreports/en/extracto.rml
@@ -1,11 +1,11 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Extracte de Comptes&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Extracto de Cuentas&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
 		&lt;!-- EL LOGO DE CABECERA --&gt;
-		&lt;image x=&quot;2.5cm&quot; y=&quot;18.54cm&quot; width=&quot;5cm&quot; file=&quot;logo.jpg&quot;/&gt;
+		&lt;image x=&quot;2.5cm&quot; y=&quot;28.54cm&quot; width=&quot;2.5cm&quot; file=&quot;logo.jpg&quot;/&gt;
 
 		&lt;!-- EL DRAFT --&gt;
 			&lt;!--setFont name=&quot;Helvetica&quot; size=&quot;100&quot;/&gt;
@@ -20,33 +20,49 @@
 		&lt;translate dx=&quot;-15cm&quot; dy=&quot;5.5cm&quot;/--&gt;
 
 		&lt;!-- EL PIE DE PAGINA --&gt;
-&lt;!--		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;7.3cm&quot; y=&quot;0.5cm&quot;&gt;www.iglues.org  <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> &lt;/drawString&gt;
---&gt;
+		&lt;drawString x=&quot;7.3cm&quot; y=&quot;0.5cm&quot;&gt;-Iglues-&lt;/drawString&gt;
+
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
-		&lt;drawString x=&quot;18cm&quot; y=&quot;19.5cm&quot;&gt;Extracte de Comptes&lt;/drawString&gt;
+		&lt;drawString x=&quot;18cm&quot; y=&quot;27.5cm&quot;&gt;Extracto de Cuentas&lt;/drawString&gt;
 		&lt;/pageGraphics&gt;
-	&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;1cm&quot; width=&quot;27cm&quot; height=&quot;17.5cm&quot;/&gt;
+	&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;1cm&quot; width=&quot;21cm&quot; height=&quot;26.5cm&quot;/&gt;
 	&lt;/pageTemplate&gt;
 &lt;/template&gt;
 &lt;stylesheet&gt;
 	&lt;blockTableStyle id=&quot;tabla&quot;&gt;
 		&lt;blockAlignment value=&quot;RIGHT&quot; start=&quot;2,1&quot; stop=&quot;-1,-1&quot;/&gt;
 		&lt;blockAlignment value=&quot;CENTER&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockTextColor colorName=&quot;(0,0,0)&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;7&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;7&quot; start=&quot;0,1&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;7&quot; start=&quot;1,1&quot; stop=&quot;1,-1&quot;/&gt;
+		&lt;blockValign value=&quot;TOP&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockTopPadding length=&quot;0.03cm&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockBottomPadding length=&quot;0.1cm&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+	&lt;/blockTableStyle&gt;
+	&lt;blockTableStyle id=&quot;tablaextracto&quot;&gt;
+		&lt;blockAlignment value=&quot;RIGHT&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockAlignment value=&quot;LEFT&quot; start=&quot;0,0&quot; stop=&quot;2,-1&quot;/&gt;
+		&lt;blockAlignment value=&quot;LEFT&quot; start=&quot;6,0&quot; stop=&quot;6,-1&quot;/&gt;
 		&lt;blockBackground colorName=&quot;(0.7,0.7,0.7)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
 		&lt;blockTextColor colorName=&quot;(0,0,0)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
 		&lt;lineStyle kind=&quot;LINEBEFORE&quot; colorName=&quot;(0.5,0.5,0.5)&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
 		&lt;lineStyle kind=&quot;LINEBELOW&quot; colorName=&quot;(0,0,0)&quot;  start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
 		&lt;lineStyle kind=&quot;OUTLINE&quot; colorName=&quot;black&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
-		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;10&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
-		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;10&quot; start=&quot;0,1&quot; stop=&quot;-1,-1&quot;/&gt;
-		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;8&quot; start=&quot;1,1&quot; stop=&quot;1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;6&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;7&quot; start=&quot;0,-1&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;7&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
+
 		&lt;blockValign value=&quot;TOP&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
+		&lt;blockTopPadding length=&quot;-0.03cm&quot; start=&quot;0,1&quot; stop=&quot;-1,-2&quot;/&gt;
+		&lt;blockBottomPadding length=&quot;-0.15cm&quot; start=&quot;0,1&quot; stop=&quot;-1,-2&quot;/&gt;
 	&lt;/blockTableStyle&gt;
+
 &lt;/stylesheet&gt;
 
 &lt;story&gt;
diff --git a/bulmages/installbulmages/openreports/en/ficha.rml b/bulmages/installbulmages/openreports/en/ficha.rml
index 6714402..7263ba5 100644
--- a/bulmages/installbulmages/openreports/en/ficha.rml
+++ b/bulmages/installbulmages/openreports/en/ficha.rml
@@ -1,7 +1,7 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Fitxa&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Ficha&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
 
@@ -23,8 +23,8 @@
 &lt;story&gt;
 &lt;blockTable colWidths=&quot;2.5cm, 8cm, 8.5cm&quot; repeatRows=&quot;1&quot;&gt;
 &lt;tr&gt;
-&lt;td&gt;Nom BD&lt;/td&gt;
-&lt;td&gt;Nom&lt;/td&gt;
+&lt;td&gt;Nombre BD&lt;/td&gt;
+&lt;td&gt;Nombre&lt;/td&gt;
 &lt;td&gt;Valor&lt;/td&gt;
 &lt;/tr&gt;
 [story]
diff --git a/bulmages/installbulmages/openreports/en/informereferencia.rml b/bulmages/installbulmages/openreports/en/informereferencia.rml
index f8cbb9a..afb0cf9 100644
--- a/bulmages/installbulmages/openreports/en/informereferencia.rml
+++ b/bulmages/installbulmages/openreports/en/informereferencia.rml
@@ -1,22 +1,22 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Informe per refer√®ncia&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Informe por referencia&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
 		&lt;!-- EL LOGO DE CABECERA --&gt;
 		&lt;image x=&quot;3cm&quot; y=&quot;26cm&quot; width=&quot;8cm&quot; file=&quot;logo.jpg&quot;/&gt;
 
 		&lt;!-- EL PIE DE PAGINA --&gt;
-&lt;!--		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-		&lt;drawString x=&quot;7.3cm&quot; y=&quot;1.2cm&quot;&gt;www.iglues.org  <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> &lt;/drawString&gt;
---&gt;
+		&lt;drawString x=&quot;7.3cm&quot; y=&quot;1.2cm&quot;&gt;www.iglues.org -- <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> --&lt;/drawString&gt;
+
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;14&quot;/&gt;
-		&lt;drawString x=&quot;1.5cm&quot; y=&quot;24.5cm&quot;&gt;INFORME PER REFER√àNCIA&lt;/drawString&gt;
+		&lt;drawString x=&quot;1.5cm&quot; y=&quot;24.5cm&quot;&gt;INFORME REFERENCIA&lt;/drawString&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;16&quot;/&gt;
 		&lt;drawString x=&quot;1.5cm&quot; y=&quot;23.5cm&quot;&gt;[referencia]&lt;/drawString&gt;
 
@@ -26,17 +26,7 @@
 		&lt;lineMode width=&quot;0.3mm&quot;/&gt;
 		&lt;rect round=&quot;0.25cm&quot; x=&quot;7.5cm&quot; y=&quot;22.4cm&quot; width=&quot;11cm&quot; height=&quot;2.5cm&quot; fill=&quot;no&quot; stroke=&quot;yes&quot;/&gt;
 
-		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
-&lt;place x=&quot;8cm&quot; y=&quot;22.4cm&quot; width=&quot;11cm&quot; height=&quot;2.5cm&quot;&gt;
-&lt;para&gt;&lt;b&gt;Clientela&lt;/b&gt;&lt;/para&gt;
-&lt;!--QUERY =&quot;SELECT * FROM cliente WHERE idcliente IN (SELECT idcliente FROM presupuesto WHERE refpresupuesto = '[referencia]' UNION SELECT idcliente FROM pedidocliente WHERE refpedidocliente = '[referencia]' UNION SELECT idcliente FROM albaran WHERE refalbaran = '[referencia]' UNION SELECT idcliente FROM factura WHERE reffactura = '[referencia]' UNION SELECT idcliente FROM cobro WHERE refcobro = '[referencia]')&quot;--&gt;
-&lt;para&gt;[nomcliente] ([cifcliente])&lt;/para&gt;
-&lt;!--END QUERY--&gt;
-&lt;para&gt;&lt;b&gt;Prove√Ødors/res&lt;/b&gt;&lt;/para&gt;
-&lt;!--QUERY =&quot;SELECT * FROM proveedor WHERE idproveedor IN ( SELECT idproveedor FROM pedidoproveedor WHERE refpedidoproveedor = '[referencia]' UNION SELECT idproveedor FROM albaranp WHERE refalbaranp = '[referencia]' UNION SELECT idproveedor FROM facturap WHERE reffacturap = '[referencia]' UNION SELECT idproveedor FROM pago WHERE refpago = '[referencia]')--&gt;
-&lt;para&gt;[nomproveedor] ([cifproveedor])&lt;/para&gt;
-&lt;!--END QUERY--&gt;
-&lt;/place&gt;
+
 		&lt;/pageGraphics&gt;
 
 		&lt;!-- FRAME DE CONTENIDOS --&gt;
@@ -77,14 +67,14 @@
 &lt;story&gt;
 
  &lt;spacer length=&quot;15&quot;/&gt;
-&lt;para&gt;Resum de vendes per article&lt;/para&gt;&quot;;
+&lt;para&gt;Resumen de ventas por articulo&lt;/para&gt;&quot;;
 &lt;blockTable style=&quot;tablaresumen&quot; colWidths=&quot;7cm, 3cm, 3cm, 3cm, 3cm&quot; repeatRows=&quot;1&quot;&gt;
 &lt;tr&gt;
-&lt;td&gt;Article&lt;/td&gt;
-&lt;td&gt;Press.&lt;/td&gt;
-&lt;td&gt;Demanat&lt;/td&gt;
-&lt;td&gt;Lliurat&lt;/td&gt;
-&lt;td&gt;Facturat&lt;/td&gt;
+&lt;td&gt;Articulo&lt;/td&gt;
+&lt;td&gt;Pres.&lt;/td&gt;
+&lt;td&gt;Pedido&lt;/td&gt;
+&lt;td&gt;Entregado&lt;/td&gt;
+&lt;td&gt;Facturado&lt;/td&gt;
 &lt;/tr&gt;
 &lt;!--QUERY=&quot;SELECT * FROM articulo LEFT JOIN (SELECT idarticulo, SUM(cantlpresupuesto) AS cantlpresupuestot  FROM lpresupuesto WHERE idpresupuesto IN (SELECT idpresupuesto FROM presupuesto WHERE refpresupuesto = '[referencia]') GROUP BY idarticulo) AS t1 ON t1.idarticulo = articulo.idarticulo LEFT JOIN (SELECT idarticulo, SUM(cantlpedidocliente) AS cantlpedidoclientet  FROM lpedidocliente WHERE idpedidocliente IN (SELECT idpedidocliente FROM pedidocliente WHERE refpedidocliente = '[referencia]') GROUP BY idarticulo) AS t2 ON t2.idarticulo = articulo.idarticulo LEFT JOIN (SELECT idarticulo, SUM(cantlalbaran) AS cantlalbarant  FROM lalbaran WHERE idalbaran IN (SELECT idalbaran FROM albaran WHERE refalbaran = '[referencia]') GROUP BY idarticulo) AS t3 ON t3.idarticulo = articulo.idarticulo LEFT JOIN (SELECT idarticulo, SUM(cantlfactura) AS cantlfacturat  FROM lfactura WHERE idfactura IN (SELECT idfactura FROM factura WHERE reffactura = '[referencia]') GROUP BY idarticulo) AS t4 
 ON t4.idarticulo = articulo.idarticulo WHERE  (cantlpresupuestot &lt;&gt;0 OR cantlpedidoclientet &lt;&gt; 0 OR cantlalbarant &lt;&gt; 0 OR cantlfacturat &lt;&gt; 0)&quot;--&gt;
 &lt;tr&gt;
@@ -100,13 +90,13 @@
 
 
 &lt;spacer length=&quot;15&quot;/&gt;
-&lt;para&gt;Resum de compres per article&lt;/para&gt;
+&lt;para&gt;Resumen de compras por articulo&lt;/para&gt;
 &lt;blockTable style=&quot;tablaresumen&quot; colWidths=&quot;10cm, 3cm, 3cm, 3cm&quot; repeatRows=&quot;1&quot;&gt;
 &lt;tr&gt;
-&lt;td&gt;Article&lt;/td&gt;
-&lt;td&gt;Demanat&lt;/td&gt;
-&lt;td&gt;Rebut&lt;/td&gt;
-&lt;td&gt;Facturat&lt;/td&gt;
+&lt;td&gt;Articulo&lt;/td&gt;
+&lt;td&gt;Pedido&lt;/td&gt;
+&lt;td&gt;Entregado&lt;/td&gt;
+&lt;td&gt;Facturado&lt;/td&gt;
 &lt;/tr&gt;
 &lt;!--QUERY=&quot; SELECT * FROM articulo LEFT JOIN (SELECT idarticulo, SUM(cantlpedidoproveedor) AS cantlpedidoproveedort FROM lpedidoproveedor WHERE idpedidoproveedor IN (SELECT idpedidoproveedor FROM pedidoproveedor WHERE refpedidoproveedor = '[referencia]') GROUP BY idarticulo) AS t2 ON t2.idarticulo = articulo.idarticulo LEFT JOIN (SELECT idarticulo, SUM(cantlalbaranp) AS cantlalbaranpt FROM lalbaranp WHERE idalbaranp IN (SELECT idalbaranp FROM albaranp WHERE refalbaranp = '[referencia]') GROUP BY idarticulo) AS t3 ON t3.idarticulo = articulo.idarticulo LEFT JOIN (SELECT idarticulo, SUM(cantlfacturap) AS cantlfacturapt FROM lfacturap WHERE idfacturap IN (SELECT idfacturap FROM facturap WHERE reffacturap = '[referencia]') GROUP BY idarticulo) AS t4 ON t4.idarticulo = articulo.idarticulo WHERE  ( cantlpedidoproveedort &lt;&gt; 0 OR cantlalbaranpt &lt;&gt; 0 OR cantlfacturapt &lt;&gt; 0)&quot;--&gt;
 &lt;tr&gt;
@@ -120,14 +110,14 @@
 
 
 &lt;spacer length=&quot;15&quot;/&gt;
-&lt;para&gt;Totals de vendes&lt;/para&gt;
+&lt;para&gt;Totales ventas&lt;/para&gt;
 &lt;blockTable style=&quot;tablatotales&quot; colWidths=&quot;3cm, 3cm, 3cm, 3cm, 3cm&quot; repeatRows=&quot;1&quot;&gt;
 &lt;tr&gt;
-&lt;td&gt;Press.&lt;/td&gt;
-&lt;td&gt;Demanat&lt;/td&gt;
-&lt;td&gt;Lliurat&lt;/td&gt;
-&lt;td&gt;Facturat&lt;/td&gt;
-&lt;td&gt;Cobrat&lt;/td&gt;
+&lt;td&gt;Pres&lt;/td&gt;
+&lt;td&gt;Pedido&lt;/td&gt;
+&lt;td&gt;Entregado&lt;/td&gt;
+&lt;td&gt;Facturado&lt;/td&gt;
+&lt;td&gt;Cobrado&lt;/td&gt;
 &lt;/tr&gt;
 
 &lt;tr&gt;
@@ -155,13 +145,13 @@
 
 
 &lt;spacer length=&quot;15&quot;/&gt;
-&lt;para&gt;Totals de compres&lt;/para&gt;
+&lt;para&gt;Totales compras&lt;/para&gt;
 &lt;blockTable style=&quot;tablatotales&quot; colWidths=&quot; 4cm, 4cm, 4cm, 3cm&quot; repeatRows=&quot;1&quot;&gt;
 &lt;tr&gt;
-&lt;td&gt;Demanat&lt;/td&gt;
-&lt;td&gt;Rebut&lt;/td&gt;
-&lt;td&gt;Facturat&lt;/td&gt;
-&lt;td&gt;Pagat&lt;/td&gt;
+&lt;td&gt;Pedido&lt;/td&gt;
+&lt;td&gt;Entregado&lt;/td&gt;
+&lt;td&gt;Facturado&lt;/td&gt;
+&lt;td&gt;Pagado&lt;/td&gt;
 &lt;/tr&gt;
 
 &lt;tr&gt;
@@ -170,14 +160,14 @@
 &lt;!--END QUERY--&gt;
 
 &lt;!--QUERY=&quot;SELECT SUM(totalalbaranp) AS talbp FROM albaranp WHERE refalbaranp='[referencia]'&quot;--&gt;
-&lt;td&gt;[talbp]&lt;/td&gt;\
+&lt;td&gt;[talbp]&lt;/td&gt;
 &lt;!--END QUERY--&gt;
 
 &lt;!--QUERY=&quot;SELECT SUM(totalfacturap) AS tfactp FROM facturap WHERE reffacturap = '[referencia]'&quot;--&gt;
 &lt;td&gt;[tfactp]&lt;/td&gt;
 &lt;!--END QUERY--&gt;
 
-&lt;!--QUERY=&quot;SELECT SUM(cantpago) AS tpago FROM pago WHERE refpago = '[referencia ]'&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT SUM(cantpago) AS tpago FROM pago WHERE refpago = '[referencia]'&quot;--&gt;
 &lt;td&gt;[tpago]&lt;/td&gt;
 &lt;!--END QUERY--&gt;
 
@@ -186,5 +176,20 @@
 
 &lt;spacer length=&quot;15&quot;/&gt;
 
+		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
+&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;1cm&quot; height=&quot;1cm&quot;&gt;
+
+&lt;place x=&quot;8cm&quot; y=&quot;22.4cm&quot; width=&quot;11cm&quot; height=&quot;2.5cm&quot;&gt;
+&lt;para&gt;&lt;b&gt;Clientes&lt;/b&gt;&lt;/para&gt;
+&lt;!-- QUERY = &quot;SELECT * FROM cliente WHERE idcliente IN (SELECT idcliente FROM presupuesto WHERE refpresupuesto = '[referencia]' UNION SELECT idcliente FROM pedidocliente WHERE refpedidocliente = '[referencia]' UNION SELECT idcliente FROM albaran WHERE refalbaran = '[referencia]' UNION SELECT idcliente FROM factura WHERE reffactura = '[referencia]' UNION SELECT idcliente FROM cobro WHERE refcobro = '[referencia]')&quot; --&gt;
+&lt;para&gt;[nomcliente] ([cifcliente])&lt;/para&gt;
+&lt;!-- END QUERY --&gt;
+&lt;para&gt;&lt;b&gt;Proveedores&lt;/b&gt;&lt;/para&gt;
+&lt;!-- QUERY = &quot;SELECT * FROM proveedor WHERE idproveedor IN ( SELECT idproveedor FROM pedidoproveedor WHERE refpedidoproveedor = '[referencia]' UNION SELECT idproveedor FROM albaranp WHERE refalbaranp = '[referencia]' UNION SELECT idproveedor FROM facturap WHERE reffacturap = '[referencia]' UNION SELECT idproveedor FROM pago WHERE refpago = '[referencia]')&quot;--&gt;
+&lt;para&gt;[nomproveedor] ([cifproveedor])&lt;/para&gt;
+&lt;!--END QUERY--&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
 &lt;/story&gt;
-&lt;/document&gt;
+&lt;/document&gt;
\ No newline at end of file
diff --git a/bulmages/installbulmages/openreports/en/listado.rml b/bulmages/installbulmages/openreports/en/listado.rml
index 887b144..daced02 100644
--- a/bulmages/installbulmages/openreports/en/listado.rml
+++ b/bulmages/installbulmages/openreports/en/listado.rml
@@ -1,14 +1,14 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Llistat&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;2.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Listado&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
 		&lt;!-- EL LOGO DE CABECERA --&gt;
-		&lt;image x=&quot;0.5cm&quot; y=&quot;18.2cm&quot; width=&quot;7cm&quot; file=&quot;logo.jpg&quot;/&gt;
+		&lt;!--&lt;image x=&quot;0.5cm&quot; y=&quot;18.2cm&quot; width=&quot;7cm&quot; file=&quot;logo.jpg&quot;/&gt;--&gt;
 
 		&lt;!-- EL DRAFT --&gt;
-&lt;!--			&lt;setFont name=&quot;Helvetica&quot; size=&quot;100&quot;/&gt;
+			&lt;setFont name=&quot;Helvetica&quot; size=&quot;100&quot;/&gt;
 			&lt;fill color=&quot;(1,0.9,0.9)&quot;/&gt;
 			&lt;stroke color=&quot;(1,0.9,0.9)&quot;/&gt;
 			&lt;translate dx=&quot;13cm&quot; dy=&quot;-10.5cm&quot;/&gt;
@@ -18,15 +18,15 @@
 			&lt;rect round=&quot;1cm&quot; x=&quot;18mm&quot; y=&quot;15cm&quot; width=&quot;21cm&quot; height=&quot;4cm&quot; fill=&quot;no&quot; stroke=&quot;yes&quot;/&gt;	
 		&lt;rotate degrees=&quot;-30&quot;/&gt;
 		&lt;translate dx=&quot;-13cm&quot; dy=&quot;10.5cm&quot;/&gt;
---&gt;
+
 		&lt;!-- EL PIE DE PAGINA --&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-&lt;!--		&lt;drawString x=&quot;13.3cm&quot; y=&quot;0.5cm&quot;&gt;www.iglues.org  <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> &lt;/drawString&gt;
+		&lt;drawString x=&quot;13.3cm&quot; y=&quot;0.5cm&quot;&gt;www.iglues.org -- <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> --&lt;/drawString&gt;
 		&lt;drawString x=&quot;0.3cm&quot; y=&quot;0.2cm&quot;&gt;Estas plantillas son de demostracion.&lt;/drawString&gt;	
 
---&gt;
+
 		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
@@ -46,9 +46,28 @@
 		&lt;lineStyle kind=&quot;OUTLINE&quot; colorName=&quot;black&quot;  start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
 		&lt;blockFont name=&quot;Helvetica-Bold&quot; size=&quot;10&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;
 		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;10&quot; start=&quot;0,1&quot; stop=&quot;-1,-1&quot;/&gt;
-		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;8&quot; start=&quot;1,1&quot; stop=&quot;1,-1&quot;/&gt;
+		&lt;blockFont name=&quot;Helvetica&quot; size=&quot;8&quot; start=&quot;0,0&quot; stop=&quot;0,-1&quot;/&gt;
 		&lt;blockValign value=&quot;TOP&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
 	&lt;/blockTableStyle&gt;
+	&lt;paraStyle name=&quot;text&quot;
+		fontName=&quot;Helvetica&quot;
+		fontSize=&quot;10&quot;
+		alignment=&quot;LEFT&quot;
+		leftIndent=&quot;0.15cm&quot;
+		rightIndent=&quot;0.15cm&quot;
+	/&gt;
+	&lt;paraStyle name=&quot;checked&quot;
+		fontName=&quot;Helvetica-Bold&quot;
+		fontSize=&quot;12&quot;
+		alignment=&quot;CENTER&quot;
+	/&gt;
+	&lt;paraStyle name=&quot;number&quot;
+		fontName=&quot;Helvetica&quot;
+		fontSize=&quot;10&quot;
+		alignment=&quot;RIGHT&quot;
+		leftIndent=&quot;0.15cm&quot;
+		rightIndent=&quot;0.15cm&quot;
+	/&gt;
 &lt;/stylesheet&gt;
 
 &lt;story&gt;
diff --git a/bulmages/installbulmages/openreports/en/listado_apaisado.rml b/bulmages/installbulmages/openreports/en/listado_apaisado.rml
index 63411d1..a540758 100644
--- a/bulmages/installbulmages/openreports/en/listado_apaisado.rml
+++ b/bulmages/installbulmages/openreports/en/listado_apaisado.rml
@@ -1,7 +1,7 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Llistat apa√Øsat&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(29.7cm, 21cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Listado apaisado&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
@@ -9,11 +9,11 @@
 			&lt;image x=&quot;6cm&quot; y=&quot;17cm&quot; width=&quot;17cm&quot; file=&quot;logo.jpg&quot;/&gt;
 	
 			&lt;!-- EL PIE DE PAGINA --&gt;
-&lt;!--			&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
+			&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
 			&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 			&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-			&lt;drawString x=&quot;11.4cm&quot; y=&quot;1.2cm&quot;&gt;www.iglues.org  <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> &lt;/drawString&gt;
-	--&gt;
+			&lt;drawString x=&quot;11.4cm&quot; y=&quot;1.2cm&quot;&gt;www.iglues.org -- <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> --&lt;/drawString&gt;
+	
 			&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 			&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 			&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
diff --git a/bulmages/installbulmages/openreports/en/listado_normal.rml b/bulmages/installbulmages/openreports/en/listado_normal.rml
index 722d01d..20b9033 100644
--- a/bulmages/installbulmages/openreports/en/listado_normal.rml
+++ b/bulmages/installbulmages/openreports/en/listado_normal.rml
@@ -1,7 +1,7 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 &lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
 &lt;document&gt;
-&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;LListat&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Listado&quot; author=&quot;Tomeu Borras&quot; allowSplitting=&quot;20&quot;&gt;
 
 	&lt;pageTemplate id=&quot;main&quot;&gt;
 		&lt;pageGraphics&gt;
@@ -9,11 +9,11 @@
 			&lt;image x=&quot;3cm&quot; y=&quot;26cm&quot; width=&quot;17cm&quot; file=&quot;logo.jpg&quot;/&gt;
 	
 			&lt;!-- EL PIE DE PAGINA --&gt;
-&lt;!--			&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
+			&lt;setFont name=&quot;Helvetica&quot; size=&quot;8&quot;/&gt;		
 			&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 			&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
-			&lt;drawString x=&quot;7.3cm&quot; y=&quot;1.2cm&quot;&gt;www.iglues.org <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> &lt;/drawString&gt;
-	--&gt;
+			&lt;drawString x=&quot;7.3cm&quot; y=&quot;1.2cm&quot;&gt;www.iglues.org -- <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A> --&lt;/drawString&gt;
+	
 			&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
 			&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
 			&lt;setFont name=&quot;Helvetica&quot; size=&quot;22&quot;/&gt;
diff --git a/bulmages/installbulmages/openreports/en/plantilla.rml b/bulmages/installbulmages/openreports/en/plantilla.rml
index f305922..76fe50c 100644
--- a/bulmages/installbulmages/openreports/en/plantilla.rml
+++ b/bulmages/installbulmages/openreports/en/plantilla.rml
@@ -54,5 +54,8 @@
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
 		&lt;fill color=&quot;(0.18,0.38,0.42)&quot;/&gt;
 		&lt;rect x=&quot;9.9cm&quot; y=&quot;26.4cm&quot; width=&quot;9.8cm&quot; height=&quot;0.6cm&quot; fill=&quot;yes&quot; stroke=&quot;no&quot;/&gt;
+		
+		&lt;!-- EL NUMERO DE PAGINA --&gt;
+		&lt;drawRightString x=&quot;19.5cm&quot; y=&quot;0.3cm&quot;&gt;&lt;pageNumber/&gt;&lt;/drawRightString&gt; 
 
 &lt;/document&gt;
diff --git a/bulmages/installbulmages/openreports/en/plantilla_cliente.rml b/bulmages/installbulmages/openreports/en/plantilla_cliente.rml
new file mode 100644
index 0000000..2c380f4
--- /dev/null
+++ b/bulmages/installbulmages/openreports/en/plantilla_cliente.rml
@@ -0,0 +1,51 @@
+&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
+		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
+
+		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
+
+		&lt;!--Fecha factura--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
+
+
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
+
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;F. pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
\ No newline at end of file
diff --git a/bulmages/installbulmages/openreports/en/plantilla_frame.rml b/bulmages/installbulmages/openreports/en/plantilla_frame.rml
new file mode 100644
index 0000000..24d9173
--- /dev/null
+++ b/bulmages/installbulmages/openreports/en/plantilla_frame.rml
@@ -0,0 +1,2 @@
+		&lt;!-- FRAME DE CONTENIDOS --&gt;
+		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;6cm&quot; width=&quot;19cm&quot; height=&quot;16.6cm&quot; /&gt;
\ No newline at end of file
diff --git a/bulmages/installbulmages/openreports/en/ticket_cocina_solocambios.txt b/bulmages/installbulmages/openreports/en/ticket_cocina_solocambios.txt
new file mode 100644
index 0000000..9b330f7
--- /dev/null
+++ b/bulmages/installbulmages/openreports/en/ticket_cocina_solocambios.txt
@@ -0,0 +1,13 @@
+&lt;!-- SETCHARACTERSIZE &quot;119&quot; --&gt;&lt;!-- SETCHARACTERPRINTMODE &quot; DOUBLE_WIDTH DOUBLE_HEIGHT CHARACTER_FONTA_SELECTED&quot; --&gt;
+[nomticket]
+&lt;!-- SETUNDERLINEMODE &quot;0&quot; --&gt;&lt;!-- SETCHARACTERSIZE &quot;32&quot; --&gt;&lt;!-- SETCHARACTERPRINTMODE &quot; CHARACTER_FONTA_SELECTED&quot; --&gt;
+&lt;!-- SETJUSTIFICATION &quot;LEFT&quot; --&gt;
+
+[cambioscocina]
+
+&lt;!-- SETUNDERLINEMODE &quot;0&quot; --&gt;&lt;!-- SETCHARACTERSIZE &quot;32&quot; --&gt;&lt;!-- SETCHARACTERPRINTMODE &quot; CHARACTER_FONTA_SELECTED&quot; --&gt;
+&lt;!-- SETCHARACTERPRINTMODE &quot; DOUBLE_WIDTH DOUBLE_HEIGHT CHARACTER_FONTA_SELECTED&quot; --&gt;
+&lt;!-- QUERY=&quot;SELECT now()::DATE AS fecha&quot; --&gt;[fecha]&lt;!-- END QUERY --&gt;   &lt;!-- QUERY=&quot;SELECT now()::TIME AS hora&quot; --&gt;[hora]&lt;!-- END QUERY --&gt;
+&lt;!-- QUERY=&quot;SELECT * FROM trabajador WHERE idtrabajador=[idtrabajador]&quot; --&gt;[nomtrabajador]&lt;!-- END QUERY --&gt;
+&lt;!-- SETBARCODEFORMAT &quot;2&quot; &quot;50&quot; &quot;BOTH&quot; &quot;FONTB&quot; --&gt;&lt;!-- PRINTBARCODE &quot;CODE39&quot; &quot;6&quot; &quot;[refalbaran]&quot; --&gt;
+&lt;!-- CUTPAPERANDFEED &quot;TRUE&quot; &quot;5&quot;--&gt;
diff --git a/bulmages/installbulmages/openreports/es/plantilla_cliente.rml b/bulmages/installbulmages/openreports/es/plantilla_cliente.rml
new file mode 100644
index 0000000..b7775f0
--- /dev/null
+++ b/bulmages/installbulmages/openreports/es/plantilla_cliente.rml
@@ -0,0 +1,41 @@
+&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
+		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
+
+		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
+
+
+
+
+
+
+
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;F. pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
\ No newline at end of file
diff --git a/bulmages/installbulmages/openreports/es/plantilla_frame.rml b/bulmages/installbulmages/openreports/es/plantilla_frame.rml
new file mode 100644
index 0000000..24d9173
--- /dev/null
+++ b/bulmages/installbulmages/openreports/es/plantilla_frame.rml
@@ -0,0 +1,2 @@
+		&lt;!-- FRAME DE CONTENIDOS --&gt;
+		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;6cm&quot; width=&quot;19cm&quot; height=&quot;16.6cm&quot; /&gt;
\ No newline at end of file
diff --git a/bulmages/installbulmages/openreports/fr/estilos.rml b/bulmages/installbulmages/openreports/fr/estilos.rml
index de3cf24..a8a6782 100644
--- a/bulmages/installbulmages/openreports/fr/estilos.rml
+++ b/bulmages/installbulmages/openreports/fr/estilos.rml
@@ -4,6 +4,7 @@
 
 &lt;stylesheet&gt;
 
+
 	&lt;blockTableStyle id=&quot;tablavencimientos&quot;&gt;
 		&lt;blockAlignment value=&quot;RIGHT&quot; start=&quot;1,1&quot; stop=&quot;-1,-1&quot;/&gt;
 		&lt;blockAlignment value=&quot;LEFT&quot; start=&quot;0,0&quot; stop=&quot;0,-1&quot;/&gt;
@@ -17,7 +18,7 @@
 		&lt;blockBottomMargin length=&quot;0mm&quot; /&gt;
 		&lt;blockTopMargin length=&quot;-0cm&quot; /&gt;
 	&lt;/blockTableStyle&gt;
-	
+
 	&lt;blockTableStyle id=&quot;cabecera&quot;&gt;	
 		&lt;blockAlignment value=&quot;CENTER&quot; start=&quot;0,0&quot; stop=&quot;-1,-1&quot;/&gt;
 		&lt;blockTextColor colorName=&quot;(0,0,0)&quot; start=&quot;0,0&quot; stop=&quot;-1,0&quot;/&gt;	
diff --git a/bulmages/installbulmages/openreports/fr/plantilla.rml b/bulmages/installbulmages/openreports/fr/plantilla.rml
index f305922..76fe50c 100644
--- a/bulmages/installbulmages/openreports/fr/plantilla.rml
+++ b/bulmages/installbulmages/openreports/fr/plantilla.rml
@@ -54,5 +54,8 @@
 		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
 		&lt;fill color=&quot;(0.18,0.38,0.42)&quot;/&gt;
 		&lt;rect x=&quot;9.9cm&quot; y=&quot;26.4cm&quot; width=&quot;9.8cm&quot; height=&quot;0.6cm&quot; fill=&quot;yes&quot; stroke=&quot;no&quot;/&gt;
+		
+		&lt;!-- EL NUMERO DE PAGINA --&gt;
+		&lt;drawRightString x=&quot;19.5cm&quot; y=&quot;0.3cm&quot;&gt;&lt;pageNumber/&gt;&lt;/drawRightString&gt; 
 
 &lt;/document&gt;
diff --git a/bulmages/installbulmages/openreports/fr/plantilla_cliente.rml b/bulmages/installbulmages/openreports/fr/plantilla_cliente.rml
new file mode 100644
index 0000000..2c380f4
--- /dev/null
+++ b/bulmages/installbulmages/openreports/fr/plantilla_cliente.rml
@@ -0,0 +1,51 @@
+&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
+		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
+
+		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
+
+		&lt;!--Fecha factura--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
+
+
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
+
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;F. pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
\ No newline at end of file
diff --git a/bulmages/installbulmages/openreports/fr/plantilla_frame.rml b/bulmages/installbulmages/openreports/fr/plantilla_frame.rml
new file mode 100644
index 0000000..24d9173
--- /dev/null
+++ b/bulmages/installbulmages/openreports/fr/plantilla_frame.rml
@@ -0,0 +1,2 @@
+		&lt;!-- FRAME DE CONTENIDOS --&gt;
+		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;6cm&quot; width=&quot;19cm&quot; height=&quot;16.6cm&quot; /&gt;
\ No newline at end of file
diff --git a/bulmages/installbulmages/openreports/fr/ticket_cocina_solocambios.txt b/bulmages/installbulmages/openreports/fr/ticket_cocina_solocambios.txt
new file mode 100644
index 0000000..9b330f7
--- /dev/null
+++ b/bulmages/installbulmages/openreports/fr/ticket_cocina_solocambios.txt
@@ -0,0 +1,13 @@
+&lt;!-- SETCHARACTERSIZE &quot;119&quot; --&gt;&lt;!-- SETCHARACTERPRINTMODE &quot; DOUBLE_WIDTH DOUBLE_HEIGHT CHARACTER_FONTA_SELECTED&quot; --&gt;
+[nomticket]
+&lt;!-- SETUNDERLINEMODE &quot;0&quot; --&gt;&lt;!-- SETCHARACTERSIZE &quot;32&quot; --&gt;&lt;!-- SETCHARACTERPRINTMODE &quot; CHARACTER_FONTA_SELECTED&quot; --&gt;
+&lt;!-- SETJUSTIFICATION &quot;LEFT&quot; --&gt;
+
+[cambioscocina]
+
+&lt;!-- SETUNDERLINEMODE &quot;0&quot; --&gt;&lt;!-- SETCHARACTERSIZE &quot;32&quot; --&gt;&lt;!-- SETCHARACTERPRINTMODE &quot; CHARACTER_FONTA_SELECTED&quot; --&gt;
+&lt;!-- SETCHARACTERPRINTMODE &quot; DOUBLE_WIDTH DOUBLE_HEIGHT CHARACTER_FONTA_SELECTED&quot; --&gt;
+&lt;!-- QUERY=&quot;SELECT now()::DATE AS fecha&quot; --&gt;[fecha]&lt;!-- END QUERY --&gt;   &lt;!-- QUERY=&quot;SELECT now()::TIME AS hora&quot; --&gt;[hora]&lt;!-- END QUERY --&gt;
+&lt;!-- QUERY=&quot;SELECT * FROM trabajador WHERE idtrabajador=[idtrabajador]&quot; --&gt;[nomtrabajador]&lt;!-- END QUERY --&gt;
+&lt;!-- SETBARCODEFORMAT &quot;2&quot; &quot;50&quot; &quot;BOTH&quot; &quot;FONTB&quot; --&gt;&lt;!-- PRINTBARCODE &quot;CODE39&quot; &quot;6&quot; &quot;[refalbaran]&quot; --&gt;
+&lt;!-- CUTPAPERANDFEED &quot;TRUE&quot; &quot;5&quot;--&gt;

commit dac8fbda20ba70521ef5f38c8557f31dce0d1926
Merge: 071a1bd bafbb25
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Mon Apr 22 20:22:12 2013 +0200

    Merge branch 'master' into release15


commit bafbb254bd0f0b1cbddcb0f55d40caf95e0da325
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Mon Apr 22 20:21:46 2013 +0200

    Arreglo problema con el envio de correos con  Thunderbird en Windows, debido a que no soporta saltos de linea ni caracteres extra√±os en dicho sistema operativo

diff --git a/bulmages/bulmafact/plugins/pluginbf_correo/impqtoolbutton.cpp b/bulmages/bulmafact/plugins/pluginbf_correo/impqtoolbutton.cpp
index 42d1118..2356582 100644
--- a/bulmages/bulmafact/plugins/pluginbf_correo/impqtoolbutton.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_correo/impqtoolbutton.cpp
@@ -57,7 +57,6 @@ EmailQToolButton::EmailQToolButton ( PresupuestoView *pres, PedidoClienteView *p
     m_albaranClienteView = alb;
     m_facturaView = fac;
     setBoton();
-    
 }
 
 
@@ -67,7 +66,6 @@ EmailQToolButton::EmailQToolButton ( PresupuestoView *pres, PedidoClienteView *p
 EmailQToolButton::~EmailQToolButton()
 {
     BL_FUNC_DEBUG
-    
 }
 
 
@@ -132,7 +130,7 @@ void EmailQToolButton::click()
             subject = _(&quot;Presupuesto &quot;) + num;
             body = _(&quot;Adjunto le enviamos el presupuesto numero &quot;) + num + _(&quot; con referencia &quot;) + ref +&quot;\n&quot;;
 
-            body += _(&quot;Atentamente\n\n\n\&quot;&quot;);
+            body += _(&quot;Atentamente\n\n\n&quot;);
             attached = g_confpr-&gt;value( CONF_DIR_USER ) + &quot;presupuesto&quot; + num + &quot;.pdf&quot;;
 
             blSendEmail( email, bcc, subject, body, attached );
@@ -164,7 +162,7 @@ void EmailQToolButton::click()
             QString subject = _(&quot;Pedido &quot;) + num;
             QString body = _(&quot;Adjunto le enviamos el pedido numero &quot;) + num + _(&quot; con referencia &quot;) + ref +&quot;\n&quot;;
 
-            body += _(&quot;Atentamente\n\n\n\&quot;&quot;);
+            body += _(&quot;Atentamente\n\n\n&quot;);
             QString attached = g_confpr-&gt;value( CONF_DIR_USER ) + &quot;pedidocliente&quot; + num + &quot;.pdf&quot;;
 
             blSendEmail( email, bcc, subject, body, attached );
@@ -198,7 +196,7 @@ void EmailQToolButton::click()
             subject = _(&quot;Albaran &quot;) + num;
             body = _(&quot;Adjunto le enviamos el albaran numero &quot;) + num + _(&quot; con referencia &quot;) + ref +&quot;\n&quot;;
 
-            body += _( &quot;Atentamente\n\n\n\&quot;&quot;);
+            body += _( &quot;Atentamente\n\n\n&quot;);
             attached = g_confpr-&gt;value( CONF_DIR_USER ) + &quot;albaran&quot; + num + &quot;.pdf&quot;;
 
             blSendEmail( email, bcc, subject, body, attached );
diff --git a/bulmages/bulmalib/src/blfunctions.cpp b/bulmages/bulmalib/src/blfunctions.cpp
index 7492a97..247e72e 100644
--- a/bulmages/bulmalib/src/blfunctions.cpp
+++ b/bulmages/bulmalib/src/blfunctions.cpp
@@ -1644,11 +1644,19 @@ int Thunderbird ( QString &amp;recipient, QString &amp;bcc, QString &amp;subject, QString &amp;b
     runcommand += &quot;to='&quot; + recipient + &quot;',&quot;;
     runcommand += &quot;bcc='&quot; + bcc + &quot;',&quot;;
     runcommand += &quot;subject='&quot; + subject + &quot;',&quot;;
+    #ifndef  Q_OS_WIN32
     body.replace(&quot;,&quot;,&quot;&#44;&quot;); // convertim les comes amb el seu valor html, del contrari thunderbird ens talla el missatge.
+    #else
+    body.replace(&quot;,&quot;,&quot; &quot;); // convertim les comes en espais ja que Windows no suporta altre cosa..
+    #endif
     runcommand += &quot;body='&quot; + body + &quot;',&quot;;
     if (attached != &quot;&quot;) {
-        runcommand += &quot;attachment='<A HREF="file://">file://</A>&quot; + attached + &quot;'&quot;;
-    }
+        runcommand += &quot;attachment='&quot; + attached + &quot;'&quot;;
+    } // end if
+    
+    #ifdef Q_OS_WIN32
+    runcommand.replace(&quot;\n&quot;,&quot; &quot;);
+    #endif
             
     system(QString( runcommand + background).toAscii());
     
@@ -1767,20 +1775,18 @@ int blSendEmail ( QString &amp;recipient, QString &amp;bcc, QString &amp;subject, QString &amp;b
     #ifdef Q_OS_WIN32
         program_name.replace(&quot;.exe&quot;, &quot;&quot;);
     #endif
-    
     if (program_name == &quot;thunderbird&quot;) {
         Thunderbird (  recipient, bcc, subject, body, attached );
     } else if (program_name == &quot;kmail&quot;) {
         Kmail (  recipient, bcc, subject, body, attached );
     } else if (program_name == &quot;evolution&quot;) {
         Evolution (  recipient, bcc, subject, body, attached );
-    }
+    } // end if
     #ifdef Q_OS_WIN32
      else if (program_name == &quot;Outlook&quot;) {
         Outlook (  recipient, bcc, subject, body, attached );
     } // end if
     #endif
-    
     return 0;
     
 }

commit 071a1bda65a378b9fc0d2729d6b572b681655cad
Merge: 5212056 d707852
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Sun Apr 14 18:02:10 2013 +0200

    Merge branch 'master' into release15


commit d70785239969d98783f46baafa561b7f4c2b3605
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Sun Apr 14 18:01:42 2013 +0200

    Arreglo plantillas para uso de ezodf en Windows y modifico el parseVars para que pueda sacar una version con las barras dobladas

diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/impers_contrato_odt.pys b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/impers_contrato_odt.pys
index b265e18..92fc738 100644
--- a/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/impers_contrato_odt.pys
+++ b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/impers_contrato_odt.pys
@@ -11,7 +11,7 @@ import ezodf
 from ezodf.xmlns import CN
 
 #odt = newdoc(doctype='odt', filename='contrato_plantilla.odt')
-odt = ezodf.opendoc(&quot;[CONF_DIR_OPENREPORTS]contrato_plantilla1.odt&quot;)
+odt = ezodf.opendoc(&quot;[CONF_DIR_OPENREPORTS,l]contrato_plantilla1.odt&quot;)
 #odt.body += ezodf.Heading(&quot;Chapter 1&quot;)
 #odt.body += ezodf.Paragraph(&quot;This is a paragraph.&quot;)
 
diff --git a/bulmages/bulmalib/src/bldb.cpp b/bulmages/bulmalib/src/bldb.cpp
index ec490a3..d269f46 100644
--- a/bulmages/bulmalib/src/bldb.cpp
+++ b/bulmages/bulmalib/src/bldb.cpp
@@ -949,6 +949,7 @@ void BlDbRecord::substrConf ( QString &amp;buff )
     for ( int i = 0; i &lt; 1000; i++ ) {
         if ( g_confpr-&gt;name( i ) != &quot;&quot; ) {
             buff.replace ( &quot;[&quot; + g_confpr-&gt;name( i ) + &quot;]&quot;, g_confpr-&gt;value( i ) );
+            buff.replace ( &quot;[&quot; + g_confpr-&gt;name( i ) + &quot;,l]&quot;, g_confpr-&gt;value( i ).replace(&quot;\\&quot;,&quot;\\\\&quot;) );
         } // end if
     } // end for
 }
@@ -3075,6 +3076,7 @@ void BlDbRecord::substrVars ( QByteArray &amp;buff, int tipoEscape )
     while ( j.hasNext() ) {
         j.next();
         buff.replace ( (&quot;[&quot; + j.key() + &quot;]&quot;).toAscii(), j.value().toAscii() );
+        buff.replace ( (&quot;[&quot; + j.key() + &quot;,l]&quot;).toAscii(), j.value().toAscii().replace(&quot;\\&quot;,&quot;\\\\&quot;) );
     } // end while
     
     
@@ -3083,6 +3085,7 @@ void BlDbRecord::substrVars ( QByteArray &amp;buff, int tipoEscape )
     while ( i.hasNext() ) {
         i.next();
         buff.replace ( (&quot;[&quot; + i.key() + &quot;]&quot;).toAscii(), i.value().toAscii() );
+        buff.replace ( (&quot;[&quot; + i.key() + &quot;,l]&quot;).toAscii(), i.value().toAscii().replace(&quot;\\&quot;,&quot;\\\\&quot;) );
     } // end while
 
     substrConf ( buff );

commit 5212056919784eee157cde614fc1f6240232b8af
Merge: 2461f25 eeff05d
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Fri Apr 12 17:38:55 2013 +0200

    Arreglo problema con la base de datos

diff --cc bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql
index 39e951b,5f9e2f7..fb8bdc5
--- a/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql
+++ b/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql
@@@ -3301,9 -3301,9 +3301,10 @@@ BEGI
      SELECT INTO rs * FROM configuracion WHERE nombre = ''DatabaseRevision'';
  
      IF FOUND THEN
 -	UPDATE CONFIGURACION SET valor = ''0.14.1-0003'' WHERE nombre = ''DatabaseRevision'';
 +	UPDATE CONFIGURACION SET valor = ''0.15.0-0001'' WHERE nombre = ''DatabaseRevision'';
      ELSE
 -	INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''0.14.1-0003'');
 +	INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''0.15.0-0001'');
++
      END IF;
  
      RETURN 0;

commit eeff05d3aacc229888e4e207d6d1033e73773da5
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Fri Apr 12 17:37:21 2013 +0200

    Arreglo problema en la base de datos

diff --git a/bulmages/installbulmages/dbmodels/actualizar/revf-0.14.sql b/bulmages/installbulmages/dbmodels/actualizar/revf-0.14.sql
index 8800fa5..a0a9647 100644
--- a/bulmages/installbulmages/dbmodels/actualizar/revf-0.14.sql
+++ b/bulmages/installbulmages/dbmodels/actualizar/revf-0.14.sql
@@ -103,7 +103,7 @@ BEGIN
 
     SELECT INTO rs * FROM pg_attribute WHERE attname = ''ticketalbaran'';
     IF NOT FOUND THEN
-	ALTER TABLE factura ADD COLUMN ticketfactura boolean DEFAULT FALSE;
+	ALTER TABLE albaran ADD COLUMN ticketalbaran boolean DEFAULT FALSE;
     END IF;
 
    RETURN 0;
diff --git a/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql b/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql
index 9bea235..5f9e2f7 100644
--- a/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql
+++ b/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql
@@ -3301,9 +3301,9 @@ BEGIN
     SELECT INTO rs * FROM configuracion WHERE nombre = ''DatabaseRevision'';
 
     IF FOUND THEN
-	UPDATE CONFIGURACION SET valor = ''0.14.1-0002'' WHERE nombre = ''DatabaseRevision'';
+	UPDATE CONFIGURACION SET valor = ''0.14.1-0003'' WHERE nombre = ''DatabaseRevision'';
     ELSE
-	INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''0.14.1-0002'');
+	INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''0.14.1-0003'');
     END IF;
 
     RETURN 0;

commit 2461f2513bfc49837c016c51939fb9b1fdb86691
Merge: d8493b8 09421a7
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Fri Apr 12 17:24:43 2013 +0200

    Merge branch 'master' into release15


commit 09421a70b4f92c8d27d5c2eedd64c4b1f7964836
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Fri Apr 12 17:24:33 2013 +0200

    Cambio problema con el ticketalbaran

diff --git a/bulmages/bulmalib/plugins/pluginbl_template2ods/README.es b/bulmages/bulmalib/plugins/pluginbl_template2ods/README.es
index 074c0ee..a573f3b 100644
--- a/bulmages/bulmalib/plugins/pluginbl_template2ods/README.es
+++ b/bulmages/bulmalib/plugins/pluginbl_template2ods/README.es
@@ -19,7 +19,7 @@ que haya para dicha ficha&lt;/P&gt;
 BulmaGes sustituyendo los tags especiales por sus correspondientes valores&lt;/P&gt;
 &lt;P&gt;Para ligar una plantilla con una ficha el programa buscara todos aquellos archivos cuyo nombre empiece por impers_ y contenga el
 nombre de la tabla asociada a dicha ficha&lt;/P&gt;
-&lt;P&gt;El plugin utiliza el par√metro de configuraci√n &lt;B&gt;CONF_ODS&lt;/B&gt; para abrir los documentos generados.&lt;/P&gt;
+&lt;P&gt;El plugin utiliza el par√°metro de configuraci√Én &lt;B&gt;CONF_ODS&lt;/B&gt; para abrir los documentos generados.&lt;/P&gt;
 &lt;P&gt;Visite &lt;A HREF=&quot;<A HREF="http://www.iglues.org/wiki1/doku.php?id=bulmages:rml">http://www.iglues.org/wiki1/doku.php?id=bulmages:rml</A>&quot; TARGET=&quot;_blank&quot;&gt;<A HREF="http://www.iglues.org/wiki1/doku.php?id=bulmages:rml&lt;/A">http://www.iglues.org/wiki1/doku.php?id=bulmages:rml&lt;/A</A>&gt; para encontrar informacion mas detallada&lt;/P&gt;
 &lt;BR&gt;
 &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/images/logopeq.png&quot;/&gt;
@@ -37,7 +37,7 @@ Incompatibles:
 
 Orden: 60
 
-Categorias: Utilidades genericas; Colmados; Ferreter®™as; Droguer®™as;Facturacion generica;Talleres;Distribuci®Æn; Supermercados;Distribuci®Æn Alimentaria;Servicios Generales;Alquileres;Restauraci®Æn; Parques Infantiles; Tallas y Colores;
+Categorias: Utilidades genericas; Colmados; Ferreter√≠as; Droguer√≠as;Facturacion generica;Talleres;Distribuci√≥n; Supermercados;Distribuci√≥n Alimentaria;Servicios Generales;Alquileres;Restauraci√≥n; Parques Infantiles; Tallas y Colores;
 
 
 Comentarios: Su funcionamiento se basa en que haya un documento RML cuyo nombre
diff --git a/bulmages/installbulmages/dbmodels/crear/bulmatpv/README.es b/bulmages/installbulmages/dbmodels/crear/bulmatpv/README.es
index a2e6474..e69de29 100644
--- a/bulmages/installbulmages/dbmodels/crear/bulmatpv/README.es
+++ b/bulmages/installbulmages/dbmodels/crear/bulmatpv/README.es
@@ -1,13 +0,0 @@
-20080507
-
-Base de datos de BulmaTPV
-=========================
-
-BulmaTPV utiliza la misma base de datos que BulmaFact parcheada con
-bulmatpv_schema.sql
-
-Para instalar una base de datos que vaya a utilizarse como TPV debe instalarse
-una base de datos de BulmaFact y despues aplicarle el parche correspondiente.
-
-El parche funciona como los parches de plugins, puede aplicarse tantas veces como se desee
-y para hacer actualizaciones basta con reaplicarlo.
\ No newline at end of file
diff --git a/bulmages/installbulmages/dbmodels/crear/bulmatpv/bulmatpv_schema.sql b/bulmages/installbulmages/dbmodels/crear/bulmatpv/bulmatpv_schema.sql
index d9d1079..5800d3d 100644
--- a/bulmages/installbulmages/dbmodels/crear/bulmatpv/bulmatpv_schema.sql
+++ b/bulmages/installbulmages/dbmodels/crear/bulmatpv/bulmatpv_schema.sql
@@ -60,7 +60,6 @@ BEGIN
 	IF NOT FOUND THEN
 	    ALTER TABLE albaran ADD COLUMN horaalbaran TIME DEFAULT now();
 	    ALTER TABLE albaran ADD COLUMN anuladoalbaran boolean;
-	    ALTER TABLE albaran ADD COLUMN ticketalbaran boolean;
 	    ALTER TABLE albaran ADD COLUMN recogidoalbaran boolean;
 	    CREATE TABLE z (
 		idz SERIAL PRIMARY KEY,
@@ -72,7 +71,10 @@ BEGIN
 	    );
 	END IF;
 
-
+	SELECT INTO rs * FROM pg_attribute WHERE attname = ''ticketalbaran'';
+	IF NOT FOUND THEN
+	    ALTER TABLE albaran ADD COLUMN ticketalbaran boolean;
+	END IF;
 
 	SELECT INTO rs * FROM pg_attribute WHERE attname = ''ticketfactura'';
 	IF NOT FOUND THEN

commit d8493b81f1c26a5571d0d82980209ae3a815090b
Merge: a804220 e5daa44
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Fri Apr 12 00:06:46 2013 +0200

    Merge branch 'master' into release15


commit e5daa44888c4035123e37308759fd49203929d36
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Fri Apr 12 00:06:21 2013 +0200

    Arreglo problema con la compilacion windows y un BlFixed

diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.cpp b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.cpp
index 26525da..c58bbae 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.cpp
@@ -208,7 +208,6 @@ void FacturaIVAIncClienteView::calculaypintatotales() {
   
   if (!m_listalineas) return;
 
-/*  
   
   BlFixed total(&quot;0.00&quot;);
   BlFixed impuestos(&quot;0.00&quot;);
@@ -249,7 +248,8 @@ void FacturaIVAIncClienteView::calculaypintatotales() {
         } // end for
     } // end if
     
-    
+
+   
    for ( int i = 0; i &lt; m_listalineas-&gt;rowCount(); ++i ) {
         linea = m_listalineas-&gt;lineaat ( i );
         BlFixed cant ( linea-&gt;dbValue ( &quot;cantlfactura&quot; ));
@@ -257,15 +257,16 @@ void FacturaIVAIncClienteView::calculaypintatotales() {
 	BlFixed ivalin ( linea-&gt;dbValue ( &quot;ivalfactura&quot;));
 	BlFixed reqeq ( linea-&gt;dbValue ( &quot;reqeqlfactura&quot;));
 	BlFixed descl ( linea-&gt;dbValue ( &quot;descuentolfactura&quot;));
+
 	descl = (descl + porcentt) / BlFixed(&quot;100&quot;);
-	
-	BlFixed totallinea = cant * pvpund * (1 - descl);
+	BlFixed totallinea = cant * pvpund * (BlFixed(&quot;1.00&quot;) - descl);
 	
 	BlFixed baselinea = totallinea / (BlFixed(&quot;1.00&quot;) + ivalin / BlFixed(&quot;100&quot;));
 	BlFixed ivalinea = totallinea - baselinea;
 	BlFixed reqeqlinea = baselinea * (reqeq / BlFixed(&quot;100&quot;));
 	totalreq = totalreq + reqeqlinea;
 	
+	
 	totallinea.setPrecision(2);
 	total = total + totallinea + reqeqlinea;
 	
@@ -273,6 +274,7 @@ void FacturaIVAIncClienteView::calculaypintatotales() {
 	impuestos = impuestos + ivalinea;
 	
 	desc = desc + baselinea * descl;
+
 		
     } // end for
     // Calculamos la base imponible
@@ -287,7 +289,7 @@ void FacturaIVAIncClienteView::calculaypintatotales() {
     m_totalIRPF-&gt;setText ( QString ( totalirpf.toQString() ) );
     m_totalReqEq-&gt;setText ( QString ( totalreq.toQString() ) );
     
-*/
+
   
 }
 
diff --git a/bulmages/bulmafact/src/bfform.cpp b/bulmages/bulmafact/src/bfform.cpp
index eecc09e..4990414 100644
--- a/bulmages/bulmafact/src/bfform.cpp
+++ b/bulmages/bulmafact/src/bfform.cpp
@@ -94,7 +94,7 @@ void BfForm::calculaypintatotales()
     if (!exists(campfecha)) 
       campfecha = &quot;f&quot; + tableName();
     if (exists(campfecha)) {
-        QString query = &quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= &quot;+QString (dbValue(campfecha)==&quot;&quot; ? &quot;now()&quot; : &quot;'&quot; + dbValue(campfecha) +&quot;'::DATE&quot;) + &quot; AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot;;
+        QString query = &quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= &quot;+QString (dbValue(campfecha)==&quot;&quot; ? &quot;now()&quot; : &quot;'&quot; + dbValue(campfecha) +&quot;'::DATE&quot;) + &quot; ORDER BY fechairpf DESC LIMIT 1&quot;;
 	BlDbRecordSet *cur = mainCompany() -&gt;loadQuery ( query);
 	if ( cur ) {
 	    if ( !cur-&gt;eof() ) {

commit a8042205fab9b8d2efe33fd1fbd4169f54b0d839
Merge: 84b84a6 0aa5268
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Thu Apr 11 12:41:04 2013 +0200

    Merge branch 'master' into release15


commit 0aa5268fc85859de97c800c1bd1bb780dcc4a2d0
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Thu Apr 11 12:40:17 2013 +0200

    Cambio la URL_CONTENTS ya que no funcionaba

diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.cpp b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.cpp
index c3d02ba..26525da 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.cpp
@@ -208,6 +208,8 @@ void FacturaIVAIncClienteView::calculaypintatotales() {
   
   if (!m_listalineas) return;
 
+/*  
+  
   BlFixed total(&quot;0.00&quot;);
   BlFixed impuestos(&quot;0.00&quot;);
   BlFixed bimp(&quot;0.00&quot;);
@@ -284,6 +286,8 @@ void FacturaIVAIncClienteView::calculaypintatotales() {
     m_totalDiscounts-&gt;setText ( desc.toQString() );
     m_totalIRPF-&gt;setText ( QString ( totalirpf.toQString() ) );
     m_totalReqEq-&gt;setText ( QString ( totalreq.toQString() ) );
+    
+*/
   
 }
 
diff --git a/bulmages/installbulmages/bulmages.conf.in b/bulmages/installbulmages/bulmages.conf.in
index b5551d2..cd4b11d 100644
--- a/bulmages/installbulmages/bulmages.conf.in
+++ b/bulmages/installbulmages/bulmages.conf.in
@@ -108,7 +108,7 @@ CONF_CENTER_TEXT_FIELDS			FALSE
 CONF_ASK_BEFORE_EXIT			TRUE
 
 # Si se tiene el VisorHTML Instalado esta es la URL que hay que visitar
-CONF_URL_CONTENTS		<A HREF="http://www.iglues.org/mini">http://www.iglues.org/mini</A>
+CONF_URL_CONTENTS		<A HREF="http://www.bulmages.com">http://www.bulmages.com</A>
 
 # Usar QScript (llamar a los archivos .qs de openreports)
 CONF_USE_QSCRIPT                        FALSE

commit 84b84a6331db1f3f9bb51e9b2f3ae8c8a00162d0
Merge: 6ca71be 95802ab
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Thu Apr 11 08:17:11 2013 +0200

    Merge branch 'master' into release15


commit 95802abd1e0cccc38ca4c62141582e7d40fbe1aa
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Thu Apr 11 07:30:23 2013 +0200

    Agrego archivos y modifico los readme de bulmalib para que se incorporen esos plugins a las nuevas categorias

diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc.pot b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc.pot
new file mode 100644
index 0000000..7e74295
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc.pot
@@ -0,0 +1,480 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the PACKAGE package.
+# FIRST AUTHOR &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">EMAIL en ADDRESS</A>&gt;, YEAR.
+#
+#, fuzzy
+msgid &quot;&quot;
+msgstr &quot;&quot;
+&quot;Project-Id-Version: PACKAGE VERSION\n&quot;
+&quot;Report-Msgid-Bugs-To: <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A>\n&quot;
+&quot;POT-Creation-Date: 2011-08-16 13:15+0200\n&quot;
+&quot;PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n&quot;
+&quot;Last-Translator: FULL NAME &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">EMAIL en ADDRESS</A>&gt;\n&quot;
+&quot;Language-Team: LANGUAGE &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">LL en li.org</A>&gt;\n&quot;
+&quot;Language: \n&quot;
+&quot;MIME-Version: 1.0\n&quot;
+&quot;Content-Type: text/plain; charset=CHARSET\n&quot;
+&quot;Content-Transfer-Encoding: 8bit\n&quot;
+
+#: genalbqtoolbutton.cpp:141 genalbqtoolbutton.cpp:273
+msgid &quot;Tiene que seleccionar un cliente&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:156
+msgid &quot;FacturaIVAInc ya existe&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:157
+msgid &quot;&quot;
+&quot;Existe un factura a este cliente con la misma referencia que este pedido. &quot;
+&quot;Desea abrirlo para verificar?&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:158 genalbqtoolbutton.cpp:290
+msgid &quot;&amp;Si&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:158 genalbqtoolbutton.cpp:290
+msgid &quot;&amp;No&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:227 genalbqtoolbutton.cpp:359
+msgid &quot;Error inesperado&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:288
+msgid &quot;Factura ya existe&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:289
+msgid &quot;&quot;
+&quot;Existe una factura a este cliente con la misma referencia que este pedido. &quot;
+&quot;Desea abrirlo para verificar?&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:165 facturaivaincclienteview.cpp:103
+msgid &quot;Cliente:&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:207
+msgid &quot;Todos los facturaivaincs&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:208
+msgid &quot;FacturaIVAIncs procesados&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:209
+msgid &quot;FacturaIVAIncs no procesados&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:322
+msgid &quot;Debe seleccionar una linea&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:336
+msgid &quot;Error al borrar el factura a cliente&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:347 pluginbf_clientefacturaivainc.cpp:61
+#: pluginbf_clientefacturaivainc.cpp:62
+msgid &quot;FacturaIVAInces a clientes&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:422
+msgid &quot;Referencia de factura&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:423
+msgid &quot;Codigo de almacen&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:424 facturaivaincclienteview.cpp:71
+msgid &quot;Numero de factura&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:425 facturaivaincclienteview.cpp:80
+#: bfclientefacturasubform.cpp:49
+msgid &quot;Descripcion&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:426
+msgid &quot;Fecha de factura&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:427
+msgid &quot;Nombre de cliente&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:428
+msgid &quot;ID forma de pago&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:429
+msgid &quot;Descripcion de forma de pago&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:430
+msgid &quot;ID trabajador&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:431
+msgid &quot;ID cliente&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:432
+msgid &quot;ID factura&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:433
+msgid &quot;Comentarios del factura&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:434
+msgid &quot;ID almacen&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:435
+msgid &quot;Base imponible&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:436
+msgid &quot;Impuestos&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:437
+msgid &quot;Total&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:65
+msgid &quot;FacturaIVAInc&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:68 bfclientefacturadescuentosubform.cpp:44
+#: bfclientefacturasubform.cpp:57
+msgid &quot;Id factura&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:69
+msgid &quot;Cliente&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:70
+msgid &quot;Almacen&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:72
+msgid &quot;Fecha de creacion&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:73
+msgid &quot;Persona de contacto&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:74
+msgid &quot;Telefono de contacto&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:75
+msgid &quot;Comentario&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:76
+msgid &quot;Comentario privado&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:77
+msgid &quot;Forma de pago&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:78 ui_facturaivaincclientelistbase.h:452
+msgid &quot;Trabajador&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:79 ui_facturaivaincclientebase.h:767
+msgid &quot;Procesado&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:81
+msgid &quot;Referencia&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:82 ui_facturaivaincclientebase.h:779
+msgid &quot;Sucesos antes de imprimir&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:83 ui_facturaivaincclientebase.h:780
+msgid &quot;Sucesos tras imprimir&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:118
+msgid &quot;Error al crear el factura a cliente&quot;
+msgstr &quot;&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:55
+msgid &quot;&amp;Ventas&quot;
+msgstr &quot;&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:59
+msgid &quot;&amp;FacturaIVAInces a clientes&quot;
+msgstr &quot;&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:68
+msgid &quot;&amp;Nuevo facturaivainc a cliente&quot;
+msgstr &quot;&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:70 pluginbf_clientefacturaivainc.cpp:71
+#: ui_facturaivaincclientebase.h:735
+msgid &quot;Nuevo facturaivainc a cliente&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturadescuentosubform.cpp:41
+msgid &quot;Id descuento&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturadescuentosubform.cpp:42
+msgid &quot;Concepto descuento&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturadescuentosubform.cpp:43 bfclientefacturasubform.cpp:56
+msgid &quot;% Descuento&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:45
+msgid &quot;Id articulo&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:46
+msgid &quot;Codigo completo articulo&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:47
+msgid &quot;Nombre articulo&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:48
+msgid &quot;No linea&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:50
+msgid &quot;Cantidad&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:52
+msgid &quot;P.V.P.&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:53
+msgid &quot;Total Linea&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:54
+msgid &quot;I.V.A.&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:55
+msgid &quot;% Recargo E.Q.&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:58
+msgid &quot;Orden&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:737
+msgid &quot;Guardar facturaivainc&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:740
+msgid &quot;Guardar factura&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:744 ui_facturaivaincclientebase.h:747
+msgid &quot;Borrar facturaivainc&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:751 ui_facturaivaincclientebase.h:754
+msgid &quot;Imprimir facturaivainc&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:757
+msgid &quot;Referencia:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:759 ui_facturaivaincclientebase.h:762
+msgid &quot;Mostrar/ocultar cabecera&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:765
+msgid &quot;Descripcion:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:766
+msgid &quot;Numero de facturaivainc:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:768
+msgid &quot;Trabajador:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:769
+msgid &quot;Fecha de creacion:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:770
+msgid &quot;Persona de contacto:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:771
+msgid &quot;Forma de pago:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:772
+msgid &quot;Telefono de contacto:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:773
+msgid &quot;Almacen:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:774
+msgid &quot;&amp;Detalle&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:775
+msgid &quot;Descuen&amp;tos&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:776
+msgid &quot;Comentarios publicos:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:777
+msgid &quot;Comentarios privados:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:778
+msgid &quot;Comentario&amp;s&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:781
+msgid &quot;Registro&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:782
+msgid &quot;Descuentos:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:783
+msgid &quot;Base imponible:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:784
+msgid &quot;I.R.P.F.:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:785
+msgid &quot;Impuestos:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:786
+msgid &quot;R.E.:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:787
+msgid &quot;Total:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:788 ui_facturaivaincclientebase.h:789
+#: ui_facturaivaincclientebase.h:790 ui_facturaivaincclientebase.h:791
+#: ui_facturaivaincclientebase.h:792 ui_facturaivaincclientebase.h:793
+msgid &quot;0.00&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:794
+msgid &quot;&amp;Aceptar&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:795
+msgid &quot;&amp;Cancelar&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:448
+msgid &quot;FacturaIVAIncs a clientes&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:449
+msgid &quot;Mostrar:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:450
+msgid &quot;Fecha inicial:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:451
+msgid &quot;Fecha final:&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:453
+msgid &quot;Total: &quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:456 ui_facturaivaincclientelistbase.h:459
+msgid &quot;Nuevo factura&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:462
+msgid &quot;Ctrl+N&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:464 ui_facturaivaincclientelistbase.h:467
+msgid &quot;Editar factura&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:470
+msgid &quot;Ctrl+E&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:472 ui_facturaivaincclientelistbase.h:475
+msgid &quot;Borrar factura&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:478
+msgid &quot;Ctrl+D&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:480 ui_facturaivaincclientelistbase.h:483
+msgid &quot;Imprimir listado&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:486
+msgid &quot;Ctrl+P&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:488 ui_facturaivaincclientelistbase.h:491
+msgid &quot;Filtrar facturaes&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:494
+msgid &quot;Ctrl+F&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:496 ui_facturaivaincclientelistbase.h:499
+msgid &quot;Configurar listado&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:502
+msgid &quot;Ctrl+B&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:504 ui_facturaivaincclientelistbase.h:507
+msgid &quot;Actualizar listado&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:510
+msgid &quot;F5&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:511
+msgid &quot;Buscar:&quot;
+msgstr &quot;&quot;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc_ca_ES.po b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc_ca_ES.po
new file mode 100644
index 0000000..0ef9501
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc_ca_ES.po
@@ -0,0 +1,496 @@
+# translation of bulmages_suite_ca.po to
+# Leopold Palomo Avellaneda &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">leo en alaxarxa.net</A>&gt;, 2009.
+msgid &quot;&quot;
+msgstr &quot;&quot;
+&quot;Project-Id-Version: PACKAGE VERSION\n&quot;
+&quot;Report-Msgid-Bugs-To: <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A>\n&quot;
+&quot;POT-Creation-Date: 2011-08-16 13:15+0200\n&quot;
+&quot;PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n&quot;
+&quot;Last-Translator: FULL NAME &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">EMAIL en ADDRESS</A>&gt;\n&quot;
+&quot;Language-Team: LANGUAGE &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">LL en li.org</A>&gt;\n&quot;
+&quot;Language: \n&quot;
+&quot;MIME-Version: 1.0\n&quot;
+&quot;Content-Type: text/plain; charset=UTF-8\n&quot;
+&quot;Content-Transfer-Encoding: 8bit\n&quot;
+
+#: bfclientefacturadescuentosubform.cpp:43 bfclientefacturasubform.cpp:56
+msgid &quot;% Descuento&quot;
+msgstr &quot;% Descompte&quot;
+
+#: bfclientefacturasubform.cpp:55
+msgid &quot;% Recargo E.Q.&quot;
+msgstr &quot;% Rec√†rrec E.Q.&quot;
+
+#: ui_facturaivaincclientebase.h:794
+msgid &quot;&amp;Aceptar&quot;
+msgstr &quot;&amp;Aceptar&quot;
+
+#: ui_facturaivaincclientebase.h:795
+msgid &quot;&amp;Cancelar&quot;
+msgstr &quot;&amp;Cancel¬∑lar&quot;
+
+#: ui_facturaivaincclientebase.h:774
+msgid &quot;&amp;Detalle&quot;
+msgstr &quot;&amp;Detalls&quot;
+
+#: genalbqtoolbutton.cpp:158 genalbqtoolbutton.cpp:290
+msgid &quot;&amp;No&quot;
+msgstr &quot;&amp;No&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:68
+msgid &quot;&amp;Nuevo facturaivainc a cliente&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:158 genalbqtoolbutton.cpp:290
+msgid &quot;&amp;Si&quot;
+msgstr &quot;&amp;S√≠&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:59
+msgid &quot;&amp;FacturaIVAInces a clientes&quot;
+msgstr &quot;&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:55
+msgid &quot;&amp;Ventas&quot;
+msgstr &quot;&amp;Vendes&quot;
+
+#: ui_facturaivaincclientebase.h:788 ui_facturaivaincclientebase.h:789
+#: ui_facturaivaincclientebase.h:790 ui_facturaivaincclientebase.h:791
+#: ui_facturaivaincclientebase.h:792 ui_facturaivaincclientebase.h:793
+msgid &quot;0.00&quot;
+msgstr &quot;0.00&quot;
+
+#: ui_facturaivaincclientelistbase.h:504 ui_facturaivaincclientelistbase.h:507
+msgid &quot;Actualizar listado&quot;
+msgstr &quot;Actual¬∑litza llistat&quot;
+
+#: facturaivaincclienteview.cpp:70
+msgid &quot;Almacen&quot;
+msgstr &quot;Magatzem&quot;
+
+#: ui_facturaivaincclientebase.h:773
+msgid &quot;Almacen:&quot;
+msgstr &quot;Magatzem:&quot;
+
+#: facturaivaincclientelist.cpp:435
+msgid &quot;Base imponible&quot;
+msgstr &quot;Base imponible&quot;
+
+#: ui_facturaivaincclientebase.h:783
+msgid &quot;Base imponible:&quot;
+msgstr &quot;Base imponible&quot;
+
+#: ui_facturaivaincclientelistbase.h:472 ui_facturaivaincclientelistbase.h:475
+msgid &quot;Borrar factura&quot;
+msgstr &quot;Esborra albar√†&quot;
+
+#: ui_facturaivaincclientebase.h:744 ui_facturaivaincclientebase.h:747
+msgid &quot;Borrar facturaivainc&quot;
+msgstr &quot;Esborrar facturaivainc&quot;
+
+#: ui_facturaivaincclientelistbase.h:511
+msgid &quot;Buscar:&quot;
+msgstr &quot;Cerca:&quot;
+
+#: bfclientefacturasubform.cpp:50
+msgid &quot;Cantidad&quot;
+msgstr &quot;Quantitat&quot;
+
+#: facturaivaincclienteview.cpp:69
+msgid &quot;Cliente&quot;
+msgstr &quot;Client&quot;
+
+#: facturaivaincclientelist.cpp:165 facturaivaincclienteview.cpp:103
+msgid &quot;Cliente:&quot;
+msgstr &quot;Client:&quot;
+
+#: bfclientefacturasubform.cpp:46
+msgid &quot;Codigo completo articulo&quot;
+msgstr &quot;Codi complet article&quot;
+
+#: facturaivaincclientelist.cpp:423
+msgid &quot;Codigo de almacen&quot;
+msgstr &quot;Codi de magatzem&quot;
+
+#: facturaivaincclienteview.cpp:75
+msgid &quot;Comentario&quot;
+msgstr &quot;Comentari&quot;
+
+#: facturaivaincclienteview.cpp:76
+msgid &quot;Comentario privado&quot;
+msgstr &quot;Comentari privat&quot;
+
+#: ui_facturaivaincclientebase.h:778
+msgid &quot;Comentario&amp;s&quot;
+msgstr &quot;Comentari&amp;s&quot;
+
+#: facturaivaincclientelist.cpp:433
+msgid &quot;Comentarios del factura&quot;
+msgstr &quot;Comentaris de l'albar√†&quot;
+
+#: ui_facturaivaincclientebase.h:777
+msgid &quot;Comentarios privados:&quot;
+msgstr &quot;Comentaris privats:&quot;
+
+#: ui_facturaivaincclientebase.h:776
+msgid &quot;Comentarios publicos:&quot;
+msgstr &quot;Comentaris publics:&quot;
+
+#: bfclientefacturadescuentosubform.cpp:42
+msgid &quot;Concepto descuento&quot;
+msgstr &quot;Concepte desconte&quot;
+
+#: ui_facturaivaincclientelistbase.h:496 ui_facturaivaincclientelistbase.h:499
+msgid &quot;Configurar listado&quot;
+msgstr &quot;Configura llistat&quot;
+
+#: ui_facturaivaincclientelistbase.h:502
+msgid &quot;Ctrl+B&quot;
+msgstr &quot;Ctrl+B&quot;
+
+#: ui_facturaivaincclientelistbase.h:478
+msgid &quot;Ctrl+D&quot;
+msgstr &quot;Ctrl+D&quot;
+
+#: ui_facturaivaincclientelistbase.h:470
+msgid &quot;Ctrl+E&quot;
+msgstr &quot;Ctrl+E&quot;
+
+#: ui_facturaivaincclientelistbase.h:494
+msgid &quot;Ctrl+F&quot;
+msgstr &quot;Ctrl+F&quot;
+
+#: ui_facturaivaincclientelistbase.h:462
+msgid &quot;Ctrl+N&quot;
+msgstr &quot;Ctrl+N&quot;
+
+#: ui_facturaivaincclientelistbase.h:486
+msgid &quot;Ctrl+P&quot;
+msgstr &quot;Ctrl+P&quot;
+
+#: facturaivaincclientelist.cpp:322
+msgid &quot;Debe seleccionar una linea&quot;
+msgstr &quot;Cal triar una linea&quot;
+
+#: facturaivaincclientelist.cpp:425 facturaivaincclienteview.cpp:80
+#: bfclientefacturasubform.cpp:49
+msgid &quot;Descripcion&quot;
+msgstr &quot;Descripci√≥&quot;
+
+#: facturaivaincclientelist.cpp:429
+msgid &quot;Descripcion de forma de pago&quot;
+msgstr &quot;Descripci√≥ de la forma de pagament&quot;
+
+#: ui_facturaivaincclientebase.h:765
+msgid &quot;Descripcion:&quot;
+msgstr &quot;Descripci√≥&quot;
+
+#: ui_facturaivaincclientebase.h:775
+#, fuzzy
+msgid &quot;Descuen&amp;tos&quot;
+msgstr &quot;Decon&amp;tes&quot;
+
+#: ui_facturaivaincclientebase.h:782
+msgid &quot;Descuentos:&quot;
+msgstr &quot;Descontes:&quot;
+
+#: ui_facturaivaincclientelistbase.h:464 ui_facturaivaincclientelistbase.h:467
+msgid &quot;Editar factura&quot;
+msgstr &quot;Editar albar√†&quot;
+
+#: facturaivaincclientelist.cpp:336
+msgid &quot;Error al borrar el factura a cliente&quot;
+msgstr &quot;Error al esborrar l'albar√† a client&quot;
+
+#: facturaivaincclienteview.cpp:118
+msgid &quot;Error al crear el factura a cliente&quot;
+msgstr &quot;Error al crear l'albar√† a client&quot;
+
+#: genalbqtoolbutton.cpp:227 genalbqtoolbutton.cpp:359
+msgid &quot;Error inesperado&quot;
+msgstr &quot;Error inesperat&quot;
+
+#: genalbqtoolbutton.cpp:157
+msgid &quot;&quot;
+&quot;Existe un factura a este cliente con la misma referencia que este pedido. &quot;
+&quot;Desea abrirlo para verificar?&quot;
+msgstr &quot;&quot;
+&quot;Existeix un albar√† a aquest client amb la mateixa refer√®ncia que aquesta &quot;
+&quot;comanda.Desitja obrir-lo per a verificar?&quot;
+
+#: genalbqtoolbutton.cpp:289
+msgid &quot;&quot;
+&quot;Existe una factura a este cliente con la misma referencia que este pedido. &quot;
+&quot;Desea abrirlo para verificar?&quot;
+msgstr &quot;&quot;
+&quot;Hi ha un albar√† a aquest client amb la mateixa refer√®ncia que aquesta &quot;
+&quot;comanda. Desitgeu obrir-lo per verificar?&quot;
+
+#: ui_facturaivaincclientelistbase.h:510
+msgid &quot;F5&quot;
+msgstr &quot;F5&quot;
+
+#: genalbqtoolbutton.cpp:288
+msgid &quot;Factura ya existe&quot;
+msgstr &quot;Factura ja existeix&quot;
+
+#: facturaivaincclientelist.cpp:426
+msgid &quot;Fecha de factura&quot;
+msgstr &quot;Data de l'albar√†&quot;
+
+#: facturaivaincclienteview.cpp:72
+msgid &quot;Fecha de creacion&quot;
+msgstr &quot;Data de creaci√≥:&quot;
+
+#: ui_facturaivaincclientebase.h:769
+msgid &quot;Fecha de creacion:&quot;
+msgstr &quot;Data de creaci√≥:&quot;
+
+#: ui_facturaivaincclientelistbase.h:451
+msgid &quot;Fecha final:&quot;
+msgstr &quot;Data final:&quot;
+
+#: ui_facturaivaincclientelistbase.h:450
+msgid &quot;Fecha inicial:&quot;
+msgstr &quot;Data inicial:&quot;
+
+#: ui_facturaivaincclientelistbase.h:488 ui_facturaivaincclientelistbase.h:491
+#, fuzzy
+msgid &quot;Filtrar facturaes&quot;
+msgstr &quot;Filtrar facturas&quot;
+
+#: facturaivaincclienteview.cpp:77
+msgid &quot;Forma de pago&quot;
+msgstr &quot;Forma de pagament&quot;
+
+#: ui_facturaivaincclientebase.h:771
+msgid &quot;Forma de pago:&quot;
+msgstr &quot;Forma de pagament:&quot;
+
+#: ui_facturaivaincclientebase.h:740
+msgid &quot;Guardar factura&quot;
+msgstr &quot;Desa albar√†&quot;
+
+#: ui_facturaivaincclientebase.h:737
+msgid &quot;Guardar facturaivainc&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:784
+msgid &quot;I.R.P.F.:&quot;
+msgstr &quot;I.R.P.F.:&quot;
+
+#: bfclientefacturasubform.cpp:54
+msgid &quot;I.V.A.&quot;
+msgstr &quot;I.V.A.&quot;
+
+#: facturaivaincclientelist.cpp:432
+msgid &quot;ID factura&quot;
+msgstr &quot;ID albar√†&quot;
+
+#: facturaivaincclientelist.cpp:434
+msgid &quot;ID almacen&quot;
+msgstr &quot;ID Magatzem&quot;
+
+#: facturaivaincclientelist.cpp:431
+msgid &quot;ID cliente&quot;
+msgstr &quot;ID client&quot;
+
+#: facturaivaincclientelist.cpp:428
+msgid &quot;ID forma de pago&quot;
+msgstr &quot;ID Forma de pagament&quot;
+
+#: facturaivaincclientelist.cpp:430
+msgid &quot;ID trabajador&quot;
+msgstr &quot;ID treballador&quot;
+
+#: facturaivaincclienteview.cpp:68 bfclientefacturadescuentosubform.cpp:44
+#: bfclientefacturasubform.cpp:57
+msgid &quot;Id factura&quot;
+msgstr &quot;ID albar√†&quot;
+
+#: bfclientefacturasubform.cpp:45
+msgid &quot;Id articulo&quot;
+msgstr &quot;ID Article&quot;
+
+#: bfclientefacturadescuentosubform.cpp:41
+msgid &quot;Id descuento&quot;
+msgstr &quot;Id descompte&quot;
+
+#: ui_facturaivaincclientelistbase.h:480 ui_facturaivaincclientelistbase.h:483
+msgid &quot;Imprimir listado&quot;
+msgstr &quot;Imprimeix el llistat&quot;
+
+#: ui_facturaivaincclientebase.h:751 ui_facturaivaincclientebase.h:754
+msgid &quot;Imprimir facturaivainc&quot;
+msgstr &quot;Imprimeix facturaivainc&quot;
+
+#: facturaivaincclientelist.cpp:436
+msgid &quot;Impuestos&quot;
+msgstr &quot;Impostos&quot;
+
+#: ui_facturaivaincclientebase.h:785
+#, fuzzy
+msgid &quot;Impuestos:&quot;
+msgstr &quot;Impostos:&quot;
+
+#: ui_facturaivaincclientebase.h:759 ui_facturaivaincclientebase.h:762
+msgid &quot;Mostrar/ocultar cabecera&quot;
+msgstr &quot;Mostrar/ocultar cap√ßalera&quot;
+
+#: ui_facturaivaincclientelistbase.h:449
+#, fuzzy
+msgid &quot;Mostrar:&quot;
+msgstr &quot;Mostrar:&quot;
+
+#: bfclientefacturasubform.cpp:48
+msgid &quot;No linea&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:47
+msgid &quot;Nombre articulo&quot;
+msgstr &quot;Nom d'article:&quot;
+
+#: facturaivaincclientelist.cpp:427
+msgid &quot;Nombre de cliente&quot;
+msgstr &quot;Nom del client&quot;
+
+#: ui_facturaivaincclientelistbase.h:456 ui_facturaivaincclientelistbase.h:459
+msgid &quot;Nuevo factura&quot;
+msgstr &quot;Esborra albar√†&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:70 pluginbf_clientefacturaivainc.cpp:71
+#: ui_facturaivaincclientebase.h:735
+msgid &quot;Nuevo facturaivainc a cliente&quot;
+msgstr &quot;Nou facturaivainc a client&quot;
+
+#: facturaivaincclientelist.cpp:424 facturaivaincclienteview.cpp:71
+#, fuzzy
+msgid &quot;Numero de factura&quot;
+msgstr &quot;Nombre de quotes&quot;
+
+#: ui_facturaivaincclientebase.h:766
+msgid &quot;Numero de facturaivainc:&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:58
+msgid &quot;Orden&quot;
+msgstr &quot;Ordre&quot;
+
+#: bfclientefacturasubform.cpp:52
+#, fuzzy
+msgid &quot;P.V.P.&quot;
+msgstr &quot;...&quot;
+
+#: facturaivaincclienteview.cpp:73
+#, fuzzy
+msgid &quot;Persona de contacto&quot;
+msgstr &quot;Nombre de quotes&quot;
+
+#: ui_facturaivaincclientebase.h:770
+#, fuzzy
+msgid &quot;Persona de contacto:&quot;
+msgstr &quot;Compte d'actiu:&quot;
+
+#: facturaivaincclienteview.cpp:79 ui_facturaivaincclientebase.h:767
+#, fuzzy
+msgid &quot;Procesado&quot;
+msgstr &quot;Propietari&quot;
+
+#: ui_facturaivaincclientebase.h:786
+#, fuzzy
+msgid &quot;R.E.:&quot;
+msgstr &quot;C.P.:&quot;
+
+#: facturaivaincclienteview.cpp:81
+msgid &quot;Referencia&quot;
+msgstr &quot;Refer√®ncia&quot;
+
+#: facturaivaincclientelist.cpp:422
+msgid &quot;Referencia de factura&quot;
+msgstr &quot;Refer√®ncia d'albar√†&quot;
+
+#: ui_facturaivaincclientebase.h:757
+msgid &quot;Referencia:&quot;
+msgstr &quot;Refer√®ncia:&quot;
+
+#: ui_facturaivaincclientebase.h:781
+msgid &quot;Registro&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:82 ui_facturaivaincclientebase.h:779
+msgid &quot;Sucesos antes de imprimir&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:83 ui_facturaivaincclientebase.h:780
+msgid &quot;Sucesos tras imprimir&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:74
+#, fuzzy
+msgid &quot;Telefono de contacto&quot;
+msgstr &quot;Tel√®fon del prove√Ødor&quot;
+
+#: ui_facturaivaincclientebase.h:772
+#, fuzzy
+msgid &quot;Telefono de contacto:&quot;
+msgstr &quot;Tel√®fon del prove√Ødor&quot;
+
+#: facturaivaincclienteview.cpp:65
+msgid &quot;FacturaIVAInc&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:156
+msgid &quot;FacturaIVAInc ya existe&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:347 pluginbf_clientefacturaivainc.cpp:61
+#: pluginbf_clientefacturaivainc.cpp:62
+msgid &quot;FacturaIVAInces a clientes&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:448
+msgid &quot;FacturaIVAIncs a clientes&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:209
+msgid &quot;FacturaIVAIncs no procesados&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:208
+msgid &quot;FacturaIVAIncs procesados&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:141 genalbqtoolbutton.cpp:273
+#, fuzzy
+msgid &quot;Tiene que seleccionar un cliente&quot;
+msgstr &quot;Ha de seleccionar un element&quot;
+
+#: facturaivaincclientelist.cpp:207
+msgid &quot;Todos los facturaivaincs&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:437
+msgid &quot;Total&quot;
+msgstr &quot;Total&quot;
+
+#: bfclientefacturasubform.cpp:53
+msgid &quot;Total Linea&quot;
+msgstr &quot;Total L√≠nia&quot;
+
+#: ui_facturaivaincclientebase.h:787
+msgid &quot;Total:&quot;
+msgstr &quot;Total:&quot;
+
+#: ui_facturaivaincclientelistbase.h:453
+msgid &quot;Total: &quot;
+msgstr &quot;Totals: &quot;
+
+#: facturaivaincclienteview.cpp:78 ui_facturaivaincclientelistbase.h:452
+msgid &quot;Trabajador&quot;
+msgstr &quot;Treballador&quot;
+
+#: ui_facturaivaincclientebase.h:768
+msgid &quot;Trabajador:&quot;
+msgstr &quot;Treballador:&quot;
+
+#~ msgid &quot;N¬∫ linea&quot;
+#~ msgstr &quot;N¬∫ l√≠nia&quot;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc_en_US.po b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc_en_US.po
new file mode 100644
index 0000000..0e39ae1
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc_en_US.po
@@ -0,0 +1,528 @@
+# #-#-#-#-#  bulmafact_en_US.po  #-#-#-#-#
+# translation of bulmafact_en_US.po to
+# Header entry was created by KBabel!
+#
+# Fco. Javier M. C. &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">fcojavmc en gmail.com</A>&gt;, 2009.
+#, fuzzy
+msgid &quot;&quot;
+msgstr &quot;&quot;
+&quot;Project-Id-Version: PACKAGE VERSION\n&quot;
+&quot;Report-Msgid-Bugs-To: <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A>\n&quot;
+&quot;POT-Creation-Date: 2011-08-16 13:15+0200\n&quot;
+&quot;PO-Revision-Date: 2009-01-26 09:32+0100\n&quot;
+&quot;Last-Translator: FULL NAME &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">EMAIL en ADDRESS</A>&gt;\n&quot;
+&quot;Language-Team:  &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">en en li.org</A>&gt;\n&quot;
+&quot;Language: \n&quot;
+&quot;MIME-Version: 1.0\n&quot;
+&quot;Content-Type: text/plain; charset=UTF-8\n&quot;
+&quot;Content-Transfer-Encoding: 8bit\n&quot;
+
+#: bfclientefacturadescuentosubform.cpp:43 bfclientefacturasubform.cpp:56
+msgid &quot;% Descuento&quot;
+msgstr &quot;% Discount&quot;
+
+#: bfclientefacturasubform.cpp:55
+msgid &quot;% Recargo E.Q.&quot;
+msgstr &quot;% Surcharge E.Q.&quot;
+
+#: ui_facturaivaincclientebase.h:794
+msgid &quot;&amp;Aceptar&quot;
+msgstr &quot;&amp;Aceptar&quot;
+
+#: ui_facturaivaincclientebase.h:795
+msgid &quot;&amp;Cancelar&quot;
+msgstr &quot;&amp;Cancel&quot;
+
+#: ui_facturaivaincclientebase.h:774
+#, fuzzy
+msgid &quot;&amp;Detalle&quot;
+msgstr &quot;&amp;Details&quot;
+
+#: genalbqtoolbutton.cpp:158 genalbqtoolbutton.cpp:290
+msgid &quot;&amp;No&quot;
+msgstr &quot;&amp;No&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:68
+msgid &quot;&amp;Nuevo facturaivainc a cliente&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:158 genalbqtoolbutton.cpp:290
+msgid &quot;&amp;Si&quot;
+msgstr &quot;&amp;Yes&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:59
+msgid &quot;&amp;FacturaIVAInces a clientes&quot;
+msgstr &quot;&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:55
+msgid &quot;&amp;Ventas&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:788 ui_facturaivaincclientebase.h:789
+#: ui_facturaivaincclientebase.h:790 ui_facturaivaincclientebase.h:791
+#: ui_facturaivaincclientebase.h:792 ui_facturaivaincclientebase.h:793
+msgid &quot;0.00&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:504 ui_facturaivaincclientelistbase.h:507
+msgid &quot;Actualizar listado&quot;
+msgstr &quot;Update listing&quot;
+
+#: facturaivaincclienteview.cpp:70
+msgid &quot;Almacen&quot;
+msgstr &quot;Warehouse&quot;
+
+#: ui_facturaivaincclientebase.h:773
+#, fuzzy
+msgid &quot;Almacen:&quot;
+msgstr &quot;Warehouse&quot;
+
+#: facturaivaincclientelist.cpp:435
+#, fuzzy
+msgid &quot;Base imponible&quot;
+msgstr &quot;Tax basis&quot;
+
+#: ui_facturaivaincclientebase.h:783
+#, fuzzy
+msgid &quot;Base imponible:&quot;
+msgstr &quot;Tax basis&quot;
+
+#: ui_facturaivaincclientelistbase.h:472 ui_facturaivaincclientelistbase.h:475
+msgid &quot;Borrar factura&quot;
+msgstr &quot;Erase letters patent&quot;
+
+#: ui_facturaivaincclientebase.h:744 ui_facturaivaincclientebase.h:747
+msgid &quot;Borrar facturaivainc&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:511
+msgid &quot;Buscar:&quot;
+msgstr &quot;Look for:&quot;
+
+#: bfclientefacturasubform.cpp:50
+msgid &quot;Cantidad&quot;
+msgstr &quot;Amount&quot;
+
+#: facturaivaincclienteview.cpp:69
+msgid &quot;Cliente&quot;
+msgstr &quot;Client&quot;
+
+#: facturaivaincclientelist.cpp:165 facturaivaincclienteview.cpp:103
+msgid &quot;Cliente:&quot;
+msgstr &quot;Client:&quot;
+
+#: bfclientefacturasubform.cpp:46
+msgid &quot;Codigo completo articulo&quot;
+msgstr &quot;Complete code article&quot;
+
+#: facturaivaincclientelist.cpp:423
+#, fuzzy
+msgid &quot;Codigo de almacen&quot;
+msgstr &quot;Code warehouse&quot;
+
+#: facturaivaincclienteview.cpp:75
+msgid &quot;Comentario&quot;
+msgstr &quot;Commentary&quot;
+
+#: facturaivaincclienteview.cpp:76
+#, fuzzy
+msgid &quot;Comentario privado&quot;
+msgstr &quot;Commentary&quot;
+
+#: ui_facturaivaincclientebase.h:778
+msgid &quot;Comentario&amp;s&quot;
+msgstr &quot;Commentaries&quot;
+
+#: facturaivaincclientelist.cpp:433
+#, fuzzy
+msgid &quot;Comentarios del factura&quot;
+msgstr &quot;Commentaries of the seat&quot;
+
+#: ui_facturaivaincclientebase.h:777
+#, fuzzy
+msgid &quot;Comentarios privados:&quot;
+msgstr &quot;Commentaries:&quot;
+
+#: ui_facturaivaincclientebase.h:776
+#, fuzzy
+msgid &quot;Comentarios publicos:&quot;
+msgstr &quot;Commentaries:&quot;
+
+#: bfclientefacturadescuentosubform.cpp:42
+msgid &quot;Concepto descuento&quot;
+msgstr &quot;Discount concept&quot;
+
+#: ui_facturaivaincclientelistbase.h:496 ui_facturaivaincclientelistbase.h:499
+msgid &quot;Configurar listado&quot;
+msgstr &quot;Form listing&quot;
+
+#: ui_facturaivaincclientelistbase.h:502
+msgid &quot;Ctrl+B&quot;
+msgstr &quot;Ctrl+B&quot;
+
+#: ui_facturaivaincclientelistbase.h:478
+msgid &quot;Ctrl+D&quot;
+msgstr &quot;Ctrl+D&quot;
+
+#: ui_facturaivaincclientelistbase.h:470
+msgid &quot;Ctrl+E&quot;
+msgstr &quot;Ctrl+E&quot;
+
+#: ui_facturaivaincclientelistbase.h:494
+msgid &quot;Ctrl+F&quot;
+msgstr &quot;Ctrl+F&quot;
+
+#: ui_facturaivaincclientelistbase.h:462
+msgid &quot;Ctrl+N&quot;
+msgstr &quot;Ctrl+N&quot;
+
+#: ui_facturaivaincclientelistbase.h:486
+msgid &quot;Ctrl+P&quot;
+msgstr &quot;Ctrl+P&quot;
+
+#: facturaivaincclientelist.cpp:322
+#, fuzzy
+msgid &quot;Debe seleccionar una linea&quot;
+msgstr &quot;It must select a family&quot;
+
+#: facturaivaincclientelist.cpp:425 facturaivaincclienteview.cpp:80
+#: bfclientefacturasubform.cpp:49
+msgid &quot;Descripcion&quot;
+msgstr &quot;Description&quot;
+
+#: facturaivaincclientelist.cpp:429
+#, fuzzy
+msgid &quot;Descripcion de forma de pago&quot;
+msgstr &quot;Description of the type of article&quot;
+
+#: ui_facturaivaincclientebase.h:765
+msgid &quot;Descripcion:&quot;
+msgstr &quot;Description:&quot;
+
+#: ui_facturaivaincclientebase.h:775
+#, fuzzy
+msgid &quot;Descuen&amp;tos&quot;
+msgstr &quot;Discount&quot;
+
+#: ui_facturaivaincclientebase.h:782
+#, fuzzy
+msgid &quot;Descuentos:&quot;
+msgstr &quot;Discount:&quot;
+
+#: ui_facturaivaincclientelistbase.h:464 ui_facturaivaincclientelistbase.h:467
+#, fuzzy
+msgid &quot;Editar factura&quot;
+msgstr &quot;Id letters patent&quot;
+
+#: facturaivaincclientelist.cpp:336
+#, fuzzy
+msgid &quot;Error al borrar el factura a cliente&quot;
+msgstr &quot;Error when erasing a client&quot;
+
+#: facturaivaincclienteview.cpp:118
+#, fuzzy
+msgid &quot;Error al crear el factura a cliente&quot;
+msgstr &quot;Error when creating the client&quot;
+
+#: genalbqtoolbutton.cpp:227 genalbqtoolbutton.cpp:359
+#, fuzzy
+msgid &quot;Error inesperado&quot;
+msgstr &quot;&lt;/B&gt; Inserted&quot;
+
+#: genalbqtoolbutton.cpp:157
+msgid &quot;&quot;
+&quot;Existe un factura a este cliente con la misma referencia que este pedido. &quot;
+&quot;Desea abrirlo para verificar?&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:289
+msgid &quot;&quot;
+&quot;Existe una factura a este cliente con la misma referencia que este pedido. &quot;
+&quot;Desea abrirlo para verificar?&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:510
+msgid &quot;F5&quot;
+msgstr &quot;F5&quot;
+
+#: genalbqtoolbutton.cpp:288
+msgid &quot;Factura ya existe&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:426
+#, fuzzy
+msgid &quot;Fecha de factura&quot;
+msgstr &quot;Date of the purchase&quot;
+
+#: facturaivaincclienteview.cpp:72
+#, fuzzy
+msgid &quot;Fecha de creacion&quot;
+msgstr &quot;Date of the seat&quot;
+
+#: ui_facturaivaincclientebase.h:769
+#, fuzzy
+msgid &quot;Fecha de creacion:&quot;
+msgstr &quot;&amp;Date of the seat:&quot;
+
+#: ui_facturaivaincclientelistbase.h:451
+#, fuzzy
+msgid &quot;Fecha final:&quot;
+msgstr &quot;Final &amp;date:&quot;
+
+#: ui_facturaivaincclientelistbase.h:450
+#, fuzzy
+msgid &quot;Fecha inicial:&quot;
+msgstr &quot;Initial &amp;date:&quot;
+
+#: ui_facturaivaincclientelistbase.h:488 ui_facturaivaincclientelistbase.h:491
+#, fuzzy
+msgid &quot;Filtrar facturaes&quot;
+msgstr &quot;Filter balance&quot;
+
+#: facturaivaincclienteview.cpp:77
+msgid &quot;Forma de pago&quot;
+msgstr &quot;Mode of payment&quot;
+
+#: ui_facturaivaincclientebase.h:771
+msgid &quot;Forma de pago:&quot;
+msgstr &quot;Mode of payment:&quot;
+
+#: ui_facturaivaincclientebase.h:740
+#, fuzzy
+msgid &quot;Guardar factura&quot;
+msgstr &quot;Keep balance&quot;
+
+#: ui_facturaivaincclientebase.h:737
+msgid &quot;Guardar facturaivainc&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:784
+#, fuzzy
+msgid &quot;I.R.P.F.:&quot;
+msgstr &quot;I.R.P.F (-&quot;
+
+#: bfclientefacturasubform.cpp:54
+msgid &quot;I.V.A.&quot;
+msgstr &quot;I.V.A.&quot;
+
+#: facturaivaincclientelist.cpp:432
+#, fuzzy
+msgid &quot;ID factura&quot;
+msgstr &quot;Id letters patent&quot;
+
+#: facturaivaincclientelist.cpp:434
+#, fuzzy
+msgid &quot;ID almacen&quot;
+msgstr &quot;id warehouse&quot;
+
+#: facturaivaincclientelist.cpp:431
+msgid &quot;ID cliente&quot;
+msgstr &quot;ID client&quot;
+
+#: facturaivaincclientelist.cpp:428
+#, fuzzy
+msgid &quot;ID forma de pago&quot;
+msgstr &quot;Mode of payment&quot;
+
+#: facturaivaincclientelist.cpp:430
+#, fuzzy
+msgid &quot;ID trabajador&quot;
+msgstr &quot;Worker&quot;
+
+#: facturaivaincclienteview.cpp:68 bfclientefacturadescuentosubform.cpp:44
+#: bfclientefacturasubform.cpp:57
+msgid &quot;Id factura&quot;
+msgstr &quot;Id letters patent&quot;
+
+#: bfclientefacturasubform.cpp:45
+msgid &quot;Id articulo&quot;
+msgstr &quot;Id article&quot;
+
+#: bfclientefacturadescuentosubform.cpp:41
+msgid &quot;Id descuento&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:480 ui_facturaivaincclientelistbase.h:483
+msgid &quot;Imprimir listado&quot;
+msgstr &quot;Print listing&quot;
+
+#: ui_facturaivaincclientebase.h:751 ui_facturaivaincclientebase.h:754
+#, fuzzy
+msgid &quot;Imprimir facturaivainc&quot;
+msgstr &quot;Print accounts&quot;
+
+#: facturaivaincclientelist.cpp:436
+#, fuzzy
+msgid &quot;Impuestos&quot;
+msgstr &quot;Imputation&quot;
+
+#: ui_facturaivaincclientebase.h:785
+#, fuzzy
+msgid &quot;Impuestos:&quot;
+msgstr &quot;Imputation&quot;
+
+#: ui_facturaivaincclientebase.h:759 ui_facturaivaincclientebase.h:762
+#, fuzzy
+msgid &quot;Mostrar/ocultar cabecera&quot;
+msgstr &quot;Show/hide filter&quot;
+
+#: ui_facturaivaincclientelistbase.h:449
+#, fuzzy
+msgid &quot;Mostrar:&quot;
+msgstr &quot;Show seat&quot;
+
+#: bfclientefacturasubform.cpp:48
+msgid &quot;No linea&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:47
+msgid &quot;Nombre articulo&quot;
+msgstr &quot;Name article&quot;
+
+#: facturaivaincclientelist.cpp:427
+msgid &quot;Nombre de cliente&quot;
+msgstr &quot;Name of client&quot;
+
+#: ui_facturaivaincclientelistbase.h:456 ui_facturaivaincclientelistbase.h:459
+#, fuzzy
+msgid &quot;Nuevo factura&quot;
+msgstr &quot;Id letters patent&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:70 pluginbf_clientefacturaivainc.cpp:71
+#: ui_facturaivaincclientebase.h:735
+msgid &quot;Nuevo facturaivainc a cliente&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:424 facturaivaincclienteview.cpp:71
+#, fuzzy
+msgid &quot;Numero de factura&quot;
+msgstr &quot;Number of fax&quot;
+
+#: ui_facturaivaincclientebase.h:766
+msgid &quot;Numero de facturaivainc:&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:58
+msgid &quot;Orden&quot;
+msgstr &quot;Order&quot;
+
+#: bfclientefacturasubform.cpp:52
+msgid &quot;P.V.P.&quot;
+msgstr &quot;P.V.P.&quot;
+
+#: facturaivaincclienteview.cpp:73
+#, fuzzy
+msgid &quot;Persona de contacto&quot;
+msgstr &quot;Number of quotas&quot;
+
+#: ui_facturaivaincclientebase.h:770
+#, fuzzy
+msgid &quot;Persona de contacto:&quot;
+msgstr &quot;Account of assets:&quot;
+
+#: facturaivaincclienteview.cpp:79 ui_facturaivaincclientebase.h:767
+#, fuzzy
+msgid &quot;Procesado&quot;
+msgstr &quot;Pro&amp;cessings&quot;
+
+#: ui_facturaivaincclientebase.h:786
+#, fuzzy
+msgid &quot;R.E.:&quot;
+msgstr &quot;R.E.&quot;
+
+#: facturaivaincclienteview.cpp:81
+msgid &quot;Referencia&quot;
+msgstr &quot;Reference&quot;
+
+#: facturaivaincclientelist.cpp:422
+#, fuzzy
+msgid &quot;Referencia de factura&quot;
+msgstr &quot;Reference&quot;
+
+#: ui_facturaivaincclientebase.h:757
+#, fuzzy
+msgid &quot;Referencia:&quot;
+msgstr &quot;Reference&quot;
+
+#: ui_facturaivaincclientebase.h:781
+msgid &quot;Registro&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:82 ui_facturaivaincclientebase.h:779
+msgid &quot;Sucesos antes de imprimir&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:83 ui_facturaivaincclientebase.h:780
+msgid &quot;Sucesos tras imprimir&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:74
+#, fuzzy
+msgid &quot;Telefono de contacto&quot;
+msgstr &quot;Description of the account&quot;
+
+#: ui_facturaivaincclientebase.h:772
+#, fuzzy
+msgid &quot;Telefono de contacto:&quot;
+msgstr &quot;Description of the account&quot;
+
+#: facturaivaincclienteview.cpp:65
+msgid &quot;FacturaIVAInc&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:156
+msgid &quot;FacturaIVAInc ya existe&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:347 pluginbf_clientefacturaivainc.cpp:61
+#: pluginbf_clientefacturaivainc.cpp:62
+msgid &quot;FacturaIVAInces a clientes&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:448
+msgid &quot;FacturaIVAIncs a clientes&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:209
+msgid &quot;FacturaIVAIncs no procesados&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:208
+msgid &quot;FacturaIVAIncs procesados&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:141 genalbqtoolbutton.cpp:273
+#, fuzzy
+msgid &quot;Tiene que seleccionar un cliente&quot;
+msgstr &quot;Must select an element&quot;
+
+#: facturaivaincclientelist.cpp:207
+msgid &quot;Todos los facturaivaincs&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:437
+msgid &quot;Total&quot;
+msgstr &quot;Total&quot;
+
+#: bfclientefacturasubform.cpp:53
+msgid &quot;Total Linea&quot;
+msgstr &quot;Total of the line&quot;
+
+#: ui_facturaivaincclientebase.h:787
+#, fuzzy
+msgid &quot;Total:&quot;
+msgstr &quot;Total&quot;
+
+#: ui_facturaivaincclientelistbase.h:453
+#, fuzzy
+msgid &quot;Total: &quot;
+msgstr &quot;Total&quot;
+
+#: facturaivaincclienteview.cpp:78 ui_facturaivaincclientelistbase.h:452
+msgid &quot;Trabajador&quot;
+msgstr &quot;Worker&quot;
+
+#: ui_facturaivaincclientebase.h:768
+#, fuzzy
+msgid &quot;Trabajador:&quot;
+msgstr &quot;Worker&quot;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc_es_ES.po b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc_es_ES.po
new file mode 100644
index 0000000..3d9e67d
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc_es_ES.po
@@ -0,0 +1,487 @@
+# SOME DESCRIPTIVE TITLE.
+# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
+# This file is distributed under the same license as the PACKAGE package.
+# FIRST AUTHOR &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">EMAIL en ADDRESS</A>&gt;, YEAR.
+#
+#, fuzzy
+msgid &quot;&quot;
+msgstr &quot;&quot;
+&quot;Project-Id-Version: PACKAGE VERSION\n&quot;
+&quot;Report-Msgid-Bugs-To: <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A>\n&quot;
+&quot;POT-Creation-Date: 2011-08-16 13:15+0200\n&quot;
+&quot;PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n&quot;
+&quot;Last-Translator: FULL NAME &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">EMAIL en ADDRESS</A>&gt;\n&quot;
+&quot;Language-Team: LANGUAGE &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">LL en li.org</A>&gt;\n&quot;
+&quot;Language: \n&quot;
+&quot;MIME-Version: 1.0\n&quot;
+&quot;Content-Type: text/plain; charset=UTF-8\n&quot;
+&quot;Content-Transfer-Encoding: 8bit\n&quot;
+
+#: bfclientefacturadescuentosubform.cpp:43 bfclientefacturasubform.cpp:56
+msgid &quot;% Descuento&quot;
+msgstr &quot;% Descuento&quot;
+
+#: bfclientefacturasubform.cpp:55
+msgid &quot;% Recargo E.Q.&quot;
+msgstr &quot;% Recargo E.&quot;
+
+#: ui_facturaivaincclientebase.h:794
+msgid &quot;&amp;Aceptar&quot;
+msgstr &quot;&amp;Aceptar&quot;
+
+#: ui_facturaivaincclientebase.h:795
+msgid &quot;&amp;Cancelar&quot;
+msgstr &quot;&amp;Cancelar&quot;
+
+#: ui_facturaivaincclientebase.h:774
+msgid &quot;&amp;Detalle&quot;
+msgstr &quot;&amp;Detalle&quot;
+
+#: genalbqtoolbutton.cpp:158 genalbqtoolbutton.cpp:290
+msgid &quot;&amp;No&quot;
+msgstr &quot;&amp;No&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:68
+msgid &quot;&amp;Nuevo facturaivainc a cliente&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:158 genalbqtoolbutton.cpp:290
+msgid &quot;&amp;Si&quot;
+msgstr &quot;&amp;Si&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:59
+msgid &quot;&amp;FacturaIVAInces a clientes&quot;
+msgstr &quot;&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:55
+msgid &quot;&amp;Ventas&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:788 ui_facturaivaincclientebase.h:789
+#: ui_facturaivaincclientebase.h:790 ui_facturaivaincclientebase.h:791
+#: ui_facturaivaincclientebase.h:792 ui_facturaivaincclientebase.h:793
+msgid &quot;0.00&quot;
+msgstr &quot;0.00&quot;
+
+#: ui_facturaivaincclientelistbase.h:504 ui_facturaivaincclientelistbase.h:507
+msgid &quot;Actualizar listado&quot;
+msgstr &quot;Actualizar listado&quot;
+
+#: facturaivaincclienteview.cpp:70
+msgid &quot;Almacen&quot;
+msgstr &quot;Almacen&quot;
+
+#: ui_facturaivaincclientebase.h:773
+msgid &quot;Almacen:&quot;
+msgstr &quot;Almacen:&quot;
+
+#: facturaivaincclientelist.cpp:435
+msgid &quot;Base imponible&quot;
+msgstr &quot;Base imponible&quot;
+
+#: ui_facturaivaincclientebase.h:783
+msgid &quot;Base imponible:&quot;
+msgstr &quot;Base imponible:&quot;
+
+#: ui_facturaivaincclientelistbase.h:472 ui_facturaivaincclientelistbase.h:475
+msgid &quot;Borrar factura&quot;
+msgstr &quot;Borrar factura&quot;
+
+#: ui_facturaivaincclientebase.h:744 ui_facturaivaincclientebase.h:747
+msgid &quot;Borrar facturaivainc&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:511
+msgid &quot;Buscar:&quot;
+msgstr &quot;Buscar:&quot;
+
+#: bfclientefacturasubform.cpp:50
+msgid &quot;Cantidad&quot;
+msgstr &quot;Cantidad&quot;
+
+#: facturaivaincclienteview.cpp:69
+msgid &quot;Cliente&quot;
+msgstr &quot;Cliente&quot;
+
+#: facturaivaincclientelist.cpp:165 facturaivaincclienteview.cpp:103
+msgid &quot;Cliente:&quot;
+msgstr &quot;Cliente:&quot;
+
+#: bfclientefacturasubform.cpp:46
+msgid &quot;Codigo completo articulo&quot;
+msgstr &quot;C√≥digo completo del art√≠culo&quot;
+
+#: facturaivaincclientelist.cpp:423
+msgid &quot;Codigo de almacen&quot;
+msgstr &quot;Codigo de almacen&quot;
+
+#: facturaivaincclienteview.cpp:75
+msgid &quot;Comentario&quot;
+msgstr &quot;Comentario&quot;
+
+#: facturaivaincclienteview.cpp:76
+msgid &quot;Comentario privado&quot;
+msgstr &quot;Comentario privado&quot;
+
+#: ui_facturaivaincclientebase.h:778
+msgid &quot;Comentario&amp;s&quot;
+msgstr &quot;Comentario&amp;s&quot;
+
+#: facturaivaincclientelist.cpp:433
+msgid &quot;Comentarios del factura&quot;
+msgstr &quot;Comentarios del factura&quot;
+
+#: ui_facturaivaincclientebase.h:777
+msgid &quot;Comentarios privados:&quot;
+msgstr &quot;Comentarios privados:&quot;
+
+#: ui_facturaivaincclientebase.h:776
+msgid &quot;Comentarios publicos:&quot;
+msgstr &quot;Comentarios publicos:&quot;
+
+#: bfclientefacturadescuentosubform.cpp:42
+msgid &quot;Concepto descuento&quot;
+msgstr &quot;Concepto descuento&quot;
+
+#: ui_facturaivaincclientelistbase.h:496 ui_facturaivaincclientelistbase.h:499
+msgid &quot;Configurar listado&quot;
+msgstr &quot;Configurar listado&quot;
+
+#: ui_facturaivaincclientelistbase.h:502
+msgid &quot;Ctrl+B&quot;
+msgstr &quot;Ctrl+B&quot;
+
+#: ui_facturaivaincclientelistbase.h:478
+msgid &quot;Ctrl+D&quot;
+msgstr &quot;Ctrl+D&quot;
+
+#: ui_facturaivaincclientelistbase.h:470
+msgid &quot;Ctrl+E&quot;
+msgstr &quot;Ctrl+E&quot;
+
+#: ui_facturaivaincclientelistbase.h:494
+msgid &quot;Ctrl+F&quot;
+msgstr &quot;Ctrl+F&quot;
+
+#: ui_facturaivaincclientelistbase.h:462
+msgid &quot;Ctrl+N&quot;
+msgstr &quot;Ctrl+N&quot;
+
+#: ui_facturaivaincclientelistbase.h:486
+msgid &quot;Ctrl+P&quot;
+msgstr &quot;Ctrl+P&quot;
+
+#: facturaivaincclientelist.cpp:322
+msgid &quot;Debe seleccionar una linea&quot;
+msgstr &quot;Debe seleccionar una linea&quot;
+
+#: facturaivaincclientelist.cpp:425 facturaivaincclienteview.cpp:80
+#: bfclientefacturasubform.cpp:49
+msgid &quot;Descripcion&quot;
+msgstr &quot;Descripcion&quot;
+
+#: facturaivaincclientelist.cpp:429
+msgid &quot;Descripcion de forma de pago&quot;
+msgstr &quot;Descripcion de forma de pago&quot;
+
+#: ui_facturaivaincclientebase.h:765
+msgid &quot;Descripcion:&quot;
+msgstr &quot;Descripcion:&quot;
+
+#: ui_facturaivaincclientebase.h:775
+msgid &quot;Descuen&amp;tos&quot;
+msgstr &quot;Descuen&amp;tos&quot;
+
+#: ui_facturaivaincclientebase.h:782
+msgid &quot;Descuentos:&quot;
+msgstr &quot;Descuentos:&quot;
+
+#: ui_facturaivaincclientelistbase.h:464 ui_facturaivaincclientelistbase.h:467
+msgid &quot;Editar factura&quot;
+msgstr &quot;Editar factura&quot;
+
+#: facturaivaincclientelist.cpp:336
+msgid &quot;Error al borrar el factura a cliente&quot;
+msgstr &quot;Error al borrar el factura a cliente&quot;
+
+#: facturaivaincclienteview.cpp:118
+msgid &quot;Error al crear el factura a cliente&quot;
+msgstr &quot;Error al crear el factura a cliente&quot;
+
+#: genalbqtoolbutton.cpp:227 genalbqtoolbutton.cpp:359
+msgid &quot;Error inesperado&quot;
+msgstr &quot;Error inesperado&quot;
+
+#: genalbqtoolbutton.cpp:157
+msgid &quot;&quot;
+&quot;Existe un factura a este cliente con la misma referencia que este pedido. &quot;
+&quot;Desea abrirlo para verificar?&quot;
+msgstr &quot;&quot;
+&quot;Existe un factura a este cliente con la misma referencia que este pedido. &quot;
+&quot;Desea abrirlo para verificar?&quot;
+
+#: genalbqtoolbutton.cpp:289
+msgid &quot;&quot;
+&quot;Existe una factura a este cliente con la misma referencia que este pedido. &quot;
+&quot;Desea abrirlo para verificar?&quot;
+msgstr &quot;&quot;
+&quot;Existe una factura a este cliente con la misma referencia que este pedido. &quot;
+&quot;Desea abrirlo para verificar?&quot;
+
+#: ui_facturaivaincclientelistbase.h:510
+msgid &quot;F5&quot;
+msgstr &quot;F5&quot;
+
+#: genalbqtoolbutton.cpp:288
+msgid &quot;Factura ya existe&quot;
+msgstr &quot;Factura ya existe&quot;
+
+#: facturaivaincclientelist.cpp:426
+msgid &quot;Fecha de factura&quot;
+msgstr &quot;Fecha de factura&quot;
+
+#: facturaivaincclienteview.cpp:72
+msgid &quot;Fecha de creacion&quot;
+msgstr &quot;Fecha de creacion&quot;
+
+#: ui_facturaivaincclientebase.h:769
+msgid &quot;Fecha de creacion:&quot;
+msgstr &quot;Fecha de creacion:&quot;
+
+#: ui_facturaivaincclientelistbase.h:451
+msgid &quot;Fecha final:&quot;
+msgstr &quot;Fecha final:&quot;
+
+#: ui_facturaivaincclientelistbase.h:450
+msgid &quot;Fecha inicial:&quot;
+msgstr &quot;Fecha inicial:&quot;
+
+#: ui_facturaivaincclientelistbase.h:488 ui_facturaivaincclientelistbase.h:491
+msgid &quot;Filtrar facturaes&quot;
+msgstr &quot;Filtrar facturaes&quot;
+
+#: facturaivaincclienteview.cpp:77
+msgid &quot;Forma de pago&quot;
+msgstr &quot;Forma de pago&quot;
+
+#: ui_facturaivaincclientebase.h:771
+msgid &quot;Forma de pago:&quot;
+msgstr &quot;Forma de pago:&quot;
+
+#: ui_facturaivaincclientebase.h:740
+msgid &quot;Guardar factura&quot;
+msgstr &quot;Guardar factura&quot;
+
+#: ui_facturaivaincclientebase.h:737
+msgid &quot;Guardar facturaivainc&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:784
+msgid &quot;I.R.P.F.:&quot;
+msgstr &quot;I.R.P.F.:&quot;
+
+#: bfclientefacturasubform.cpp:54
+msgid &quot;I.V.A.&quot;
+msgstr &quot;I.V.A.&quot;
+
+#: facturaivaincclientelist.cpp:432
+msgid &quot;ID factura&quot;
+msgstr &quot;ID factura&quot;
+
+#: facturaivaincclientelist.cpp:434
+msgid &quot;ID almacen&quot;
+msgstr &quot;ID almacen&quot;
+
+#: facturaivaincclientelist.cpp:431
+msgid &quot;ID cliente&quot;
+msgstr &quot;ID cliente&quot;
+
+#: facturaivaincclientelist.cpp:428
+msgid &quot;ID forma de pago&quot;
+msgstr &quot;ID forma de pago&quot;
+
+#: facturaivaincclientelist.cpp:430
+msgid &quot;ID trabajador&quot;
+msgstr &quot;ID trabajador&quot;
+
+#: facturaivaincclienteview.cpp:68 bfclientefacturadescuentosubform.cpp:44
+#: bfclientefacturasubform.cpp:57
+msgid &quot;Id factura&quot;
+msgstr &quot;Id factura&quot;
+
+#: bfclientefacturasubform.cpp:45
+msgid &quot;Id articulo&quot;
+msgstr &quot;ID art√≠culo&quot;
+
+#: bfclientefacturadescuentosubform.cpp:41
+msgid &quot;Id descuento&quot;
+msgstr &quot;ID descuento&quot;
+
+#: ui_facturaivaincclientelistbase.h:480 ui_facturaivaincclientelistbase.h:483
+msgid &quot;Imprimir listado&quot;
+msgstr &quot;Imprimir listado&quot;
+
+#: ui_facturaivaincclientebase.h:751 ui_facturaivaincclientebase.h:754
+msgid &quot;Imprimir facturaivainc&quot;
+msgstr &quot;Imprimir facturaivainc&quot;
+
+#: facturaivaincclientelist.cpp:436
+msgid &quot;Impuestos&quot;
+msgstr &quot;Impuestos&quot;
+
+#: ui_facturaivaincclientebase.h:785
+msgid &quot;Impuestos:&quot;
+msgstr &quot;Impuestos:&quot;
+
+#: ui_facturaivaincclientebase.h:759 ui_facturaivaincclientebase.h:762
+msgid &quot;Mostrar/ocultar cabecera&quot;
+msgstr &quot;Mostrar/ocultar cabecera&quot;
+
+#: ui_facturaivaincclientelistbase.h:449
+msgid &quot;Mostrar:&quot;
+msgstr &quot;Mostrar:&quot;
+
+#: bfclientefacturasubform.cpp:48
+msgid &quot;No linea&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:47
+msgid &quot;Nombre articulo&quot;
+msgstr &quot;Nombre art√≠culo&quot;
+
+#: facturaivaincclientelist.cpp:427
+msgid &quot;Nombre de cliente&quot;
+msgstr &quot;Nombre de cliente&quot;
+
+#: ui_facturaivaincclientelistbase.h:456 ui_facturaivaincclientelistbase.h:459
+msgid &quot;Nuevo factura&quot;
+msgstr &quot;Nuevo factura&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:70 pluginbf_clientefacturaivainc.cpp:71
+#: ui_facturaivaincclientebase.h:735
+msgid &quot;Nuevo facturaivainc a cliente&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:424 facturaivaincclienteview.cpp:71
+msgid &quot;Numero de factura&quot;
+msgstr &quot;Numero de factura&quot;
+
+#: ui_facturaivaincclientebase.h:766
+msgid &quot;Numero de facturaivainc:&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:58
+msgid &quot;Orden&quot;
+msgstr &quot;Orden&quot;
+
+#: bfclientefacturasubform.cpp:52
+msgid &quot;P.V.P.&quot;
+msgstr &quot;P.V.P.&quot;
+
+#: facturaivaincclienteview.cpp:73
+msgid &quot;Persona de contacto&quot;
+msgstr &quot;Persona de contacto&quot;
+
+#: ui_facturaivaincclientebase.h:770
+msgid &quot;Persona de contacto:&quot;
+msgstr &quot;Persona de contacto:&quot;
+
+#: facturaivaincclienteview.cpp:79 ui_facturaivaincclientebase.h:767
+msgid &quot;Procesado&quot;
+msgstr &quot;Procesado&quot;
+
+#: ui_facturaivaincclientebase.h:786
+msgid &quot;R.E.:&quot;
+msgstr &quot;R.E.:&quot;
+
+#: facturaivaincclienteview.cpp:81
+msgid &quot;Referencia&quot;
+msgstr &quot;Referencia&quot;
+
+#: facturaivaincclientelist.cpp:422
+msgid &quot;Referencia de factura&quot;
+msgstr &quot;Referencia de factura&quot;
+
+#: ui_facturaivaincclientebase.h:757
+msgid &quot;Referencia:&quot;
+msgstr &quot;Referencia:&quot;
+
+#: ui_facturaivaincclientebase.h:781
+msgid &quot;Registro&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:82 ui_facturaivaincclientebase.h:779
+msgid &quot;Sucesos antes de imprimir&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:83 ui_facturaivaincclientebase.h:780
+msgid &quot;Sucesos tras imprimir&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclienteview.cpp:74
+msgid &quot;Telefono de contacto&quot;
+msgstr &quot;Telefono de contacto&quot;
+
+#: ui_facturaivaincclientebase.h:772
+msgid &quot;Telefono de contacto:&quot;
+msgstr &quot;Telefono de contacto:&quot;
+
+#: facturaivaincclienteview.cpp:65
+msgid &quot;FacturaIVAInc&quot;
+msgstr &quot;FacturaIVAInc&quot;
+
+#: genalbqtoolbutton.cpp:156
+msgid &quot;FacturaIVAInc ya existe&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:347 pluginbf_clientefacturaivainc.cpp:61
+#: pluginbf_clientefacturaivainc.cpp:62
+msgid &quot;FacturaIVAInces a clientes&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientelistbase.h:448
+msgid &quot;FacturaIVAIncs a clientes&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:209
+msgid &quot;FacturaIVAIncs no procesados&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:208
+msgid &quot;FacturaIVAIncs procesados&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:141 genalbqtoolbutton.cpp:273
+msgid &quot;Tiene que seleccionar un cliente&quot;
+msgstr &quot;Tiene que seleccionar un cliente&quot;
+
+#: facturaivaincclientelist.cpp:207
+msgid &quot;Todos los facturaivaincs&quot;
+msgstr &quot;&quot;
+
+#: facturaivaincclientelist.cpp:437
+msgid &quot;Total&quot;
+msgstr &quot;Total:&quot;
+
+#: bfclientefacturasubform.cpp:53
+msgid &quot;Total Linea&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:787
+msgid &quot;Total:&quot;
+msgstr &quot;Total:&quot;
+
+#: ui_facturaivaincclientelistbase.h:453
+msgid &quot;Total: &quot;
+msgstr &quot;Total:&quot;
+
+#: facturaivaincclienteview.cpp:78 ui_facturaivaincclientelistbase.h:452
+msgid &quot;Trabajador&quot;
+msgstr &quot;Trabajador&quot;
+
+#: ui_facturaivaincclientebase.h:768
+msgid &quot;Trabajador:&quot;
+msgstr &quot;Trabajador:&quot;
+
+#~ msgid &quot;N¬∫ linea&quot;
+#~ msgstr &quot;N√∫mero de l√≠nea&quot;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc_fr_FR.po b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc_fr_FR.po
new file mode 100644
index 0000000..2adb27c
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/po/pluginbf_clientefacturaivainc_fr_FR.po
@@ -0,0 +1,487 @@
+# Header entry was created by Lokalize.
+#
+# aishen &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">aishen en free.fr</A>&gt;, 2011.
+msgid &quot;&quot;
+msgstr &quot;&quot;
+&quot;Project-Id-Version: \n&quot;
+&quot;Report-Msgid-Bugs-To: <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">info en iglues.org</A>\n&quot;
+&quot;POT-Creation-Date: 2011-08-16 13:15+0200\n&quot;
+&quot;PO-Revision-Date: 2011-02-10 07:59+0100\n&quot;
+&quot;Language-Team: French &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">kde-i18n-doc en kde.org</A>&gt;\n&quot;
+&quot;Language: fr\n&quot;
+&quot;MIME-Version: 1.0\n&quot;
+&quot;Content-Type: text/plain; charset=UTF-8\n&quot;
+&quot;Content-Transfer-Encoding: 8bit\n&quot;
+&quot;X-Generator: Lokalize 1.2\n&quot;
+&quot;Plural-Forms: nplurals=2; plural=(n &gt; 1);\n&quot;
+&quot;X-Language: fr_FR\n&quot;
+&quot;X-Source-Language: C\n&quot;
+
+#: bfclientefacturadescuentosubform.cpp:43 bfclientefacturasubform.cpp:56
+msgid &quot;% Descuento&quot;
+msgstr &quot;% Remise&quot;
+
+#: bfclientefacturasubform.cpp:55
+msgid &quot;% Recargo E.Q.&quot;
+msgstr &quot;% Recharge E.Q.&quot;
+
+#: ui_facturaivaincclientebase.h:794
+msgid &quot;&amp;Aceptar&quot;
+msgstr &quot;&amp;Accepter&quot;
+
+#: ui_facturaivaincclientebase.h:795
+msgid &quot;&amp;Cancelar&quot;
+msgstr &quot;&amp;Annuler&quot;
+
+#: ui_facturaivaincclientebase.h:774
+msgid &quot;&amp;Detalle&quot;
+msgstr &quot;&amp;D√©tail&quot;
+
+#: genalbqtoolbutton.cpp:158 genalbqtoolbutton.cpp:290
+msgid &quot;&amp;No&quot;
+msgstr &quot;&amp;Non&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:68
+msgid &quot;&amp;Nuevo facturaivainc a cliente&quot;
+msgstr &quot;&quot;
+
+#: genalbqtoolbutton.cpp:158 genalbqtoolbutton.cpp:290
+msgid &quot;&amp;Si&quot;
+msgstr &quot;&amp;Oui&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:59
+msgid &quot;&amp;FacturaIVAInces a clientes&quot;
+msgstr &quot;FacturaIVAIncs clients&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:55
+msgid &quot;&amp;Ventas&quot;
+msgstr &quot;&quot;
+
+#: ui_facturaivaincclientebase.h:788 ui_facturaivaincclientebase.h:789
+#: ui_facturaivaincclientebase.h:790 ui_facturaivaincclientebase.h:791
+#: ui_facturaivaincclientebase.h:792 ui_facturaivaincclientebase.h:793
+msgid &quot;0.00&quot;
+msgstr &quot;0.00&quot;
+
+#: ui_facturaivaincclientelistbase.h:504 ui_facturaivaincclientelistbase.h:507
+msgid &quot;Actualizar listado&quot;
+msgstr &quot;Actualiser la liste&quot;
+
+#: facturaivaincclienteview.cpp:70
+msgid &quot;Almacen&quot;
+msgstr &quot;Magasin&quot;
+
+#: ui_facturaivaincclientebase.h:773
+msgid &quot;Almacen:&quot;
+msgstr &quot;Magasin :&quot;
+
+#: facturaivaincclientelist.cpp:435
+msgid &quot;Base imponible&quot;
+msgstr &quot;Base Imposable&quot;
+
+#: ui_facturaivaincclientebase.h:783
+msgid &quot;Base imponible:&quot;
+msgstr &quot;Base Imposable :&quot;
+
+#: ui_facturaivaincclientelistbase.h:472 ui_facturaivaincclientelistbase.h:475
+msgid &quot;Borrar factura&quot;
+msgstr &quot;Effacer le bulletin&quot;
+
+#: ui_facturaivaincclientebase.h:744 ui_facturaivaincclientebase.h:747
+msgid &quot;Borrar facturaivainc&quot;
+msgstr &quot;Effacer le facturaivainc&quot;
+
+#: ui_facturaivaincclientelistbase.h:511
+msgid &quot;Buscar:&quot;
+msgstr &quot;Chercher :&quot;
+
+#: bfclientefacturasubform.cpp:50
+msgid &quot;Cantidad&quot;
+msgstr &quot;Quantit√©&quot;
+
+#: facturaivaincclienteview.cpp:69
+msgid &quot;Cliente&quot;
+msgstr &quot;Client&quot;
+
+#: facturaivaincclientelist.cpp:165 facturaivaincclienteview.cpp:103
+msgid &quot;Cliente:&quot;
+msgstr &quot;Client :&quot;
+
+#: bfclientefacturasubform.cpp:46
+msgid &quot;Codigo completo articulo&quot;
+msgstr &quot;Code complet article&quot;
+
+#: facturaivaincclientelist.cpp:423
+msgid &quot;Codigo de almacen&quot;
+msgstr &quot;Code magasin&quot;
+
+#: facturaivaincclienteview.cpp:75
+msgid &quot;Comentario&quot;
+msgstr &quot;Libell√©&quot;
+
+#: facturaivaincclienteview.cpp:76
+msgid &quot;Comentario privado&quot;
+msgstr &quot;Commentaire priv√©&quot;
+
+#: ui_facturaivaincclientebase.h:778
+msgid &quot;Comentario&amp;s&quot;
+msgstr &quot;Libell√©&amp;s&quot;
+
+#: facturaivaincclientelist.cpp:433
+msgid &quot;Comentarios del factura&quot;
+msgstr &quot;Libell√©s du bulletin&quot;
+
+#: ui_facturaivaincclientebase.h:777
+msgid &quot;Comentarios privados:&quot;
+msgstr &quot;Commentaires priv√©s :&quot;
+
+#: ui_facturaivaincclientebase.h:776
+msgid &quot;Comentarios publicos:&quot;
+msgstr &quot;Commentaires publics :&quot;
+
+#: bfclientefacturadescuentosubform.cpp:42
+msgid &quot;Concepto descuento&quot;
+msgstr &quot;Raison de la remise&quot;
+
+#: ui_facturaivaincclientelistbase.h:496 ui_facturaivaincclientelistbase.h:499
+msgid &quot;Configurar listado&quot;
+msgstr &quot;Configurer la liste&quot;
+
+#: ui_facturaivaincclientelistbase.h:502
+msgid &quot;Ctrl+B&quot;
+msgstr &quot;Ctrl+B&quot;
+
+#: ui_facturaivaincclientelistbase.h:478
+msgid &quot;Ctrl+D&quot;
+msgstr &quot;Ctrl+D&quot;
+
+#: ui_facturaivaincclientelistbase.h:470
+msgid &quot;Ctrl+E&quot;
+msgstr &quot;Ctrl+E&quot;
+
+#: ui_facturaivaincclientelistbase.h:494
+msgid &quot;Ctrl+F&quot;
+msgstr &quot;Ctrl+F&quot;
+
+#: ui_facturaivaincclientelistbase.h:462
+msgid &quot;Ctrl+N&quot;
+msgstr &quot;Ctrl+N&quot;
+
+#: ui_facturaivaincclientelistbase.h:486
+msgid &quot;Ctrl+P&quot;
+msgstr &quot;Ctrl+P&quot;
+
+#: facturaivaincclientelist.cpp:322
+msgid &quot;Debe seleccionar una linea&quot;
+msgstr &quot;Vous devez s√©lectionner une ligne&quot;
+
+#: facturaivaincclientelist.cpp:425 facturaivaincclienteview.cpp:80
+#: bfclientefacturasubform.cpp:49
+msgid &quot;Descripcion&quot;
+msgstr &quot;Description &quot;
+
+#: facturaivaincclientelist.cpp:429
+msgid &quot;Descripcion de forma de pago&quot;
+msgstr &quot;Forme de paiement &quot;
+
+#: ui_facturaivaincclientebase.h:765
+msgid &quot;Descripcion:&quot;
+msgstr &quot;Descripci√≥n :&quot;
+
+#: ui_facturaivaincclientebase.h:775
+msgid &quot;Descuen&amp;tos&quot;
+msgstr &quot;Remises&quot;
+
+#: ui_facturaivaincclientebase.h:782
+msgid &quot;Descuentos:&quot;
+msgstr &quot;Remises :&quot;
+
+#: ui_facturaivaincclientelistbase.h:464 ui_facturaivaincclientelistbase.h:467
+msgid &quot;Editar factura&quot;
+msgstr &quot;Editer le bulletin&quot;
+
+#: facturaivaincclientelist.cpp:336
+msgid &quot;Error al borrar el factura a cliente&quot;
+msgstr &quot;Erreur d'effacement d'un bulletin de livraison&quot;
+
+#: facturaivaincclienteview.cpp:118
+msgid &quot;Error al crear el factura a cliente&quot;
+msgstr &quot;Erreur dans la cr√©ation du bulletin&quot;
+
+#: genalbqtoolbutton.cpp:227 genalbqtoolbutton.cpp:359
+msgid &quot;Error inesperado&quot;
+msgstr &quot;Erreur inattendue&quot;
+
+#: genalbqtoolbutton.cpp:157
+msgid &quot;&quot;
+&quot;Existe un factura a este cliente con la misma referencia que este pedido. &quot;
+&quot;Desea abrirlo para verificar?&quot;
+msgstr &quot;&quot;
+&quot;Il existe un bulletin de livraison pour ce client avec la m√™me r√©f√©rence que &quot;
+&quot;cette commande. Souhaitez l'ouvrir pour v√©rifier ?&quot;
+
+#: genalbqtoolbutton.cpp:289
+msgid &quot;&quot;
+&quot;Existe una factura a este cliente con la misma referencia que este pedido. &quot;
+&quot;Desea abrirlo para verificar?&quot;
+msgstr &quot;&quot;
+&quot;Il existe un bulletin de livraison pour ce client avec la m√™me r√©f√©rence que &quot;
+&quot;cette commande. Souhaitez l'ouvrir pour v√©rifier ?&quot;
+
+#: ui_facturaivaincclientelistbase.h:510
+msgid &quot;F5&quot;
+msgstr &quot;F5&quot;
+
+#: genalbqtoolbutton.cpp:288
+msgid &quot;Factura ya existe&quot;
+msgstr &quot;La facture existe d√©j√† &quot;
+
+#: facturaivaincclientelist.cpp:426
+msgid &quot;Fecha de factura&quot;
+msgstr &quot;Date du bulletin&quot;
+
+#: facturaivaincclienteview.cpp:72
+msgid &quot;Fecha de creacion&quot;
+msgstr &quot;Date de cr√©ation&quot;
+
+#: ui_facturaivaincclientebase.h:769
+msgid &quot;Fecha de creacion:&quot;
+msgstr &quot;Date de cr√©ation :&quot;
+
+#: ui_facturaivaincclientelistbase.h:451
+msgid &quot;Fecha final:&quot;
+msgstr &quot;Date finale :&quot;
+
+#: ui_facturaivaincclientelistbase.h:450
+msgid &quot;Fecha inicial:&quot;
+msgstr &quot;Date initiale :&quot;
+
+#: ui_facturaivaincclientelistbase.h:488 ui_facturaivaincclientelistbase.h:491
+msgid &quot;Filtrar facturaes&quot;
+msgstr &quot;Filtrer les bulletins&quot;
+
+#: facturaivaincclienteview.cpp:77
+msgid &quot;Forma de pago&quot;
+msgstr &quot;Forme de paiement&quot;
+
+#: ui_facturaivaincclientebase.h:771
+msgid &quot;Forma de pago:&quot;
+msgstr &quot;Forme de paiement :&quot;
+
+#: ui_facturaivaincclientebase.h:740
+msgid &quot;Guardar factura&quot;
+msgstr &quot;Sauvegarder le bulletin&quot;
+
+#: ui_facturaivaincclientebase.h:737
+msgid &quot;Guardar facturaivainc&quot;
+msgstr &quot;Sauvegarder le facturaivainc&quot;
+
+#: ui_facturaivaincclientebase.h:784
+msgid &quot;I.R.P.F.:&quot;
+msgstr &quot;I.R.P.F.:&quot;
+
+#: bfclientefacturasubform.cpp:54
+msgid &quot;I.V.A.&quot;
+msgstr &quot;T.V.A.&quot;
+
+#: facturaivaincclientelist.cpp:432
+msgid &quot;ID factura&quot;
+msgstr &quot;Id bulletin&quot;
+
+#: facturaivaincclientelist.cpp:434
+msgid &quot;ID almacen&quot;
+msgstr &quot;ID du magasin&quot;
+
+#: facturaivaincclientelist.cpp:431
+msgid &quot;ID cliente&quot;
+msgstr &quot;Id client&quot;
+
+#: facturaivaincclientelist.cpp:428
+msgid &quot;ID forma de pago&quot;
+msgstr &quot;Id Forme de paiement&quot;
+
+#: facturaivaincclientelist.cpp:430
+msgid &quot;ID trabajador&quot;
+msgstr &quot;Id Ouvrier&quot;
+
+#: facturaivaincclienteview.cpp:68 bfclientefacturadescuentosubform.cpp:44
+#: bfclientefacturasubform.cpp:57
+msgid &quot;Id factura&quot;
+msgstr &quot;Id bulletin&quot;
+
+#: bfclientefacturasubform.cpp:45
+msgid &quot;Id articulo&quot;
+msgstr &quot;Id article&quot;
+
+#: bfclientefacturadescuentosubform.cpp:41
+msgid &quot;Id descuento&quot;
+msgstr &quot;Id remise&quot;
+
+#: ui_facturaivaincclientelistbase.h:480 ui_facturaivaincclientelistbase.h:483
+msgid &quot;Imprimir listado&quot;
+msgstr &quot;Imprimer la liste&quot;
+
+#: ui_facturaivaincclientebase.h:751 ui_facturaivaincclientebase.h:754
+msgid &quot;Imprimir facturaivainc&quot;
+msgstr &quot;Imprimer le facturaivainc&quot;
+
+#: facturaivaincclientelist.cpp:436
+msgid &quot;Impuestos&quot;
+msgstr &quot;Imp√¥ts&quot;
+
+#: ui_facturaivaincclientebase.h:785
+msgid &quot;Impuestos:&quot;
+msgstr &quot;Imp√¥ts :&quot;
+
+#: ui_facturaivaincclientebase.h:759 ui_facturaivaincclientebase.h:762
+msgid &quot;Mostrar/ocultar cabecera&quot;
+msgstr &quot;Montrer/cacher l'ent√™te&quot;
+
+#: ui_facturaivaincclientelistbase.h:449
+msgid &quot;Mostrar:&quot;
+msgstr &quot;Afficher :&quot;
+
+#: bfclientefacturasubform.cpp:48
+msgid &quot;No linea&quot;
+msgstr &quot;&quot;
+
+#: bfclientefacturasubform.cpp:47
+msgid &quot;Nombre articulo&quot;
+msgstr &quot;Nom article&quot;
+
+#: facturaivaincclientelist.cpp:427
+msgid &quot;Nombre de cliente&quot;
+msgstr &quot;Nom du client&quot;
+
+#: ui_facturaivaincclientelistbase.h:456 ui_facturaivaincclientelistbase.h:459
+msgid &quot;Nuevo factura&quot;
+msgstr &quot;Nouveau bulletin&quot;
+
+#: pluginbf_clientefacturaivainc.cpp:70 pluginbf_clientefacturaivainc.cpp:71
+#: ui_facturaivaincclientebase.h:735
+msgid &quot;Nuevo facturaivainc a cliente&quot;
+msgstr &quot;Nouveau facturaivainc client&quot;
+
+#: facturaivaincclientelist.cpp:424 facturaivaincclienteview.cpp:71
+msgid &quot;Numero de factura&quot;
+msgstr &quot;Num√©ro du bulletin&quot;
+
+#: ui_facturaivaincclientebase.h:766
+msgid &quot;Numero de facturaivainc:&quot;
+msgstr &quot;N¬∞ de facturaivainc :&quot;
+
+#: bfclientefacturasubform.cpp:58
+msgid &quot;Orden&quot;
+msgstr &quot;Ordre&quot;
+
+#: bfclientefacturasubform.cpp:52
+msgid &quot;P.V.P.&quot;
+msgstr &quot;P.V.P.&quot;
+
+#: facturaivaincclienteview.cpp:73
+msgid &quot;Persona de contacto&quot;
+msgstr &quot;Contact&quot;
+
+#: ui_facturaivaincclientebase.h:770
+msgid &quot;Persona de contacto:&quot;
+msgstr &quot;Contact :&quot;
+
+#: facturaivaincclienteview.cpp:79 ui_facturaivaincclientebase.h:767
+msgid &quot;Procesado&quot;
+msgstr &quot;Accus√©&quot;
+
+#: ui_facturaivaincclientebase.h:786
+msgid &quot;R.E.:&quot;
+msgstr &quot;R.E.:&quot;
+
+#: facturaivaincclienteview.cpp:81
+msgid &quot;Referencia&quot;
+msgstr &quot;R√©f√©rence&quot;
+
+#: facturaivaincclientelist.cpp:422
+msgid &quot;Referencia de factura&quot;
+msgstr &quot;R√©f√©rence du bulletin&quot;
+
+#: ui_facturaivaincclientebase.h:757
+msgid &quot;Referencia:&quot;
+msgstr &quot;R√©f√©rence :&quot;
+
+#: ui_facturaivaincclientebase.h:781
+msgid &quot;Registro&quot;
+msgstr &quot;Registre&quot;
+
+#: facturaivaincclienteview.cpp:82 ui_facturaivaincclientebase.h:779
+msgid &quot;Sucesos antes de imprimir&quot;
+msgstr &quot;Ev√©nements avant d'imprimer&quot;
+
+#: facturaivaincclienteview.cpp:83 ui_facturaivaincclientebase.h:780
+msgid &quot;Sucesos tras imprimir&quot;
+msgstr &quot;Ev√©nements apr√®s l'imprission&quot;
+
+#: facturaivaincclienteview.cpp:74
+msgid &quot;Telefono de contacto&quot;
+msgstr &quot;T√©l√©phone du contact&quot;
+
+#: ui_facturaivaincclientebase.h:772
+msgid &quot;Telefono de contacto:&quot;
+msgstr &quot;T√©l√©phone du contact :&quot;
+
+#: facturaivaincclienteview.cpp:65
+msgid &quot;FacturaIVAInc&quot;
+msgstr &quot;FacturaIVAInc&quot;
+
+#: genalbqtoolbutton.cpp:156
+msgid &quot;FacturaIVAInc ya existe&quot;
+msgstr &quot;Le facturaivainc existe d√©j√†&quot;
+
+#: facturaivaincclientelist.cpp:347 pluginbf_clientefacturaivainc.cpp:61
+#: pluginbf_clientefacturaivainc.cpp:62
+msgid &quot;FacturaIVAInces a clientes&quot;
+msgstr &quot;FacturaIVAIncs clients&quot;
+
+#: ui_facturaivaincclientelistbase.h:448
+msgid &quot;FacturaIVAIncs a clientes&quot;
+msgstr &quot;FacturaIVAIncs clients&quot;
+
+#: facturaivaincclientelist.cpp:209
+msgid &quot;FacturaIVAIncs no procesados&quot;
+msgstr &quot;FacturaIVAIncs non trait√©s&quot;
+
+#: facturaivaincclientelist.cpp:208
+msgid &quot;FacturaIVAIncs procesados&quot;
+msgstr &quot;FacturaIVAIncs trait√©s&quot;
+
+#: genalbqtoolbutton.cpp:141 genalbqtoolbutton.cpp:273
+msgid &quot;Tiene que seleccionar un cliente&quot;
+msgstr &quot;Vous devez s√©lectionner un client&quot;
+
+#: facturaivaincclientelist.cpp:207
+msgid &quot;Todos los facturaivaincs&quot;
+msgstr &quot;Tous les facturaivaincs&quot;
+
+#: facturaivaincclientelist.cpp:437
+msgid &quot;Total&quot;
+msgstr &quot;Total&quot;
+
+#: bfclientefacturasubform.cpp:53
+msgid &quot;Total Linea&quot;
+msgstr &quot;Total de la ligne&quot;
+
+#: ui_facturaivaincclientebase.h:787
+msgid &quot;Total:&quot;
+msgstr &quot;Total :&quot;
+
+#: ui_facturaivaincclientelistbase.h:453
+msgid &quot;Total: &quot;
+msgstr &quot;Total : &quot;
+
+#: facturaivaincclienteview.cpp:78 ui_facturaivaincclientelistbase.h:452
+msgid &quot;Trabajador&quot;
+msgstr &quot;Salari√©&quot;
+
+#: ui_facturaivaincclientebase.h:768
+msgid &quot;Trabajador:&quot;
+msgstr &quot;Salari√© :&quot;
+
+#~ msgid &quot;N¬∫ linea&quot;
+#~ msgstr &quot;N¬∞ de ligne&quot;
diff --git a/bulmages/bulmalib/plugins/pluginbl_attachdocument/README.es b/bulmages/bulmalib/plugins/pluginbl_attachdocument/README.es
index d36de65..c38c198 100644
--- a/bulmages/bulmalib/plugins/pluginbl_attachdocument/README.es
+++ b/bulmages/bulmalib/plugins/pluginbl_attachdocument/README.es
@@ -26,7 +26,7 @@ Dependencias:
 
 Incompatibles:
 
-Categorias: Asociaciones de padres de alumnos;Utilidades genericas;Experimentales;
+Categorias: Asociaciones de padres de alumnos;Utilidades genericas;Experimentales; Colmados; Ferreter√≠as; Droguer√≠as;Facturacion generica;Talleres;Distribuci√≥n; Supermercados;Distribuci√≥n Alimentaria;Servicios Generales;Alquileres;Restauraci√≥n; Parques Infantiles; Tallas y Colores;
 
 Orden: 90
 
diff --git a/bulmages/bulmalib/plugins/pluginbl_feeds/README.es b/bulmages/bulmalib/plugins/pluginbl_feeds/README.es
index a9ff1dc..9d36193 100644
--- a/bulmages/bulmalib/plugins/pluginbl_feeds/README.es
+++ b/bulmages/bulmalib/plugins/pluginbl_feeds/README.es
@@ -24,7 +24,7 @@ Dependencias:
 
 Incompatibles:
 
-Categorias: Utilidades genericas;
+Categorias: Utilidades genericas;Colmados; Ferreter√≠as; Droguer√≠as;Facturacion generica;Talleres;Distribuci√≥n; Supermercados;Distribuci√≥n Alimentaria;Servicios Generales;Alquileres;Restauraci√≥n; Parques Infantiles; Tallas y Colores;
 
 Orden: 900
 
diff --git a/bulmages/bulmalib/plugins/pluginbl_report/README.es b/bulmages/bulmalib/plugins/pluginbl_report/README.es
index ff94b7e..f48cb18 100644
--- a/bulmages/bulmalib/plugins/pluginbl_report/README.es
+++ b/bulmages/bulmalib/plugins/pluginbl_report/README.es
@@ -28,7 +28,7 @@ Dependencias:
 
 Incompatibles:
 
-Categorias: Utilidades genericas;
+Categorias: Utilidades genericas; Colmados; Ferreter√≠as; Droguer√≠as;Facturacion generica;Talleres;Distribuci√≥n; Supermercados;Distribuci√≥n Alimentaria;Servicios Generales;Alquileres;Restauraci√≥n; Parques Infantiles; Tallas y Colores;
 
 Orden: 940
 
diff --git a/bulmages/bulmalib/plugins/pluginbl_report2ods/README.es b/bulmages/bulmalib/plugins/pluginbl_report2ods/README.es
index a055050..0845084 100644
--- a/bulmages/bulmalib/plugins/pluginbl_report2ods/README.es
+++ b/bulmages/bulmalib/plugins/pluginbl_report2ods/README.es
@@ -32,7 +32,7 @@ Incompatibles:
 
 Reports:
 
-Categorias: Utilidades genericas;
+Categorias: Utilidades genericas; Colmados; Ferreter√≠as; Droguer√≠as;Facturacion generica;Talleres;Distribuci√≥n; Supermercados;Distribuci√≥n Alimentaria;Servicios Generales;Alquileres;Restauraci√≥n; Parques Infantiles; Tallas y Colores;
 
 Orden: 950
 
diff --git a/bulmages/bulmalib/plugins/pluginbl_subform2ods/README.es b/bulmages/bulmalib/plugins/pluginbl_subform2ods/README.es
index c7a64c6..b574775 100644
--- a/bulmages/bulmalib/plugins/pluginbl_subform2ods/README.es
+++ b/bulmages/bulmalib/plugins/pluginbl_subform2ods/README.es
@@ -29,7 +29,7 @@ Dependencias:
 
 Incompatibles:
 
-Categorias: Utilidades genericas;
+Categorias: Utilidades genericas; Colmados; Ferreter√≠as; Droguer√≠as;Facturacion generica;Talleres;Distribuci√≥n; Supermercados;Distribuci√≥n Alimentaria;Servicios Generales;Alquileres;Restauraci√≥n; Parques Infantiles; Tallas y Colores;
 
 Orden: 50
 
diff --git a/bulmages/bulmalib/plugins/pluginbl_template/README.es b/bulmages/bulmalib/plugins/pluginbl_template/README.es
index a806c14..79f2c76 100644
--- a/bulmages/bulmalib/plugins/pluginbl_template/README.es
+++ b/bulmages/bulmalib/plugins/pluginbl_template/README.es
@@ -33,7 +33,7 @@ Dependencias:
 
 Incompatibles:
 
-Categorias: Utilidades genericas;
+Categorias: Utilidades genericas; Colmados; Ferreter√≠as; Droguer√≠as;Facturacion generica;Talleres;Distribuci√≥n; Supermercados;Distribuci√≥n Alimentaria;Servicios Generales;Alquileres;Restauraci√≥n; Parques Infantiles; Tallas y Colores;
 
 Orden: 60
 
diff --git a/bulmages/bulmalib/plugins/pluginbl_template2ods/README.es b/bulmages/bulmalib/plugins/pluginbl_template2ods/README.es
index d6999b1..074c0ee 100644
--- a/bulmages/bulmalib/plugins/pluginbl_template2ods/README.es
+++ b/bulmages/bulmalib/plugins/pluginbl_template2ods/README.es
@@ -37,7 +37,7 @@ Incompatibles:
 
 Orden: 60
 
-Categorias: Utilidades genericas;
+Categorias: Utilidades genericas; Colmados; Ferreter®™as; Droguer®™as;Facturacion generica;Talleres;Distribuci®Æn; Supermercados;Distribuci®Æn Alimentaria;Servicios Generales;Alquileres;Restauraci®Æn; Parques Infantiles; Tallas y Colores;
 
 
 Comentarios: Su funcionamiento se basa en que haya un documento RML cuyo nombre

commit 6ca71be6a200c915bf0a482a90e5c79d4d646837
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Wed Apr 10 17:20:58 2013 +0200

    Creo la nueva versi√≥n, los archivos de parches sql y cambio bulmasetup para que los aplique asi como los abouts para que muestren la nueva version

diff --git a/bulmages/bulmacont/src/bcaboutbase.ui b/bulmages/bulmacont/src/bcaboutbase.ui
index 91db82d..c7569a6 100644
--- a/bulmages/bulmacont/src/bcaboutbase.ui
+++ b/bulmages/bulmacont/src/bcaboutbase.ui
@@ -578,7 +578,7 @@
 &lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
 &lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'Sans Serif'; font-size:9pt; font-weight:600; font-style:normal;&quot;&gt;
-&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Contabilidad GPL - Version 0.14.0 -&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&lt;/string&gt;
+&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Contabilidad GPL - Version 1.5.0 -&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&lt;/string&gt;
           &lt;/property&gt;
          &lt;/widget&gt;
         &lt;/item&gt;
@@ -648,8 +648,8 @@ p, li { white-space: pre-wrap; }
           &lt;string&gt;&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;<A HREF="http://www.w3.org/TR/REC-html40/strict.dtd&amp;quot;&amp;gt;">http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;</A>
 &lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'Sans Serif'; font-size:9pt; font-weight:400; font-style:normal;&quot;&gt;
-&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&lt;/string&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'Sans Serif'; font-size:12pt; font-weight:400; font-style:normal;&quot;&gt;
+&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:9pt;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&lt;/string&gt;
          &lt;/property&gt;
         &lt;/widget&gt;
        &lt;/item&gt;
diff --git a/bulmages/bulmacont/src/main.cxx b/bulmages/bulmacont/src/main.cxx
index c896fa2..f95eb42 100644
--- a/bulmages/bulmacont/src/main.cxx
+++ b/bulmages/bulmacont/src/main.cxx
@@ -130,7 +130,7 @@ int main ( int argc, char **argv )
       delete argParser;
 
       /// Verifica la version de la base de datos para funcionar adecuadamente.
-      bges-&gt;company()-&gt;dbVersionCheck(&quot;DatabaseRevision&quot;, &quot;0.14.1-0001&quot;);
+      bges-&gt;company()-&gt;dbVersionCheck(&quot;DatabaseRevision&quot;, &quot;0.15.0-0001&quot;);
 
 
       splashScr-&gt;show();
diff --git a/bulmages/bulmafact/src/bfaboutbase.ui b/bulmages/bulmafact/src/bfaboutbase.ui
index 801fa1a..a59abc6 100644
--- a/bulmages/bulmafact/src/bfaboutbase.ui
+++ b/bulmages/bulmafact/src/bfaboutbase.ui
@@ -571,7 +571,7 @@
 &lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
 &lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'Sans Serif'; font-size:9pt; font-weight:600; font-style:normal;&quot;&gt;
-&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Facturacion GPL - Version 0.14.0 -&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&lt;/string&gt;
+&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;Facturacion GPL - Version 1.5.0 -&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&lt;/string&gt;
          &lt;/property&gt;
         &lt;/widget&gt;
        &lt;/item&gt;
@@ -650,8 +650,8 @@ p, li { white-space: pre-wrap; }
             &lt;string&gt;&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;<A HREF="http://www.w3.org/TR/REC-html40/strict.dtd&amp;quot;&amp;gt;">http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;</A>
 &lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'Sans Serif'; font-size:9pt; font-weight:400; font-style:normal;&quot;&gt;
-&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&lt;/string&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'Sans Serif'; font-size:12pt; font-weight:400; font-style:normal;&quot;&gt;
+&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:9pt;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&lt;/string&gt;
            &lt;/property&gt;
           &lt;/widget&gt;
          &lt;/item&gt;
diff --git a/bulmages/bulmafact/src/main.cxx b/bulmages/bulmafact/src/main.cxx
index b04fd6c..64be110 100644
--- a/bulmages/bulmafact/src/main.cxx
+++ b/bulmages/bulmafact/src/main.cxx
@@ -129,7 +129,7 @@ int main ( int argc, char **argv )
       delete argParser;
 
       /// Verifica la version de la base de datos para funcionar adecuadamente.
-      bges-&gt;company()-&gt;dbVersionCheck(&quot;DatabaseRevision&quot;, &quot;0.14.1-0003&quot;);
+      bges-&gt;company()-&gt;dbVersionCheck(&quot;DatabaseRevision&quot;, &quot;0.15.0-0001&quot;);
 
 
       splashScr-&gt;show();
diff --git a/bulmages/bulmasetup/bulmasetupbase.py b/bulmages/bulmasetup/bulmasetupbase.py
index a173509..50e7a66 100644
--- a/bulmages/bulmasetup/bulmasetupbase.py
+++ b/bulmages/bulmasetup/bulmasetupbase.py
@@ -2,47 +2,52 @@
 
 # Form implementation generated from reading ui file 'bulmasetupbase.ui'
 #
-# Created: Thu Apr 12 17:49:05 2012
-#      by: PyQt4 UI code generator 4.7.4
+# Created: Wed Apr 10 17:16:18 2013
+#      by: PyQt4 UI code generator 4.9.1
 #
 # WARNING! All changes made in this file will be lost!
 
 from PyQt4 import QtCore, QtGui
 
+try:
+    _fromUtf8 = QtCore.QString.fromUtf8
+except AttributeError:
+    _fromUtf8 = lambda s: s
+
 class Ui_MainWindow(object):
     def setupUi(self, MainWindow):
-        MainWindow.setObjectName(&quot;MainWindow&quot;)
+        MainWindow.setObjectName(_fromUtf8(&quot;MainWindow&quot;))
         MainWindow.resize(778, 400)
         MainWindow.setMinimumSize(QtCore.QSize(732, 400))
         icon = QtGui.QIcon()
-        icon.addPixmap(QtGui.QPixmap(&quot;:/images/iglues.org.png&quot;), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        icon.addPixmap(QtGui.QPixmap(_fromUtf8(&quot;:/images/iglues.org.png&quot;)), QtGui.QIcon.Normal, QtGui.QIcon.Off)
         MainWindow.setWindowIcon(icon)
         self.centralwidget = QtGui.QWidget(MainWindow)
-        self.centralwidget.setObjectName(&quot;centralwidget&quot;)
+        self.centralwidget.setObjectName(_fromUtf8(&quot;centralwidget&quot;))
         self.horizontalLayout_2 = QtGui.QHBoxLayout(self.centralwidget)
-        self.horizontalLayout_2.setObjectName(&quot;horizontalLayout_2&quot;)
+        self.horizontalLayout_2.setObjectName(_fromUtf8(&quot;horizontalLayout_2&quot;))
         self.verticalLayout_2 = QtGui.QVBoxLayout()
-        self.verticalLayout_2.setObjectName(&quot;verticalLayout_2&quot;)
+        self.verticalLayout_2.setObjectName(_fromUtf8(&quot;verticalLayout_2&quot;))
         self.label = QtGui.QLabel(self.centralwidget)
         self.label.setMinimumSize(QtCore.QSize(209, 209))
         self.label.setMaximumSize(QtCore.QSize(209, 209))
-        self.label.setText(&quot;&quot;)
-        self.label.setPixmap(QtGui.QPixmap(&quot;:/images/iglues.org.png&quot;))
+        self.label.setText(_fromUtf8(&quot;&quot;))
+        self.label.setPixmap(QtGui.QPixmap(_fromUtf8(&quot;:/images/iglues.org.png&quot;)))
         self.label.setScaledContents(True)
         self.label.setAlignment(QtCore.Qt.AlignCenter)
-        self.label.setObjectName(&quot;label&quot;)
+        self.label.setObjectName(_fromUtf8(&quot;label&quot;))
         self.verticalLayout_2.addWidget(self.label)
         self.label_2 = QtGui.QLabel(self.centralwidget)
         self.label_2.setAlignment(QtCore.Qt.AlignCenter)
-        self.label_2.setObjectName(&quot;label_2&quot;)
+        self.label_2.setObjectName(_fromUtf8(&quot;label_2&quot;))
         self.verticalLayout_2.addWidget(self.label_2)
         self.horizontalLayout_2.addLayout(self.verticalLayout_2)
         self.verticalLayout = QtGui.QVBoxLayout()
-        self.verticalLayout.setObjectName(&quot;verticalLayout&quot;)
+        self.verticalLayout.setObjectName(_fromUtf8(&quot;verticalLayout&quot;))
         self.groupBox_3 = QtGui.QGroupBox(self.centralwidget)
-        self.groupBox_3.setObjectName(&quot;groupBox_3&quot;)
+        self.groupBox_3.setObjectName(_fromUtf8(&quot;groupBox_3&quot;))
         self.gridLayout_2 = QtGui.QGridLayout(self.groupBox_3)
-        self.gridLayout_2.setObjectName(&quot;gridLayout_2&quot;)
+        self.gridLayout_2.setObjectName(_fromUtf8(&quot;gridLayout_2&quot;))
         self.nuevo_usuario = QtGui.QPushButton(self.groupBox_3)
         self.nuevo_usuario.setEnabled(False)
         font = QtGui.QFont()
@@ -51,10 +56,10 @@ class Ui_MainWindow(object):
         self.nuevo_usuario.setFocusPolicy(QtCore.Qt.NoFocus)
         self.nuevo_usuario.setLayoutDirection(QtCore.Qt.LeftToRight)
         icon1 = QtGui.QIcon()
-        icon1.addPixmap(QtGui.QPixmap(&quot;:/images/add_user_postgresql.png&quot;), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        icon1.addPixmap(QtGui.QPixmap(_fromUtf8(&quot;:/images/add_user_postgresql.png&quot;)), QtGui.QIcon.Normal, QtGui.QIcon.Off)
         self.nuevo_usuario.setIcon(icon1)
         self.nuevo_usuario.setIconSize(QtCore.QSize(38, 38))
-        self.nuevo_usuario.setObjectName(&quot;nuevo_usuario&quot;)
+        self.nuevo_usuario.setObjectName(_fromUtf8(&quot;nuevo_usuario&quot;))
         self.gridLayout_2.addWidget(self.nuevo_usuario, 0, 0, 1, 1)
         self.editar_usuario = QtGui.QPushButton(self.groupBox_3)
         self.editar_usuario.setEnabled(False)
@@ -64,10 +69,10 @@ class Ui_MainWindow(object):
         self.editar_usuario.setFocusPolicy(QtCore.Qt.NoFocus)
         self.editar_usuario.setLayoutDirection(QtCore.Qt.LeftToRight)
         icon2 = QtGui.QIcon()
-        icon2.addPixmap(QtGui.QPixmap(&quot;:/images/edit_user_postgresql.png&quot;), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        icon2.addPixmap(QtGui.QPixmap(_fromUtf8(&quot;:/images/edit_user_postgresql.png&quot;)), QtGui.QIcon.Normal, QtGui.QIcon.Off)
         self.editar_usuario.setIcon(icon2)
         self.editar_usuario.setIconSize(QtCore.QSize(38, 38))
-        self.editar_usuario.setObjectName(&quot;editar_usuario&quot;)
+        self.editar_usuario.setObjectName(_fromUtf8(&quot;editar_usuario&quot;))
         self.gridLayout_2.addWidget(self.editar_usuario, 0, 1, 1, 1)
         self.permisos_usuario = QtGui.QPushButton(self.groupBox_3)
         self.permisos_usuario.setEnabled(False)
@@ -78,7 +83,7 @@ class Ui_MainWindow(object):
         self.permisos_usuario.setLayoutDirection(QtCore.Qt.LeftToRight)
         self.permisos_usuario.setIcon(icon2)
         self.permisos_usuario.setIconSize(QtCore.QSize(38, 38))
-        self.permisos_usuario.setObjectName(&quot;permisos_usuario&quot;)
+        self.permisos_usuario.setObjectName(_fromUtf8(&quot;permisos_usuario&quot;))
         self.gridLayout_2.addWidget(self.permisos_usuario, 1, 0, 1, 1)
         self.eliminar_usuario = QtGui.QPushButton(self.groupBox_3)
         self.eliminar_usuario.setEnabled(False)
@@ -88,16 +93,16 @@ class Ui_MainWindow(object):
         self.eliminar_usuario.setFocusPolicy(QtCore.Qt.NoFocus)
         self.eliminar_usuario.setLayoutDirection(QtCore.Qt.LeftToRight)
         icon3 = QtGui.QIcon()
-        icon3.addPixmap(QtGui.QPixmap(&quot;:/images/trash_user_postgresql.png&quot;), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        icon3.addPixmap(QtGui.QPixmap(_fromUtf8(&quot;:/images/trash_user_postgresql.png&quot;)), QtGui.QIcon.Normal, QtGui.QIcon.Off)
         self.eliminar_usuario.setIcon(icon3)
         self.eliminar_usuario.setIconSize(QtCore.QSize(38, 38))
-        self.eliminar_usuario.setObjectName(&quot;eliminar_usuario&quot;)
+        self.eliminar_usuario.setObjectName(_fromUtf8(&quot;eliminar_usuario&quot;))
         self.gridLayout_2.addWidget(self.eliminar_usuario, 1, 1, 1, 1)
         self.verticalLayout.addWidget(self.groupBox_3)
         self.groupBox_2 = QtGui.QGroupBox(self.centralwidget)
-        self.groupBox_2.setObjectName(&quot;groupBox_2&quot;)
+        self.groupBox_2.setObjectName(_fromUtf8(&quot;groupBox_2&quot;))
         self.gridLayout = QtGui.QGridLayout(self.groupBox_2)
-        self.gridLayout.setObjectName(&quot;gridLayout&quot;)
+        self.gridLayout.setObjectName(_fromUtf8(&quot;gridLayout&quot;))
         self.mui_crearbulmacont = QtGui.QPushButton(self.groupBox_2)
         self.mui_crearbulmacont.setEnabled(False)
         font = QtGui.QFont()
@@ -106,10 +111,10 @@ class Ui_MainWindow(object):
         self.mui_crearbulmacont.setFocusPolicy(QtCore.Qt.NoFocus)
         self.mui_crearbulmacont.setLayoutDirection(QtCore.Qt.LeftToRight)
         icon4 = QtGui.QIcon()
-        icon4.addPixmap(QtGui.QPixmap(&quot;:/images/iconbulmacont.png&quot;), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        icon4.addPixmap(QtGui.QPixmap(_fromUtf8(&quot;:/images/iconbulmacont.png&quot;)), QtGui.QIcon.Normal, QtGui.QIcon.Off)
         self.mui_crearbulmacont.setIcon(icon4)
         self.mui_crearbulmacont.setIconSize(QtCore.QSize(38, 38))
-        self.mui_crearbulmacont.setObjectName(&quot;mui_crearbulmacont&quot;)
+        self.mui_crearbulmacont.setObjectName(_fromUtf8(&quot;mui_crearbulmacont&quot;))
         self.gridLayout.addWidget(self.mui_crearbulmacont, 0, 0, 1, 1)
         self.mui_crearbulmafact = QtGui.QPushButton(self.groupBox_2)
         self.mui_crearbulmafact.setEnabled(False)
@@ -119,10 +124,10 @@ class Ui_MainWindow(object):
         self.mui_crearbulmafact.setFocusPolicy(QtCore.Qt.NoFocus)
         self.mui_crearbulmafact.setLayoutDirection(QtCore.Qt.LeftToRight)
         icon5 = QtGui.QIcon()
-        icon5.addPixmap(QtGui.QPixmap(&quot;:/images/iconbulmafact.png&quot;), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        icon5.addPixmap(QtGui.QPixmap(_fromUtf8(&quot;:/images/iconbulmafact.png&quot;)), QtGui.QIcon.Normal, QtGui.QIcon.Off)
         self.mui_crearbulmafact.setIcon(icon5)
         self.mui_crearbulmafact.setIconSize(QtCore.QSize(38, 38))
-        self.mui_crearbulmafact.setObjectName(&quot;mui_crearbulmafact&quot;)
+        self.mui_crearbulmafact.setObjectName(_fromUtf8(&quot;mui_crearbulmafact&quot;))
         self.gridLayout.addWidget(self.mui_crearbulmafact, 0, 1, 1, 1)
         self.mui_adminempresas = QtGui.QPushButton(self.groupBox_2)
         self.mui_adminempresas.setEnabled(False)
@@ -132,10 +137,10 @@ class Ui_MainWindow(object):
         self.mui_adminempresas.setFocusPolicy(QtCore.Qt.NoFocus)
         self.mui_adminempresas.setLayoutDirection(QtCore.Qt.LeftToRight)
         icon6 = QtGui.QIcon()
-        icon6.addPixmap(QtGui.QPixmap(&quot;:/images/manage_company.png&quot;), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        icon6.addPixmap(QtGui.QPixmap(_fromUtf8(&quot;:/images/manage_company.png&quot;)), QtGui.QIcon.Normal, QtGui.QIcon.Off)
         self.mui_adminempresas.setIcon(icon6)
         self.mui_adminempresas.setIconSize(QtCore.QSize(32, 32))
-        self.mui_adminempresas.setObjectName(&quot;mui_adminempresas&quot;)
+        self.mui_adminempresas.setObjectName(_fromUtf8(&quot;mui_adminempresas&quot;))
         self.gridLayout.addWidget(self.mui_adminempresas, 1, 0, 1, 1)
         self.eliminar_empresa = QtGui.QPushButton(self.groupBox_2)
         self.eliminar_empresa.setEnabled(False)
@@ -145,10 +150,10 @@ class Ui_MainWindow(object):
         self.eliminar_empresa.setFocusPolicy(QtCore.Qt.NoFocus)
         self.eliminar_empresa.setLayoutDirection(QtCore.Qt.LeftToRight)
         icon7 = QtGui.QIcon()
-        icon7.addPixmap(QtGui.QPixmap(&quot;:/images/trash_company.png&quot;), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        icon7.addPixmap(QtGui.QPixmap(_fromUtf8(&quot;:/images/trash_company.png&quot;)), QtGui.QIcon.Normal, QtGui.QIcon.Off)
         self.eliminar_empresa.setIcon(icon7)
         self.eliminar_empresa.setIconSize(QtCore.QSize(32, 32))
-        self.eliminar_empresa.setObjectName(&quot;eliminar_empresa&quot;)
+        self.eliminar_empresa.setObjectName(_fromUtf8(&quot;eliminar_empresa&quot;))
         self.gridLayout.addWidget(self.eliminar_empresa, 1, 1, 1, 1)
         self.mui_restbackup = QtGui.QPushButton(self.groupBox_2)
         self.mui_restbackup.setEnabled(False)
@@ -158,10 +163,10 @@ class Ui_MainWindow(object):
         self.mui_restbackup.setFocusPolicy(QtCore.Qt.NoFocus)
         self.mui_restbackup.setLayoutDirection(QtCore.Qt.LeftToRight)
         icon8 = QtGui.QIcon()
-        icon8.addPixmap(QtGui.QPixmap(&quot;:/images/restore_database.png&quot;), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        icon8.addPixmap(QtGui.QPixmap(_fromUtf8(&quot;:/images/restore_database.png&quot;)), QtGui.QIcon.Normal, QtGui.QIcon.Off)
         self.mui_restbackup.setIcon(icon8)
         self.mui_restbackup.setIconSize(QtCore.QSize(32, 32))
-        self.mui_restbackup.setObjectName(&quot;mui_restbackup&quot;)
+        self.mui_restbackup.setObjectName(_fromUtf8(&quot;mui_restbackup&quot;))
         self.gridLayout.addWidget(self.mui_restbackup, 2, 1, 1, 1)
         self.mui_creabackup = QtGui.QPushButton(self.groupBox_2)
         self.mui_creabackup.setEnabled(False)
@@ -171,22 +176,22 @@ class Ui_MainWindow(object):
         self.mui_creabackup.setFocusPolicy(QtCore.Qt.NoFocus)
         self.mui_creabackup.setLayoutDirection(QtCore.Qt.LeftToRight)
         icon9 = QtGui.QIcon()
-        icon9.addPixmap(QtGui.QPixmap(&quot;:/images/backup_database.png&quot;), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        icon9.addPixmap(QtGui.QPixmap(_fromUtf8(&quot;:/images/backup_database.png&quot;)), QtGui.QIcon.Normal, QtGui.QIcon.Off)
         self.mui_creabackup.setIcon(icon9)
         self.mui_creabackup.setIconSize(QtCore.QSize(32, 32))
-        self.mui_creabackup.setObjectName(&quot;mui_creabackup&quot;)
+        self.mui_creabackup.setObjectName(_fromUtf8(&quot;mui_creabackup&quot;))
         self.gridLayout.addWidget(self.mui_creabackup, 2, 0, 1, 1)
         self.verticalLayout.addWidget(self.groupBox_2)
         spacerItem = QtGui.QSpacerItem(17, 13, QtGui.QSizePolicy.Minimum, QtGui.QSizePolicy.Expanding)
         self.verticalLayout.addItem(spacerItem)
         self.horizontalLayout = QtGui.QHBoxLayout()
-        self.horizontalLayout.setObjectName(&quot;horizontalLayout&quot;)
+        self.horizontalLayout.setObjectName(_fromUtf8(&quot;horizontalLayout&quot;))
         self.mui_acerca = QtGui.QPushButton(self.centralwidget)
         font = QtGui.QFont()
         font.setPointSize(8)
         self.mui_acerca.setFont(font)
         self.mui_acerca.setIcon(icon)
-        self.mui_acerca.setObjectName(&quot;mui_acerca&quot;)
+        self.mui_acerca.setObjectName(_fromUtf8(&quot;mui_acerca&quot;))
         self.horizontalLayout.addWidget(self.mui_acerca)
         spacerItem1 = QtGui.QSpacerItem(388, 20, QtGui.QSizePolicy.Expanding, QtGui.QSizePolicy.Minimum)
         self.horizontalLayout.addItem(spacerItem1)
@@ -195,16 +200,16 @@ class Ui_MainWindow(object):
         font.setPointSize(8)
         self.mui_salir.setFont(font)
         icon10 = QtGui.QIcon()
-        icon10.addPixmap(QtGui.QPixmap(&quot;:/images/bulmasetup_exit.png&quot;), QtGui.QIcon.Normal, QtGui.QIcon.Off)
+        icon10.addPixmap(QtGui.QPixmap(_fromUtf8(&quot;:/images/bulmasetup_exit.png&quot;)), QtGui.QIcon.Normal, QtGui.QIcon.Off)
         self.mui_salir.setIcon(icon10)
-        self.mui_salir.setObjectName(&quot;mui_salir&quot;)
+        self.mui_salir.setObjectName(_fromUtf8(&quot;mui_salir&quot;))
         self.horizontalLayout.addWidget(self.mui_salir)
         self.verticalLayout.addLayout(self.horizontalLayout)
         self.horizontalLayout_2.addLayout(self.verticalLayout)
         MainWindow.setCentralWidget(self.centralwidget)
 
         self.retranslateUi(MainWindow)
-        QtCore.QObject.connect(self.mui_salir, QtCore.SIGNAL(&quot;released()&quot;), MainWindow.close)
+        QtCore.QObject.connect(self.mui_salir, QtCore.SIGNAL(_fromUtf8(&quot;released()&quot;)), MainWindow.close)
         QtCore.QMetaObject.connectSlotsByName(MainWindow)
 
     def retranslateUi(self, MainWindow):
@@ -212,11 +217,11 @@ class Ui_MainWindow(object):
         self.label_2.setText(QtGui.QApplication.translate(&quot;MainWindow&quot;, &quot;&lt;!DOCTYPE HTML PUBLIC \&quot;-//W3C//DTD HTML 4.0//EN\&quot; \&quot;<A HREF="http://www.w3.org/TR/REC-html40/strict.dtd\">http://www.w3.org/TR/REC-html40/strict.dtd\</A>&quot;&gt;\n&quot;
 &quot;&lt;html&gt;&lt;head&gt;&lt;meta name=\&quot;qrichtext\&quot; content=\&quot;1\&quot; /&gt;&lt;style type=\&quot;text/css\&quot;&gt;\n&quot;
 &quot;p, li { white-space: pre-wrap; }\n&quot;
-&quot;&lt;/style&gt;&lt;/head&gt;&lt;body style=\&quot; font-family:\'Ubuntu\'; font-size:9pt; font-weight:400; font-style:normal;\&quot;&gt;\n&quot;
-&quot;&lt;p style=\&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\&quot;&gt;&lt;span style=\&quot; font-family:\'Sans Serif\'; font-weight:600;\&quot;&gt;BulmaSetup v 0.14&lt;/span&gt;&lt;/p&gt;\n&quot;
-&quot;&lt;p style=\&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:\'Sans Serif\';\&quot;&gt;&lt;/p&gt;\n&quot;
-&quot;&lt;p style=\&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\&quot;&gt;&lt;span style=\&quot; font-family:\'Sans Serif\';\&quot;&gt;Administracion de Bases&lt;/span&gt;&lt;/p&gt;\n&quot;
-&quot;&lt;p style=\&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\&quot;&gt;&lt;span style=\&quot; font-family:\'Sans Serif\';\&quot;&gt;de Datos para BulmaGes&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;, None, QtGui.QApplication.UnicodeUTF8))
+&quot;&lt;/style&gt;&lt;/head&gt;&lt;body style=\&quot; font-family:\'Sans Serif\'; font-size:12pt; font-weight:400; font-style:normal;\&quot;&gt;\n&quot;
+&quot;&lt;p style=\&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\&quot;&gt;&lt;span style=\&quot; font-size:9pt; font-weight:600;\&quot;&gt;BulmaSetup v 1.5&lt;/span&gt;&lt;/p&gt;\n&quot;
+&quot;&lt;p style=\&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:9pt;\&quot;&gt;&lt;br /&gt;&lt;/p&gt;\n&quot;
+&quot;&lt;p style=\&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\&quot;&gt;&lt;span style=\&quot; font-size:9pt;\&quot;&gt;Administracion de Bases&lt;/span&gt;&lt;/p&gt;\n&quot;
+&quot;&lt;p style=\&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\&quot;&gt;&lt;span style=\&quot; font-size:9pt;\&quot;&gt;de Datos para BulmaGes&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;, None, QtGui.QApplication.UnicodeUTF8))
         self.groupBox_3.setTitle(QtGui.QApplication.translate(&quot;MainWindow&quot;, &quot;Gesti√≥n de Usuarios&quot;, None, QtGui.QApplication.UnicodeUTF8))
         self.nuevo_usuario.setText(QtGui.QApplication.translate(&quot;MainWindow&quot;, &quot;Nuevos Usuario de PostgreSQL&quot;, None, QtGui.QApplication.UnicodeUTF8))
         self.editar_usuario.setText(QtGui.QApplication.translate(&quot;MainWindow&quot;, &quot;Editar Usuarios de PostgreSQL&quot;, None, QtGui.QApplication.UnicodeUTF8))
diff --git a/bulmages/bulmasetup/bulmasetupbase.ui b/bulmages/bulmasetup/bulmasetupbase.ui
index 9e57f33..abeedca 100644
--- a/bulmages/bulmasetup/bulmasetupbase.ui
+++ b/bulmages/bulmasetup/bulmasetupbase.ui
@@ -61,11 +61,11 @@
          &lt;string&gt;&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;<A HREF="http://www.w3.org/TR/REC-html40/strict.dtd&amp;quot;&amp;gt;">http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;</A>
 &lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'Ubuntu'; font-size:9pt; font-weight:400; font-style:normal;&quot;&gt;
-&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-family:'Sans Serif'; font-weight:600;&quot;&gt;BulmaSetup v 0.14&lt;/span&gt;&lt;/p&gt;
-&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Sans Serif';&quot;&gt;&lt;/p&gt;
-&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-family:'Sans Serif';&quot;&gt;Administracion de Bases&lt;/span&gt;&lt;/p&gt;
-&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-family:'Sans Serif';&quot;&gt;de Datos para BulmaGes&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&lt;/string&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'Sans Serif'; font-size:12pt; font-weight:400; font-style:normal;&quot;&gt;
+&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:9pt; font-weight:600;&quot;&gt;BulmaSetup v 1.5&lt;/span&gt;&lt;/p&gt;
+&lt;p style=&quot;-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:9pt;&quot;&gt;&lt;br /&gt;&lt;/p&gt;
+&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:9pt;&quot;&gt;Administracion de Bases&lt;/span&gt;&lt;/p&gt;
+&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:9pt;&quot;&gt;de Datos para BulmaGes&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&lt;/string&gt;
         &lt;/property&gt;
         &lt;property name=&quot;alignment&quot;&gt;
          &lt;set&gt;Qt::AlignCenter&lt;/set&gt;
diff --git a/bulmages/bulmasetup/contabilidad.in b/bulmages/bulmasetup/contabilidad.in
index b4fef4b..5198648 100644
--- a/bulmages/bulmasetup/contabilidad.in
+++ b/bulmages/bulmasetup/contabilidad.in
@@ -81,7 +81,7 @@ class Contabilidad(Ui_ModificarContabilidadBase, Empresa):
         self.writecommand(QtGui.QApplication.translate(&quot;Contabilidad&quot;,'ACTUALIZANDO BASE DE DATOS', None, QtGui.QApplication.UnicodeUTF8))
         # Desactivamos el mostrado de errores ya que si el parche no es el adecuado entonces produce errores que no son tales
         self.mostrarErrores = &quot;FALSE&quot;
-        self.revisiones = [&quot;rev-0.5.3.sql&quot;, &quot;rev-0.9.1.sql&quot;, &quot;rev-0.9.3.sql&quot;, &quot;rev-0.10.sql&quot;, &quot;rev-0.11.sql&quot;, &quot;rev-0.12.sql&quot;, &quot;rev-0.13.sql&quot;, &quot;rev-0.14.sql&quot;]
+        self.revisiones = [&quot;rev-0.5.3.sql&quot;, &quot;rev-0.9.1.sql&quot;, &quot;rev-0.9.3.sql&quot;, &quot;rev-0.10.sql&quot;, &quot;rev-0.11.sql&quot;, &quot;rev-0.12.sql&quot;, &quot;rev-0.13.sql&quot;, &quot;rev-0.14.sql&quot;, &quot;rev-0.15.sql&quot;]
         os.chdir(gettempdir())
         #Parcheamos todo lo que hay que parchear
         for self.parche in self.revisiones:
diff --git a/bulmages/bulmasetup/facturacion.in b/bulmages/bulmasetup/facturacion.in
index d70c52d..2a35963 100644
--- a/bulmages/bulmasetup/facturacion.in
+++ b/bulmages/bulmasetup/facturacion.in
@@ -911,7 +911,7 @@ class Facturacion(Ui_ModificarFacturacionBase, Empresa):
             self.process.waitForFinished(-1)
 
 
-        self.revisiones = [&quot;revf-0.5.9.sql&quot;,&quot;revf-0.9.1.sql&quot;, &quot;revf-0.9.3.sql&quot;, &quot;revf-0.10.sql&quot;, &quot;revf-0.11.sql&quot;, &quot;revf-0.12.sql&quot;, &quot;revf-0.13.sql&quot;, &quot;revf-0.14.sql&quot;]
+        self.revisiones = [&quot;revf-0.5.9.sql&quot;,&quot;revf-0.9.1.sql&quot;, &quot;revf-0.9.3.sql&quot;, &quot;revf-0.10.sql&quot;, &quot;revf-0.11.sql&quot;, &quot;revf-0.12.sql&quot;, &quot;revf-0.13.sql&quot;, &quot;revf-0.14.sql&quot;, &quot;revf-0.15.sql&quot;]
         #Parcheamos todo lo que hay que parchear
         for self.parche in self.revisiones:
             self.command = functions.psql + ' -t -f  ' + functions.multios().correctFileName(plugins.pathdbparches + self.parche) + ' ' + self.database + functions.end_sql
diff --git a/bulmages/bulmatpv/src/main.cxx b/bulmages/bulmatpv/src/main.cxx
index 2c90ed4..df74434 100644
--- a/bulmages/bulmatpv/src/main.cxx
+++ b/bulmages/bulmatpv/src/main.cxx
@@ -132,7 +132,7 @@ int main ( int argc, char **argv )
         delete argParser;
 
         /// Verifica la version de la base de datos para funcionar adecuadamente.
-        bges-&gt;company()-&gt;dbVersionCheck(&quot;DBRev-BulmaTPV&quot;, &quot;0.14.1-0002&quot;);
+        bges-&gt;company()-&gt;dbVersionCheck(&quot;DBRev-BulmaTPV&quot;, &quot;0.15.0-0001&quot;);
 
         splashScr-&gt;show();
         splashScr-&gt;setMessage ( _( &quot;Leyendo configuracion&quot; ) );
diff --git a/bulmages/installbulmages/dbmodels/actualizar/rev-0.15.sql b/bulmages/installbulmages/dbmodels/actualizar/rev-0.15.sql
new file mode 100644
index 0000000..5959151
--- /dev/null
+++ b/bulmages/installbulmages/dbmodels/actualizar/rev-0.15.sql
@@ -0,0 +1,123 @@
+--
+-- ACTUALIZACION DE LA BASE DE DATOS DE BULMACONT
+--
+
+
+-- Ocultamos las noticias
+SET client_min_messages TO warning;
+
+
+BEGIN;
+
+--
+-- Estas primeras funciones cambiaran los tipos de columnas que estan como flotantes a NUMERIC.
+-- Se trata de un parche que se desea aplicar para almacenar los tipos monetarios
+-- ya que actualmente se encuantran almacenados como 'doubles' y es preferible
+-- que se almacenen como tipo 'numeric'.
+-- Todas devuelven como valor numerico el nmero de filas influenciadas por el cambio
+-- NOTA: Si alguien sabe como pasar por parametro un nombre de tabla y campo a modificar se
+-- hara mucho mas sencillito porque solo habran que implementar un funcion ya que siempre
+-- hay que hacer lo mismo.
+--
+
+--
+-- Funci√≥n auxiliar para borrar funciones limpiamente
+--
+CREATE OR REPLACE FUNCTION drop_if_exists_table(text) RETURNS INTEGER AS '
+DECLARE
+    tbl_name ALIAS FOR $1;
+BEGIN
+    IF (select count(*) from pg_tables where tablename=$1) THEN
+	EXECUTE ''DROP TABLE '' || $1;
+	RETURN 1;
+    END IF;
+    RETURN 0;
+END;
+'
+language 'plpgsql';
+
+
+CREATE OR REPLACE FUNCTION drop_if_exists_proc(text, text) RETURNS INTEGER AS '
+DECLARE
+    proc_name ALIAS FOR $1;
+    proc_params ALIAS FOR $2;
+BEGIN
+    IF (select count(*) from pg_proc where proname=$1) THEN
+	EXECUTE ''DROP FUNCTION '' || $1 || ''(''||$2||'') CASCADE'';
+	RETURN 1;
+    END IF;
+    RETURN 0;
+END;
+'
+language 'plpgsql';
+
+
+-- ======================== COMPROBACION DE CUAL ES LA ULTIMA VERSION ==================================
+
+
+CREATE OR REPLACE FUNCTION compruebarevision() RETURNS INTEGER AS '
+DECLARE
+	rs RECORD;
+BEGIN
+	SELECT INTO rs * FROM configuracion WHERE nombre=''DatabaseRevision'' AND ( valor LIKE ''0.15.0%'' OR valor = ''0.14.1-0001'');
+	IF FOUND THEN
+		RETURN 0;
+	ELSE
+		RAISE EXCEPTION ''La base de datos no tiene la version adecuada para aplicar este parche'';
+		RETURN -1;		 
+	END IF;
+END;
+'   LANGUAGE plpgsql;
+SELECT compruebarevision();
+DROP FUNCTION compruebarevision() CASCADE;
+\echo &quot;Comprobada la revision&quot;
+
+
+
+
+
+
+-- ================================= A PARTIR DE AQUI EL PARCHE=========================
+-- =====================================================================================
+
+
+CREATE OR REPLACE FUNCTION aux() RETURNS INTEGER AS '
+DECLARE
+    rs RECORD;
+BEGIN
+
+
+
+   RETURN 0;
+END;
+' LANGUAGE plpgsql;
+SELECT aux();
+DROP FUNCTION aux() CASCADE;
+-- ================================== FIN PARCHE. ACTUALIZACION  =======================
+-- =====================================================================================
+
+-- Agregamos nuevos parametros de configuracion
+--
+CREATE OR REPLACE FUNCTION actualizarevision() RETURNS INTEGER AS '
+DECLARE
+	rs RECORD;
+BEGIN
+	SELECT INTO rs * FROM configuracion WHERE nombre = ''DatabaseRevision'';
+	IF FOUND THEN
+		UPDATE CONFIGURACION SET valor = ''0.15.0-0001'' WHERE nombre = ''DatabaseRevision'';
+	ELSE
+		INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''0.15.0-0001'');
+	END IF;
+	RETURN 0;
+END;
+'   LANGUAGE plpgsql;
+SELECT actualizarevision();
+DROP FUNCTION actualizarevision() CASCADE;
+\echo &quot;Actualizada la revision de la base de datos a la version 0.15.0&quot;
+
+DROP FUNCTION drop_if_exists_table(text) CASCADE;
+DROP FUNCTION drop_if_exists_proc(text, text) CASCADE;
+
+
+COMMIT;
+
diff --git a/bulmages/installbulmages/dbmodels/actualizar/revf-0.15.sql b/bulmages/installbulmages/dbmodels/actualizar/revf-0.15.sql
new file mode 100644
index 0000000..69858f0
--- /dev/null
+++ b/bulmages/installbulmages/dbmodels/actualizar/revf-0.15.sql
@@ -0,0 +1,122 @@
+--
+-- ACTUALIZACION DE LA BASE DE DATOS DE BULMAFACT
+--
+
+
+-- Ocultamos las noticias
+SET client_min_messages TO warning;
+
+
+BEGIN;
+
+--
+-- Estas primeras funciones cambiaran los tipos de columnas que estan como flotantes a NUMERIC.
+-- Se trata de un parche que se desea aplicar para almacenar los tipos monetarios
+-- ya que actualmente se encuantran almacenados como 'doubles' y es preferible
+-- que se almacenen como tipo 'numeric'.
+-- Todas devuelven como valor numerico el nmero de filas influenciadas por el cambio
+-- NOTA: Si alguien sabe como pasar por parametro un nombre de tabla y campo a modificarse
+-- hara mucho mas sencillito porque solo habra que implementar un funcion ya que siempre
+-- hay que hacer lo mismo.
+--
+
+--
+-- Funcion auxiliar para borrar funciones limpiamente
+--
+CREATE OR REPLACE FUNCTION drop_if_exists_table (text) RETURNS INTEGER AS '
+DECLARE
+    tbl_name ALIAS FOR $1;
+BEGIN
+    IF (select count(*) from pg_tables where tablename=$1) THEN
+	EXECUTE ''DROP TABLE '' || $1;
+	RETURN 1;
+    END IF;
+    RETURN 0;
+END;
+'
+language 'plpgsql';
+
+
+CREATE OR REPLACE FUNCTION drop_if_exists_proc (text, text) RETURNS INTEGER AS '
+DECLARE
+    proc_name ALIAS FOR $1;
+    proc_params ALIAS FOR $2;
+BEGIN
+    IF (select count(*) from pg_proc where proname=$1) THEN
+	EXECUTE ''DROP FUNCTION '' || $1 || ''(''||$2||'') CASCADE'';
+	RETURN 1;
+    END IF;
+    RETURN 0;
+END;
+'
+language 'plpgsql';
+
+-- SELECT drop_if_exists_proc ('calculacodigocompletoarticulo','');
+
+-- ======================== COMPROBACION DE CUAL ES LA ULTIMA VERSION ==================================
+
+CREATE OR REPLACE FUNCTION compruebarevision() RETURNS INTEGER AS '
+DECLARE
+	rs RECORD;
+BEGIN
+	SELECT INTO rs * FROM configuracion WHERE nombre=''DatabaseRevision'' AND ( valor LIKE ''0.15.0%'' OR valor = ''0.14.1-0003'');
+	IF FOUND THEN
+		RETURN 0;
+	ELSE
+		RAISE EXCEPTION '' Version de la base de datos invalida, aplique parches anteriores'';
+		RETURN -1;
+	END IF;
+END;
+'   LANGUAGE plpgsql;
+SELECT compruebarevision();
+DROP FUNCTION compruebarevision() CASCADE;
+\echo &quot;Comprobada la revision&quot;
+
+-- ========================  FIN DE LA COMPROBACION ============================
+
+
+-- ================================== ACTUALIZACION  ===================================
+
+
+CREATE OR REPLACE FUNCTION aux() RETURNS INTEGER AS '
+DECLARE
+    rs RECORD;
+BEGIN
+
+
+
+   RETURN 0;
+END;
+' LANGUAGE plpgsql;
+SELECT aux();
+DROP FUNCTION aux() CASCADE;
+
+
+
+-- =====================================================================================
+
+-- Agregamos nuevos parametros de configuracion
+--
+CREATE OR REPLACE FUNCTION actualizarevision() RETURNS INTEGER AS '
+DECLARE
+	rs RECORD;
+BEGIN
+	SELECT INTO rs * FROM configuracion WHERE nombre = ''DatabaseRevision'';
+	IF FOUND THEN
+		UPDATE CONFIGURACION SET valor = ''0.15.0-0001'' WHERE nombre = ''DatabaseRevision'';
+	ELSE
+		INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''0.15.0-0001'');
+	END IF;
+	RETURN 0;
+END;
+'   LANGUAGE plpgsql;
+SELECT actualizarevision();
+DROP FUNCTION actualizarevision() CASCADE;
+\echo &quot;Actualizada la revision de la base de datos a la version 0.15.0&quot;
+
+DROP FUNCTION drop_if_exists_table(text) CASCADE;
+DROP FUNCTION drop_if_exists_proc(text, text) CASCADE;
+
+
+COMMIT;
+
diff --git a/bulmages/installbulmages/dbmodels/crear/bulmacont/bulmacont_schema.sql b/bulmages/installbulmages/dbmodels/crear/bulmacont/bulmacont_schema.sql
index d14c7f7..1244ab4 100644
--- a/bulmages/installbulmages/dbmodels/crear/bulmacont/bulmacont_schema.sql
+++ b/bulmages/installbulmages/dbmodels/crear/bulmacont/bulmacont_schema.sql
@@ -2018,16 +2018,16 @@ DECLARE
 BEGIN
 	SELECT INTO rs * FROM configuracion WHERE nombre = ''DatabaseRevision'';
 	IF FOUND THEN
-		UPDATE CONFIGURACION SET valor = ''0.14.1-0001'' WHERE nombre = ''DatabaseRevision'';
+		UPDATE CONFIGURACION SET valor = ''0.15.0-0001'' WHERE nombre = ''DatabaseRevision'';
 	ELSE
-		INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''0.14.1-0001'');
+		INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''0.15.0-0001'');
 	END IF;
 	RETURN 0;
 END;
 '   LANGUAGE plpgsql;
 SELECT actualizarevision();
 DROP FUNCTION actualizarevision() CASCADE;
-\echo &quot;Actualizada la revision de la base de datos a la version 0.14.1&quot;
+\echo &quot;Actualizada la revision de la base de datos a la version 0.15.0&quot;
 
 \echo -n ':: '
 COMMENT ON SCHEMA public IS 'Standard public schema';
diff --git a/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql b/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql
index 9bea235..39e951b 100644
--- a/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql
+++ b/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql
@@ -3301,9 +3301,9 @@ BEGIN
     SELECT INTO rs * FROM configuracion WHERE nombre = ''DatabaseRevision'';
 
     IF FOUND THEN
-	UPDATE CONFIGURACION SET valor = ''0.14.1-0002'' WHERE nombre = ''DatabaseRevision'';
+	UPDATE CONFIGURACION SET valor = ''0.15.0-0001'' WHERE nombre = ''DatabaseRevision'';
     ELSE
-	INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''0.14.1-0002'');
+	INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''0.15.0-0001'');
     END IF;
 
     RETURN 0;
@@ -3311,4 +3311,4 @@ END;
 '   LANGUAGE plpgsql;
 SELECT actualizarevision();
 DROP FUNCTION actualizarevision() CASCADE;
-\echo &quot;Actualizada la revision de la base de datos a la version 0.14.1&quot;
+\echo &quot;Actualizada la revision de la base de datos a la version 0.15.0&quot;
diff --git a/bulmages/installbulmages/dbmodels/crear/bulmatpv/bulmatpv_schema.sql b/bulmages/installbulmages/dbmodels/crear/bulmatpv/bulmatpv_schema.sql
index d9d1079..d89ca24 100644
--- a/bulmages/installbulmages/dbmodels/crear/bulmatpv/bulmatpv_schema.sql
+++ b/bulmages/installbulmages/dbmodels/crear/bulmatpv/bulmatpv_schema.sql
@@ -111,16 +111,16 @@ DECLARE
 BEGIN
 	SELECT INTO rs * FROM configuracion WHERE nombre=''DBRev-BulmaTPV'';
 	IF FOUND THEN
-		UPDATE CONFIGURACION SET valor=''0.14.1-0002'' WHERE nombre=''DBRev-BulmaTPV'';
+		UPDATE CONFIGURACION SET valor=''0.15.0-0001'' WHERE nombre=''DBRev-BulmaTPV'';
 	ELSE
-		INSERT INTO configuracion (nombre, valor) VALUES (''DBRev-BulmaTPV'', ''0.14.1-0002'');
+		INSERT INTO configuracion (nombre, valor) VALUES (''DBRev-BulmaTPV'', ''0.15.0-0001'');
 	END IF;
 	RETURN 0;
 END;
 '   LANGUAGE plpgsql;
 SELECT actualizarevision();
 DROP FUNCTION actualizarevision() CASCADE;
-\echo &quot;Actualizada la revision de la base de datos a la version 0.13.1&quot;
+\echo &quot;Actualizada la revision de la base de datos a la version 0.15.0&quot;
 
 
 DROP FUNCTION drop_if_exists_table(text) CASCADE;

commit d112bf624417cd09328fe029fa9e7aea23654ec3
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Wed Apr 10 16:44:46 2013 +0200

    Agrego un ejemplo de plantilla en formato odt para los contratos en el plugin de alquileres.
    Agrego el pluginbf_clientefacturaivainc que proporciona gestion de facturas a partir de los precios con iva incluido y
    evita los descuadres que se puedan producir. Tambi√©n proporciona una plantilla rml para esta factura.

diff --git a/bulmages/bulmafact/plugins/CMakeLists.txt b/bulmages/bulmafact/plugins/CMakeLists.txt
index d3a8868..5690f70 100644
--- a/bulmages/bulmafact/plugins/CMakeLists.txt
+++ b/bulmages/bulmafact/plugins/CMakeLists.txt
@@ -74,6 +74,7 @@ add_subdirectory(pluginbf_clientepedido)
 add_subdirectory(pluginbf_clientealbaran)
 add_subdirectory(pluginbf_clientefactura)
 add_subdirectory(pluginbf_clienteticket)
+add_subdirectory(pluginbf_clientefacturaivainc)
 
 add_subdirectory(pluginbf_proveedorfactura)
 add_subdirectory(pluginbf_proveedoralbaran)
diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/README.ca b/bulmages/bulmafact/plugins/pluginbf_alquileres/README.ca
index 4f0830c..88f4d60 100644
--- a/bulmages/bulmafact/plugins/pluginbf_alquileres/README.ca
+++ b/bulmages/bulmafact/plugins/pluginbf_alquileres/README.ca
@@ -6,7 +6,7 @@
 
 Nombre: Alquileres (AutoForms)
 
-Biblioteca: 
+Biblioteca: libpluginbf_alquileres
 
 Descripci√≥n: &lt;H1&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/pluginbf_alquileres/vivienda.png&quot; WIDTH=&quot;48&quot;/&gt;&lt;BR&gt;Gestion de alquileres&lt;/H1&gt;
 &lt;PARA&gt;Este plugin realiza la gestion de una sencilla de arrendamientos. &lt;/PARA&gt;
@@ -26,9 +26,9 @@ Dependencias: libpluginbl_autoform.so; libpluginbl_template.so; libpluginbl_temp
 
 Incompatibles:
 
-Orden: 29
+Orden: 900
 
-Reports: impers_contrato_alquiler.rml
+Reports: impers_contrato_alquiler.rml;impers_contrato_odt.pys;contrato_plantilla1.odt
 
 Categorias: AutoForms;Alquileres;Experimentales;
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/README.en b/bulmages/bulmafact/plugins/pluginbf_alquileres/README.en
index 4f0830c..88f4d60 100644
--- a/bulmages/bulmafact/plugins/pluginbf_alquileres/README.en
+++ b/bulmages/bulmafact/plugins/pluginbf_alquileres/README.en
@@ -6,7 +6,7 @@
 
 Nombre: Alquileres (AutoForms)
 
-Biblioteca: 
+Biblioteca: libpluginbf_alquileres
 
 Descripci√≥n: &lt;H1&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/pluginbf_alquileres/vivienda.png&quot; WIDTH=&quot;48&quot;/&gt;&lt;BR&gt;Gestion de alquileres&lt;/H1&gt;
 &lt;PARA&gt;Este plugin realiza la gestion de una sencilla de arrendamientos. &lt;/PARA&gt;
@@ -26,9 +26,9 @@ Dependencias: libpluginbl_autoform.so; libpluginbl_template.so; libpluginbl_temp
 
 Incompatibles:
 
-Orden: 29
+Orden: 900
 
-Reports: impers_contrato_alquiler.rml
+Reports: impers_contrato_alquiler.rml;impers_contrato_odt.pys;contrato_plantilla1.odt
 
 Categorias: AutoForms;Alquileres;Experimentales;
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/README.es b/bulmages/bulmafact/plugins/pluginbf_alquileres/README.es
index 01f5889..88f4d60 100644
--- a/bulmages/bulmafact/plugins/pluginbf_alquileres/README.es
+++ b/bulmages/bulmafact/plugins/pluginbf_alquileres/README.es
@@ -28,7 +28,7 @@ Incompatibles:
 
 Orden: 900
 
-Reports: impers_contrato_alquiler.rml
+Reports: impers_contrato_alquiler.rml;impers_contrato_odt.pys;contrato_plantilla1.odt
 
 Categorias: AutoForms;Alquileres;Experimentales;
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/README.fr b/bulmages/bulmafact/plugins/pluginbf_alquileres/README.fr
index 4f0830c..88f4d60 100644
--- a/bulmages/bulmafact/plugins/pluginbf_alquileres/README.fr
+++ b/bulmages/bulmafact/plugins/pluginbf_alquileres/README.fr
@@ -6,7 +6,7 @@
 
 Nombre: Alquileres (AutoForms)
 
-Biblioteca: 
+Biblioteca: libpluginbf_alquileres
 
 Descripci√≥n: &lt;H1&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/pluginbf_alquileres/vivienda.png&quot; WIDTH=&quot;48&quot;/&gt;&lt;BR&gt;Gestion de alquileres&lt;/H1&gt;
 &lt;PARA&gt;Este plugin realiza la gestion de una sencilla de arrendamientos. &lt;/PARA&gt;
@@ -26,9 +26,9 @@ Dependencias: libpluginbl_autoform.so; libpluginbl_template.so; libpluginbl_temp
 
 Incompatibles:
 
-Orden: 29
+Orden: 900
 
-Reports: impers_contrato_alquiler.rml
+Reports: impers_contrato_alquiler.rml;impers_contrato_odt.pys;contrato_plantilla1.odt
 
 Categorias: AutoForms;Alquileres;Experimentales;
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/ca/contrato_plantilla1.odt b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/ca/contrato_plantilla1.odt
new file mode 100644
index 0000000..1416913
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/ca/contrato_plantilla1.odt differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/ca/impers_contrato_odt.pys b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/ca/impers_contrato_odt.pys
new file mode 100644
index 0000000..b265e18
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/ca/impers_contrato_odt.pys
@@ -0,0 +1,155 @@
+#!/usr/bin/python
+# -*- coding: utf8 -*-
+          
+# title=&quot;Contrato en Procesador de Textos&quot;
+
+import sys
+reload(sys)
+sys.setdefaultencoding('utf-8')
+
+import ezodf
+from ezodf.xmlns import CN
+
+#odt = newdoc(doctype='odt', filename='contrato_plantilla.odt')
+odt = ezodf.opendoc(&quot;[CONF_DIR_OPENREPORTS]contrato_plantilla1.odt&quot;)
+#odt.body += ezodf.Heading(&quot;Chapter 1&quot;)
+#odt.body += ezodf.Paragraph(&quot;This is a paragraph.&quot;)
+
+params = {}
+
+#paragraphs = odt.body.filter(kind='Paragraph')
+paragraphs = odt.body
+#paragraphs = odt.body.findall(CN('text:p'))
+
+
+# Toma de parametros
+# ==================
+
+params[&quot;representanteempcontrato&quot;] = u'[representanteempcontrato]'
+params[&quot;dirrepresentanteempcontrato&quot;] = u'[dirrepresentanteempcontrato]'
+params[&quot;cifrepresentanteempcontrato&quot;] = u'[cifrepresentanteempcontrato]'
+params[&quot;representantecontrato&quot;] = u'[representantecontrato]'
+params[&quot;cifrepresentantecontrato&quot;] = u'[cifrepresentantecontrato]'
+params[&quot;dirrepresentantecontrato&quot;] = u'[dirrepresentantecontrato]'
+params[&quot;textocantidadcontrato&quot;] = u'[textocantidadcontrato]'
+params[&quot;fianzacontrato&quot;] = u'[fianzacontrato]'
+
+
+#&lt;!--QUERY = &quot;SELECT * FROM configuracion WHERE nombre='NombreEmpresa'&quot;--&gt;
+params['nomempresa'] = u'[valor]'
+#&lt;!-- END QUERY--&gt;
+
+params[&quot;curdate&quot;] = ''
+&lt;!--QUERY=&quot;SELECT EXTRACT('day' FROM '[fincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;curdate&quot;] += '[dinicio] de '
+&lt;!--END QUERY--&gt;
+&lt;!-- QUERY=&quot;SELECT a, 
+CASE WHEN a=1 THEN 'Enero'
+     WHEN a=2 THEN 'Febrero'
+     WHEN a=3 THEN 'Marzo'
+     WHEN a=4 THEN 'Abril'
+     WHEN a=5 THEN 'Mayo'
+     WHEN a=6 THEN 'Junio'
+     WHEN a=7 THEN 'Julio'
+     WHEN a=8 THEN 'Agosto'
+     WHEN a=9 THEN 'Setiembre'
+     WHEN a=10 THEN 'Octubre'
+     WHEN a=11 THEN 'Noviembre'   
+     ELSE 'Diciembre'
+       END AS b FROM (SELECT EXTRACT('mon' from '[fincontrato]'::DATE) AS a) AS t1&quot; --&gt;
+params[&quot;curdate&quot;] += '[b] de '
+&lt;!-- END QUERY--&gt;
+&lt;!--QUERY=&quot;SELECT EXTRACT('year' FROM '[fincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;curdate&quot;] += '[dinicio]'
+&lt;!--END QUERY--&gt;
+
+params[&quot;enddate&quot;] = ''
+&lt;!--QUERY=&quot;SELECT EXTRACT('day' FROM '[ffincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;enddate&quot;] += '[dinicio] de '
+&lt;!--END QUERY--&gt;
+&lt;!-- QUERY=&quot;SELECT a, 
+CASE WHEN a=1 THEN 'Enero'
+     WHEN a=2 THEN 'Febrero'
+     WHEN a=3 THEN 'Marzo'
+     WHEN a=4 THEN 'Abril'
+     WHEN a=5 THEN 'Mayo'
+     WHEN a=6 THEN 'Junio'
+     WHEN a=7 THEN 'Julio'
+     WHEN a=8 THEN 'Agosto'
+     WHEN a=9 THEN 'Setiembre'
+     WHEN a=10 THEN 'Octubre'
+     WHEN a=11 THEN 'Noviembre'   
+     ELSE 'Diciembre'
+       END AS b FROM (SELECT EXTRACT('mon' from '[ffincontrato]'::DATE) AS a) AS t1&quot; --&gt;
+params[&quot;enddate&quot;] += '[b] de '
+&lt;!-- END QUERY--&gt;
+&lt;!--QUERY=&quot;SELECT EXTRACT('year' FROM '[ffincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;enddate&quot;] += '[dinicio]'
+&lt;!--END QUERY--&gt;
+
+&lt;!--QUERY = &quot;SELECT * FROM vivienda WHERE idvivienda=[idvivienda]&quot;--&gt;
+params[&quot;dirvivienda&quot;] = u'[dirvivienda]'
+params[&quot;metrosvivienda&quot;] = '[metrosvivienda]'
+&lt;!-- END QUERY--&gt;
+
+
+
+&lt;!--QUERY = &quot;SELECT * FROM configuracion WHERE nombre='CIF'&quot;--&gt;
+params[&quot;cifempresa&quot;] = u'[valor]'
+&lt;!-- END QUERY--&gt;
+
+&lt;!--QUERY = &quot;SELECT * FROM configuracion WHERE nombre='DireccionCompleta'&quot;--&gt;
+params[&quot;dircompleta&quot;] = u'[valor]'
+&lt;!-- END QUERY--&gt;
+
+&lt;!-- QUERY=&quot;SELECT * FROM cliente WHERE idcliente=[idcliente]&quot;--&gt;
+params[&quot;nomcliente&quot;] = u'[nomcliente]'
+params[&quot;cifcliente&quot;] = u'[cifcliente]'
+params[&quot;dircliente&quot;] = u'[dircliente]'
+&lt;!-- END QUERY --&gt;
+
+'''
+ 
+
+
+
+
+'''
+
+
+for obj in paragraphs: 
+
+  for index, object in params.iteritems():
+    if (obj.xmlnode.text):
+      obj.xmlnode.text = obj.xmlnode.text.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+    if (obj.xmlnode.tail):
+      obj.xmlnode.tail = obj.xmlnode.tail.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+    for nodo in obj.xmlnode.iterdescendants():
+      if (nodo.text):
+        nodo.text = nodo.text.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+      if (nodo.tail):
+        nodo.tail = nodo.tail.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+			  
+#    string1 = pp.xmlnode.text
+#    if (string1 &lt;&gt; None):
+#      pp.xmlnode.text = string1.replace(&quot;a&quot;,&quot;b&quot;)
+  
+#  print obj.plaintext()
+#  print str(obj.kind())
+#  if obj.plaintext() &lt;&gt; None:
+#      obj.text(obj.text())
+
+
+  #obj.text(&quot;hola&quot;)
+
+# Asi podemos reemplazar un paragrafo por otro.
+#  np = ezodf.Paragraph(&quot; 23&quot; + obj.plaintext())
+#  odt.body.replace(obj, np)
+
+
+#  obj.append_text(&quot;MEMUERO&quot;)
+
+  
+#odt.body.insert(3, ezodf.Paragraph('New first paragraph.'))
+  
+odt.saveas(&quot;impers_contrato_odt.odt&quot;)
diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/en/contrato_plantilla1.odt b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/en/contrato_plantilla1.odt
new file mode 100644
index 0000000..1416913
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/en/contrato_plantilla1.odt differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/en/impers_contrato_odt.pys b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/en/impers_contrato_odt.pys
new file mode 100644
index 0000000..b265e18
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/en/impers_contrato_odt.pys
@@ -0,0 +1,155 @@
+#!/usr/bin/python
+# -*- coding: utf8 -*-
+          
+# title=&quot;Contrato en Procesador de Textos&quot;
+
+import sys
+reload(sys)
+sys.setdefaultencoding('utf-8')
+
+import ezodf
+from ezodf.xmlns import CN
+
+#odt = newdoc(doctype='odt', filename='contrato_plantilla.odt')
+odt = ezodf.opendoc(&quot;[CONF_DIR_OPENREPORTS]contrato_plantilla1.odt&quot;)
+#odt.body += ezodf.Heading(&quot;Chapter 1&quot;)
+#odt.body += ezodf.Paragraph(&quot;This is a paragraph.&quot;)
+
+params = {}
+
+#paragraphs = odt.body.filter(kind='Paragraph')
+paragraphs = odt.body
+#paragraphs = odt.body.findall(CN('text:p'))
+
+
+# Toma de parametros
+# ==================
+
+params[&quot;representanteempcontrato&quot;] = u'[representanteempcontrato]'
+params[&quot;dirrepresentanteempcontrato&quot;] = u'[dirrepresentanteempcontrato]'
+params[&quot;cifrepresentanteempcontrato&quot;] = u'[cifrepresentanteempcontrato]'
+params[&quot;representantecontrato&quot;] = u'[representantecontrato]'
+params[&quot;cifrepresentantecontrato&quot;] = u'[cifrepresentantecontrato]'
+params[&quot;dirrepresentantecontrato&quot;] = u'[dirrepresentantecontrato]'
+params[&quot;textocantidadcontrato&quot;] = u'[textocantidadcontrato]'
+params[&quot;fianzacontrato&quot;] = u'[fianzacontrato]'
+
+
+#&lt;!--QUERY = &quot;SELECT * FROM configuracion WHERE nombre='NombreEmpresa'&quot;--&gt;
+params['nomempresa'] = u'[valor]'
+#&lt;!-- END QUERY--&gt;
+
+params[&quot;curdate&quot;] = ''
+&lt;!--QUERY=&quot;SELECT EXTRACT('day' FROM '[fincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;curdate&quot;] += '[dinicio] de '
+&lt;!--END QUERY--&gt;
+&lt;!-- QUERY=&quot;SELECT a, 
+CASE WHEN a=1 THEN 'Enero'
+     WHEN a=2 THEN 'Febrero'
+     WHEN a=3 THEN 'Marzo'
+     WHEN a=4 THEN 'Abril'
+     WHEN a=5 THEN 'Mayo'
+     WHEN a=6 THEN 'Junio'
+     WHEN a=7 THEN 'Julio'
+     WHEN a=8 THEN 'Agosto'
+     WHEN a=9 THEN 'Setiembre'
+     WHEN a=10 THEN 'Octubre'
+     WHEN a=11 THEN 'Noviembre'   
+     ELSE 'Diciembre'
+       END AS b FROM (SELECT EXTRACT('mon' from '[fincontrato]'::DATE) AS a) AS t1&quot; --&gt;
+params[&quot;curdate&quot;] += '[b] de '
+&lt;!-- END QUERY--&gt;
+&lt;!--QUERY=&quot;SELECT EXTRACT('year' FROM '[fincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;curdate&quot;] += '[dinicio]'
+&lt;!--END QUERY--&gt;
+
+params[&quot;enddate&quot;] = ''
+&lt;!--QUERY=&quot;SELECT EXTRACT('day' FROM '[ffincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;enddate&quot;] += '[dinicio] de '
+&lt;!--END QUERY--&gt;
+&lt;!-- QUERY=&quot;SELECT a, 
+CASE WHEN a=1 THEN 'Enero'
+     WHEN a=2 THEN 'Febrero'
+     WHEN a=3 THEN 'Marzo'
+     WHEN a=4 THEN 'Abril'
+     WHEN a=5 THEN 'Mayo'
+     WHEN a=6 THEN 'Junio'
+     WHEN a=7 THEN 'Julio'
+     WHEN a=8 THEN 'Agosto'
+     WHEN a=9 THEN 'Setiembre'
+     WHEN a=10 THEN 'Octubre'
+     WHEN a=11 THEN 'Noviembre'   
+     ELSE 'Diciembre'
+       END AS b FROM (SELECT EXTRACT('mon' from '[ffincontrato]'::DATE) AS a) AS t1&quot; --&gt;
+params[&quot;enddate&quot;] += '[b] de '
+&lt;!-- END QUERY--&gt;
+&lt;!--QUERY=&quot;SELECT EXTRACT('year' FROM '[ffincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;enddate&quot;] += '[dinicio]'
+&lt;!--END QUERY--&gt;
+
+&lt;!--QUERY = &quot;SELECT * FROM vivienda WHERE idvivienda=[idvivienda]&quot;--&gt;
+params[&quot;dirvivienda&quot;] = u'[dirvivienda]'
+params[&quot;metrosvivienda&quot;] = '[metrosvivienda]'
+&lt;!-- END QUERY--&gt;
+
+
+
+&lt;!--QUERY = &quot;SELECT * FROM configuracion WHERE nombre='CIF'&quot;--&gt;
+params[&quot;cifempresa&quot;] = u'[valor]'
+&lt;!-- END QUERY--&gt;
+
+&lt;!--QUERY = &quot;SELECT * FROM configuracion WHERE nombre='DireccionCompleta'&quot;--&gt;
+params[&quot;dircompleta&quot;] = u'[valor]'
+&lt;!-- END QUERY--&gt;
+
+&lt;!-- QUERY=&quot;SELECT * FROM cliente WHERE idcliente=[idcliente]&quot;--&gt;
+params[&quot;nomcliente&quot;] = u'[nomcliente]'
+params[&quot;cifcliente&quot;] = u'[cifcliente]'
+params[&quot;dircliente&quot;] = u'[dircliente]'
+&lt;!-- END QUERY --&gt;
+
+'''
+ 
+
+
+
+
+'''
+
+
+for obj in paragraphs: 
+
+  for index, object in params.iteritems():
+    if (obj.xmlnode.text):
+      obj.xmlnode.text = obj.xmlnode.text.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+    if (obj.xmlnode.tail):
+      obj.xmlnode.tail = obj.xmlnode.tail.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+    for nodo in obj.xmlnode.iterdescendants():
+      if (nodo.text):
+        nodo.text = nodo.text.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+      if (nodo.tail):
+        nodo.tail = nodo.tail.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+			  
+#    string1 = pp.xmlnode.text
+#    if (string1 &lt;&gt; None):
+#      pp.xmlnode.text = string1.replace(&quot;a&quot;,&quot;b&quot;)
+  
+#  print obj.plaintext()
+#  print str(obj.kind())
+#  if obj.plaintext() &lt;&gt; None:
+#      obj.text(obj.text())
+
+
+  #obj.text(&quot;hola&quot;)
+
+# Asi podemos reemplazar un paragrafo por otro.
+#  np = ezodf.Paragraph(&quot; 23&quot; + obj.plaintext())
+#  odt.body.replace(obj, np)
+
+
+#  obj.append_text(&quot;MEMUERO&quot;)
+
+  
+#odt.body.insert(3, ezodf.Paragraph('New first paragraph.'))
+  
+odt.saveas(&quot;impers_contrato_odt.odt&quot;)
diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/contrato_plantilla1.odt b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/contrato_plantilla1.odt
new file mode 100644
index 0000000..1416913
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/contrato_plantilla1.odt differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/impers_contrato_odt.pys b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/impers_contrato_odt.pys
new file mode 100644
index 0000000..b265e18
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/es/impers_contrato_odt.pys
@@ -0,0 +1,155 @@
+#!/usr/bin/python
+# -*- coding: utf8 -*-
+          
+# title=&quot;Contrato en Procesador de Textos&quot;
+
+import sys
+reload(sys)
+sys.setdefaultencoding('utf-8')
+
+import ezodf
+from ezodf.xmlns import CN
+
+#odt = newdoc(doctype='odt', filename='contrato_plantilla.odt')
+odt = ezodf.opendoc(&quot;[CONF_DIR_OPENREPORTS]contrato_plantilla1.odt&quot;)
+#odt.body += ezodf.Heading(&quot;Chapter 1&quot;)
+#odt.body += ezodf.Paragraph(&quot;This is a paragraph.&quot;)
+
+params = {}
+
+#paragraphs = odt.body.filter(kind='Paragraph')
+paragraphs = odt.body
+#paragraphs = odt.body.findall(CN('text:p'))
+
+
+# Toma de parametros
+# ==================
+
+params[&quot;representanteempcontrato&quot;] = u'[representanteempcontrato]'
+params[&quot;dirrepresentanteempcontrato&quot;] = u'[dirrepresentanteempcontrato]'
+params[&quot;cifrepresentanteempcontrato&quot;] = u'[cifrepresentanteempcontrato]'
+params[&quot;representantecontrato&quot;] = u'[representantecontrato]'
+params[&quot;cifrepresentantecontrato&quot;] = u'[cifrepresentantecontrato]'
+params[&quot;dirrepresentantecontrato&quot;] = u'[dirrepresentantecontrato]'
+params[&quot;textocantidadcontrato&quot;] = u'[textocantidadcontrato]'
+params[&quot;fianzacontrato&quot;] = u'[fianzacontrato]'
+
+
+#&lt;!--QUERY = &quot;SELECT * FROM configuracion WHERE nombre='NombreEmpresa'&quot;--&gt;
+params['nomempresa'] = u'[valor]'
+#&lt;!-- END QUERY--&gt;
+
+params[&quot;curdate&quot;] = ''
+&lt;!--QUERY=&quot;SELECT EXTRACT('day' FROM '[fincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;curdate&quot;] += '[dinicio] de '
+&lt;!--END QUERY--&gt;
+&lt;!-- QUERY=&quot;SELECT a, 
+CASE WHEN a=1 THEN 'Enero'
+     WHEN a=2 THEN 'Febrero'
+     WHEN a=3 THEN 'Marzo'
+     WHEN a=4 THEN 'Abril'
+     WHEN a=5 THEN 'Mayo'
+     WHEN a=6 THEN 'Junio'
+     WHEN a=7 THEN 'Julio'
+     WHEN a=8 THEN 'Agosto'
+     WHEN a=9 THEN 'Setiembre'
+     WHEN a=10 THEN 'Octubre'
+     WHEN a=11 THEN 'Noviembre'   
+     ELSE 'Diciembre'
+       END AS b FROM (SELECT EXTRACT('mon' from '[fincontrato]'::DATE) AS a) AS t1&quot; --&gt;
+params[&quot;curdate&quot;] += '[b] de '
+&lt;!-- END QUERY--&gt;
+&lt;!--QUERY=&quot;SELECT EXTRACT('year' FROM '[fincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;curdate&quot;] += '[dinicio]'
+&lt;!--END QUERY--&gt;
+
+params[&quot;enddate&quot;] = ''
+&lt;!--QUERY=&quot;SELECT EXTRACT('day' FROM '[ffincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;enddate&quot;] += '[dinicio] de '
+&lt;!--END QUERY--&gt;
+&lt;!-- QUERY=&quot;SELECT a, 
+CASE WHEN a=1 THEN 'Enero'
+     WHEN a=2 THEN 'Febrero'
+     WHEN a=3 THEN 'Marzo'
+     WHEN a=4 THEN 'Abril'
+     WHEN a=5 THEN 'Mayo'
+     WHEN a=6 THEN 'Junio'
+     WHEN a=7 THEN 'Julio'
+     WHEN a=8 THEN 'Agosto'
+     WHEN a=9 THEN 'Setiembre'
+     WHEN a=10 THEN 'Octubre'
+     WHEN a=11 THEN 'Noviembre'   
+     ELSE 'Diciembre'
+       END AS b FROM (SELECT EXTRACT('mon' from '[ffincontrato]'::DATE) AS a) AS t1&quot; --&gt;
+params[&quot;enddate&quot;] += '[b] de '
+&lt;!-- END QUERY--&gt;
+&lt;!--QUERY=&quot;SELECT EXTRACT('year' FROM '[ffincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;enddate&quot;] += '[dinicio]'
+&lt;!--END QUERY--&gt;
+
+&lt;!--QUERY = &quot;SELECT * FROM vivienda WHERE idvivienda=[idvivienda]&quot;--&gt;
+params[&quot;dirvivienda&quot;] = u'[dirvivienda]'
+params[&quot;metrosvivienda&quot;] = '[metrosvivienda]'
+&lt;!-- END QUERY--&gt;
+
+
+
+&lt;!--QUERY = &quot;SELECT * FROM configuracion WHERE nombre='CIF'&quot;--&gt;
+params[&quot;cifempresa&quot;] = u'[valor]'
+&lt;!-- END QUERY--&gt;
+
+&lt;!--QUERY = &quot;SELECT * FROM configuracion WHERE nombre='DireccionCompleta'&quot;--&gt;
+params[&quot;dircompleta&quot;] = u'[valor]'
+&lt;!-- END QUERY--&gt;
+
+&lt;!-- QUERY=&quot;SELECT * FROM cliente WHERE idcliente=[idcliente]&quot;--&gt;
+params[&quot;nomcliente&quot;] = u'[nomcliente]'
+params[&quot;cifcliente&quot;] = u'[cifcliente]'
+params[&quot;dircliente&quot;] = u'[dircliente]'
+&lt;!-- END QUERY --&gt;
+
+'''
+ 
+
+
+
+
+'''
+
+
+for obj in paragraphs: 
+
+  for index, object in params.iteritems():
+    if (obj.xmlnode.text):
+      obj.xmlnode.text = obj.xmlnode.text.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+    if (obj.xmlnode.tail):
+      obj.xmlnode.tail = obj.xmlnode.tail.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+    for nodo in obj.xmlnode.iterdescendants():
+      if (nodo.text):
+        nodo.text = nodo.text.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+      if (nodo.tail):
+        nodo.tail = nodo.tail.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+			  
+#    string1 = pp.xmlnode.text
+#    if (string1 &lt;&gt; None):
+#      pp.xmlnode.text = string1.replace(&quot;a&quot;,&quot;b&quot;)
+  
+#  print obj.plaintext()
+#  print str(obj.kind())
+#  if obj.plaintext() &lt;&gt; None:
+#      obj.text(obj.text())
+
+
+  #obj.text(&quot;hola&quot;)
+
+# Asi podemos reemplazar un paragrafo por otro.
+#  np = ezodf.Paragraph(&quot; 23&quot; + obj.plaintext())
+#  odt.body.replace(obj, np)
+
+
+#  obj.append_text(&quot;MEMUERO&quot;)
+
+  
+#odt.body.insert(3, ezodf.Paragraph('New first paragraph.'))
+  
+odt.saveas(&quot;impers_contrato_odt.odt&quot;)
diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/fr/contrato_plantilla1.odt b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/fr/contrato_plantilla1.odt
new file mode 100644
index 0000000..1416913
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/fr/contrato_plantilla1.odt differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/fr/impers_contrato_odt.pys b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/fr/impers_contrato_odt.pys
new file mode 100644
index 0000000..b265e18
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_alquileres/openreports/fr/impers_contrato_odt.pys
@@ -0,0 +1,155 @@
+#!/usr/bin/python
+# -*- coding: utf8 -*-
+          
+# title=&quot;Contrato en Procesador de Textos&quot;
+
+import sys
+reload(sys)
+sys.setdefaultencoding('utf-8')
+
+import ezodf
+from ezodf.xmlns import CN
+
+#odt = newdoc(doctype='odt', filename='contrato_plantilla.odt')
+odt = ezodf.opendoc(&quot;[CONF_DIR_OPENREPORTS]contrato_plantilla1.odt&quot;)
+#odt.body += ezodf.Heading(&quot;Chapter 1&quot;)
+#odt.body += ezodf.Paragraph(&quot;This is a paragraph.&quot;)
+
+params = {}
+
+#paragraphs = odt.body.filter(kind='Paragraph')
+paragraphs = odt.body
+#paragraphs = odt.body.findall(CN('text:p'))
+
+
+# Toma de parametros
+# ==================
+
+params[&quot;representanteempcontrato&quot;] = u'[representanteempcontrato]'
+params[&quot;dirrepresentanteempcontrato&quot;] = u'[dirrepresentanteempcontrato]'
+params[&quot;cifrepresentanteempcontrato&quot;] = u'[cifrepresentanteempcontrato]'
+params[&quot;representantecontrato&quot;] = u'[representantecontrato]'
+params[&quot;cifrepresentantecontrato&quot;] = u'[cifrepresentantecontrato]'
+params[&quot;dirrepresentantecontrato&quot;] = u'[dirrepresentantecontrato]'
+params[&quot;textocantidadcontrato&quot;] = u'[textocantidadcontrato]'
+params[&quot;fianzacontrato&quot;] = u'[fianzacontrato]'
+
+
+#&lt;!--QUERY = &quot;SELECT * FROM configuracion WHERE nombre='NombreEmpresa'&quot;--&gt;
+params['nomempresa'] = u'[valor]'
+#&lt;!-- END QUERY--&gt;
+
+params[&quot;curdate&quot;] = ''
+&lt;!--QUERY=&quot;SELECT EXTRACT('day' FROM '[fincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;curdate&quot;] += '[dinicio] de '
+&lt;!--END QUERY--&gt;
+&lt;!-- QUERY=&quot;SELECT a, 
+CASE WHEN a=1 THEN 'Enero'
+     WHEN a=2 THEN 'Febrero'
+     WHEN a=3 THEN 'Marzo'
+     WHEN a=4 THEN 'Abril'
+     WHEN a=5 THEN 'Mayo'
+     WHEN a=6 THEN 'Junio'
+     WHEN a=7 THEN 'Julio'
+     WHEN a=8 THEN 'Agosto'
+     WHEN a=9 THEN 'Setiembre'
+     WHEN a=10 THEN 'Octubre'
+     WHEN a=11 THEN 'Noviembre'   
+     ELSE 'Diciembre'
+       END AS b FROM (SELECT EXTRACT('mon' from '[fincontrato]'::DATE) AS a) AS t1&quot; --&gt;
+params[&quot;curdate&quot;] += '[b] de '
+&lt;!-- END QUERY--&gt;
+&lt;!--QUERY=&quot;SELECT EXTRACT('year' FROM '[fincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;curdate&quot;] += '[dinicio]'
+&lt;!--END QUERY--&gt;
+
+params[&quot;enddate&quot;] = ''
+&lt;!--QUERY=&quot;SELECT EXTRACT('day' FROM '[ffincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;enddate&quot;] += '[dinicio] de '
+&lt;!--END QUERY--&gt;
+&lt;!-- QUERY=&quot;SELECT a, 
+CASE WHEN a=1 THEN 'Enero'
+     WHEN a=2 THEN 'Febrero'
+     WHEN a=3 THEN 'Marzo'
+     WHEN a=4 THEN 'Abril'
+     WHEN a=5 THEN 'Mayo'
+     WHEN a=6 THEN 'Junio'
+     WHEN a=7 THEN 'Julio'
+     WHEN a=8 THEN 'Agosto'
+     WHEN a=9 THEN 'Setiembre'
+     WHEN a=10 THEN 'Octubre'
+     WHEN a=11 THEN 'Noviembre'   
+     ELSE 'Diciembre'
+       END AS b FROM (SELECT EXTRACT('mon' from '[ffincontrato]'::DATE) AS a) AS t1&quot; --&gt;
+params[&quot;enddate&quot;] += '[b] de '
+&lt;!-- END QUERY--&gt;
+&lt;!--QUERY=&quot;SELECT EXTRACT('year' FROM '[ffincontrato]'::DATE) AS dinicio&quot;--&gt;
+params[&quot;enddate&quot;] += '[dinicio]'
+&lt;!--END QUERY--&gt;
+
+&lt;!--QUERY = &quot;SELECT * FROM vivienda WHERE idvivienda=[idvivienda]&quot;--&gt;
+params[&quot;dirvivienda&quot;] = u'[dirvivienda]'
+params[&quot;metrosvivienda&quot;] = '[metrosvivienda]'
+&lt;!-- END QUERY--&gt;
+
+
+
+&lt;!--QUERY = &quot;SELECT * FROM configuracion WHERE nombre='CIF'&quot;--&gt;
+params[&quot;cifempresa&quot;] = u'[valor]'
+&lt;!-- END QUERY--&gt;
+
+&lt;!--QUERY = &quot;SELECT * FROM configuracion WHERE nombre='DireccionCompleta'&quot;--&gt;
+params[&quot;dircompleta&quot;] = u'[valor]'
+&lt;!-- END QUERY--&gt;
+
+&lt;!-- QUERY=&quot;SELECT * FROM cliente WHERE idcliente=[idcliente]&quot;--&gt;
+params[&quot;nomcliente&quot;] = u'[nomcliente]'
+params[&quot;cifcliente&quot;] = u'[cifcliente]'
+params[&quot;dircliente&quot;] = u'[dircliente]'
+&lt;!-- END QUERY --&gt;
+
+'''
+ 
+
+
+
+
+'''
+
+
+for obj in paragraphs: 
+
+  for index, object in params.iteritems():
+    if (obj.xmlnode.text):
+      obj.xmlnode.text = obj.xmlnode.text.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+    if (obj.xmlnode.tail):
+      obj.xmlnode.tail = obj.xmlnode.tail.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+    for nodo in obj.xmlnode.iterdescendants():
+      if (nodo.text):
+        nodo.text = nodo.text.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+      if (nodo.tail):
+        nodo.tail = nodo.tail.replace(&quot;[&quot;+index+&quot;]&quot;,object)
+			  
+#    string1 = pp.xmlnode.text
+#    if (string1 &lt;&gt; None):
+#      pp.xmlnode.text = string1.replace(&quot;a&quot;,&quot;b&quot;)
+  
+#  print obj.plaintext()
+#  print str(obj.kind())
+#  if obj.plaintext() &lt;&gt; None:
+#      obj.text(obj.text())
+
+
+  #obj.text(&quot;hola&quot;)
+
+# Asi podemos reemplazar un paragrafo por otro.
+#  np = ezodf.Paragraph(&quot; 23&quot; + obj.plaintext())
+#  odt.body.replace(obj, np)
+
+
+#  obj.append_text(&quot;MEMUERO&quot;)
+
+  
+#odt.body.insert(3, ezodf.Paragraph('New first paragraph.'))
+  
+odt.saveas(&quot;impers_contrato_odt.odt&quot;)
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientecobro/CMakeLists.txt b/bulmages/bulmafact/plugins/pluginbf_clientecobro/CMakeLists.txt
index e9351dc..b7b825a 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientecobro/CMakeLists.txt
+++ b/bulmages/bulmafact/plugins/pluginbf_clientecobro/CMakeLists.txt
@@ -47,6 +47,8 @@ include_directories(
 	${CMAKE_SOURCE_DIR}/bulmafact/plugins/pluginbf_clientepedido/
 	${CMAKE_BINARY_DIR}/bulmafact/plugins/pluginbf_clientefactura/
 	${CMAKE_SOURCE_DIR}/bulmafact/plugins/pluginbf_clientefactura/
+	${CMAKE_BINARY_DIR}/bulmafact/plugins/pluginbf_clientefacturaivainc/
+	${CMAKE_SOURCE_DIR}/bulmafact/plugins/pluginbf_clientefacturaivainc/
 	${CMAKE_BINARY_DIR}/bulmafact/plugins/pluginbf_clientealbaran/
 	${CMAKE_SOURCE_DIR}/bulmafact/plugins/pluginbf_clientealbaran/)
 
@@ -113,7 +115,7 @@ configure_file( ${CMAKE_CURRENT_SOURCE_DIR}/README.en ${CMAKE_CURRENT_BINARY_DIR
 install (FILES ${CMAKE_CURRENT_BINARY_DIR}/README.en DESTINATION share/bulmages/bulmafact-plugins/ RENAME README.en.${plugin})
 
 
-add_dependencies(${plugin} bulmafact bulmalib pluginbf_clientefactura pluginbf_clientealbaran pluginbf_clientepedido pluginbf_clientepresupuesto)
+add_dependencies(${plugin} bulmafact bulmalib pluginbf_clientefactura pluginbf_clientefacturaivainc pluginbf_clientealbaran pluginbf_clientepedido pluginbf_clientepresupuesto)
 
 FILE(READ ${CMAKE_BINARY_DIR}/bulmafact/plugins/${plugin}/${plugin}_es_ES.css VAR_CSS_es_ES)
 FILE(APPEND ${CMAKE_BINARY_DIR}/css/bulmafact_es_ES.css &quot;${VAR_CSS_es_ES}&quot; )
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientecobro/impqtoolbutton.cpp b/bulmages/bulmafact/plugins/pluginbf_clientecobro/impqtoolbutton.cpp
index 322366d..d5cdf8c 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientecobro/impqtoolbutton.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_clientecobro/impqtoolbutton.cpp
@@ -31,6 +31,7 @@
 #include &lt;QMap&gt;
 #include &lt;QList&gt;
 #include &quot;facturaview.h&quot;
+#include &quot;facturaivaincclienteview.h&quot;
 #include &quot;albaranclienteview.h&quot;
 #include &quot;pedidoclienteview.h&quot;
 #include &quot;blfixed.h&quot;
@@ -244,6 +245,60 @@ void GenCobroQToolButton::click()
         } // end if
     }// end if
 
+
+    
+    if ( m_object-&gt;objectName() == &quot;FacturaIVAIncClienteBase&quot; ) {
+        FacturaIVAIncClienteView *fpv = ( FacturaIVAIncClienteView * ) m_object;
+        int nuevo = 1;
+        /// Comprobamos que no haya ya un cobro con la misma referencia y lo ponemos
+        QString query = &quot;SELECT * FROM cobro WHERE refcobro ='&quot; + fpv-&gt;dbValue ( &quot;reffactura&quot; ) + &quot;'&quot;;
+        BlDbRecordSet *cur = fpv-&gt;mainCompany()-&gt;loadQuery ( query );
+        if ( cur-&gt;numregistros() &gt; 0 ) {
+            QMessageBox msgBox;
+            msgBox.setText ( tr ( &quot;Ya existe un cobro con esta referencia\n&quot; ) );
+            msgBox.setInformativeText ( tr ( &quot;Desea abrir el cobro existente, registrar un nuevo cobro o salir?&quot; ) );
+            msgBox.addButton ( tr ( &quot;Crear&quot; ), QMessageBox::ActionRole );
+            QPushButton *openButton = msgBox.addButton ( QMessageBox::Open );
+            QPushButton *abortButton = msgBox.addButton ( QMessageBox::Cancel );
+            msgBox.setDefaultButton ( QMessageBox::Cancel );
+            msgBox.exec();
+            /// Se ha pulsado sobre la opcion abrir
+            if ( msgBox.clickedButton() == openButton ) {
+
+                while ( !cur-&gt;eof() ) {
+                    CobroView *bud = new CobroView ( ( BfCompany * ) fpv-&gt;mainCompany(), 0 );
+                    fpv-&gt;mainCompany() -&gt;m_pWorkspace-&gt;addSubWindow ( bud );
+                    bud-&gt;load ( cur-&gt;value( &quot;idcobro&quot; ) );
+                    bud-&gt;pintar();
+                    bud-&gt;show();
+                    cur-&gt;nextRecord();
+                } // end while
+                nuevo = 0;
+            } // end if
+
+            /// Se ha pulsado sobre la opcion cancelar
+            if ( msgBox.clickedButton() == abortButton )
+                nuevo = 0;
+        } // end if
+        delete cur;
+
+        /// Creacion de un cobro nuevo a partir de la factura.
+        if ( nuevo ) {
+            CobroView *bud = new CobroView ( fpv-&gt;mainCompany(), 0 );
+            fpv-&gt;mainCompany() -&gt;m_pWorkspace-&gt;addSubWindow ( bud );
+            bud-&gt;setDbValue ( &quot;idcliente&quot;, fpv-&gt;dbValue ( &quot;idcliente&quot; ) );
+            bud-&gt;setDbValue ( &quot;cantcobro&quot;, fpv-&gt;m_totalfactura-&gt;text() );
+            bud-&gt;setDbValue ( &quot;refcobro&quot;, fpv-&gt;dbValue ( &quot;reffactura&quot; ) );
+            bud-&gt;setDbValue ( &quot;comentcobro&quot;, fpv-&gt;dbValue ( &quot;descfactura&quot; ) );
+            bud-&gt;setDbValue ( &quot;idforma_pago&quot;, fpv-&gt;dbValue ( &quot;idforma_pago&quot; ) );
+            bud-&gt;pintar();
+            bud-&gt;show();
+        } // end if
+
+	/// Marcamnos la factura como procesada ya que el cobro es inicialmente por el importe total
+	fpv-&gt;mui_procesadafactura-&gt;setChecked(TRUE);
+
+    }// end if
     
 }
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientecobro/pluginbf_clientecobro.cpp b/bulmages/bulmafact/plugins/pluginbf_clientecobro/pluginbf_clientecobro.cpp
index 0d61f9f..05eb6c8 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientecobro/pluginbf_clientecobro.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_clientecobro/pluginbf_clientecobro.cpp
@@ -172,6 +172,30 @@ int FacturaView_FacturaView ( FacturaView *l )
     return 0;
 }
 
+
+///
+/**
+\param l
+\return
+**/
+int FacturaIVAIncClienteView_FacturaIVAIncClienteView ( FacturaIVAIncClienteView *l )
+{
+    BL_FUNC_DEBUG
+    GenCobroQToolButton *mui_exporta_efactura2 = new GenCobroQToolButton ( l, l-&gt;mui_plugbotones );
+
+    QHBoxLayout *m_hboxLayout1 = l-&gt;mui_plugbotones-&gt;findChild&lt;QHBoxLayout *&gt; ( &quot;hboxLayout1&quot; );
+
+    if ( !m_hboxLayout1 ) {
+        m_hboxLayout1 = new QHBoxLayout ( l-&gt;mui_plugbotones );
+        m_hboxLayout1-&gt;setSpacing ( 5 );
+        m_hboxLayout1-&gt;setMargin ( 0 );
+        m_hboxLayout1-&gt;setObjectName ( QString::fromUtf8 ( &quot;hboxLayout1&quot; ) );
+    }// end if
+    m_hboxLayout1-&gt;addWidget ( mui_exporta_efactura2 );
+    
+    return 0;
+}
+
 ///
 /**
 \param l
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientecobro/pluginbf_clientecobro.h b/bulmages/bulmafact/plugins/pluginbf_clientecobro/pluginbf_clientecobro.h
index 966fb1f..58b80d3 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientecobro/pluginbf_clientecobro.h
+++ b/bulmages/bulmafact/plugins/pluginbf_clientecobro/pluginbf_clientecobro.h
@@ -27,6 +27,7 @@
 #include &quot;clienteview.h&quot;
 #include &quot;bfbuscarreferencia.h&quot;
 #include &quot;facturaview.h&quot;
+#include &quot;facturaivaincclienteview.h&quot;
 #include &quot;albaranclienteview.h&quot;
 #include &quot;pedidoclienteview.h&quot;
 #include &quot;pdefs_pluginbf_clientecobro.h&quot;
@@ -42,6 +43,6 @@ extern &quot;C&quot; PLUGINBF_CLIENTECOBRO_EXPORT int FacturaView_FacturaView ( FacturaVie
 extern &quot;C&quot; PLUGINBF_CLIENTECOBRO_EXPORT int AlbaranClienteView_AlbaranClienteView ( AlbaranClienteView * );
 extern &quot;C&quot; PLUGINBF_CLIENTECOBRO_EXPORT int PedidoClienteView_PedidoClienteView ( PedidoClienteView * );
 extern &quot;C&quot; PLUGINBF_CLIENTECOBRO_EXPORT int BlAction_actionTriggered(BlAction *);
-
+extern &quot;C&quot; PLUGINBF_CLIENTECOBRO_EXPORT int FacturaIVAIncClienteView_FacturaIVAIncClienteView ( FacturaIVAIncClienteView * );
 #endif
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.es b/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.es
index fa5e0e2..c204f70 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.es
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefactura/README.es
@@ -38,7 +38,7 @@ Incompatibles:
 
 Reports: factura.rml; blform_FacturaView.qs; inf_detalleventasarticulo.pys; inf_resumcompras.pys; inf_familiacliente.pys; inf_ventas.ui; impers_factura_grafica.rml; impers_factura_copia.rml; impers_factura_pagada.rml
 
-Categorias: Facturacion generica;Talleres;Distribuci√≥n; Supermercados;Distribuci√≥n Alimentaria;Servicios Generales;Alquileres;
+Categorias: Facturacion generica;Talleres;Distribuci√≥n; Distribuci√≥n Alimentaria;Servicios Generales;Alquileres;
 
 Orden: 623
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/CMakeLists.txt b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/CMakeLists.txt
new file mode 100644
index 0000000..03178fc
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/CMakeLists.txt
@@ -0,0 +1,139 @@
+###########################################
+# Plugin for bulmafact                    #
+###########################################
+#pluginbf_clientefacturaivainc
+
+set (plugin pluginbf_clientefacturaivainc)
+ADD_DEFINITIONS(-D${plugin})
+
+file(GLOB plugin_SRC *.c *.cpp *.cxx)
+file(GLOB plugin_MOCS *.hpp *.h)
+file(GLOB plugin_UIS *.ui)
+
+# Exclude files with no QObject macro.
+file(GLOB plugin_NO_MOCS pdefs_pluginbf_clientefacturaivainc.h pluginbf_clientefacturaivainc.h)
+list(REMOVE_ITEM plugin_MOCS ${plugin_NO_MOCS})
+
+set(QT_USE_QTASSISTANT false)
+set(QT_USE_QTXML true)
+set(QT_USE_QTSCRIPT true)
+
+configure_file( ${CMAKE_CURRENT_SOURCE_DIR}/css/${plugin}_es_ES.css.in ${CMAKE_BINARY_DIR}/bulmafact/plugins/${plugin}/${plugin}_es_ES.css @ONLY)
+configure_file( ${CMAKE_CURRENT_SOURCE_DIR}/css/${plugin}_ca_ES.css.in ${CMAKE_BINARY_DIR}/bulmafact/plugins/${plugin}/${plugin}_ca_ES.css @ONLY)
+configure_file( ${CMAKE_CURRENT_SOURCE_DIR}/css/${plugin}_en_US.css.in ${CMAKE_BINARY_DIR}/bulmafact/plugins/${plugin}/${plugin}_en_US.css @ONLY)
+configure_file( ${CMAKE_CURRENT_SOURCE_DIR}/css/${plugin}_fr_FR.css.in ${CMAKE_BINARY_DIR}/bulmafact/plugins/${plugin}/${plugin}_fr_FR.css @ONLY)
+
+
+INCLUDE(${QT_USE_FILE})
+
+include_directories(
+    ${QT_INCLUDE_DIR}
+	${PGSQL_INCLUDE_DIR}
+	${QT_QTXML_INCLUDE_DIR}
+        ${QT_QTSCRIPT_INCLUDE_DIR}
+	${CMAKE_CURRENT_BINARY_DIR}
+	${CMAKE_CURRENT_SOURCE_DIR}
+	${CMAKE_BINARY_DIR}/bulmalib/src/
+	${CMAKE_SOURCE_DIR}/bulmalib/src/
+	${CMAKE_BINARY_DIR}/bulmafact/src/
+	${CMAKE_SOURCE_DIR}/bulmafact/src/
+	${CMAKE_BINARY_DIR}/bulmafact/plugins/pluginbf_cliente/
+	${CMAKE_SOURCE_DIR}/bulmafact/plugins/pluginbf_cliente/
+	${CMAKE_BINARY_DIR}/bulmafact/plugins/pluginbf_clientefacturaivainc/
+	${CMAKE_SOURCE_DIR}/bulmafact/plugins/pluginbf_clientefacturaivainc/
+	${CMAKE_BINARY_DIR}/bulmafact/plugins/pluginbf_clienteticket/
+	${CMAKE_SOURCE_DIR}/bulmafact/plugins/pluginbf_clienteticket/)
+
+# generate rules for building source files from the resources
+#QT4_WRAP_CPP(plugin_MOC_SRCS ${plugin_MOCS})
+
+# generate rules for building source files that moc generates
+QT4_WRAP_UI(plugin_UIS_H ${plugin_UIS} OPTIONS -tr N_)
+QT4_WRAP_CPP(plugin_MOC_SRCS ${plugin_MOCS})
+#QT4_ADD_RESOURCES(plugin_RCC_SRCS ${plugin_RCCS})
+
+IF(WIN32)
+SET(CMAKE_SHARED_LINKER_FLAGS &quot;${CMAKE_SHARED_LINKER_FLAGS} -Wl,-enable-auto-import&quot;)
+ADD_DEFINITIONS(-DQWT_DLL -DQT_DLL -DQWT_MAKEDLL -DPLUGINBF_CLIENTEFACTURAIVAINC)
+ENDIF(WIN32)
+
+#ADD_DEFINITIONS(${QT_DEFINITIONS})
+ADD_DEFINITIONS(-DQT_SHARED)
+
+# i18n
+if(WIN32)
+ADD_DEFINITIONS(&quot;-D_(String)=blI18n(\\\&quot;${plugin}\\\&quot;,String)&quot; )
+ADD_DEFINITIONS(&quot;-DN_(String,Int)=blI18n(\\\&quot;${plugin}\\\&quot;,String)&quot; )
+endif(WIN32)
+
+if(NOT WIN32)
+ADD_DEFINITIONS(&quot;-D'_(String)=blI18n(\&quot;${plugin}\&quot;,String)'&quot; )
+ADD_DEFINITIONS(&quot;-D'N_(String,Int)=blI18n(\&quot;${plugin}\&quot;,String)'&quot; )
+endif(NOT WIN32)
+
+
+if(USE_GETTEXT)
+   set(plugin_i18n ${plugin_SRC} ${plugin_MOC_SRCS} ${plugin_UIS_H}
+                        ${plugin_SRCS} ${plugin_MOCS})
+   GETTEXT_CREATE_TEMPLATE(${plugin} ${CMAKE_CURRENT_BINARY_DIR}
+                                ${CMAKE_CURRENT_SOURCE_DIR} plugin_i18n)
+   GETTEXT_CREATE_TRANSLATIONS(${CMAKE_CURRENT_BINARY_DIR}/${plugin}.pot
+                                ALL LANGUAGES es_ES ca_ES en_US fr_FR)
+endif(USE_GETTEXT)
+
+
+# build sources, moc'd sources, and rcc'd sources
+
+if(APPLE)
+  set(CMAKE_SHARED_LINKER_FLAGS &quot;${CMAKE_SHARED_LINKER_FLAGS} -undefined dynamic_lookup&quot;)
+endif(APPLE)
+
+add_library(${plugin} SHARED ${plugin_SRC} ${plugin_MOC_SRCS}
+	${plugin_UIS_H} ${plugin_SRCS} ${plugin_MOCS})
+
+
+set_target_properties( ${plugin} PROPERTIES 
+  SOVERSION &quot;${BULMAGES_VERSION_MAJOR}.${BULMAGES_VERSION_MINOR}&quot;
+  VERSION &quot;${BULMAGES_VERSION}&quot;)
+
+if(WIN32)
+target_link_libraries(${plugin} libbulmafact bulmalib pluginbf_cliente pluginbf_clienteticket ${QT_LIBRARIES} ${PGSQL_LIBRARIES})
+else(WIN32)
+target_link_libraries(${plugin} libbulmafact bulmalib ${QT_LIBRARIES} ${PGSQL_LIBRARIES})
+endif(WIN32)
+
+install_targets(/lib/bulmafact/plugins ${plugin})
+
+configure_file( ${CMAKE_CURRENT_SOURCE_DIR}/README.es ${CMAKE_CURRENT_BINARY_DIR}/README.es @ONLY)
+install (FILES ${CMAKE_CURRENT_BINARY_DIR}/README.es DESTINATION share/bulmages/bulmafact-plugins/ RENAME README.es.${plugin})
+
+configure_file( ${CMAKE_CURRENT_SOURCE_DIR}/README.ca ${CMAKE_CURRENT_BINARY_DIR}/README.ca @ONLY)
+install (FILES ${CMAKE_CURRENT_BINARY_DIR}/README.ca DESTINATION share/bulmages/bulmafact-plugins/ RENAME README.ca.${plugin})
+
+configure_file( ${CMAKE_CURRENT_SOURCE_DIR}/README.fr ${CMAKE_CURRENT_BINARY_DIR}/README.fr @ONLY)
+install (FILES ${CMAKE_CURRENT_BINARY_DIR}/README.fr DESTINATION share/bulmages/bulmafact-plugins/ RENAME README.fr.${plugin})
+
+configure_file( ${CMAKE_CURRENT_SOURCE_DIR}/README.en ${CMAKE_CURRENT_BINARY_DIR}/README.en @ONLY)
+install (FILES ${CMAKE_CURRENT_BINARY_DIR}/README.en DESTINATION share/bulmages/bulmafact-plugins/ RENAME README.en.${plugin})
+
+
+
+add_dependencies(${plugin} bulmafact bulmalib pluginbf_cliente pluginbf_clienteticket)
+
+FILE(READ ${CMAKE_BINARY_DIR}/bulmafact/plugins/${plugin}/${plugin}_es_ES.css VAR_CSS_es_ES)
+FILE(APPEND ${CMAKE_BINARY_DIR}/css/bulmafact_es_ES.css &quot;${VAR_CSS_es_ES}&quot; )
+
+FILE(READ ${CMAKE_BINARY_DIR}/bulmafact/plugins/${plugin}/${plugin}_ca_ES.css VAR_CSS_ca_ES)
+FILE(APPEND ${CMAKE_BINARY_DIR}/css/bulmafact_ca_ES.css &quot;${VAR_CSS_ca_ES}&quot; )
+
+FILE(READ ${CMAKE_BINARY_DIR}/bulmafact/plugins/${plugin}/${plugin}_fr_FR.css VAR_CSS_fr_FR)
+FILE(APPEND ${CMAKE_BINARY_DIR}/css/bulmafact_fr_FR.css &quot;${VAR_CSS_fr_FR}&quot; )
+
+FILE(READ ${CMAKE_BINARY_DIR}/bulmafact/plugins/${plugin}/${plugin}_en_US.css VAR_CSS_en_US)
+FILE(APPEND ${CMAKE_BINARY_DIR}/css/bulmafact_en_US.css &quot;${VAR_CSS_en_US}&quot; )
+
+install(DIRECTORY images DESTINATION share/bulmages PATTERN &quot;.svn&quot; EXCLUDE)
+
+install(DIRECTORY openreports/ 
+      DESTINATION share/bulmages/openreports
+      PATTERN &quot;.svn&quot; EXCLUDE)
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/README.ca b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/README.ca
new file mode 100644
index 0000000..89ba910
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/README.ca
@@ -0,0 +1,41 @@
+#######
+#Plugins
+#######
+#README.ca
+#20080501
+
+Nombre: FacturaIVAIncs a clients
+
+Biblioteca: libpluginbf_clientefacturaivainc.so
+
+Descripci√≥n:  &lt;H1&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note.svg&quot; WIDTH=&quot;100&quot;/&gt;&lt;BR&gt;FacturaIVAIncs a clients&lt;/H1&gt;
+&lt;P&gt;Suport per a emissi√≥ de facturaivaincs a clients.&lt;/P&gt;
+&lt;P&gt;En carregar el plugin tindrem dues noves entrades de men√∫ &lt;B&gt;Llistat de FacturaIVAIncs &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note_list.svg&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; des de la qual accedirem al llistat de facturaivaincs emesos i &lt;B&gt;Nou FacturaIVAInc &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_order.svg&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; des del qual podrem emetre una nou facturaivainc.&lt;/P&gt;
+&lt;H2&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note.svg&quot; WIDTH=&quot;22&quot;/&gt;Llistat de facturaivaincs&lt;/H2&gt;
+&lt;P&gt; Mitjan√ßant el llistat de facturaivaincs podrem controlar tots els facturaivaincs emesos, editar-los i esborrar-los. Per a aix√≤ podem utilitzar la barra de botons superior del llistat.&lt;/P&gt;
+&lt;P&gt; √âs com√∫ a tots els llistats de BulmaG√©s poder configurar-los presentant els camps que ens interessi. Per a aix√≥ tenim el &lt;B&gt;men√∫ de subformulari &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/48x48/toggleconfig.png&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; o l'opci√≥ &lt;B&gt;Configurar Llistat &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/document_properties.svg&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; que ens presenta al lateral dret del llistat tots els camps mostrables per ell, opcions de paginaci√≥ i la consulta de base de dades que genera aquest llistat.&lt;/P&gt;
+&lt;P&gt;&lt;B&gt;Nota:&lt;/B&gt;Poden haver-hi opcions ocultes que no veieu que s'activen mitjan√ßant la pulsaci√≥ del bot√≥ dret del ratol√≠ a determinades zones. Aquestes opcions poden veure's de forma permanent com una barra d'eines mitjan√ßant l'acci√≥ &lt;B&gt;Mostrar Men√∫ SubFormulari &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/48x48/togglemenu.png&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; Recordi que el bot√≥ dret del ratol√≠ pot ser el vostre millor aliat en la b√∫squeda de determinades accions.&lt;/P&gt;
+&lt;H2&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note.svg&quot; WIDTH=&quot;32&quot;/&gt;Nou FacturaIVAInc&lt;/H2&gt;
+&lt;P&gt;En crear una nou facturaivainc les dades necesss√†ries a omplir s√≥n el client i el magatzem. La resta de camps poden deixar-se en blanc per ser omplerts posteriorment. Els camps que apareixen a la pantalla poden variar segons la configuraci√≥ de plugins que tinguem i que precissin d'informaci√≥ addicional en les comandes. Aquesta informaci√≥ pot ser obligat√≤ria o no depenent del plugin q√úesti√≥.&lt;/P&gt;
+&lt;P&gt;Un cop omplertes les dades podem desar el facturaivainc o donar-li al bot√≥ &lt;B&gt;Accepta&lt;/B&gt; per desar els canvis.&lt;/P&gt;
+&lt;P&gt;Tots els facturaivaincs tenen una plantilla d'impressi√≥ per defecte anomenada &lt;B&gt;facturaivainc.rml&lt;/B&gt; que conforma la forma com s'imprimeix el facturaivainc en pulsar sobre el bot√≥ imprimir. A m√©s poden existir informes addicionals que apareixen en pulsar amb el bot√≥ dret del ratol√≠ a qualsevol espai buit de la pantalla de la comanda aix√≠ com accions ocultes no accessible d'una altra manera&lt;/P&gt;
+&lt;B&gt;Author:&lt;/B&gt;Tomeu Borr√°s (<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>)&lt;BR&gt;
+&lt;HR&gt;
+
+ParmBD:
+
+ArchivoSQLpatch:
+
+ArchivoSQLdeins: 
+
+Dependencias: libpluginbf_cliente.so
+
+Incompatibles:
+
+Reports: listado_facturaivainc.rml
+
+Categorias: IVA incl√≤s;
+
+Orden: 622
+
+Comentarios:
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/README.en b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/README.en
new file mode 100644
index 0000000..f19e4e6
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/README.en
@@ -0,0 +1,41 @@
+#######
+#Plugins
+#######
+#README.en
+#20080501
+
+Nombre: Costumer facturaivaincs
+
+Biblioteca: libpluginbf_clientefacturaivainc.so
+
+Descripci√≥n:  &lt;H1&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note.svg&quot; WIDTH=&quot;100&quot;/&gt;&lt;BR&gt;Costumer facturaivaincs&lt;/H1&gt;
+&lt;P&gt;Support for issuing of costumer facturaivaincs.&lt;/P&gt;
+&lt;P&gt;When we load the plugin we will have two new menu entries &lt;B&gt;FacturaIVAInc listing &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_facturaivainc_list.svg&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; from where we can access the listing of facturaivaincs and &lt;B&gt;New facturaivainc &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_facturaivainc.svg&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; from where we will be able to issue a new facturaivainc.&lt;/P&gt;
+&lt;H2&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_facturaivainc.svg&quot; WIDTH=&quot;22&quot;/&gt;Listing of facturaivaincs&lt;/H2&gt;
+&lt;P&gt; By means of the facturaivainc listing we will be able to control all the issued facturaivaincs, edit and delete them. To do this we can use the upper toolbar of the listings.&lt;/P&gt;
+&lt;P&gt; All Bulmages listings can be configured to present the fields we are interested in. For this we have the &lt;B&gt;subform menu &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/48x48/toggleconfig.png&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; or the option &lt;B&gt;Configure listing &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/document_properties.svg&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; which shows as at the right side of the listing all the showable fields, pagination options and the database query generated by that listing.&lt;/P&gt;
+&lt;P&gt;&lt;B&gt;Note:&lt;/B&gt;There may be hidden options that are activated by clicking the right-clicking with the mouse in specific areas. These options can be seen as a permanent toolbar with the action &lt;B&gt;Show subform menu &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/48x48/togglemenu.png&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; Remember that the right button of the mouse can be your best ally to search specific actions.&lt;/P&gt;
+&lt;H2&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_facturaivainc.svg&quot; WIDTH=&quot;32&quot;/&gt;New facturaivainc&lt;/H2&gt;
+&lt;P&gt;The costumer and the store are the necessary data to create a new facturaivainc. The rest of fields can be left blank to be filled later. The fields being shown in the screen can vary according to the plugin configuration that we have. They may need additional information in the facturaivaincs, and this information may be compulsory or not depending on the specific plugin.&lt;/P&gt;
+&lt;P&gt;Once the data has been filled we can save the facturaivainc or click the &lt;B&gt;Accept&lt;/P&gt; button to save the changes.&lt;/P&gt;
+&lt;P&gt;All the facturaivaincs have a printing template by default that is called &lt;B&gt;facturaivainc.rml&lt;/B&gt; and that fixes the printing form when the print button is clicked. Furthermore, there may be additional reports that appear when any empty area of the waybill screen is right-clicked with the mouse, as well as hidden actions not accessible in other ways.&lt;/P&gt;
+&lt;B&gt;Author:&lt;/B&gt;Tomeu Borr√°s (<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>)&lt;BR&gt;
+&lt;HR&gt;
+
+ParmBD:
+
+ArchivoSQLpatch:
+
+ArchivoSQLdeins: 
+
+Dependencias: libpluginbf_cliente.so
+
+Incompatibles:
+
+Reports: listado_facturaivainc.rml
+
+Categorias: VAT included;
+
+Orden: 622
+
+Comentarios:
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/README.es b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/README.es
new file mode 100644
index 0000000..2ef2258
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/README.es
@@ -0,0 +1,47 @@
+#######
+#Plugins
+#######
+#README.es
+#20080501
+
+Nombre: FacturaIVAIncs a clientes
+
+Biblioteca: libpluginbf_clientefacturaivainc.so
+
+Descripci√≥n:  &lt;H1&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note.svg&quot; WIDTH=&quot;100&quot;/&gt;&lt;BR&gt;FacturaIVAIncs a clientes&lt;/H1&gt;
+&lt;P&gt;Soporte para emisi√≥n de facturaivaincs a clientes.&lt;/P&gt;
+&lt;P&gt;Al cargar el plugin tendremos dos nuevas entradas de me≈Ñu &lt;B&gt;Listado de Albaranes &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note_list.svg&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; desde la que accederemos al listado de facturaes emitidos y &lt;B&gt;Nuevo Albaran &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note.svg&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; desde el que podremos emitir un nuevo factura.&lt;/P&gt;
+&lt;H2&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note.svg&quot; WIDTH=&quot;22&quot;/&gt;Listado de Albaranes&lt;/H2&gt;
+&lt;P&gt; Mediante el listado de facturaes podremos controlar todos los facturaes emitidos, editarlos y borrarlos. Para ello podemos utilizar la barra de botones superior del listado.&lt;/P&gt;
+&lt;P&gt; Es com√∫n en todos los listados de BulmaG√©s poder configurarlos presentando los campos que nos interese. Para ello tenemos el &lt;B&gt;men√∫ del subformulario &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/48x48/toggleconfig.png&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; o la opci√≥n &lt;B&gt;Configurar Listado &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/document_properties.svg&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; que nos presenta en el lateral derecho del listado todos los campos mostrables por el mismo, opciones de paginaci√≥n y la consulta de base de datos que genera dicho listado&lt;/P&gt;
+&lt;P&gt;&lt;B&gt;Nota:&lt;/B&gt;Puede haber opciones ocultas para usted que se activan mediante la pulsaci√≥n del bot√≥n derecho del rat√≥n en determinadas zonas. Estas opciones pueden verse de forma permanente como una barra de herramientas mediante la acci√≥n &lt;B&gt;Mostrar Menu SubFormulario &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/48x48/togglemenu.png&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; Recuerde que el bot√≥n derecho del rat√≥n puede ser su mejor aliado en la b√∫squeda de determinadas acciones.&lt;/P&gt;
+&lt;H2&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note.svg&quot; WIDTH=&quot;32&quot;/&gt;Nuevo Albar√°n&lt;/H2&gt;
+&lt;P&gt;Al crear un nuevo factura los datos necesarios a rellenar son el cliente y el almacen. El resto de campos pueden
+dejarse en blanco para ser rellenados posteriormente. Los campos que aparecen en la pantalla pueden variar seg√∫n la configuraci√≥n
+de plugins que tengamos y que precisen de informaci√≥n adicional en los facturaes, dicha informaci√≥n puede ser
+obligatoria o no dependiendo del plugin en cuesti√≥n&lt;/P&gt;
+&lt;P&gt;Una vez rellenados los datos podemos guardar el factura o darle al boton &lt;B&gt;Aceptar&lt;/B&gt; para almacenar los cambios&lt;/P&gt;
+&lt;P&gt;Todos los facturaes tienen una plantilla de impresi√≥n por defecto llamada &lt;B&gt;factura.rml&lt;/B&gt; que conforma la forma en que se
+imprime el factura al pulsar sobre el bot√≥n imprimir. Adem√°s pueden existir informes adicionales que aparecen al pulsar
+con el bot√≥n derecho del rat√≥n en cualquier espacio vacio de la pantalla del factura as√≠ como acciones ocultas no
+accesibles de otro modo&lt;/P&gt;
+&lt;B&gt;Author:&lt;/B&gt;Tomeu Borr√°s (<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>)&lt;BR&gt;
+&lt;HR&gt;
+
+ParmBD:
+
+ArchivoSQLpatch:
+
+ArchivoSQLdeins: 
+
+Dependencias: libpluginbf_cliente.so;libpluginbf_ivaincluido.so
+
+Incompatibles: libpluginbf_clientefactura.so
+
+Reports: facturaIVAINC.rml
+
+Categorias: IVA incluido;Colmados; Ferreter√≠as; Droguer√≠as;Talleres;Restauraci√≥n; Parques Infantiles; Tallas y Colores; Supermercados;
+
+Orden: 622
+
+Comentarios:
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/README.fr b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/README.fr
new file mode 100644
index 0000000..fc660b4
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/README.fr
@@ -0,0 +1,40 @@
+#######
+#Plugins
+#######
+#README.fr
+#20110210
+
+Nombre: FacturaIVAIncs clients
+
+Biblioteca: libpluginbf_clientefacturaivainc.so
+
+Descripci√≥n:  &lt;H1&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note.svg&quot; WIDTH=&quot;100&quot;/&gt;&lt;BR&gt;Bulletin clients&lt;/H1&gt;
+&lt;P&gt;Support pour la cr√©ation de facturaivaincs clients.&lt;/P&gt;
+&lt;P&gt;En chargeant le plugin nous aurons deux nouvelles entr√©es de menu &lt;B&gt;Liste de bulletin  &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note_list.svg&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt;√† partir de laquelle nous acc√©derons au listing des bulletins √©mis et &lt;B&gt;Nouveau bulletin &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note.svg&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; de l√† nous pourrons √©mettre un nouveau bulletin.&lt;P&gt;
+&lt;H2&gt;&lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/client_delivery_note.svg&quot; WIDTH=&quot;22&quot;/&gt;Listado de Albaranes&lt;/H2&gt;
+&lt;P&gt;Au moyen du listing de bulletin nous pourrons contr√¥ler toutes les bulletins √©mis, les publier et les effacer. Pour cela nous pouvons utiliser la barre de boutons sup√©rieure du listing. &lt;/P&gt;
+&lt;P&gt;Il est commun dans tous les listings de BulmaG√©s de pouvoir les former en pr√©sentant les domaines qui nous int√©resse. Pour cela nous avons le  &lt;B&gt;menu du sous formulaire &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/48x48/toggleconfig.png&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; ou l'option &lt;B&gt;Configurer la Liste &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/document_properties.svg&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt;qui nous pr√©sente dans le c√¥t√© droit lat√©ral du listing tous les domaines pr√©sentables par ce dernier, options de pagination et la consultation de base de donn√©es qui produit les propos que vous √©num√©rez&lt;/P&gt;
+&lt;P&gt;&lt;B&gt;Note :&lt;/B&gt;Il peut y avoir des options cach√©es qui sont activ√©es en cliquant le bouton droit de la souris dans certaines zones. Ces options peuvent √™tre vues de mani√®re permanente comme une barre d'outils par l'action &lt;B&gt;Afficher Menu Sous Formulaire &lt;IMG SRC=&quot;@CMAKE_INSTALL_PREFIX@/share/bulmages/imagesrc/images/oxygen/actions/48x48/togglemenu.png&quot; WIDTH=&quot;22&quot;/&gt;&lt;/B&gt; Rappelez vous que le bouton droit de la souris peut √™tre votre meilleur alli√© dans la recherche de certaines actions.&lt;/B&gt;&lt;/P&gt;
+&lt;P&gt;En cr√©ant une nouveau bulletin les donn√©es n√©cessaires √† remplir sont : le client et le magasin. Le reste des donn√©es peut √™tre laisser en blanc pour √™tre post√©rieurement remplis. Les domaines qui apparaissent sur l'√©cran peuvent varier selon la configuration des plugins que nous avons et qui n√©cessitent des informations additionnelles dans les bulletins, cette information peut √™tre obligatoire ou non suivant le plugin en question&lt;/P&gt;
+&lt;P&gt;Une fois remplies les donn√©es nous pouvons garder le bulletin ou cliquer le bouton Accepter pour stocker les changements&lt;/P&gt;
+&lt;P&gt;Toutes les factures ont un service d'impression par d√©faut appel√©  &lt;B&gt;factura.rml&lt;/B&gt; qui d√©finit la mani√®re dans laquelle il imprime le bulletin en pressant sur le bouton imprimer. Peuvent en outre exister des rapports additionnels qui apparaissent en pressant avec le bouton droit de la souris dans tout espace vide de l'√©cran du bulletin ainsi que les actions occultes non accessibles d'une autre mani√®re&lt;/P&gt;
+&lt;B&gt;Author:&lt;/B&gt;Tomeu Borr√°s (<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>)&lt;BR&gt;
+&lt;HR&gt;
+
+ParmBD:
+
+ArchivoSQLpatch:
+
+ArchivoSQLdeins: 
+
+Dependencias: libpluginbf_cliente.so
+
+Incompatibles:
+
+Reports: listado_facturaivainc.rml
+
+Categorias: TVA incluse;
+
+Orden: 622
+
+Comentarios:
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/bfclientefacturaivaincdescuentosubform.cpp b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/bfclientefacturaivaincdescuentosubform.cpp
new file mode 100644
index 0000000..45ab948
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/bfclientefacturaivaincdescuentosubform.cpp
@@ -0,0 +1,63 @@
+/***************************************************************************
+ *   Copyright (C) 2005 by Tomeu Borras Riera                              *
+ *   <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>                                                  *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+
+
+
+#include &lt;QMessageBox&gt;
+#include &lt;QMenu&gt;
+#include &lt;QKeyEvent&gt;
+#include &lt;QEvent&gt;
+
+#include &quot;bfclientefacturaivaincdescuentosubform.h&quot;
+#include &quot;blfunctions.h&quot;
+
+
+///
+/**
+\param parent
+**/
+BfClienteFacturaIVAIncDescuentoSubForm::BfClienteFacturaIVAIncDescuentoSubForm ( QWidget *parent )
+        : BfSubForm ( parent )
+{
+    BL_FUNC_DEBUG
+
+    setDbTableName ( &quot;dfactura&quot; );
+    setDbFieldId ( &quot;iddfactura&quot; );
+    addSubFormHeader ( &quot;iddfactura&quot;, BlDbField::DbInt, BlDbField::DbPrimaryKey, BlSubFormHeader::DbHideView | BlSubFormHeader::DbNoWrite, _ ( &quot;Id descuento&quot; ) );
+    addSubFormHeader ( &quot;conceptdfactura&quot;, BlDbField::DbVarChar, BlDbField::DbNotNull, BlSubFormHeader::DbNone, _ ( &quot;Concepto descuento&quot; ) );
+    addSubFormHeader ( &quot;proporciondfactura&quot;, BlDbField::DbNumeric, BlDbField::DbNotNull, BlSubFormHeader::DbNone, _ ( &quot;% Descuento&quot; ) );
+    addSubFormHeader ( &quot;idfactura&quot;, BlDbField::DbInt, BlDbField::DbNotNull, BlSubFormHeader::DbHideView | BlSubFormHeader::DbNoWrite, _ ( &quot;Id factura&quot; ) );
+    setInsert ( TRUE );
+    
+}
+
+
+///
+/**
+\param idfactura
+**/
+void BfClienteFacturaIVAIncDescuentoSubForm::load ( QString idfactura )
+{
+    BL_FUNC_DEBUG
+    mdb_idfactura = idfactura;
+    BlSubForm::load ( &quot;SELECT * FROM dfactura WHERE idfactura=&quot; + mdb_idfactura );
+}
+
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/bfclientefacturaivaincdescuentosubform.h b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/bfclientefacturaivaincdescuentosubform.h
new file mode 100644
index 0000000..f8fce54
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/bfclientefacturaivaincdescuentosubform.h
@@ -0,0 +1,47 @@
+/***************************************************************************
+ *   Copyright (C) 2005 by Tomeu Borras Riera                              *
+ *   <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>                                                  *
+ *   <A HREF="http://www.iglues.org">http://www.iglues.org</A>                                                 *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+
+#ifndef BFCLIENTEFACTURAIVAINCDESCUENTOSUBFORM_H
+#define BFCLIENTEFACTURAIVAINCDESCUENTOSUBFORM_H
+
+#include &quot;bfsubform.h&quot;
+#include &quot;bfcompany.h&quot;
+#include &quot;pdefs_pluginbf_clientefacturaivainc.h&quot;
+
+
+/// Muestra y administra la ventana de lista de descuentos por albar&aacute;n a cliente.
+/** */
+class PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT BfClienteFacturaIVAIncDescuentoSubForm : public BfSubForm
+{
+    Q_OBJECT
+
+public:
+    QString mdb_idfactura;
+    BfClienteFacturaIVAIncDescuentoSubForm ( QWidget *parent = 0 );
+    ~BfClienteFacturaIVAIncDescuentoSubForm() {}
+    ;
+
+public slots:
+    virtual void load ( QString idfactura );
+};
+
+#endif
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/bfclientefacturaivaincsubform.cpp b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/bfclientefacturaivaincsubform.cpp
new file mode 100644
index 0000000..eec92dc
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/bfclientefacturaivaincsubform.cpp
@@ -0,0 +1,85 @@
+/***************************************************************************
+ *   Copyright (C) 2005 by Tomeu Borras Riera                              *
+ *   <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>                                                  *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+
+#include &lt;QMessageBox&gt;
+#include &lt;QKeyEvent&gt;
+#include &lt;QEvent&gt;
+
+#include &quot;bfclientefacturaivaincsubform.h&quot;
+#include &quot;blfunctions.h&quot;
+#include &quot;blfixed.h&quot;
+#include &quot;blplugins.h&quot;
+
+
+///
+/**
+\param parent
+**/
+BfClienteFacturaIVAIncSubForm::BfClienteFacturaIVAIncSubForm ( QWidget *parent )
+        : BfSubForm ( parent )
+{
+    BL_FUNC_DEBUG
+    setDbTableName ( &quot;lfactura&quot; );
+    setDbFieldId ( &quot;idlfactura&quot; );
+    /// Disparamos los plugins.
+    int res = g_plugins-&gt;run ( &quot;BfClienteFacturaIVAIncSubForm_BfClienteFacturaIVAIncSubForm&quot;, this );
+    if ( res != 0 )
+        return;
+    addSubFormHeader ( &quot;idarticulo&quot;, BlDbField::DbInt, BlDbField::DbNotNull, BlSubFormHeader::DbHideView, _ ( &quot;Id articulo&quot; ) );
+    addSubFormHeader ( &quot;codigocompletoarticulo&quot;, BlDbField::DbVarChar, BlDbField::DbNoSave, BlSubFormHeader::DbNone, _ ( &quot;Codigo completo articulo&quot; ) );
+    addSubFormHeader ( &quot;nomarticulo&quot;, BlDbField::DbVarChar, BlDbField::DbNoSave, BlSubFormHeader::DbNoWrite, _ ( &quot;Nombre articulo&quot; ) );
+    addSubFormHeader ( &quot;idlfactura&quot;, BlDbField::DbInt, BlDbField::DbPrimaryKey, BlSubFormHeader::DbHideView, _ ( &quot;No linea&quot; ) );
+    addSubFormHeader ( &quot;desclfactura&quot;, BlDbField::DbVarChar, BlDbField::DbNotNull, BlSubFormHeader::DbNone, _ ( &quot;Descripcion&quot; ) );
+    addSubFormHeader ( &quot;cantlfactura&quot;, BlDbField::DbNumeric, BlDbField::DbNotNull, BlSubFormHeader::DbNone, _ ( &quot;Cantidad&quot; ) );
+//    addSubFormHeader ( &quot;pvplfactura&quot;, BlDbField::DbNumeric, BlDbField::DbNotNull, BlSubFormHeader::DbNone, _ ( &quot;P.V.P.&quot; ) );
+    addSubFormHeader ( &quot;pvpivainclfactura&quot;, BlDbField::DbNumeric, BlDbField::DbNotNull, BlSubFormHeader::DbNone, _ ( &quot;P.V.P.&quot; ) );
+    addSubFormHeader ( &quot;totallfactura&quot;, BlDbField::DbNumeric, BlDbField::DbNoSave, BlSubFormHeader::DbNoWrite, _ ( &quot;Total Linea&quot; ) );
+    addSubFormHeader ( &quot;ivalfactura&quot;, BlDbField::DbNumeric, BlDbField::DbNotNull, BlSubFormHeader::DbNone, _ ( &quot;I.V.A.&quot; ) );
+    addSubFormHeader ( &quot;reqeqlfactura&quot;, BlDbField::DbNumeric, BlDbField::DbNothing, BlSubFormHeader::DbNone, _ ( &quot;% Recargo E.Q.&quot; ) );
+    addSubFormHeader ( &quot;descuentolfactura&quot;, BlDbField::DbNumeric, BlDbField::DbNotNull, BlSubFormHeader::DbNone, _ ( &quot;% Descuento&quot; ) );
+    addSubFormHeader ( &quot;idfactura&quot;, BlDbField::DbInt, BlDbField::DbNotNull, BlSubFormHeader::DbHideView | BlSubFormHeader::DbNoWrite, _ ( &quot;Id factura&quot; ) );
+    addSubFormHeader ( &quot;ordenlfactura&quot;, BlDbField::DbInt, BlDbField::DbNotNull, BlSubFormHeader::DbHideView, _ ( &quot;Orden&quot; ) );
+    setInsert ( TRUE );
+    setOrdenEnabled ( TRUE );
+    /// Disparamos los plugins.
+    g_plugins-&gt;run ( &quot;BfClienteFacturaIVAIncSubForm_BfClienteFacturaIVAIncSubForm_Post&quot;, this );
+    
+
+}
+
+
+///
+/**
+\param idfactura
+**/
+void BfClienteFacturaIVAIncSubForm::load ( QString idfactura )
+{
+    BL_FUNC_DEBUG
+    mdb_idfactura = idfactura;
+    /// Disparamos los plugins.
+    int res = g_plugins-&gt;run ( &quot;BfClienteFacturaIVAIncSubForm_cargar&quot;, this );
+    if ( res != 0 )
+        return;
+
+    BlSubForm::load ( &quot;SELECT *, (cantlfactura * pvpivainclfactura)::NUMERIC(12,2) AS totallfactura FROM lfactura LEFT JOIN articulo ON lfactura.idarticulo = articulo.idarticulo WHERE idfactura=&quot; + mdb_idfactura + &quot;   ORDER BY ordenlfactura&quot; );
+    
+}
+
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/bfclientefacturaivaincsubform.h b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/bfclientefacturaivaincsubform.h
new file mode 100644
index 0000000..bb4a9e8
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/bfclientefacturaivaincsubform.h
@@ -0,0 +1,49 @@
+/***************************************************************************
+ *   Copyright (C) 2005 by Tomeu Borras Riera                              *
+ *   <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>                                                  *
+ *   <A HREF="http://www.iglues.org">http://www.iglues.org</A>                                                 *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+
+#ifndef BFCLIENTEFACTURAIVAINCSUBFORM_H
+#define BFCLIENTEFACTURAIVAINCSUBFORM_H
+
+#include &lt;QEvent&gt;
+
+#include &quot;bfcompany.h&quot;
+#include &quot;bfsubform.h&quot;
+#include &quot;blfixed.h&quot;
+#include &quot;pdefs_pluginbf_clientefacturaivainc.h&quot;
+
+
+/// Muestra y administra las l&iacute;neas de detalle de facturaes a un cliente.
+/** */
+class PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT BfClienteFacturaIVAIncSubForm : public BfSubForm
+{
+    Q_OBJECT
+
+public:
+    QString mdb_idfactura;
+    BfClienteFacturaIVAIncSubForm ( QWidget *parent = 0 );
+    ~BfClienteFacturaIVAIncSubForm() {};
+
+public slots:
+    virtual void load ( QString idfactura );
+};
+
+#endif
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/css/pluginbf_clientefacturaivainc_ca_ES.css.in b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/css/pluginbf_clientefacturaivainc_ca_ES.css.in
new file mode 100644
index 0000000..ed8b574
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/css/pluginbf_clientefacturaivainc_ca_ES.css.in
@@ -0,0 +1,8 @@
+#AlbaranClienteBase #mui_list {
+	background-image: url(@CMAKE_INSTALL_PREFIX@/share/bulmages/images/ca_ES/pluginbf_clientefacturaivainc-new.png);
+}
+
+#AlbaranClienteListBase #mui_list {
+	background-image: url(@CMAKE_INSTALL_PREFIX@/share/bulmages/images/ca_ES/pluginbf_clientefacturaivainc-list.png);
+}
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/css/pluginbf_clientefacturaivainc_en_US.css.in b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/css/pluginbf_clientefacturaivainc_en_US.css.in
new file mode 100644
index 0000000..b56f981
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/css/pluginbf_clientefacturaivainc_en_US.css.in
@@ -0,0 +1,8 @@
+#AlbaranClienteBase #mui_list {
+	background-image: url(@CMAKE_INSTALL_PREFIX@/share/bulmages/images/en_US/pluginbf_clientefacturaivainc-new.png);
+}
+
+#AlbaranClienteListBase #mui_list {
+	background-image: url(@CMAKE_INSTALL_PREFIX@/share/bulmages/images/en_US/pluginbf_clientefacturaivainc-list.png);
+}
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/css/pluginbf_clientefacturaivainc_es_ES.css.in b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/css/pluginbf_clientefacturaivainc_es_ES.css.in
new file mode 100644
index 0000000..24f3d7d
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/css/pluginbf_clientefacturaivainc_es_ES.css.in
@@ -0,0 +1,8 @@
+#FacturaIVAIncClienteBase #mui_list {
+	background-image: url(@CMAKE_INSTALL_PREFIX@/share/bulmages/images/es_ES/pluginbf_clientefacturaivainc-new.png);
+}
+
+#FacturaIVAIncClienteListBase #mui_list {
+	background-image: url(@CMAKE_INSTALL_PREFIX@/share/bulmages/images/es_ES/pluginbf_clientefacturaivainc-list.png);
+}
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/css/pluginbf_clientefacturaivainc_fr_FR.css.in b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/css/pluginbf_clientefacturaivainc_fr_FR.css.in
new file mode 100644
index 0000000..cbf7bb9
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/css/pluginbf_clientefacturaivainc_fr_FR.css.in
@@ -0,0 +1,8 @@
+#AlbaranClienteBase #mui_list {
+	background-image: url(@CMAKE_INSTALL_PREFIX@/share/bulmages/images/fr_FR/pluginbf_clientefacturaivainc-new.png);
+}
+
+#AlbaranClienteListBase #mui_list {
+	background-image: url(@CMAKE_INSTALL_PREFIX@/share/bulmages/images/fr_FR/pluginbf_clientefacturaivainc-list.png);
+}
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclientebase.ui b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclientebase.ui
new file mode 100644
index 0000000..3804926
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclientebase.ui
@@ -0,0 +1,1420 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;ui version=&quot;4.0&quot;&gt;
+ &lt;class&gt;FacturaIVAIncClienteBase&lt;/class&gt;
+ &lt;widget class=&quot;QWidget&quot; name=&quot;FacturaIVAIncClienteBase&quot;&gt;
+  &lt;property name=&quot;geometry&quot;&gt;
+   &lt;rect&gt;
+    &lt;x&gt;0&lt;/x&gt;
+    &lt;y&gt;0&lt;/y&gt;
+    &lt;width&gt;750&lt;/width&gt;
+    &lt;height&gt;550&lt;/height&gt;
+   &lt;/rect&gt;
+  &lt;/property&gt;
+  &lt;property name=&quot;minimumSize&quot;&gt;
+   &lt;size&gt;
+    &lt;width&gt;750&lt;/width&gt;
+    &lt;height&gt;550&lt;/height&gt;
+   &lt;/size&gt;
+  &lt;/property&gt;
+  &lt;property name=&quot;windowTitle&quot;&gt;
+   &lt;string&gt;Nueva factura a cliente (IVA inc)&lt;/string&gt;
+  &lt;/property&gt;
+  &lt;property name=&quot;windowIcon&quot;&gt;
+   &lt;iconset resource=&quot;../../../bulmages.qrc&quot;&gt;
+    &lt;normaloff&gt;:/Images/client-delivery-note.png&lt;/normaloff&gt;:/Images/client-delivery-note.png&lt;/iconset&gt;
+  &lt;/property&gt;
+  &lt;layout class=&quot;QGridLayout&quot; name=&quot;gridLayout&quot;&gt;
+   &lt;item row=&quot;0&quot; column=&quot;0&quot; colspan=&quot;6&quot;&gt;
+    &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;_2&quot;&gt;
+     &lt;property name=&quot;spacing&quot;&gt;
+      &lt;number&gt;4&lt;/number&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;margin&quot;&gt;
+      &lt;number&gt;0&lt;/number&gt;
+     &lt;/property&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;QLabel&quot; name=&quot;pixmapLabel1&quot;&gt;
+       &lt;property name=&quot;sizePolicy&quot;&gt;
+        &lt;sizepolicy hsizetype=&quot;Fixed&quot; vsizetype=&quot;Fixed&quot;&gt;
+         &lt;horstretch&gt;0&lt;/horstretch&gt;
+         &lt;verstretch&gt;0&lt;/verstretch&gt;
+        &lt;/sizepolicy&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;minimumSize&quot;&gt;
+        &lt;size&gt;
+         &lt;width&gt;48&lt;/width&gt;
+         &lt;height&gt;48&lt;/height&gt;
+        &lt;/size&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;maximumSize&quot;&gt;
+        &lt;size&gt;
+         &lt;width&gt;48&lt;/width&gt;
+         &lt;height&gt;48&lt;/height&gt;
+        &lt;/size&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;pixmap&quot;&gt;
+        &lt;pixmap resource=&quot;../../../bulmages.qrc&quot;&gt;:/Images/client-delivery-note.png&lt;/pixmap&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;scaledContents&quot;&gt;
+        &lt;bool&gt;true&lt;/bool&gt;
+       &lt;/property&gt;
+      &lt;/widget&gt;
+     &lt;/item&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;QFrame&quot; name=&quot;frame_3&quot;&gt;
+       &lt;property name=&quot;sizePolicy&quot;&gt;
+        &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Fixed&quot;&gt;
+         &lt;horstretch&gt;0&lt;/horstretch&gt;
+         &lt;verstretch&gt;0&lt;/verstretch&gt;
+        &lt;/sizepolicy&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;frameShape&quot;&gt;
+        &lt;enum&gt;QFrame::StyledPanel&lt;/enum&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;frameShadow&quot;&gt;
+        &lt;enum&gt;QFrame::Raised&lt;/enum&gt;
+       &lt;/property&gt;
+       &lt;layout class=&quot;QHBoxLayout&quot;&gt;
+        &lt;property name=&quot;spacing&quot;&gt;
+         &lt;number&gt;4&lt;/number&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;margin&quot;&gt;
+         &lt;number&gt;4&lt;/number&gt;
+        &lt;/property&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QToolButton&quot; name=&quot;mui_guardar&quot;&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;maximumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;toolTip&quot;&gt;
+           &lt;string&gt;Guardar facturaivainc&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;whatsThis&quot;&gt;
+           &lt;string&gt;Guardar factura&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string/&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;icon&quot;&gt;
+           &lt;iconset resource=&quot;../../../bulmages.qrc&quot;&gt;
+            &lt;normaloff&gt;:/Images/edit-save.png&lt;/normaloff&gt;:/Images/edit-save.png&lt;/iconset&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;iconSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;22&lt;/width&gt;
+            &lt;height&gt;22&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QToolButton&quot; name=&quot;mui_borrar&quot;&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;maximumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;toolTip&quot;&gt;
+           &lt;string&gt;Borrar facturaivainc&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;whatsThis&quot;&gt;
+           &lt;string&gt;Borrar facturaivainc&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string/&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;icon&quot;&gt;
+           &lt;iconset resource=&quot;../../../bulmages.qrc&quot;&gt;
+            &lt;normaloff&gt;:/Images/edit-delete.png&lt;/normaloff&gt;:/Images/edit-delete.png&lt;/iconset&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;iconSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;22&lt;/width&gt;
+            &lt;height&gt;22&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QToolButton&quot; name=&quot;mui_imprimir&quot;&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;maximumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;toolTip&quot;&gt;
+           &lt;string&gt;Imprimir facturaivainc&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;whatsThis&quot;&gt;
+           &lt;string&gt;Imprimir facturaivainc&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string/&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;icon&quot;&gt;
+           &lt;iconset resource=&quot;../../../bulmages.qrc&quot;&gt;
+            &lt;normaloff&gt;:/Images/document-print.png&lt;/normaloff&gt;:/Images/document-print.png&lt;/iconset&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;iconSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;22&lt;/width&gt;
+            &lt;height&gt;22&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QToolButton&quot; name=&quot;mui_detalles&quot;&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;maximumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;toolTip&quot;&gt;
+           &lt;string&gt;Mostrar/ocultar cabecera&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;whatsThis&quot;&gt;
+           &lt;string&gt;Mostrar/ocultar cabecera&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string/&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;icon&quot;&gt;
+           &lt;iconset resource=&quot;../../../bulmages.qrc&quot;&gt;
+            &lt;normaloff&gt;:/Images/edit-find.png&lt;/normaloff&gt;:/Images/edit-find.png&lt;/iconset&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;iconSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;22&lt;/width&gt;
+            &lt;height&gt;22&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;checkable&quot;&gt;
+           &lt;bool&gt;true&lt;/bool&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;checked&quot;&gt;
+           &lt;bool&gt;true&lt;/bool&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;spacer&gt;
+          &lt;property name=&quot;orientation&quot;&gt;
+           &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;sizeType&quot;&gt;
+           &lt;enum&gt;QSizePolicy::Expanding&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;50&lt;/width&gt;
+            &lt;height&gt;30&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+         &lt;/spacer&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QFrame&quot; name=&quot;mui_plugbotones&quot;&gt;
+          &lt;property name=&quot;sizePolicy&quot;&gt;
+           &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Preferred&quot;&gt;
+            &lt;horstretch&gt;0&lt;/horstretch&gt;
+            &lt;verstretch&gt;0&lt;/verstretch&gt;
+           &lt;/sizepolicy&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;frameShape&quot;&gt;
+           &lt;enum&gt;QFrame::NoFrame&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;frameShadow&quot;&gt;
+           &lt;enum&gt;QFrame::Plain&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;lineWidth&quot;&gt;
+           &lt;number&gt;0&lt;/number&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;spacer&gt;
+          &lt;property name=&quot;orientation&quot;&gt;
+           &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;sizeType&quot;&gt;
+           &lt;enum&gt;QSizePolicy::Expanding&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;50&lt;/width&gt;
+            &lt;height&gt;30&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+         &lt;/spacer&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QLabel&quot; name=&quot;label5&quot;&gt;
+          &lt;property name=&quot;sizePolicy&quot;&gt;
+           &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Fixed&quot;&gt;
+            &lt;horstretch&gt;0&lt;/horstretch&gt;
+            &lt;verstretch&gt;0&lt;/verstretch&gt;
+           &lt;/sizepolicy&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string&gt;Referencia:&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;buddy&quot;&gt;
+           &lt;cstring&gt;mui_reffactura&lt;/cstring&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;BfBuscarReferencia&quot; name=&quot;mui_reffactura&quot;&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;150&lt;/width&gt;
+            &lt;height&gt;0&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;maximumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;150&lt;/width&gt;
+            &lt;height&gt;16777215&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+       &lt;/layout&gt;
+      &lt;/widget&gt;
+     &lt;/item&gt;
+    &lt;/layout&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;1&quot; column=&quot;0&quot; colspan=&quot;6&quot;&gt;
+    &lt;widget class=&quot;QFrame&quot; name=&quot;frame&quot;&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;16&lt;/width&gt;
+       &lt;height&gt;120&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;frameShape&quot;&gt;
+      &lt;enum&gt;QFrame::StyledPanel&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;frameShadow&quot;&gt;
+      &lt;enum&gt;QFrame::Raised&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;layout class=&quot;QGridLayout&quot; name=&quot;gridLayout_2&quot;&gt;
+      &lt;item row=&quot;0&quot; column=&quot;0&quot;&gt;
+       &lt;widget class=&quot;QLabel&quot; name=&quot;label7&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Fixed&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;text&quot;&gt;
+         &lt;string&gt;Descripcion:&lt;/string&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;buddy&quot;&gt;
+         &lt;cstring&gt;mui_descfactura&lt;/cstring&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;0&quot; column=&quot;1&quot; colspan=&quot;5&quot;&gt;
+       &lt;widget class=&quot;QLineEdit&quot; name=&quot;mui_descfactura&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Preferred&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;0&quot; column=&quot;6&quot;&gt;
+       &lt;widget class=&quot;QCheckBox&quot; name=&quot;mui_procesadafactura&quot;&gt;
+        &lt;property name=&quot;layoutDirection&quot;&gt;
+         &lt;enum&gt;Qt::RightToLeft&lt;/enum&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;text&quot;&gt;
+         &lt;string&gt;Procesada&lt;/string&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;1&quot; column=&quot;0&quot;&gt;
+       &lt;widget class=&quot;QLabel&quot; name=&quot;label_4&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Fixed&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;text&quot;&gt;
+         &lt;string&gt;Trabajador:&lt;/string&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;alignment&quot;&gt;
+         &lt;set&gt;Qt::AlignLeading|Qt::AlignLeft|Qt::AlignVCenter&lt;/set&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;buddy&quot;&gt;
+         &lt;cstring&gt;mui_idtrabajador&lt;/cstring&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;1&quot; column=&quot;1&quot;&gt;
+       &lt;widget class=&quot;BfBuscarTrabajador&quot; name=&quot;mui_idtrabajador&quot;&gt;
+        &lt;property name=&quot;minimumSize&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;150&lt;/width&gt;
+          &lt;height&gt;0&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;maximumSize&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;150&lt;/width&gt;
+          &lt;height&gt;16777215&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;1&quot; column=&quot;3&quot;&gt;
+       &lt;widget class=&quot;QLabel&quot; name=&quot;label10&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Fixed&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;text&quot;&gt;
+         &lt;string&gt;Serie:&lt;/string&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;alignment&quot;&gt;
+         &lt;set&gt;Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter&lt;/set&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;buddy&quot;&gt;
+         &lt;cstring&gt;mui_codigoserie_factura&lt;/cstring&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;1&quot; column=&quot;4&quot;&gt;
+       &lt;widget class=&quot;BfBuscarSerieFactura&quot; name=&quot;mui_codigoserie_factura&quot;&gt;
+        &lt;property name=&quot;minimumSize&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;150&lt;/width&gt;
+          &lt;height&gt;0&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;1&quot; column=&quot;5&quot;&gt;
+       &lt;widget class=&quot;QLabel&quot; name=&quot;label6&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Fixed&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;text&quot;&gt;
+         &lt;string&gt;N&amp;umero de factura:&lt;/string&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;buddy&quot;&gt;
+         &lt;cstring&gt;mui_numfactura&lt;/cstring&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;1&quot; column=&quot;6&quot;&gt;
+       &lt;widget class=&quot;QLineEdit&quot; name=&quot;mui_numfactura&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Preferred&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;minimumSize&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;150&lt;/width&gt;
+          &lt;height&gt;0&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;maximumSize&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;150&lt;/width&gt;
+          &lt;height&gt;16777215&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;2&quot; column=&quot;0&quot; rowspan=&quot;3&quot; colspan=&quot;5&quot;&gt;
+       &lt;widget class=&quot;BlSearchWidget&quot; name=&quot;mui_idcliente&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Ignored&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;2&quot; column=&quot;5&quot;&gt;
+       &lt;widget class=&quot;QLabel&quot; name=&quot;label8_2&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Fixed&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;text&quot;&gt;
+         &lt;string&gt;Fecha de creacion:&lt;/string&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;alignment&quot;&gt;
+         &lt;set&gt;Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter&lt;/set&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;buddy&quot;&gt;
+         &lt;cstring&gt;mui_ffactura&lt;/cstring&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;2&quot; column=&quot;6&quot;&gt;
+       &lt;widget class=&quot;BlDateSearch&quot; name=&quot;mui_ffactura&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Fixed&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;minimumSize&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;150&lt;/width&gt;
+          &lt;height&gt;0&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;maximumSize&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;150&lt;/width&gt;
+          &lt;height&gt;16777215&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;3&quot; column=&quot;5&quot;&gt;
+       &lt;widget class=&quot;QLabel&quot; name=&quot;label11&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Fixed&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;text&quot;&gt;
+         &lt;string&gt;Forma de pago:&lt;/string&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;alignment&quot;&gt;
+         &lt;set&gt;Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter&lt;/set&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;buddy&quot;&gt;
+         &lt;cstring&gt;mui_idforma_pago&lt;/cstring&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;3&quot; column=&quot;6&quot;&gt;
+       &lt;widget class=&quot;BfBuscarFormaPago&quot; name=&quot;mui_idforma_pago&quot;&gt;
+        &lt;property name=&quot;minimumSize&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;150&lt;/width&gt;
+          &lt;height&gt;0&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;maximumSize&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;150&lt;/width&gt;
+          &lt;height&gt;16777215&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;4&quot; column=&quot;5&quot;&gt;
+       &lt;widget class=&quot;QLabel&quot; name=&quot;mui_labelAlmacen&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Fixed&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;text&quot;&gt;
+         &lt;string&gt;Almacen:&lt;/string&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;alignment&quot;&gt;
+         &lt;set&gt;Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter&lt;/set&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;buddy&quot;&gt;
+         &lt;cstring&gt;mui_idalmacen&lt;/cstring&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;4&quot; column=&quot;6&quot;&gt;
+       &lt;widget class=&quot;BfBuscarAlmacen&quot; name=&quot;mui_idalmacen&quot;/&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;1&quot; column=&quot;2&quot;&gt;
+       &lt;spacer name=&quot;horizontalSpacer&quot;&gt;
+        &lt;property name=&quot;orientation&quot;&gt;
+         &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;40&lt;/width&gt;
+          &lt;height&gt;20&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+       &lt;/spacer&gt;
+      &lt;/item&gt;
+     &lt;/layout&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;2&quot; column=&quot;0&quot; colspan=&quot;6&quot;&gt;
+    &lt;widget class=&quot;QTabWidget&quot; name=&quot;discounts&quot;&gt;
+     &lt;property name=&quot;sizePolicy&quot;&gt;
+      &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Expanding&quot;&gt;
+       &lt;horstretch&gt;0&lt;/horstretch&gt;
+       &lt;verstretch&gt;0&lt;/verstretch&gt;
+      &lt;/sizepolicy&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;currentIndex&quot;&gt;
+      &lt;number&gt;0&lt;/number&gt;
+     &lt;/property&gt;
+     &lt;widget class=&quot;QWidget&quot; name=&quot;tab1&quot;&gt;
+      &lt;attribute name=&quot;title&quot;&gt;
+       &lt;string&gt;&amp;Detalle&lt;/string&gt;
+      &lt;/attribute&gt;
+      &lt;layout class=&quot;QGridLayout&quot;&gt;
+       &lt;property name=&quot;margin&quot;&gt;
+        &lt;number&gt;4&lt;/number&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;spacing&quot;&gt;
+        &lt;number&gt;4&lt;/number&gt;
+       &lt;/property&gt;
+       &lt;item row=&quot;0&quot; column=&quot;0&quot;&gt;
+        &lt;widget class=&quot;BfClienteFacturaIVAIncSubForm&quot; name=&quot;subform2&quot; native=&quot;true&quot;/&gt;
+       &lt;/item&gt;
+      &lt;/layout&gt;
+     &lt;/widget&gt;
+     &lt;widget class=&quot;QWidget&quot; name=&quot;Tab2&quot;&gt;
+      &lt;attribute name=&quot;title&quot;&gt;
+       &lt;string&gt;Descuen&amp;tos&lt;/string&gt;
+      &lt;/attribute&gt;
+      &lt;layout class=&quot;QVBoxLayout&quot;&gt;
+       &lt;property name=&quot;spacing&quot;&gt;
+        &lt;number&gt;4&lt;/number&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;margin&quot;&gt;
+        &lt;number&gt;4&lt;/number&gt;
+       &lt;/property&gt;
+       &lt;item&gt;
+        &lt;widget class=&quot;BfClienteFacturaIVAIncDescuentoSubForm&quot; name=&quot;m_descuentos&quot; native=&quot;true&quot;/&gt;
+       &lt;/item&gt;
+      &lt;/layout&gt;
+     &lt;/widget&gt;
+     &lt;widget class=&quot;QWidget&quot; name=&quot;tab3&quot;&gt;
+      &lt;attribute name=&quot;title&quot;&gt;
+       &lt;string&gt;Comentario&amp;s&lt;/string&gt;
+      &lt;/attribute&gt;
+      &lt;layout class=&quot;QGridLayout&quot;&gt;
+       &lt;property name=&quot;margin&quot;&gt;
+        &lt;number&gt;4&lt;/number&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;spacing&quot;&gt;
+        &lt;number&gt;4&lt;/number&gt;
+       &lt;/property&gt;
+       &lt;item row=&quot;0&quot; column=&quot;0&quot;&gt;
+        &lt;widget class=&quot;QLabel&quot; name=&quot;label8&quot;&gt;
+         &lt;property name=&quot;text&quot;&gt;
+          &lt;string&gt;Comentarios publicos:&lt;/string&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;0&quot; column=&quot;1&quot;&gt;
+        &lt;widget class=&quot;QLabel&quot; name=&quot;label9&quot;&gt;
+         &lt;property name=&quot;text&quot;&gt;
+          &lt;string&gt;Comentarios privados:&lt;/string&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;1&quot; column=&quot;1&quot;&gt;
+        &lt;widget class=&quot;QTextEdit&quot; name=&quot;mui_comentprivfactura&quot;&gt;
+         &lt;property name=&quot;sizePolicy&quot;&gt;
+          &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Expanding&quot;&gt;
+           &lt;horstretch&gt;0&lt;/horstretch&gt;
+           &lt;verstretch&gt;0&lt;/verstretch&gt;
+          &lt;/sizepolicy&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;1&quot; column=&quot;0&quot;&gt;
+        &lt;widget class=&quot;QTextEdit&quot; name=&quot;mui_comentfactura&quot;&gt;
+         &lt;property name=&quot;sizePolicy&quot;&gt;
+          &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Expanding&quot;&gt;
+           &lt;horstretch&gt;0&lt;/horstretch&gt;
+           &lt;verstretch&gt;0&lt;/verstretch&gt;
+          &lt;/sizepolicy&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+      &lt;/layout&gt;
+     &lt;/widget&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;3&quot; column=&quot;0&quot;&gt;
+    &lt;widget class=&quot;QLabel&quot; name=&quot;label3&quot;&gt;
+     &lt;property name=&quot;sizePolicy&quot;&gt;
+      &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Preferred&quot;&gt;
+       &lt;horstretch&gt;0&lt;/horstretch&gt;
+       &lt;verstretch&gt;0&lt;/verstretch&gt;
+      &lt;/sizepolicy&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;0&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;maximumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;16777215&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;text&quot;&gt;
+      &lt;string&gt;Descuentos:&lt;/string&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;alignment&quot;&gt;
+      &lt;set&gt;Qt::AlignCenter&lt;/set&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;3&quot; column=&quot;1&quot;&gt;
+    &lt;widget class=&quot;QLabel&quot; name=&quot;label2&quot;&gt;
+     &lt;property name=&quot;sizePolicy&quot;&gt;
+      &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Preferred&quot;&gt;
+       &lt;horstretch&gt;0&lt;/horstretch&gt;
+       &lt;verstretch&gt;0&lt;/verstretch&gt;
+      &lt;/sizepolicy&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;0&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;maximumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;16777215&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;text&quot;&gt;
+      &lt;string&gt;Base imponible:&lt;/string&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;alignment&quot;&gt;
+      &lt;set&gt;Qt::AlignCenter&lt;/set&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;3&quot; column=&quot;2&quot;&gt;
+    &lt;widget class=&quot;QLabel&quot; name=&quot;label4_3&quot;&gt;
+     &lt;property name=&quot;sizePolicy&quot;&gt;
+      &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Preferred&quot;&gt;
+       &lt;horstretch&gt;0&lt;/horstretch&gt;
+       &lt;verstretch&gt;0&lt;/verstretch&gt;
+      &lt;/sizepolicy&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;0&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;maximumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;16777215&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;text&quot;&gt;
+      &lt;string&gt;I.R.P.F.:&lt;/string&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;alignment&quot;&gt;
+      &lt;set&gt;Qt::AlignCenter&lt;/set&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;3&quot; column=&quot;3&quot;&gt;
+    &lt;widget class=&quot;QLabel&quot; name=&quot;label4&quot;&gt;
+     &lt;property name=&quot;sizePolicy&quot;&gt;
+      &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Preferred&quot;&gt;
+       &lt;horstretch&gt;0&lt;/horstretch&gt;
+       &lt;verstretch&gt;0&lt;/verstretch&gt;
+      &lt;/sizepolicy&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;0&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;maximumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;16777215&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;text&quot;&gt;
+      &lt;string&gt;Impuestos:&lt;/string&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;alignment&quot;&gt;
+      &lt;set&gt;Qt::AlignCenter&lt;/set&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;3&quot; column=&quot;4&quot;&gt;
+    &lt;widget class=&quot;QLabel&quot; name=&quot;label4_2&quot;&gt;
+     &lt;property name=&quot;sizePolicy&quot;&gt;
+      &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Preferred&quot;&gt;
+       &lt;horstretch&gt;0&lt;/horstretch&gt;
+       &lt;verstretch&gt;0&lt;/verstretch&gt;
+      &lt;/sizepolicy&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;0&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;maximumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;16777215&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;text&quot;&gt;
+      &lt;string&gt;R.E.:&lt;/string&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;alignment&quot;&gt;
+      &lt;set&gt;Qt::AlignCenter&lt;/set&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;3&quot; column=&quot;5&quot;&gt;
+    &lt;widget class=&quot;QLabel&quot; name=&quot;label1&quot;&gt;
+     &lt;property name=&quot;sizePolicy&quot;&gt;
+      &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Fixed&quot;&gt;
+       &lt;horstretch&gt;0&lt;/horstretch&gt;
+       &lt;verstretch&gt;0&lt;/verstretch&gt;
+      &lt;/sizepolicy&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;0&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;text&quot;&gt;
+      &lt;string&gt;Total:&lt;/string&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;alignment&quot;&gt;
+      &lt;set&gt;Qt::AlignCenter&lt;/set&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;4&quot; column=&quot;0&quot;&gt;
+    &lt;widget class=&quot;QLineEdit&quot; name=&quot;m_totalDiscounts&quot;&gt;
+     &lt;property name=&quot;enabled&quot;&gt;
+      &lt;bool&gt;true&lt;/bool&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;0&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;maximumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;16777215&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;palette&quot;&gt;
+      &lt;palette&gt;
+       &lt;active&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;238&lt;/red&gt;
+           &lt;green&gt;238&lt;/green&gt;
+           &lt;blue&gt;238&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/active&gt;
+       &lt;inactive&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;238&lt;/red&gt;
+           &lt;green&gt;238&lt;/green&gt;
+           &lt;blue&gt;238&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/inactive&gt;
+       &lt;disabled&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;255&lt;/red&gt;
+           &lt;green&gt;255&lt;/green&gt;
+           &lt;blue&gt;255&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/disabled&gt;
+      &lt;/palette&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;font&quot;&gt;
+      &lt;font&gt;
+       &lt;family&gt;Sans Serif&lt;/family&gt;
+       &lt;pointsize&gt;12&lt;/pointsize&gt;
+       &lt;weight&gt;75&lt;/weight&gt;
+       &lt;italic&gt;false&lt;/italic&gt;
+       &lt;bold&gt;true&lt;/bold&gt;
+       &lt;underline&gt;false&lt;/underline&gt;
+       &lt;strikeout&gt;false&lt;/strikeout&gt;
+      &lt;/font&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;focusPolicy&quot;&gt;
+      &lt;enum&gt;Qt::NoFocus&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;acceptDrops&quot;&gt;
+      &lt;bool&gt;false&lt;/bool&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;text&quot;&gt;
+      &lt;string&gt;0.00&lt;/string&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;alignment&quot;&gt;
+      &lt;set&gt;Qt::AlignRight&lt;/set&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;readOnly&quot;&gt;
+      &lt;bool&gt;true&lt;/bool&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;4&quot; column=&quot;1&quot;&gt;
+    &lt;widget class=&quot;QLineEdit&quot; name=&quot;m_totalBases&quot;&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;0&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;maximumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;16777215&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;palette&quot;&gt;
+      &lt;palette&gt;
+       &lt;active&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;238&lt;/red&gt;
+           &lt;green&gt;238&lt;/green&gt;
+           &lt;blue&gt;238&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/active&gt;
+       &lt;inactive&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;238&lt;/red&gt;
+           &lt;green&gt;238&lt;/green&gt;
+           &lt;blue&gt;238&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/inactive&gt;
+       &lt;disabled&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;255&lt;/red&gt;
+           &lt;green&gt;255&lt;/green&gt;
+           &lt;blue&gt;255&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/disabled&gt;
+      &lt;/palette&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;font&quot;&gt;
+      &lt;font&gt;
+       &lt;family&gt;Sans Serif&lt;/family&gt;
+       &lt;pointsize&gt;12&lt;/pointsize&gt;
+       &lt;weight&gt;75&lt;/weight&gt;
+       &lt;italic&gt;false&lt;/italic&gt;
+       &lt;bold&gt;true&lt;/bold&gt;
+       &lt;underline&gt;false&lt;/underline&gt;
+       &lt;strikeout&gt;false&lt;/strikeout&gt;
+      &lt;/font&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;focusPolicy&quot;&gt;
+      &lt;enum&gt;Qt::NoFocus&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;acceptDrops&quot;&gt;
+      &lt;bool&gt;false&lt;/bool&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;text&quot;&gt;
+      &lt;string&gt;0.00&lt;/string&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;alignment&quot;&gt;
+      &lt;set&gt;Qt::AlignRight&lt;/set&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;readOnly&quot;&gt;
+      &lt;bool&gt;true&lt;/bool&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;4&quot; column=&quot;2&quot;&gt;
+    &lt;widget class=&quot;QLineEdit&quot; name=&quot;m_totalIRPF&quot;&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;0&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;maximumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;16777215&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;palette&quot;&gt;
+      &lt;palette&gt;
+       &lt;active&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;238&lt;/red&gt;
+           &lt;green&gt;238&lt;/green&gt;
+           &lt;blue&gt;238&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/active&gt;
+       &lt;inactive&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;238&lt;/red&gt;
+           &lt;green&gt;238&lt;/green&gt;
+           &lt;blue&gt;238&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/inactive&gt;
+       &lt;disabled&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;255&lt;/red&gt;
+           &lt;green&gt;255&lt;/green&gt;
+           &lt;blue&gt;255&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/disabled&gt;
+      &lt;/palette&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;font&quot;&gt;
+      &lt;font&gt;
+       &lt;family&gt;Sans Serif&lt;/family&gt;
+       &lt;pointsize&gt;12&lt;/pointsize&gt;
+       &lt;weight&gt;75&lt;/weight&gt;
+       &lt;italic&gt;false&lt;/italic&gt;
+       &lt;bold&gt;true&lt;/bold&gt;
+       &lt;underline&gt;false&lt;/underline&gt;
+       &lt;strikeout&gt;false&lt;/strikeout&gt;
+      &lt;/font&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;focusPolicy&quot;&gt;
+      &lt;enum&gt;Qt::NoFocus&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;acceptDrops&quot;&gt;
+      &lt;bool&gt;false&lt;/bool&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;text&quot;&gt;
+      &lt;string&gt;0.00&lt;/string&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;alignment&quot;&gt;
+      &lt;set&gt;Qt::AlignRight&lt;/set&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;readOnly&quot;&gt;
+      &lt;bool&gt;true&lt;/bool&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;4&quot; column=&quot;3&quot;&gt;
+    &lt;widget class=&quot;QLineEdit&quot; name=&quot;m_totalTaxes&quot;&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;0&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;maximumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;16777215&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;palette&quot;&gt;
+      &lt;palette&gt;
+       &lt;active&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;238&lt;/red&gt;
+           &lt;green&gt;238&lt;/green&gt;
+           &lt;blue&gt;238&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/active&gt;
+       &lt;inactive&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;238&lt;/red&gt;
+           &lt;green&gt;238&lt;/green&gt;
+           &lt;blue&gt;238&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/inactive&gt;
+       &lt;disabled&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;255&lt;/red&gt;
+           &lt;green&gt;255&lt;/green&gt;
+           &lt;blue&gt;255&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/disabled&gt;
+      &lt;/palette&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;font&quot;&gt;
+      &lt;font&gt;
+       &lt;family&gt;Sans Serif&lt;/family&gt;
+       &lt;pointsize&gt;12&lt;/pointsize&gt;
+       &lt;weight&gt;75&lt;/weight&gt;
+       &lt;italic&gt;false&lt;/italic&gt;
+       &lt;bold&gt;true&lt;/bold&gt;
+       &lt;underline&gt;false&lt;/underline&gt;
+       &lt;strikeout&gt;false&lt;/strikeout&gt;
+      &lt;/font&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;focusPolicy&quot;&gt;
+      &lt;enum&gt;Qt::NoFocus&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;acceptDrops&quot;&gt;
+      &lt;bool&gt;false&lt;/bool&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;text&quot;&gt;
+      &lt;string&gt;0.00&lt;/string&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;alignment&quot;&gt;
+      &lt;set&gt;Qt::AlignRight&lt;/set&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;readOnly&quot;&gt;
+      &lt;bool&gt;true&lt;/bool&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;4&quot; column=&quot;4&quot;&gt;
+    &lt;widget class=&quot;QLineEdit&quot; name=&quot;m_totalReqEq&quot;&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;0&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;maximumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;16777215&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;palette&quot;&gt;
+      &lt;palette&gt;
+       &lt;active&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;238&lt;/red&gt;
+           &lt;green&gt;238&lt;/green&gt;
+           &lt;blue&gt;238&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/active&gt;
+       &lt;inactive&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;238&lt;/red&gt;
+           &lt;green&gt;238&lt;/green&gt;
+           &lt;blue&gt;238&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/inactive&gt;
+       &lt;disabled&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;255&lt;/red&gt;
+           &lt;green&gt;255&lt;/green&gt;
+           &lt;blue&gt;255&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/disabled&gt;
+      &lt;/palette&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;font&quot;&gt;
+      &lt;font&gt;
+       &lt;family&gt;Sans Serif&lt;/family&gt;
+       &lt;pointsize&gt;12&lt;/pointsize&gt;
+       &lt;weight&gt;75&lt;/weight&gt;
+       &lt;italic&gt;false&lt;/italic&gt;
+       &lt;bold&gt;true&lt;/bold&gt;
+       &lt;underline&gt;false&lt;/underline&gt;
+       &lt;strikeout&gt;false&lt;/strikeout&gt;
+      &lt;/font&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;focusPolicy&quot;&gt;
+      &lt;enum&gt;Qt::NoFocus&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;acceptDrops&quot;&gt;
+      &lt;bool&gt;false&lt;/bool&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;text&quot;&gt;
+      &lt;string&gt;0.00&lt;/string&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;alignment&quot;&gt;
+      &lt;set&gt;Qt::AlignRight&lt;/set&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;readOnly&quot;&gt;
+      &lt;bool&gt;true&lt;/bool&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;4&quot; column=&quot;5&quot;&gt;
+    &lt;widget class=&quot;QLineEdit&quot; name=&quot;m_totalfactura&quot;&gt;
+     &lt;property name=&quot;enabled&quot;&gt;
+      &lt;bool&gt;true&lt;/bool&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;100&lt;/width&gt;
+       &lt;height&gt;0&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;palette&quot;&gt;
+      &lt;palette&gt;
+       &lt;active&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;238&lt;/red&gt;
+           &lt;green&gt;238&lt;/green&gt;
+           &lt;blue&gt;238&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/active&gt;
+       &lt;inactive&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;238&lt;/red&gt;
+           &lt;green&gt;238&lt;/green&gt;
+           &lt;blue&gt;238&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/inactive&gt;
+       &lt;disabled&gt;
+        &lt;colorrole role=&quot;Base&quot;&gt;
+         &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+          &lt;color alpha=&quot;255&quot;&gt;
+           &lt;red&gt;255&lt;/red&gt;
+           &lt;green&gt;255&lt;/green&gt;
+           &lt;blue&gt;255&lt;/blue&gt;
+          &lt;/color&gt;
+         &lt;/brush&gt;
+        &lt;/colorrole&gt;
+       &lt;/disabled&gt;
+      &lt;/palette&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;font&quot;&gt;
+      &lt;font&gt;
+       &lt;family&gt;Sans Serif&lt;/family&gt;
+       &lt;pointsize&gt;12&lt;/pointsize&gt;
+       &lt;weight&gt;75&lt;/weight&gt;
+       &lt;italic&gt;false&lt;/italic&gt;
+       &lt;bold&gt;true&lt;/bold&gt;
+       &lt;underline&gt;false&lt;/underline&gt;
+       &lt;strikeout&gt;false&lt;/strikeout&gt;
+      &lt;/font&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;focusPolicy&quot;&gt;
+      &lt;enum&gt;Qt::NoFocus&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;acceptDrops&quot;&gt;
+      &lt;bool&gt;false&lt;/bool&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;autoFillBackground&quot;&gt;
+      &lt;bool&gt;true&lt;/bool&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;text&quot;&gt;
+      &lt;string&gt;0.00&lt;/string&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;frame&quot;&gt;
+      &lt;bool&gt;true&lt;/bool&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;alignment&quot;&gt;
+      &lt;set&gt;Qt::AlignRight&lt;/set&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;readOnly&quot;&gt;
+      &lt;bool&gt;true&lt;/bool&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;5&quot; column=&quot;0&quot; colspan=&quot;6&quot;&gt;
+    &lt;layout class=&quot;QHBoxLayout&quot;&gt;
+     &lt;property name=&quot;spacing&quot;&gt;
+      &lt;number&gt;4&lt;/number&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;margin&quot;&gt;
+      &lt;number&gt;0&lt;/number&gt;
+     &lt;/property&gt;
+     &lt;item&gt;
+      &lt;spacer&gt;
+       &lt;property name=&quot;orientation&quot;&gt;
+        &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+        &lt;size&gt;
+         &lt;width&gt;371&lt;/width&gt;
+         &lt;height&gt;27&lt;/height&gt;
+        &lt;/size&gt;
+       &lt;/property&gt;
+      &lt;/spacer&gt;
+     &lt;/item&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;QPushButton&quot; name=&quot;mui_aceptar&quot;&gt;
+       &lt;property name=&quot;text&quot;&gt;
+        &lt;string&gt;&amp;Aceptar&lt;/string&gt;
+       &lt;/property&gt;
+      &lt;/widget&gt;
+     &lt;/item&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;QPushButton&quot; name=&quot;mui_cancelar&quot;&gt;
+       &lt;property name=&quot;text&quot;&gt;
+        &lt;string&gt;&amp;Cancelar&lt;/string&gt;
+       &lt;/property&gt;
+      &lt;/widget&gt;
+     &lt;/item&gt;
+    &lt;/layout&gt;
+   &lt;/item&gt;
+  &lt;/layout&gt;
+ &lt;/widget&gt;
+ &lt;layoutdefault spacing=&quot;2&quot; margin=&quot;2&quot;/&gt;
+ &lt;customwidgets&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BfBuscarReferencia&lt;/class&gt;
+   &lt;extends&gt;QLineEdit&lt;/extends&gt;
+   &lt;header&gt;bfbuscarreferencia.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BfBuscarAlmacen&lt;/class&gt;
+   &lt;extends&gt;QComboBox&lt;/extends&gt;
+   &lt;header&gt;bfbuscaralmacen.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BfBuscarFormaPago&lt;/class&gt;
+   &lt;extends&gt;QComboBox&lt;/extends&gt;
+   &lt;header&gt;bfbuscarformapago.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BlDateSearch&lt;/class&gt;
+   &lt;extends&gt;QLineEdit&lt;/extends&gt;
+   &lt;header&gt;../../bulmalib/src/bldatesearch.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BfBuscarTrabajador&lt;/class&gt;
+   &lt;extends&gt;QComboBox&lt;/extends&gt;
+   &lt;header&gt;bfbuscartrabajador.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BlSearchWidget&lt;/class&gt;
+   &lt;extends&gt;QTextEdit&lt;/extends&gt;
+   &lt;header&gt;blsearchwidget.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BfClienteFacturaIVAIncSubForm&lt;/class&gt;
+   &lt;extends&gt;QWidget&lt;/extends&gt;
+   &lt;header&gt;bfclientefacturaivaincsubform.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BfClienteFacturaIVAIncDescuentoSubForm&lt;/class&gt;
+   &lt;extends&gt;QWidget&lt;/extends&gt;
+   &lt;header&gt;bfclientefacturaivaincdescuentosubform.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BfBuscarSerieFactura&lt;/class&gt;
+   &lt;extends&gt;QComboBox&lt;/extends&gt;
+   &lt;header&gt;bfbuscarseriefactura.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+ &lt;/customwidgets&gt;
+ &lt;resources&gt;
+  &lt;include location=&quot;../../../bulmages.qrc&quot;/&gt;
+ &lt;/resources&gt;
+ &lt;connections/&gt;
+&lt;/ui&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclientelist.cpp b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclientelist.cpp
new file mode 100644
index 0000000..7b00c4f
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclientelist.cpp
@@ -0,0 +1,457 @@
+/***************************************************************************
+ *   Copyright (C) 2005 by Tomeu Borras Riera                              *
+ *   <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>                                                  *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+
+#include &lt;QCheckBox&gt;
+#include &lt;QFile&gt;
+#include &lt;QMessageBox&gt;
+#include &lt;QTextStream&gt;
+
+#include &quot;facturaivaincclientelist.h&quot;
+#include &quot;facturaivaincclienteview.h&quot;
+#include &quot;blplugins.h&quot;
+#include &quot;bfcompany.h&quot;
+#include &quot;blfunctions.h&quot;
+
+
+///
+/**
+**/
+void FacturaIVAIncClienteListSubform::load()
+{
+    BL_FUNC_DEBUG
+    QString SQLQuery = &quot;SELECT * FROM factura&quot;;
+    BlSubForm::load ( SQLQuery );
+    
+}
+
+
+///
+/**
+\param query
+**/
+void FacturaIVAIncClienteListSubform::load ( QString query )
+{
+    BL_FUNC_DEBUG
+    BlSubForm::load ( query );
+    
+}
+
+
+///
+/**
+\param val
+**/
+void FacturaIVAIncClienteList::setidcliente ( QString val )
+{
+    BL_FUNC_DEBUG
+    m_cliente-&gt;setId ( val );
+    
+}
+
+
+///
+/**
+\return
+**/
+QString FacturaIVAIncClienteList::idfactura()
+{
+    BL_FUNC_DEBUG
+    
+    return mdb_idfactura;
+}
+
+
+///
+/**
+**/
+void FacturaIVAIncClienteList::crear()
+{
+    BL_FUNC_DEBUG
+    FacturaIVAIncClienteView *acv = new FacturaIVAIncClienteView ( ( BfCompany * ) mainCompany(), 0 );
+    mainCompany()-&gt;m_pWorkspace-&gt;addSubWindow ( acv );
+    acv-&gt;inicializar();
+    acv-&gt;pintar();
+    
+    /// Si se crea el nuevo factura desde la lista de facturaes de un cliente,
+    /// entonces se crea el factura para este cliente.
+    if (m_cliente-&gt;id() != &quot;&quot;) {
+	acv-&gt;mui_idcliente-&gt;setId( m_cliente-&gt;id() );
+    } // end if
+
+    acv-&gt;show();
+    acv-&gt;mui_descfactura-&gt;setFocus ( Qt::OtherFocusReason );
+    
+}
+
+
+/** Constructor de la clase sin inicializacion de company. Usando este
+    constructor no se olvide de usar setcompany para que la clase no de
+    excepciones.
+    El constructor crea la pantalla, la pone en editmodo por defecto y la mete
+    en el listado de ventanas.
+    Usando esta clase tampoco se inicializan bien los widgets que contiene.
+*/
+/**
+\param parent
+\param flag
+\param editmodo
+\return
+**/
+FacturaIVAIncClienteList::FacturaIVAIncClienteList ( QWidget *parent, Qt::WFlags flag, edmode editmodo )
+        : BlFormList ( NULL, parent, flag, editmodo )
+{
+    BL_FUNC_DEBUG
+    setupUi ( this );
+    /// Disparamos los plugins.
+    int res = g_plugins-&gt;run ( &quot;FacturaIVAIncClienteList_FacturaIVAIncClienteList&quot;, this );
+    if ( res != 0 )
+        return;
+    mdb_idfactura = &quot;&quot;;
+    setPlantilla( &quot;facturaivainc&quot; );
+    
+    setSubForm ( mui_list );
+    hideBusqueda();
+    iniciaForm();
+    /// Llamamos a los scripts
+    blScript(this);
+    
+}
+
+
+/** Constructor de la clase.
+    Inicializa toda la ventana y los widgets que esta contiene.
+    Hace una presentacion inicial de los facturaes de cliente.
+    Pone la pantalla en modo de edicion por defecto  a no ser que se especifique lo contrario.
+    Mete la ventana en el workspace.
+*/
+/**
+\param comp
+\param parent
+\param flag
+\param editmodo
+\return
+**/
+FacturaIVAIncClienteList::FacturaIVAIncClienteList ( BfCompany *comp, QWidget *parent, Qt::WFlags flag, edmode editmodo )
+        : BlFormList ( comp, parent, flag, editmodo )
+{
+    BL_FUNC_DEBUG
+    setupUi ( this );
+    /// Disparamos los plugins.
+    int res = g_plugins-&gt;run ( &quot;FacturaIVAIncClienteList_FacturaIVAIncClienteList&quot;, this );
+    if ( res != 0 )
+        return;
+    m_cliente-&gt;setMainCompany ( comp );
+    m_articulo-&gt;setMainCompany ( comp );
+    mui_list-&gt;setMainCompany ( comp );
+    setSubForm ( mui_list );
+    iniciaForm();
+
+    /// Establecemos los parametros de busqueda del Cliente
+    m_cliente-&gt;setLabel ( _ ( &quot;Cliente:&quot; ) );
+    m_cliente-&gt;setTableName ( &quot;cliente&quot; );
+    setPlantilla( &quot;facturaivainc&quot; );
+    m_cliente-&gt;m_valores[&quot;cifcliente&quot;] = &quot;&quot;;
+    m_cliente-&gt;m_valores[&quot;nomcliente&quot;] = &quot;&quot;;
+
+    /// Iniciamos el buscador de trabajadores.
+    m_idtrabajador-&gt;setMainCompany ( mainCompany() );
+    m_idtrabajador-&gt;setQuery ( &quot;SELECT * FROM trabajador ORDER BY apellidostrabajador, nomtrabajador&quot; );
+    m_idtrabajador-&gt;setTableName ( &quot;trabajador&quot; );
+    m_idtrabajador-&gt;setFieldId ( &quot;idtrabajador&quot; );
+    m_idtrabajador-&gt;m_valores[&quot;apellidostrabajador&quot;] = &quot;&quot;;
+    m_idtrabajador-&gt;m_valores[&quot;nomtrabajador&quot;] = &quot;&quot;;
+    m_idtrabajador-&gt;setAllowNull ( TRUE );
+    m_idtrabajador-&gt;setId(&quot;&quot;);
+    
+    /// Cargamos los filtros guardados.
+    cargaFiltrosXML();
+    
+    presentar();
+    mdb_idfactura = &quot;&quot;;
+    if ( editMode() )
+        mainCompany() -&gt;insertWindow ( windowTitle(), this );
+    hideBusqueda();
+    /// Hacemos el tratamiento de los permisos que desabilita botones en caso de no haber suficientes permisos.
+    trataPermisos ( &quot;factura&quot; );
+    /// Llamamos a los scripts
+    blScript(this);
+    
+}
+
+
+///
+/**
+\return
+**/
+void FacturaIVAIncClienteList::iniciaForm()
+{
+    BL_FUNC_DEBUG
+    /// Disparamos los plugins.
+    int res = g_plugins-&gt;run ( &quot;FacturaIVAIncClienteList_iniciaForm&quot;, this );
+    if ( res != 0 )
+        return;
+    mui_procesada-&gt;insertItem ( 0, _ ( &quot;Todos los facturaivaincs&quot; ) );
+    mui_procesada-&gt;insertItem ( 1, _ ( &quot;FacturaIVAIncs procesados&quot; ) );
+    mui_procesada-&gt;insertItem ( 2, _ ( &quot;FacturaIVAIncs no procesados&quot; ) );
+    mui_procesada-&gt;setCurrentIndex ( 2 );
+    
+}
+
+
+///
+/**
+\param comp
+**/
+void FacturaIVAIncClienteList::setMainCompany ( BfCompany *comp )
+{
+    BL_FUNC_DEBUG
+    BlMainCompanyPointer::setMainCompany ( comp );
+    m_cliente-&gt;setMainCompany ( comp );
+    m_articulo-&gt;setMainCompany ( comp );
+    mui_list-&gt;setMainCompany ( comp );
+    
+    
+    /// Iniciamos el buscador de trabajadores.
+    m_idtrabajador-&gt;setMainCompany ( mainCompany() );
+    m_idtrabajador-&gt;setQuery ( &quot;SELECT * FROM trabajador ORDER BY apellidostrabajador, nomtrabajador&quot; );
+    m_idtrabajador-&gt;setTableName ( &quot;trabajador&quot; );
+    m_idtrabajador-&gt;setFieldId ( &quot;idtrabajador&quot; );
+    m_idtrabajador-&gt;m_valores[&quot;apellidostrabajador&quot;] = &quot;&quot;;
+    m_idtrabajador-&gt;m_valores[&quot;nomtrabajador&quot;] = &quot;&quot;;
+    m_idtrabajador-&gt;setAllowNull ( TRUE );   
+    m_idtrabajador-&gt;setId(&quot;&quot;);
+    
+    
+}
+
+
+/** Destructor de la clase */
+/**
+**/
+FacturaIVAIncClienteList::~FacturaIVAIncClienteList()
+{
+    BL_FUNC_DEBUG
+    
+}
+
+
+/** Carga el listado de la base de datos y lo presenta.
+    Tambien carga el total y lo presenta.
+*/
+/**
+**/
+void FacturaIVAIncClienteList::presentar()
+{
+    BL_FUNC_DEBUG
+
+    mui_list-&gt;load ( &quot;SELECT *, totalfactura AS total, bimpfactura AS base, impfactura AS impuestos FROM factura LEFT JOIN  cliente ON factura.idcliente = cliente.idcliente LEFT JOIN almacen ON factura.idalmacen = almacen.idalmacen LEFT JOIN forma_pago ON factura.idforma_pago = forma_pago.idforma_pago WHERE 1 = 1 &quot; + generarFiltro() );
+
+    /// Hacemos el calculo del total.
+    BlDbRecordSet *cur = mainCompany() -&gt;loadQuery ( &quot;SELECT SUM(totalfactura) AS total FROM factura LEFT JOIN cliente ON factura.idcliente=cliente.idcliente LEFT JOIN almacen ON almacen.idalmacen = factura.idalmacen where 1 = 1 &quot; + generarFiltro() );
+    /// Esta consulta podria resultar NULA y debe tratarse el caso
+    if ( cur ) {
+        m_total-&gt;setText ( cur-&gt;value( &quot;total&quot; ) );
+        delete cur;
+    } // end if
+
+    
+}
+
+
+/**  Este metodo se activa cuando bien pulsando sobre el boton de editar
+     o bien haciendo doble click en el modo de edicion se desea invocar la accion
+     Editar el elemento si estamos en modo editmode o cerrar la ventana y emitir
+     un signal selected() si estamos en el modo selector.
+
+     Primero determina el idfactura seleccionado, luego crea la instancia de
+     la ventana de edicion FacturaIVAIncClienteView y lo mete en el workspace.
+     Por ultimo hace que dicha ventana carge de la base de datos el idfactura
+     seleccionado.
+*/
+/**
+\param row
+\return
+**/
+void FacturaIVAIncClienteList::editar ( int row )
+{
+    BL_FUNC_DEBUG
+    mdb_idfactura = mui_list-&gt;dbValue ( QString ( &quot;idfactura&quot; ), row );
+    if ( editMode() ) {
+        FacturaIVAIncClienteView * prov = new FacturaIVAIncClienteView ( ( BfCompany * ) mainCompany(), 0 );
+        if ( prov-&gt;load ( mdb_idfactura ) ) {
+            delete prov;
+            return;
+        } // end if
+        mainCompany() -&gt;m_pWorkspace-&gt;addSubWindow ( prov );
+        prov-&gt;show();
+    } else {
+        emit ( selected ( mdb_idfactura ) );
+    } // end if
+    
+}
+
+
+
+/** Responde a la pulsacion del boton borrar en el formulario.
+    Carga el elemento seleccionado e invoca a su metodo de borrar.
+*/
+/// \todo: Comprobar que se libera bien la memoria.
+/// \todo: Intentar que no se tenga que recargar todo el listado y que simplemente se borre la fila seleccionada.
+/**
+\return
+**/
+void FacturaIVAIncClienteList::remove()
+{
+    BL_FUNC_DEBUG
+    int a = mui_list-&gt;currentRow();
+    if ( a &lt; 0 ) {
+        blMsgInfo ( _ ( &quot;Debe seleccionar una linea&quot; ), this );
+        return;
+    } // end if
+    try {
+        mdb_idfactura = mui_list-&gt;dbValue ( QString ( &quot;idfactura&quot; ) );
+        if ( editMode() ) {
+            FacturaIVAIncClienteView * acv = new FacturaIVAIncClienteView ( ( BfCompany * ) mainCompany(), 0 );
+            if ( acv-&gt;load ( mdb_idfactura ) )
+                throw - 1;
+            acv-&gt;on_mui_borrar_clicked();
+            acv-&gt;close();
+        } // end if
+        presentar();
+    } catch ( ... ) {
+        blMsgInfo ( _ ( &quot;Error al borrar el factura a cliente&quot; ), this );
+    } // end try
+    
+}
+
+
+/** La impresion de listados es estandarizada por la clase BlDbRecord
+*/
+void FacturaIVAIncClienteList::imprimir()
+{
+    BL_FUNC_DEBUG
+    printPDF ( _ ( &quot;FacturaIVAInces a clientes&quot; ) );
+    
+}
+
+
+/** Este metodo ayuda a construir el query de filtrado construyendo la clausula
+    WHERE a partir de las opciones de filtrado.
+*/
+/**
+\return
+**/
+QString FacturaIVAIncClienteList::generarFiltro()
+{
+    /// Tratamiento de los filtros.
+    BL_FUNC_DEBUG
+    QString filtro = &quot;&quot;;
+
+    if ( m_filtro-&gt;text() != &quot;&quot; ) {
+        filtro = &quot; AND ( lower(descfactura) LIKE lower('%&quot; + m_filtro-&gt;text() + &quot;%') &quot;;
+        filtro += &quot; OR reffactura LIKE '&quot; + m_filtro-&gt;text() + &quot;%' &quot;;
+        filtro += &quot; OR lower(nomcliente) LIKE lower('%&quot; + m_filtro-&gt;text() + &quot;%')) &quot;;
+    } else {
+        filtro = &quot;&quot;;
+    } // end if
+
+    if ( m_cliente-&gt;id() != &quot;&quot; )
+        filtro += &quot; AND factura.idcliente='&quot; + m_cliente-&gt;id() + &quot;'&quot;;
+
+    if ( m_articulo-&gt;idarticulo() != &quot;&quot; )
+        filtro += &quot; AND idfactura IN (SELECT DISTINCT idfactura FROM lfactura WHERE idarticulo='&quot; + m_articulo-&gt;idarticulo() + &quot;')&quot;;
+
+    /// Tratamos los elementos procesados y no procesados.
+    if ( mui_procesada-&gt;currentIndex() == 1 ) {
+        /// Muestra solo las procesadas.
+        filtro += &quot; AND procesadafactura&quot;;
+    } else if ( mui_procesada-&gt;currentIndex() == 2 ) {
+        /// Muestra solo las NO procesadas.
+        filtro += &quot; AND NOT procesadafactura &quot;;
+    } // end if
+
+    if ( m_fechain-&gt;text() != &quot;&quot; )
+        filtro += &quot; AND fechafactura &gt;= '&quot; + m_fechain-&gt;text() + &quot;' &quot;;
+
+    if ( m_fechafin-&gt;text() != &quot;&quot; )
+        filtro += &quot; AND fechafactura &lt;= '&quot; + m_fechafin-&gt;text() + &quot;' &quot;;
+
+    if (m_idtrabajador-&gt;id() != &quot;&quot;) {
+	filtro += &quot; AND idtrabajador = &quot; + m_idtrabajador-&gt;id();
+    } // end if
+    
+    filtro += &quot; AND ticketfactura = TRUE&quot;;
+    
+    return ( filtro );
+}
+
+
+/// =============================================================================
+///                    SUBFORMULARIO
+/// =============================================================================
+/** Constructor del subformulario de facturas a cliente.
+    Configura el subformulario para que use la tabla factura.
+*/
+/**
+\param parent
+\return
+**/
+FacturaIVAIncClienteListSubform::FacturaIVAIncClienteListSubform ( QWidget *parent ) : BfSubForm ( parent )
+{
+    BL_FUNC_DEBUG
+
+    /// Disparamos los plugins.
+    int res = g_plugins-&gt;run ( &quot;FacturaIVAIncClienteListSubform_FacturaIVAIncClienteListSubform&quot;, this );
+    if ( res != 0 )
+        return;
+    setDbTableName ( &quot;factura&quot; );
+    setDbFieldId ( &quot;idfactura&quot; );
+    setFileConfig( &quot;facturaivainc&quot;);
+    addSubFormHeader ( &quot;reffactura&quot;, BlDbField::DbInt, BlDbField::DbNotNull | BlDbField::DbPrimaryKey, BlSubFormHeader::DbHideView | BlSubFormHeader::DbNoWrite, _ ( &quot;Referencia de factura&quot; ) );
+    addSubFormHeader ( &quot;codigoalmacen&quot;, BlDbField::DbVarChar, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;Codigo de almacen&quot; ) );
+    addSubFormHeader ( &quot;numfactura&quot;, BlDbField::DbInt, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;Numero de factura&quot; ) );
+    addSubFormHeader ( &quot;descfactura&quot;, BlDbField::DbVarChar, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;Descripcion&quot; ) );
+    addSubFormHeader ( &quot;fechafactura&quot;, BlDbField::DbDate, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;Fecha de factura&quot; ) );
+    addSubFormHeader ( &quot;nomcliente&quot;, BlDbField::DbVarChar, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;Nombre de cliente&quot; ) );
+    addSubFormHeader ( &quot;idforma_pago&quot;, BlDbField::DbInt, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;ID forma de pago&quot; ) );
+    addSubFormHeader ( &quot;descforma_pago&quot;, BlDbField::DbVarChar, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;Descripcion de forma de pago&quot; ) );
+    addSubFormHeader ( &quot;idtrabajador&quot;, BlDbField::DbInt, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;ID trabajador&quot; ) );
+    addSubFormHeader ( &quot;idcliente&quot;, BlDbField::DbInt, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;ID cliente&quot; ) );
+    addSubFormHeader ( &quot;idfactura&quot;, BlDbField::DbInt, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;ID factura&quot; ) );
+    addSubFormHeader ( &quot;comentfactura&quot;, BlDbField::DbVarChar, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;Comentarios del factura&quot; ) );
+    addSubFormHeader ( &quot;idalmacen&quot;, BlDbField::DbInt, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;ID almacen&quot; ) );
+    addSubFormHeader ( &quot;base&quot;, BlDbField::DbNumeric, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;Base imponible&quot; ) );
+    addSubFormHeader ( &quot;impuestos&quot;, BlDbField::DbNumeric, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;Impuestos&quot; ) );
+    addSubFormHeader ( &quot;total&quot;, BlDbField::DbNumeric, BlDbField::DbNoSave, BlSubFormHeader::DbNone | BlSubFormHeader::DbNoWrite, _ ( &quot;Total&quot; ) );
+    setInsert ( FALSE );
+    setDelete ( FALSE );
+    setSortingEnabled ( TRUE );
+    
+}
+
+
+///
+/**
+**/
+FacturaIVAIncClienteListSubform::~FacturaIVAIncClienteListSubform()
+{
+    BL_FUNC_DEBUG
+    
+}
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclientelist.h b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclientelist.h
new file mode 100644
index 0000000..558a6e8
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclientelist.h
@@ -0,0 +1,91 @@
+/***************************************************************************
+ *   Copyright (C) 2005 by Tomeu Borras Riera                              *
+ *   <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>                                                  *
+ *   <A HREF="http://www.iglues.org">http://www.iglues.org</A>                                                 *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+
+#ifndef CLIENTDELIVNOTESLIST_H
+#define CLIENTDELIVNOTESLIST_H
+
+#include &quot;bfbuscararticulo.h&quot;
+#include &quot;bfcompany.h&quot;
+#include &quot;bfsubform.h&quot;
+#include &quot;blformlist.h&quot;
+#include &quot;pdefs_pluginbf_clientefacturaivainc.h&quot;
+
+
+/// Subformulario de facturaes de clientes.
+/** Esta clase se encarga de implementar el subformulario de facturaes a clientes.
+    Es una clase derivada de BfSubForm, donde estan las funciones especificas de la facturacion.
+    que a su vez deriva de BlSubForm que tiene las funciones de subformularios.
+
+    La funcionalidad de esta clase es configurar el subformulario para que funcione
+    con la tabla de facturaes.
+
+    Reimplementa los metodos de cargar para producir el query adecuado.
+*/
+class PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT FacturaIVAIncClienteListSubform : public BfSubForm
+{
+    Q_OBJECT
+
+public:
+    FacturaIVAIncClienteListSubform ( QWidget *parent = 0 );
+    ~FacturaIVAIncClienteListSubform();
+
+public slots:
+    virtual void load();
+    virtual void load ( QString query );
+};
+
+
+#include &quot;ui_facturaivaincclientelistbase.h&quot;
+
+
+/** FacturaIVAInces a Clientes.
+    Esta clase representa la pantalla de facturaes a clientes.
+*/
+class PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT FacturaIVAIncClienteList : public BlFormList, public Ui_FacturaIVAIncClienteListBase
+{
+    Q_OBJECT
+
+private:
+    /// En el modo selector esta variable indica el elemento seleccionado.
+    QString mdb_idfactura;
+
+public:
+    FacturaIVAIncClienteList ( QWidget *parent = 0, Qt::WFlags flag = 0, edmode editmodo = BL_EDIT_MODE );
+    FacturaIVAIncClienteList ( BfCompany *, QWidget *parent = 0, Qt::WFlags flag = 0, edmode editmodo = BL_EDIT_MODE );
+    void setMainCompany ( BfCompany * );
+    ~FacturaIVAIncClienteList();
+    void presentar();
+    void imprimir();
+    void editar ( int );
+    void remove();
+    void crear();
+    void setidcliente ( QString val );
+    QString idfactura();
+    QString generarFiltro();
+    void iniciaForm();
+
+signals:
+    /// Estando en modo seleccion al seleccionar un elemento se emite esta se&ntilde;al.
+    void selected ( QString );
+};
+
+#endif
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclientelistbase.ui b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclientelistbase.ui
new file mode 100644
index 0000000..66c28c8
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclientelistbase.ui
@@ -0,0 +1,1173 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;ui version=&quot;4.0&quot;&gt;
+ &lt;author&gt;Tomeu Borras&lt;/author&gt;
+ &lt;class&gt;FacturaIVAIncClienteListBase&lt;/class&gt;
+ &lt;widget class=&quot;QWidget&quot; name=&quot;FacturaIVAIncClienteListBase&quot;&gt;
+  &lt;property name=&quot;enabled&quot;&gt;
+   &lt;bool&gt;true&lt;/bool&gt;
+  &lt;/property&gt;
+  &lt;property name=&quot;geometry&quot;&gt;
+   &lt;rect&gt;
+    &lt;x&gt;0&lt;/x&gt;
+    &lt;y&gt;0&lt;/y&gt;
+    &lt;width&gt;750&lt;/width&gt;
+    &lt;height&gt;550&lt;/height&gt;
+   &lt;/rect&gt;
+  &lt;/property&gt;
+  &lt;property name=&quot;minimumSize&quot;&gt;
+   &lt;size&gt;
+    &lt;width&gt;750&lt;/width&gt;
+    &lt;height&gt;550&lt;/height&gt;
+   &lt;/size&gt;
+  &lt;/property&gt;
+  &lt;property name=&quot;windowTitle&quot;&gt;
+   &lt;string&gt;Facturas a clientes (IVA inc)&lt;/string&gt;
+  &lt;/property&gt;
+  &lt;property name=&quot;windowIcon&quot;&gt;
+   &lt;iconset resource=&quot;../../../bulmages.qrc&quot;&gt;
+    &lt;normaloff&gt;:/Images/client-delivery-note-list.png&lt;/normaloff&gt;:/Images/client-delivery-note-list.png&lt;/iconset&gt;
+  &lt;/property&gt;
+  &lt;layout class=&quot;QGridLayout&quot;&gt;
+   &lt;property name=&quot;margin&quot;&gt;
+    &lt;number&gt;4&lt;/number&gt;
+   &lt;/property&gt;
+   &lt;property name=&quot;spacing&quot;&gt;
+    &lt;number&gt;4&lt;/number&gt;
+   &lt;/property&gt;
+   &lt;item row=&quot;1&quot; column=&quot;0&quot;&gt;
+    &lt;widget class=&quot;QFrame&quot; name=&quot;m_busqueda&quot;&gt;
+     &lt;property name=&quot;minimumSize&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;16&lt;/width&gt;
+       &lt;height&gt;185&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;frameShape&quot;&gt;
+      &lt;enum&gt;QFrame::StyledPanel&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;frameShadow&quot;&gt;
+      &lt;enum&gt;QFrame::Raised&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;layout class=&quot;QGridLayout&quot;&gt;
+      &lt;property name=&quot;margin&quot;&gt;
+       &lt;number&gt;4&lt;/number&gt;
+      &lt;/property&gt;
+      &lt;property name=&quot;spacing&quot;&gt;
+       &lt;number&gt;4&lt;/number&gt;
+      &lt;/property&gt;
+      &lt;item row=&quot;8&quot; column=&quot;0&quot;&gt;
+       &lt;spacer&gt;
+        &lt;property name=&quot;orientation&quot;&gt;
+         &lt;enum&gt;Qt::Vertical&lt;/enum&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;sizeType&quot;&gt;
+         &lt;enum&gt;QSizePolicy::Preferred&lt;/enum&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;201&lt;/width&gt;
+          &lt;height&gt;21&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+       &lt;/spacer&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;4&quot; column=&quot;0&quot;&gt;
+       &lt;widget class=&quot;QLabel&quot; name=&quot;label_2&quot;&gt;
+        &lt;property name=&quot;text&quot;&gt;
+         &lt;string&gt;Mostrar:&lt;/string&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;alignment&quot;&gt;
+         &lt;set&gt;Qt::AlignLeading|Qt::AlignLeft|Qt::AlignVCenter&lt;/set&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;0&quot; column=&quot;1&quot; rowspan=&quot;9&quot;&gt;
+       &lt;layout class=&quot;QVBoxLayout&quot;&gt;
+        &lt;property name=&quot;spacing&quot;&gt;
+         &lt;number&gt;4&lt;/number&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;margin&quot;&gt;
+         &lt;number&gt;0&lt;/number&gt;
+        &lt;/property&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;BfBuscarArticulo&quot; name=&quot;m_articulo&quot; native=&quot;true&quot;&gt;
+          &lt;property name=&quot;sizePolicy&quot;&gt;
+           &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Preferred&quot;&gt;
+            &lt;horstretch&gt;0&lt;/horstretch&gt;
+            &lt;verstretch&gt;0&lt;/verstretch&gt;
+           &lt;/sizepolicy&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;BlSearchWidget&quot; name=&quot;m_cliente&quot; native=&quot;true&quot;&gt;
+          &lt;property name=&quot;sizePolicy&quot;&gt;
+           &lt;sizepolicy hsizetype=&quot;Expanding&quot; vsizetype=&quot;Preferred&quot;&gt;
+            &lt;horstretch&gt;0&lt;/horstretch&gt;
+            &lt;verstretch&gt;0&lt;/verstretch&gt;
+           &lt;/sizepolicy&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;250&lt;/width&gt;
+            &lt;height&gt;0&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+       &lt;/layout&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;5&quot; column=&quot;0&quot;&gt;
+       &lt;widget class=&quot;QComboBox&quot; name=&quot;mui_procesada&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Fixed&quot; vsizetype=&quot;Preferred&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;minimumSize&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;200&lt;/width&gt;
+          &lt;height&gt;21&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;focusPolicy&quot;&gt;
+         &lt;enum&gt;Qt::StrongFocus&lt;/enum&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;frame&quot;&gt;
+         &lt;bool&gt;true&lt;/bool&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;0&quot; column=&quot;0&quot;&gt;
+       &lt;widget class=&quot;QLabel&quot; name=&quot;textLabel1_4&quot;&gt;
+        &lt;property name=&quot;text&quot;&gt;
+         &lt;string&gt;Fecha inicial:&lt;/string&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;2&quot; column=&quot;0&quot;&gt;
+       &lt;widget class=&quot;QLabel&quot; name=&quot;textLabel1_4_2&quot;&gt;
+        &lt;property name=&quot;text&quot;&gt;
+         &lt;string&gt;Fecha final:&lt;/string&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;3&quot; column=&quot;0&quot;&gt;
+       &lt;widget class=&quot;BlDateSearch&quot; name=&quot;m_fechafin&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Fixed&quot; vsizetype=&quot;Preferred&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;minimumSize&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;200&lt;/width&gt;
+          &lt;height&gt;21&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;1&quot; column=&quot;0&quot;&gt;
+       &lt;widget class=&quot;BlDateSearch&quot; name=&quot;m_fechain&quot;&gt;
+        &lt;property name=&quot;sizePolicy&quot;&gt;
+         &lt;sizepolicy hsizetype=&quot;Fixed&quot; vsizetype=&quot;Preferred&quot;&gt;
+          &lt;horstretch&gt;0&lt;/horstretch&gt;
+          &lt;verstretch&gt;0&lt;/verstretch&gt;
+         &lt;/sizepolicy&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;minimumSize&quot;&gt;
+         &lt;size&gt;
+          &lt;width&gt;200&lt;/width&gt;
+          &lt;height&gt;21&lt;/height&gt;
+         &lt;/size&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;7&quot; column=&quot;0&quot;&gt;
+       &lt;widget class=&quot;BlComboBox&quot; name=&quot;m_idtrabajador&quot;/&gt;
+      &lt;/item&gt;
+      &lt;item row=&quot;6&quot; column=&quot;0&quot;&gt;
+       &lt;widget class=&quot;QLabel&quot; name=&quot;label_3&quot;&gt;
+        &lt;property name=&quot;text&quot;&gt;
+         &lt;string&gt;Trabajador&lt;/string&gt;
+        &lt;/property&gt;
+       &lt;/widget&gt;
+      &lt;/item&gt;
+     &lt;/layout&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;2&quot; column=&quot;0&quot;&gt;
+    &lt;widget class=&quot;FacturaIVAIncClienteListSubform&quot; name=&quot;mui_list&quot;/&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;3&quot; column=&quot;0&quot;&gt;
+    &lt;layout class=&quot;QHBoxLayout&quot;&gt;
+     &lt;property name=&quot;spacing&quot;&gt;
+      &lt;number&gt;4&lt;/number&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;margin&quot;&gt;
+      &lt;number&gt;0&lt;/number&gt;
+     &lt;/property&gt;
+     &lt;item&gt;
+      &lt;spacer&gt;
+       &lt;property name=&quot;orientation&quot;&gt;
+        &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;sizeType&quot;&gt;
+        &lt;enum&gt;QSizePolicy::Expanding&lt;/enum&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+        &lt;size&gt;
+         &lt;width&gt;340&lt;/width&gt;
+         &lt;height&gt;21&lt;/height&gt;
+        &lt;/size&gt;
+       &lt;/property&gt;
+      &lt;/spacer&gt;
+     &lt;/item&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;QLabel&quot; name=&quot;textLabel1_3&quot;&gt;
+       &lt;property name=&quot;text&quot;&gt;
+        &lt;string&gt;Total: &lt;/string&gt;
+       &lt;/property&gt;
+      &lt;/widget&gt;
+     &lt;/item&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;QLineEdit&quot; name=&quot;m_total&quot;&gt;
+       &lt;property name=&quot;enabled&quot;&gt;
+        &lt;bool&gt;true&lt;/bool&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;sizePolicy&quot;&gt;
+        &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Fixed&quot;&gt;
+         &lt;horstretch&gt;0&lt;/horstretch&gt;
+         &lt;verstretch&gt;0&lt;/verstretch&gt;
+        &lt;/sizepolicy&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;minimumSize&quot;&gt;
+        &lt;size&gt;
+         &lt;width&gt;150&lt;/width&gt;
+         &lt;height&gt;0&lt;/height&gt;
+        &lt;/size&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;palette&quot;&gt;
+        &lt;palette&gt;
+         &lt;active&gt;
+          &lt;colorrole role=&quot;WindowText&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;0&lt;/red&gt;
+             &lt;green&gt;0&lt;/green&gt;
+             &lt;blue&gt;0&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Button&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;221&lt;/red&gt;
+             &lt;green&gt;223&lt;/green&gt;
+             &lt;blue&gt;228&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Light&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;255&lt;/red&gt;
+             &lt;green&gt;255&lt;/green&gt;
+             &lt;blue&gt;255&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Midlight&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;255&lt;/red&gt;
+             &lt;green&gt;255&lt;/green&gt;
+             &lt;blue&gt;255&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Dark&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;85&lt;/red&gt;
+             &lt;green&gt;85&lt;/green&gt;
+             &lt;blue&gt;85&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Mid&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;199&lt;/red&gt;
+             &lt;green&gt;199&lt;/green&gt;
+             &lt;blue&gt;199&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Text&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;0&lt;/red&gt;
+             &lt;green&gt;0&lt;/green&gt;
+             &lt;blue&gt;0&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;BrightText&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;255&lt;/red&gt;
+             &lt;green&gt;255&lt;/green&gt;
+             &lt;blue&gt;255&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;ButtonText&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;0&lt;/red&gt;
+             &lt;green&gt;0&lt;/green&gt;
+             &lt;blue&gt;0&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Base&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;239&lt;/red&gt;
+             &lt;green&gt;239&lt;/green&gt;
+             &lt;blue&gt;239&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Window&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;239&lt;/red&gt;
+             &lt;green&gt;239&lt;/green&gt;
+             &lt;blue&gt;239&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Shadow&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;0&lt;/red&gt;
+             &lt;green&gt;0&lt;/green&gt;
+             &lt;blue&gt;0&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Highlight&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;103&lt;/red&gt;
+             &lt;green&gt;141&lt;/green&gt;
+             &lt;blue&gt;178&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;HighlightedText&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;255&lt;/red&gt;
+             &lt;green&gt;255&lt;/green&gt;
+             &lt;blue&gt;255&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Link&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;0&lt;/red&gt;
+             &lt;green&gt;0&lt;/green&gt;
+             &lt;blue&gt;238&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;LinkVisited&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;82&lt;/red&gt;
+             &lt;green&gt;24&lt;/green&gt;
+             &lt;blue&gt;139&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;AlternateBase&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;232&lt;/red&gt;
+             &lt;green&gt;232&lt;/green&gt;
+             &lt;blue&gt;232&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+         &lt;/active&gt;
+         &lt;inactive&gt;
+          &lt;colorrole role=&quot;WindowText&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;0&lt;/red&gt;
+             &lt;green&gt;0&lt;/green&gt;
+             &lt;blue&gt;0&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Button&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;221&lt;/red&gt;
+             &lt;green&gt;223&lt;/green&gt;
+             &lt;blue&gt;228&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Light&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;255&lt;/red&gt;
+             &lt;green&gt;255&lt;/green&gt;
+             &lt;blue&gt;255&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Midlight&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;255&lt;/red&gt;
+             &lt;green&gt;255&lt;/green&gt;
+             &lt;blue&gt;255&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Dark&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;85&lt;/red&gt;
+             &lt;green&gt;85&lt;/green&gt;
+             &lt;blue&gt;85&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Mid&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;199&lt;/red&gt;
+             &lt;green&gt;199&lt;/green&gt;
+             &lt;blue&gt;199&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Text&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;0&lt;/red&gt;
+             &lt;green&gt;0&lt;/green&gt;
+             &lt;blue&gt;0&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;BrightText&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;255&lt;/red&gt;
+             &lt;green&gt;255&lt;/green&gt;
+             &lt;blue&gt;255&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;ButtonText&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;0&lt;/red&gt;
+             &lt;green&gt;0&lt;/green&gt;
+             &lt;blue&gt;0&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Base&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;239&lt;/red&gt;
+             &lt;green&gt;239&lt;/green&gt;
+             &lt;blue&gt;239&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Window&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;239&lt;/red&gt;
+             &lt;green&gt;239&lt;/green&gt;
+             &lt;blue&gt;239&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Shadow&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;0&lt;/red&gt;
+             &lt;green&gt;0&lt;/green&gt;
+             &lt;blue&gt;0&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Highlight&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;103&lt;/red&gt;
+             &lt;green&gt;141&lt;/green&gt;
+             &lt;blue&gt;178&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;HighlightedText&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;255&lt;/red&gt;
+             &lt;green&gt;255&lt;/green&gt;
+             &lt;blue&gt;255&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Link&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;0&lt;/red&gt;
+             &lt;green&gt;0&lt;/green&gt;
+             &lt;blue&gt;238&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;LinkVisited&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;82&lt;/red&gt;
+             &lt;green&gt;24&lt;/green&gt;
+             &lt;blue&gt;139&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;AlternateBase&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;232&lt;/red&gt;
+             &lt;green&gt;232&lt;/green&gt;
+             &lt;blue&gt;232&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+         &lt;/inactive&gt;
+         &lt;disabled&gt;
+          &lt;colorrole role=&quot;WindowText&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;128&lt;/red&gt;
+             &lt;green&gt;128&lt;/green&gt;
+             &lt;blue&gt;128&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Button&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;221&lt;/red&gt;
+             &lt;green&gt;223&lt;/green&gt;
+             &lt;blue&gt;228&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Light&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;255&lt;/red&gt;
+             &lt;green&gt;255&lt;/green&gt;
+             &lt;blue&gt;255&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Midlight&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;255&lt;/red&gt;
+             &lt;green&gt;255&lt;/green&gt;
+             &lt;blue&gt;255&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Dark&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;85&lt;/red&gt;
+             &lt;green&gt;85&lt;/green&gt;
+             &lt;blue&gt;85&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Mid&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;199&lt;/red&gt;
+             &lt;green&gt;199&lt;/green&gt;
+             &lt;blue&gt;199&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Text&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;199&lt;/red&gt;
+             &lt;green&gt;199&lt;/green&gt;
+             &lt;blue&gt;199&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;BrightText&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;255&lt;/red&gt;
+             &lt;green&gt;255&lt;/green&gt;
+             &lt;blue&gt;255&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;ButtonText&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;128&lt;/red&gt;
+             &lt;green&gt;128&lt;/green&gt;
+             &lt;blue&gt;128&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Base&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;239&lt;/red&gt;
+             &lt;green&gt;239&lt;/green&gt;
+             &lt;blue&gt;239&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Window&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;239&lt;/red&gt;
+             &lt;green&gt;239&lt;/green&gt;
+             &lt;blue&gt;239&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Shadow&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;0&lt;/red&gt;
+             &lt;green&gt;0&lt;/green&gt;
+             &lt;blue&gt;0&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Highlight&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;86&lt;/red&gt;
+             &lt;green&gt;117&lt;/green&gt;
+             &lt;blue&gt;148&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;HighlightedText&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;255&lt;/red&gt;
+             &lt;green&gt;255&lt;/green&gt;
+             &lt;blue&gt;255&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;Link&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;0&lt;/red&gt;
+             &lt;green&gt;0&lt;/green&gt;
+             &lt;blue&gt;238&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;LinkVisited&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;82&lt;/red&gt;
+             &lt;green&gt;24&lt;/green&gt;
+             &lt;blue&gt;139&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+          &lt;colorrole role=&quot;AlternateBase&quot;&gt;
+           &lt;brush brushstyle=&quot;SolidPattern&quot;&gt;
+            &lt;color alpha=&quot;255&quot;&gt;
+             &lt;red&gt;232&lt;/red&gt;
+             &lt;green&gt;232&lt;/green&gt;
+             &lt;blue&gt;232&lt;/blue&gt;
+            &lt;/color&gt;
+           &lt;/brush&gt;
+          &lt;/colorrole&gt;
+         &lt;/disabled&gt;
+        &lt;/palette&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;font&quot;&gt;
+        &lt;font&gt;
+         &lt;family&gt;Sans Serif&lt;/family&gt;
+         &lt;pointsize&gt;12&lt;/pointsize&gt;
+         &lt;weight&gt;75&lt;/weight&gt;
+         &lt;italic&gt;false&lt;/italic&gt;
+         &lt;bold&gt;true&lt;/bold&gt;
+         &lt;underline&gt;false&lt;/underline&gt;
+         &lt;strikeout&gt;false&lt;/strikeout&gt;
+        &lt;/font&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;alignment&quot;&gt;
+        &lt;set&gt;Qt::AlignRight&lt;/set&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;readOnly&quot;&gt;
+        &lt;bool&gt;true&lt;/bool&gt;
+       &lt;/property&gt;
+      &lt;/widget&gt;
+     &lt;/item&gt;
+    &lt;/layout&gt;
+   &lt;/item&gt;
+   &lt;item row=&quot;0&quot; column=&quot;0&quot;&gt;
+    &lt;layout class=&quot;QHBoxLayout&quot;&gt;
+     &lt;property name=&quot;spacing&quot;&gt;
+      &lt;number&gt;4&lt;/number&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;margin&quot;&gt;
+      &lt;number&gt;0&lt;/number&gt;
+     &lt;/property&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;QLabel&quot; name=&quot;label&quot;&gt;
+       &lt;property name=&quot;minimumSize&quot;&gt;
+        &lt;size&gt;
+         &lt;width&gt;48&lt;/width&gt;
+         &lt;height&gt;48&lt;/height&gt;
+        &lt;/size&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;maximumSize&quot;&gt;
+        &lt;size&gt;
+         &lt;width&gt;48&lt;/width&gt;
+         &lt;height&gt;48&lt;/height&gt;
+        &lt;/size&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;text&quot;&gt;
+        &lt;string/&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;pixmap&quot;&gt;
+        &lt;pixmap resource=&quot;../../../bulmages.qrc&quot;&gt;:/Images/client-delivery-note-list.png&lt;/pixmap&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;scaledContents&quot;&gt;
+        &lt;bool&gt;true&lt;/bool&gt;
+       &lt;/property&gt;
+      &lt;/widget&gt;
+     &lt;/item&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;QFrame&quot; name=&quot;m_botonera&quot;&gt;
+       &lt;property name=&quot;frameShape&quot;&gt;
+        &lt;enum&gt;QFrame::StyledPanel&lt;/enum&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;frameShadow&quot;&gt;
+        &lt;enum&gt;QFrame::Raised&lt;/enum&gt;
+       &lt;/property&gt;
+       &lt;layout class=&quot;QHBoxLayout&quot;&gt;
+        &lt;property name=&quot;spacing&quot;&gt;
+         &lt;number&gt;4&lt;/number&gt;
+        &lt;/property&gt;
+        &lt;property name=&quot;margin&quot;&gt;
+         &lt;number&gt;4&lt;/number&gt;
+        &lt;/property&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QToolButton&quot; name=&quot;mui_crear&quot;&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;maximumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;toolTip&quot;&gt;
+           &lt;string&gt;Nuevo facturaivainc&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;whatsThis&quot;&gt;
+           &lt;string&gt;Nuevo facturaivainc&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string/&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;icon&quot;&gt;
+           &lt;iconset resource=&quot;../../../bulmages.qrc&quot;&gt;
+            &lt;normaloff&gt;:/Images/document-new.png&lt;/normaloff&gt;:/Images/document-new.png&lt;/iconset&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;iconSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;22&lt;/width&gt;
+            &lt;height&gt;22&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;shortcut&quot;&gt;
+           &lt;string&gt;Ctrl+N&lt;/string&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QToolButton&quot; name=&quot;mui_editar&quot;&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;maximumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;toolTip&quot;&gt;
+           &lt;string&gt;Editar facturaivainc&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;whatsThis&quot;&gt;
+           &lt;string&gt;Editar facturaivainc&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string/&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;icon&quot;&gt;
+           &lt;iconset resource=&quot;../../../bulmages.qrc&quot;&gt;
+            &lt;normaloff&gt;:/Images/document-open.png&lt;/normaloff&gt;:/Images/document-open.png&lt;/iconset&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;iconSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;22&lt;/width&gt;
+            &lt;height&gt;22&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;shortcut&quot;&gt;
+           &lt;string&gt;Ctrl+E&lt;/string&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QToolButton&quot; name=&quot;mui_borrar&quot;&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;maximumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;toolTip&quot;&gt;
+           &lt;string&gt;Borrar facturaivainc&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;whatsThis&quot;&gt;
+           &lt;string&gt;Borrar facturaivainc&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string/&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;icon&quot;&gt;
+           &lt;iconset resource=&quot;../../../bulmages.qrc&quot;&gt;
+            &lt;normaloff&gt;:/Images/edit-delete.png&lt;/normaloff&gt;:/Images/edit-delete.png&lt;/iconset&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;iconSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;22&lt;/width&gt;
+            &lt;height&gt;22&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;shortcut&quot;&gt;
+           &lt;string&gt;Ctrl+D&lt;/string&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QToolButton&quot; name=&quot;mui_imprimir&quot;&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;maximumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;toolTip&quot;&gt;
+           &lt;string&gt;Imprimir listado&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;whatsThis&quot;&gt;
+           &lt;string&gt;Imprimir listado&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string/&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;icon&quot;&gt;
+           &lt;iconset resource=&quot;../../../bulmages.qrc&quot;&gt;
+            &lt;normaloff&gt;:/Images/document-print.png&lt;/normaloff&gt;:/Images/document-print.png&lt;/iconset&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;iconSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;22&lt;/width&gt;
+            &lt;height&gt;22&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;shortcut&quot;&gt;
+           &lt;string&gt;Ctrl+P&lt;/string&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QToolButton&quot; name=&quot;mui_filtrar&quot;&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;maximumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;toolTip&quot;&gt;
+           &lt;string&gt;Filtrar facturaivaincs&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;whatsThis&quot;&gt;
+           &lt;string&gt;Filtrar facturaivaincs&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string/&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;icon&quot;&gt;
+           &lt;iconset resource=&quot;../../../bulmages.qrc&quot;&gt;
+            &lt;normaloff&gt;:/Images/edit-find.png&lt;/normaloff&gt;:/Images/edit-find.png&lt;/iconset&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;iconSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;22&lt;/width&gt;
+            &lt;height&gt;22&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;shortcut&quot;&gt;
+           &lt;string&gt;Ctrl+F&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;checkable&quot;&gt;
+           &lt;bool&gt;true&lt;/bool&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;checked&quot;&gt;
+           &lt;bool&gt;false&lt;/bool&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QToolButton&quot; name=&quot;mui_configurar&quot;&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;maximumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;toolTip&quot;&gt;
+           &lt;string&gt;Configurar listado&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;whatsThis&quot;&gt;
+           &lt;string&gt;Configurar listado&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string/&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;icon&quot;&gt;
+           &lt;iconset resource=&quot;../../../bulmages.qrc&quot;&gt;
+            &lt;normaloff&gt;:/Images/document-properties.png&lt;/normaloff&gt;:/Images/document-properties.png&lt;/iconset&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;iconSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;22&lt;/width&gt;
+            &lt;height&gt;22&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;shortcut&quot;&gt;
+           &lt;string&gt;Ctrl+B&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;checkable&quot;&gt;
+           &lt;bool&gt;true&lt;/bool&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QToolButton&quot; name=&quot;mui_actualizar&quot;&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;maximumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;32&lt;/width&gt;
+            &lt;height&gt;32&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;toolTip&quot;&gt;
+           &lt;string&gt;Actualizar listado&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;whatsThis&quot;&gt;
+           &lt;string&gt;Actualizar listado&lt;/string&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string/&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;icon&quot;&gt;
+           &lt;iconset resource=&quot;../../../bulmages.qrc&quot;&gt;
+            &lt;normaloff&gt;:/Images/view-refresh.png&lt;/normaloff&gt;:/Images/view-refresh.png&lt;/iconset&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;iconSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;22&lt;/width&gt;
+            &lt;height&gt;22&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;shortcut&quot;&gt;
+           &lt;string&gt;F5&lt;/string&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QFrame&quot; name=&quot;mui_plugbotones&quot;&gt;
+          &lt;property name=&quot;sizePolicy&quot;&gt;
+           &lt;sizepolicy hsizetype=&quot;Minimum&quot; vsizetype=&quot;Preferred&quot;&gt;
+            &lt;horstretch&gt;0&lt;/horstretch&gt;
+            &lt;verstretch&gt;0&lt;/verstretch&gt;
+           &lt;/sizepolicy&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;frameShape&quot;&gt;
+           &lt;enum&gt;QFrame::NoFrame&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;frameShadow&quot;&gt;
+           &lt;enum&gt;QFrame::Plain&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;lineWidth&quot;&gt;
+           &lt;number&gt;0&lt;/number&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;spacer&gt;
+          &lt;property name=&quot;orientation&quot;&gt;
+           &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;sizeType&quot;&gt;
+           &lt;enum&gt;QSizePolicy::Expanding&lt;/enum&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;101&lt;/width&gt;
+            &lt;height&gt;34&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+         &lt;/spacer&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QLabel&quot; name=&quot;textLabel1&quot;&gt;
+          &lt;property name=&quot;text&quot;&gt;
+           &lt;string&gt;Buscar:&lt;/string&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+        &lt;item&gt;
+         &lt;widget class=&quot;QLineEdit&quot; name=&quot;m_filtro&quot;&gt;
+          &lt;property name=&quot;minimumSize&quot;&gt;
+           &lt;size&gt;
+            &lt;width&gt;150&lt;/width&gt;
+            &lt;height&gt;0&lt;/height&gt;
+           &lt;/size&gt;
+          &lt;/property&gt;
+         &lt;/widget&gt;
+        &lt;/item&gt;
+       &lt;/layout&gt;
+      &lt;/widget&gt;
+     &lt;/item&gt;
+    &lt;/layout&gt;
+   &lt;/item&gt;
+  &lt;/layout&gt;
+ &lt;/widget&gt;
+ &lt;layoutdefault spacing=&quot;3&quot; margin=&quot;5&quot;/&gt;
+ &lt;customwidgets&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BlDateSearch&lt;/class&gt;
+   &lt;extends&gt;QLineEdit&lt;/extends&gt;
+   &lt;header&gt;../../bulmalib/src/bldatesearch.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BfBuscarArticulo&lt;/class&gt;
+   &lt;extends&gt;QWidget&lt;/extends&gt;
+   &lt;header&gt;bfbuscararticulo.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;FacturaIVAIncClienteListSubform&lt;/class&gt;
+   &lt;extends&gt;QTableWidget&lt;/extends&gt;
+   &lt;header&gt;facturaivaincclientelist.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BlSearchWidget&lt;/class&gt;
+   &lt;extends&gt;QWidget&lt;/extends&gt;
+   &lt;header&gt;blsearchwidget.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BlComboBox&lt;/class&gt;
+   &lt;extends&gt;QComboBox&lt;/extends&gt;
+   &lt;header&gt;blcombobox.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+ &lt;/customwidgets&gt;
+ &lt;resources&gt;
+  &lt;include location=&quot;../../../bulmages.qrc&quot;/&gt;
+ &lt;/resources&gt;
+ &lt;connections&gt;
+  &lt;connection&gt;
+   &lt;sender&gt;mui_filtrar&lt;/sender&gt;
+   &lt;signal&gt;toggled(bool)&lt;/signal&gt;
+   &lt;receiver&gt;m_busqueda&lt;/receiver&gt;
+   &lt;slot&gt;setShown(bool)&lt;/slot&gt;
+   &lt;hints&gt;
+    &lt;hint type=&quot;sourcelabel&quot;&gt;
+     &lt;x&gt;236&lt;/x&gt;
+     &lt;y&gt;40&lt;/y&gt;
+    &lt;/hint&gt;
+    &lt;hint type=&quot;destinationlabel&quot;&gt;
+     &lt;x&gt;229&lt;/x&gt;
+     &lt;y&gt;66&lt;/y&gt;
+    &lt;/hint&gt;
+   &lt;/hints&gt;
+  &lt;/connection&gt;
+ &lt;/connections&gt;
+&lt;/ui&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.cpp b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.cpp
new file mode 100644
index 0000000..c3d02ba
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.cpp
@@ -0,0 +1,413 @@
+/***************************************************************************
+ *   Copyright (C) 2005 by Alvaro de Miguel                                *
+ *   <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">alvaro.demiguel en gmail.com</A>                                             *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+
+#include &lt;QCloseEvent&gt;
+#include &lt;QComboBox&gt;
+#include &lt;QLabel&gt;
+#include &lt;QLineEdit&gt;
+#include &lt;QMessageBox&gt;
+#include &lt;QObject&gt;
+#include &lt;QToolButton&gt;
+#include &lt;QCheckBox&gt;
+
+#include &quot;bldialogchanges.h&quot;
+#include &quot;blfixed.h&quot;
+#include &quot;bldatesearch.h&quot;
+#include &quot;bfbuscarformapago.h&quot;
+#include &quot;bfbuscaralmacen.h&quot;
+#include &quot;bfbuscartrabajador.h&quot;
+#include &quot;facturaivaincclienteview.h&quot;
+#include &quot;clientslist.h&quot;
+#include &quot;bfcompany.h&quot;
+#include &quot;blconfiguration.h&quot;
+#include &quot;blfunctions.h&quot;
+#include &quot;bfinformereferencia.h&quot;
+#include &quot;bfclientefacturaivaincdescuentosubform.h&quot;
+#include &quot;bfclientefacturaivaincsubform.h&quot;
+#include &quot;blpostgresqlclient.h&quot;
+#include &quot;blplugins.h&quot;
+
+
+/** Constructor de la clase corresponde a la parte visual de la ficha de cliente.
+    Inicializa la ventana y todos sus componentes.
+    Mete la ventana en el WorkSpace.
+*/
+/**
+\param comp
+\param parent
+\return
+**/
+FacturaIVAIncClienteView::FacturaIVAIncClienteView ( BfCompany *comp, QWidget *parent )
+        : BfForm ( comp, parent )
+{
+    BL_FUNC_DEBUG
+    setAttribute ( Qt::WA_DeleteOnClose );
+    try {
+        setupUi ( this );
+
+        setTitleName ( _ ( &quot;Factura (IVA Inc)&quot; ) );
+        setDbTableName ( &quot;factura&quot; );
+        setDbFieldId ( &quot;idfactura&quot; );
+        addDbField ( &quot;idfactura&quot;, BlDbField::DbInt, BlDbField::DbPrimaryKey, _ ( &quot;Id factura&quot; ) );
+        addDbField ( &quot;idcliente&quot;, BlDbField::DbInt, BlDbField::DbNotNull, _ ( &quot;Cliente&quot; ) );
+        addDbField ( &quot;idalmacen&quot;, BlDbField::DbInt, BlDbField::DbNotNull, _ ( &quot;Almacen&quot; ) );
+        addDbField ( &quot;numfactura&quot;, BlDbField::DbInt, BlDbField::DbNothing, _ ( &quot;Numero factura&quot; ) );
+        addDbField ( &quot;ticketfactura&quot;, BlDbField::DbBoolean, BlDbField::DbNothing, _ ( &quot;Factura de ticket&quot; ) );
+        addDbField ( &quot;ffactura&quot;, BlDbField::DbDate, BlDbField::DbNothing, _ ( &quot;Ffactura&quot; ) );
+        addDbField ( &quot;procesadafactura&quot;, BlDbField::DbBoolean, BlDbField::DbNothing, _ ( &quot;Procesada factura&quot; ) );
+        addDbField ( &quot;codigoserie_factura&quot;, BlDbField::DbVarChar, BlDbField::DbNotNull, _ ( &quot;Serie&quot; ) );
+        addDbField ( &quot;comentfactura&quot;, BlDbField::DbVarChar, BlDbField::DbNothing, _ ( &quot;Comentario&quot; ) );
+        addDbField ( &quot;reffactura&quot;, BlDbField::DbVarChar, BlDbField::DbNothing, _ ( &quot;Referencia&quot; ) );
+        addDbField ( &quot;descfactura&quot;, BlDbField::DbVarChar, BlDbField::DbNothing, _ ( &quot;Descripcion&quot; ) );
+        addDbField ( &quot;idtrabajador&quot;, BlDbField::DbInt, BlDbField::DbNothing, _ ( &quot;Trabajador&quot; ) );
+        addDbField ( &quot;idforma_pago&quot;, BlDbField::DbInt, BlDbField::DbNothing, _ ( &quot;Forma de pago&quot; ) );
+
+	setDbValue(&quot;ticketfactura&quot;, &quot;TRUE&quot;);
+	
+        /// Disparamos los plugins.
+        int res = g_plugins-&gt;run ( &quot;FacturaIVAIncClienteView_FacturaIVAIncClienteView&quot;, this );
+        if ( res != 0 )
+            return;
+
+        subform2-&gt;setMainCompany ( comp );
+        m_descuentos-&gt;setMainCompany ( comp );
+        mui_idalmacen-&gt;setMainCompany ( comp );
+        mui_idforma_pago-&gt;setMainCompany ( comp );
+        mui_idcliente-&gt;setMainCompany ( comp );
+        mui_idtrabajador-&gt;setMainCompany ( comp );
+        mui_reffactura-&gt;setMainCompany ( comp );
+        mui_codigoserie_factura-&gt;setMainCompany ( comp );
+	
+        setListaLineas ( subform2 );
+        setListaDescuentos ( m_descuentos );
+
+
+        /// Establecemos los parametros de busqueda del Cliente
+        mui_idcliente-&gt;setLabel ( _ ( &quot;Cliente:&quot; ) );
+        mui_idcliente-&gt;setTableName ( &quot;cliente&quot; );
+        mui_idcliente-&gt;m_valores[&quot;cifcliente&quot;] = &quot;&quot;;
+        mui_idcliente-&gt;m_valores[&quot;nomcliente&quot;] = &quot;&quot;;
+
+        /// Inicializamos para que no se queden sin ser pintada.
+        mui_idforma_pago-&gt;setFieldValue ( &quot;0&quot; );
+        mui_idalmacen-&gt;setFieldValue ( &quot;0&quot; );
+        mui_codigoserie_factura-&gt;setId ( &quot;&quot; );
+        mui_idtrabajador-&gt;setFieldValue ( &quot;0&quot; );
+
+	setTemplateName(&quot;facturaIVAINC&quot;);
+	
+        insertWindow ( windowTitle(), this, FALSE );
+        /// Disparamos los plugins por flanco descendente.
+        g_plugins-&gt;run ( &quot;FacturaIVAIncClienteView_FacturaIVAIncClienteView_Post&quot;, this );
+	blScript(this);
+    } catch ( ... ) {
+        blMsgInfo ( _ ( &quot;Error al crear el factura a cliente&quot; ), this );
+    } // end try
+    
+}
+
+
+/** Destructor de la clase.
+    Indica al listado que debe actualizarse.
+*/
+/// \TODO: Este metodo deberia mejorarse para que indicase al listado que
+/// solo debe eliminar una fila del mismo.
+/**
+**/
+FacturaIVAIncClienteView::~FacturaIVAIncClienteView()
+{
+    BL_FUNC_DEBUG
+    
+}
+
+
+/// Inicializa todos los elementos del formulario
+/**
+**/
+void FacturaIVAIncClienteView::inicializar()
+{
+    BL_FUNC_DEBUG
+    subform2-&gt;inicializar();
+    m_descuentos-&gt;inicializar();
+    dialogChanges_readValues();
+    
+}
+
+
+
+/// Pinta los totales en las casillas correspondientes
+/**
+\param iva
+\param base
+\param total
+\param desc
+\param irpf
+\param reqeq
+**/
+void FacturaIVAIncClienteView::pintatotales ( BlFixed iva, BlFixed base, BlFixed total, BlFixed desc, BlFixed irpf, BlFixed reqeq )
+{
+    BL_FUNC_DEBUG
+    m_totalBases-&gt;setText ( base.toQString() );
+    m_totalTaxes-&gt;setText ( iva.toQString() );
+    m_totalfactura-&gt;setText ( total.toQString() );
+    m_totalDiscounts-&gt;setText ( desc.toQString() );
+    m_totalIRPF-&gt;setText ( QString ( irpf.toQString() ) );
+    m_totalReqEq-&gt;setText ( QString ( reqeq.toQString() ) );
+    
+}
+
+
+
+
+///
+/**
+\param id
+**/
+void FacturaIVAIncClienteView::on_mui_idcliente_valueChanged ( QString id )
+{
+    BL_FUNC_DEBUG
+    subform2-&gt;setIdCliente ( id );
+    mui_idforma_pago-&gt;setIdCliente ( id );
+    
+}
+
+
+
+
+
+
+/// Este slot se activa cuando hay cambios en los subformularios.
+/**
+**/
+void FacturaIVAIncClienteView::s_pintaTotales()
+{
+    BL_FUNC_DEBUG
+    calculaypintatotales();
+    
+}
+
+
+void FacturaIVAIncClienteView::calculaypintatotales() {
+  
+  if (!m_listalineas) return;
+
+  BlFixed total(&quot;0.00&quot;);
+  BlFixed impuestos(&quot;0.00&quot;);
+  BlFixed bimp(&quot;0.00&quot;);
+  BlFixed porcentt(&quot;0.00&quot;);
+  BlFixed totalreq(&quot;0.00&quot;);
+  BlFixed totalirpf(&quot;0.00&quot;);
+  BlFixed desc(&quot;0.00&quot;);
+  BlDbSubFormRecord *linea, *linea1;
+    
+  
+  
+  /// Impresion de los contenidos.
+  QString l;
+  BlFixed irpf ( &quot;0&quot; );
+
+  /// El calculo del IRPF basandonos en la fecha.
+  QString campfecha = &quot;fecha&quot; +  tableName();
+  if (!exists(campfecha)) 
+    campfecha = &quot;f&quot; + tableName();
+  if (exists(campfecha)) {
+      QString query = &quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= &quot;+QString (dbValue(campfecha)==&quot;&quot; ? &quot;now()&quot; : &quot;'&quot; + dbValue(campfecha) +&quot;'::DATE&quot;) + &quot; ORDER BY fechairpf DESC LIMIT 1&quot;;
+      BlDbRecordSet *cur = mainCompany() -&gt;loadQuery ( query);
+      if ( cur ) {
+	  if ( !cur-&gt;eof() ) {
+	      irpf = BlFixed ( cur-&gt;value( &quot;tasairpf&quot; ) );
+	  } // end if
+	  delete cur;
+      } // end if
+  } // end if
+    
+    /// Calculamos los descuentos totales
+    if ( m_listadescuentos-&gt;rowCount() ) {
+        for ( int i = 0; i &lt; m_listadescuentos-&gt;rowCount(); ++i ) {
+            linea1 = m_listadescuentos-&gt;lineaat ( i );
+            BlFixed propor ( linea1-&gt;dbValue ( &quot;proporcion&quot; + m_listadescuentos-&gt;tableName() ).toAscii().constData() );
+            porcentt = porcentt + propor;
+        } // end for
+    } // end if
+    
+    
+   for ( int i = 0; i &lt; m_listalineas-&gt;rowCount(); ++i ) {
+        linea = m_listalineas-&gt;lineaat ( i );
+        BlFixed cant ( linea-&gt;dbValue ( &quot;cantlfactura&quot; ));
+        BlFixed pvpund ( linea-&gt;dbValue ( &quot;pvpivainclfactura&quot;));
+	BlFixed ivalin ( linea-&gt;dbValue ( &quot;ivalfactura&quot;));
+	BlFixed reqeq ( linea-&gt;dbValue ( &quot;reqeqlfactura&quot;));
+	BlFixed descl ( linea-&gt;dbValue ( &quot;descuentolfactura&quot;));
+	descl = (descl + porcentt) / BlFixed(&quot;100&quot;);
+	
+	BlFixed totallinea = cant * pvpund * (1 - descl);
+	
+	BlFixed baselinea = totallinea / (BlFixed(&quot;1.00&quot;) + ivalin / BlFixed(&quot;100&quot;));
+	BlFixed ivalinea = totallinea - baselinea;
+	BlFixed reqeqlinea = baselinea * (reqeq / BlFixed(&quot;100&quot;));
+	totalreq = totalreq + reqeqlinea;
+	
+	totallinea.setPrecision(2);
+	total = total + totallinea + reqeqlinea;
+	
+	ivalinea.setPrecision(2);
+	impuestos = impuestos + ivalinea;
+	
+	desc = desc + baselinea * descl;
+		
+    } // end for
+    // Calculamos la base imponible
+    bimp = total - impuestos;
+    totalirpf = bimp * irpf / BlFixed(&quot;100&quot;);
+    total = total - totalirpf;
+
+    m_totalBases -&gt; setText (bimp.toQString());
+    m_totalTaxes-&gt;setText ( impuestos.toQString() );
+    m_totalfactura-&gt;setText ( total.toQString() );
+    m_totalDiscounts-&gt;setText ( desc.toQString() );
+    m_totalIRPF-&gt;setText ( QString ( totalirpf.toQString() ) );
+    m_totalReqEq-&gt;setText ( QString ( totalreq.toQString() ) );
+  
+}
+
+
+
+///
+/**
+**/
+void FacturaIVAIncClienteView::on_m_descuentos_editFinish ( int, int )
+{
+    BL_FUNC_DEBUG
+    calculaypintatotales();
+    
+}
+
+
+///
+/**
+**/
+void FacturaIVAIncClienteView::on_subform2_editFinish ( int, int )
+{
+    BL_FUNC_DEBUG
+    calculaypintatotales();
+    
+}
+
+
+
+/** Metodo de borrar un factura. Se encarga de mandar a la base de datos
+    la instruccion necesaria para el borrado de un factura y controlar
+    los posibles errores que se produzcan.
+    Tambi&eacute;n borra todas las lineas y las lineas de descuento que se refieren
+    a el factura que se pretende borrar.
+*/
+/// \todo: Este metodo deberia poderse delegar en BlDbRecord, o por lo menos la parte del borrado del registro.
+/// \todo: Hace falta meter el metodo dentro del sistema de excepciones try catch.
+/**
+\return
+**/
+int FacturaIVAIncClienteView::beforeDelete()
+{
+    BL_FUNC_DEBUG
+    m_listalineas-&gt;remove();
+    m_listadescuentos-&gt;remove();
+    
+    return 0;
+}
+
+
+
+/** Este m&eacute;todo carga un FacturaIVAIncCliente. Tambi&eacute;n carga las lineas
+    de albar&aacute;n y los descuentos de albar&aacute;n.
+    Tras la carga tambi&eacute;n invoca un repintado del factura para que se vea
+    correctamente la pantalla.
+*/
+/**
+\param idfactura
+\return
+**/
+int FacturaIVAIncClienteView::cargarPost ( QString idfactura )
+{
+    BL_FUNC_DEBUG
+
+    m_listalineas-&gt;load ( idfactura );
+    m_listadescuentos-&gt;load ( idfactura );
+
+    /// Disparamos los plugins con presupuesto_imprimirPresupuesto.
+    g_plugins-&gt;run ( &quot;FacturaIVAIncCliente_cargarPost_Post&quot;, this );
+
+    calculaypintatotales();
+    
+    return 0;
+}
+
+
+/** Este m&eacute;todo se encarga de hacer el guardado del albar&aacute; en la
+    base de datos. Una vez guardado se guardan las lineas de albar&aacute;n y los
+    descuentos de albar&aacute;n. Tras hacer el guardado se hace una carga del factura
+    para recuperar los datos que haya podido escribir la base de datos automaticamente.
+    Dichos datos son la referencia y el n&uacute;mero de albar&aacute;n.
+
+    Si todo funciona bien este m&eacute;todo devuelve 0. Si se produce algun error
+    se genera una excepcion -1.
+*/
+/**
+\return
+**/
+int FacturaIVAIncClienteView::afterSave()
+{
+    BL_FUNC_DEBUG
+
+    m_listalineas-&gt;setColumnValue ( &quot;idfactura&quot;, dbValue ( &quot;idfactura&quot; ) );
+    m_listalineas-&gt;save();
+    m_listadescuentos-&gt;setColumnValue ( &quot;idfactura&quot;, dbValue ( &quot;idfactura&quot; ) );
+    m_listadescuentos-&gt;save();
+
+    
+    return 0;
+}
+
+
+/** Pintar una factura.
+*/
+/**
+\param idbudget
+\return
+**/
+void FacturaIVAIncClienteView::pintarPost ( )
+{
+    BL_FUNC_DEBUG
+
+    /// Escribimos como descripcion el nombre del cliente para que aparezca en el titulo y en el dockwidget
+    setDescripcion( mui_idcliente-&gt;fieldValue(&quot;nomcliente&quot;) + &quot;\n&quot; + mui_ffactura-&gt;text());
+}
+
+
+///
+/**
+\param id
+**/
+void FacturaIVAIncClienteView::on_mui_idalmacen_valueChanged ( QString id )
+{
+    BL_FUNC_DEBUG
+    m_listalineas-&gt;setIdAlmacen ( id );
+    
+}
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.h b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.h
new file mode 100644
index 0000000..cf2bbf2
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/facturaivaincclienteview.h
@@ -0,0 +1,70 @@
+/***************************************************************************
+ *   Copyright (C) 2005 by Alvaro de Miguel                                *
+ *   <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">alvaro.demiguel en gmail.com</A>                                             *
+ *   Copyright (C) 2005 by Tomeu Borras Riera                              *
+ *   <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>                                                  *
+ *   <A HREF="http://www.iglues.org">http://www.iglues.org</A>                                                 *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+
+#ifndef FACTURAIVAINCCLIENTEVIEW_H
+#define FACTURAIVAINCCLIENTEVIEW_H
+
+#include &lt;QWidget&gt;
+#include &lt;QString&gt;
+
+#include &quot;bfform.h&quot;
+#include &quot;ui_facturaivaincclientebase.h&quot;
+#include &quot;pdefs_pluginbf_clientefacturaivainc.h&quot;
+
+
+class BfCompany;
+
+
+
+/// Muestra el albar&aacute;n a cliente.
+/** Clase que globaliza los FacturaIVAInces a Cliente derivando de las clases Ficha y FacturaIVAIncCliente.
+    Se encarga del control de la pantalla de facturaes a clientes, el paso de mensajes y la visualizacion.
+    Contiene todos los metodos de pintado que son llamados desde FacturaIVAIncCliente.
+*/
+class PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT FacturaIVAIncClienteView : public BfForm, public Ui_FacturaIVAIncClienteBase
+{
+    Q_OBJECT
+
+public:
+    virtual int afterSave();
+    virtual int beforeDelete();
+    virtual int cargarPost ( QString );
+    FacturaIVAIncClienteView ( BfCompany *, QWidget *parent = 0  );
+    ~FacturaIVAIncClienteView();
+    void inicializar();
+    virtual void pintarPost();
+    void pintatotales ( BlFixed, BlFixed, BlFixed, BlFixed, BlFixed, BlFixed );
+    void calculaypintatotales();
+
+
+public slots:
+    /// Este slot se activa cuando hay cambios en los subformularios.
+    virtual void s_pintaTotales();
+    virtual void on_m_descuentos_editFinish ( int, int );
+    virtual void on_subform2_editFinish ( int, int );
+    virtual void on_mui_idcliente_valueChanged ( QString id );
+    virtual void on_mui_idalmacen_valueChanged ( QString id );
+};
+
+#endif
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/genfacqtoolbutton.cpp b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/genfacqtoolbutton.cpp
new file mode 100644
index 0000000..46525e0
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/genfacqtoolbutton.cpp
@@ -0,0 +1,379 @@
+/***************************************************************************
+ *   Copyright (C) 2006 by Arturo Martin Llado                             *
+ *   <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">amartin en conetxia.com</A>                                                  *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+
+#include &lt;QWidget&gt;
+#include &quot;genfacqtoolbutton.h&quot;
+#include &quot;blfunctions.h&quot;
+
+/// Necesarios para importacion de efactura
+#include &lt;QtXml/QDomDocument&gt;
+#include &lt;QtXml/QDomNodeList&gt;
+#include &lt;QtXml/QDomNode&gt;
+#include &lt;QString&gt;
+#include &lt;QFileDialog&gt;
+#include &lt;QMap&gt;
+#include &lt;QList&gt;
+#include &quot;ticketclienteview.h&quot;
+#include &quot;facturaivaincclientelist.h&quot;
+#include &quot;facturaivaincclienteview.h&quot;
+#include &quot;blfixed.h&quot;
+#include &quot;bfcompany.h&quot;
+#include &quot;bldb.h&quot;
+
+///
+/**
+\param pres
+\param ped
+\param alb
+\param fac
+\param parent
+**/
+GenFacQToolButton::GenFacQToolButton ( QWidget *fac , QWidget *parent ) : QToolButton ( parent )
+{
+    BL_FUNC_DEBUG
+    m_object = fac;
+    setBoton();
+    
+}
+
+
+///
+/**
+**/
+GenFacQToolButton::~GenFacQToolButton()
+{
+    BL_FUNC_DEBUG
+    
+}
+
+
+///
+/**
+**/
+void GenFacQToolButton::setBoton()
+{
+    BL_FUNC_DEBUG
+    connect ( this, SIGNAL ( clicked() ), this, SLOT ( click() ) );
+    setObjectName ( QString::fromUtf8 ( &quot;exporta&quot; ) );
+    setStatusTip ( &quot;Generar factura&quot; );
+    setToolTip ( &quot;Generar factura&quot; );
+    setMinimumSize ( QSize ( 32, 32 ) );
+    setMaximumSize ( QSize ( 32, 32 ) );
+    setIcon ( QIcon ( QString::fromUtf8 ( &quot;:/Images/client-delivery-note-to-invoice.png&quot; ) ) );
+    setIconSize ( QSize ( 22, 22 ) );
+    setContentsMargins ( 0, 0, 0, 0 );
+    
+}
+
+
+///
+/**
+**/
+void GenFacQToolButton::click()
+{
+    BL_FUNC_DEBUG
+
+    if ( m_object-&gt;objectName() == &quot;TicketClienteBase&quot; ) {
+        generarFactura();
+    }// end if
+
+
+
+
+    
+}
+
+/// Se encarga de generar una factura a partir de un albar&aacute;n.
+/** Primero de todo busca una factura por referencia que tenga este albaran.
+    Si dicha factura existe entonces la cargamos y terminamos.
+    Si no existe dicha factura el sistema avisa y permite crear una poniendo
+    Todos los datos del albaran automaticamente en ella.
+*/
+/**
+\return
+**/
+void GenFacQToolButton::generarFactura()
+{
+    BL_FUNC_DEBUG
+    TicketClienteView *fpv = ( TicketClienteView * ) m_object;
+
+    /// Disparamos los plugins.
+    int res = g_plugins-&gt;run ( &quot;TicketClienteView_generarFactura&quot;, this );
+    if ( res != 0 )
+        return;
+
+    FacturaIVAIncClienteView *bud = NULL;
+    BlDbRecordSet *cur = NULL;
+
+    try {
+        /// Comprueba si disponemos de los datos m&iacute;nimos. Si no se hace esta
+        /// comprobaci&oacute;n la consulta a la base de datos ser&aacute; erronea y al hacer
+        /// el siguiente cur-&gt;eof() el programa fallar&aacute;.
+        /// Comprobamos que existe una factura con esos datos, y en caso afirmativo lo mostramos.
+
+        QString SQLQuery = &quot;&quot;;
+
+        if ( fpv-&gt;dbValue ( &quot;refalbaran&quot; ).isEmpty() || fpv-&gt;dbValue ( &quot;idcliente&quot; ).isEmpty() ) {
+            /// El albaran no se ha guardado y no se dispone en la base de datos
+            /// de estos datos. Se utilizan en su lugar los del formulario.
+            /// Verifica que exista, por lo menos, un cliente seleccionado.
+            if ( fpv-&gt;mui_idcliente-&gt;id().isEmpty() ) {
+                blMsgInfo ( _ ( &quot;Tiene que seleccionar un cliente&quot; ), this );
+                return;
+            } else {
+                SQLQuery = &quot;SELECT * FROM factura WHERE reffactura = '&quot; + fpv-&gt;mui_refalbaran-&gt;text() + &quot;' AND idcliente = &quot; + fpv-&gt;mui_idcliente-&gt;id();
+            } // end if
+        } else {
+            SQLQuery = &quot;SELECT * FROM factura WHERE reffactura = '&quot; + fpv-&gt;dbValue ( &quot;refalbaran&quot; ) + &quot;' AND idcliente = &quot; + fpv-&gt;dbValue ( &quot;idcliente&quot; );
+        } // end if
+
+        cur = fpv-&gt;mainCompany() -&gt;loadQuery ( SQLQuery );
+
+        if ( !cur-&gt;eof() ) {
+            /// Informamos que ya hay una factura y que la abriremos.
+            /// Si no salimos de la funci&oacute;n.
+            if ( QMessageBox::question ( this,
+                                         _ ( &quot;Factura existente&quot; ),
+                                         _ ( &quot;Existe una factura a este cliente con la misma referencia que este albaran. Desea abrirla para verificar?&quot; ),
+                                         _ ( &quot;&amp;Si&quot; ), _ ( &quot;&amp;No&quot; ), QString::null, 0, 1 ) ) {
+                return;
+            }
+            bud = new FacturaIVAIncClienteView ( ( BfCompany * ) fpv-&gt;mainCompany(), 0 );
+            fpv-&gt;mainCompany() -&gt;m_pWorkspace-&gt;addSubWindow ( bud );
+            bud-&gt;load ( cur-&gt;value( &quot;idfactura&quot; ) );
+            bud-&gt;show();
+            return;
+        } // end if
+        delete cur;
+
+        /// Creamos la factura.
+        bud = new FacturaIVAIncClienteView ( ( BfCompany * ) fpv-&gt;mainCompany(), 0 );
+        fpv-&gt;mainCompany() -&gt;m_pWorkspace-&gt;addSubWindow ( bud );
+
+        /// Cargamos un elemento que no existe para inicializar bien la clase.
+        bud-&gt;load ( &quot;0&quot; );
+
+        /// Traspasamos los datos a la factura.
+        fpv-&gt;recogeValores();
+        bud-&gt;setDbValue ( &quot;comentfactura&quot;, fpv-&gt;dbValue ( &quot;comentalbaran&quot; ) );
+        bud-&gt;setDbValue ( &quot;idforma_pago&quot;, fpv-&gt;dbValue ( &quot;idforma_pago&quot; ) );
+	bud-&gt;setDbValue ( &quot;descfactura&quot;, fpv-&gt;dbValue ( &quot;descalbaran&quot; ) );
+        bud-&gt;setDbValue ( &quot;reffactura&quot;, fpv-&gt;dbValue ( &quot;refalbaran&quot; ) );
+        bud-&gt;setDbValue ( &quot;idcliente&quot;, fpv-&gt;dbValue ( &quot;idcliente&quot; ) );
+        bud-&gt;setDbValue ( &quot;idalmacen&quot;, fpv-&gt;dbValue ( &quot;idalmacen&quot; ) );
+	bud-&gt;setDbValue ( &quot;idtrabajador&quot;, fpv-&gt;dbValue ( &quot;idtrabajador&quot; ) );
+
+        QString l;
+        BlDbSubFormRecord *linea, *linea1;
+        for ( int i = 0; i &lt; fpv-&gt;m_listalineas-&gt;rowCount(); ++i ) {
+            linea = fpv-&gt;m_listalineas-&gt;lineaat ( i );
+            if ( linea-&gt;dbValue ( &quot;idarticulo&quot; ) != &quot;&quot; ) {
+                linea1 = bud-&gt;getlistalineas() -&gt;lineaat ( bud-&gt;getlistalineas() -&gt;rowCount() - 1 );
+                /// Haciendo el nuevo registro antes nos evitamos problemas de foco.
+                bud-&gt;getlistalineas() -&gt;newRecord();
+                bud-&gt;getlistalineas() -&gt;setProcesarCambios ( FALSE );
+                linea1-&gt;setDbValue ( &quot;codigocompletoarticulo&quot;, linea-&gt;dbValue ( &quot;codigocompletoarticulo&quot; ) );
+                linea1-&gt;setDbValue ( &quot;desclfactura&quot;, linea-&gt;dbValue ( &quot;desclalbaran&quot; ) );
+                linea1-&gt;setDbValue ( &quot;cantlfactura&quot;, linea-&gt;dbValue ( &quot;cantlalbaran&quot; ) );
+                linea1-&gt;setDbValue ( &quot;pvpivainclfactura&quot;, linea-&gt;dbValue ( &quot;pvpivainclalbaran&quot; ) );
+                linea1-&gt;setDbValue ( &quot;ivalfactura&quot;, linea-&gt;dbValue ( &quot;ivalalbaran&quot; ) );
+                linea1-&gt;setDbValue ( &quot;reqeqlfactura&quot;, linea-&gt;dbValue ( &quot;reqeqlalbaran&quot; ) );
+                linea1-&gt;setDbValue ( &quot;descuentolfactura&quot;, linea-&gt;dbValue ( &quot;descuentolalbaran&quot; ) );
+                linea1-&gt;setDbValue ( &quot;idarticulo&quot;, linea-&gt;dbValue ( &quot;idarticulo&quot; ) );
+                linea1-&gt;setDbValue ( &quot;nomarticulo&quot;, linea-&gt;dbValue ( &quot;nomarticulo&quot; ) );
+                bud-&gt;getlistalineas() -&gt;setProcesarCambios ( TRUE );
+                linea1-&gt;refresh();
+            } // end if
+        } // end for
+
+        /// Traspasamos los descuentos.
+        for ( int i = 0; i &lt; fpv-&gt;m_listadescuentos-&gt;rowCount(); ++i ) {
+            linea1 = fpv-&gt;m_listadescuentos-&gt;lineaat ( i );
+            if ( linea1-&gt;dbValue ( &quot;proporciondalbaran&quot; ) != &quot;&quot; ) {
+                linea = bud-&gt;getlistadescuentos() -&gt;lineaat ( bud-&gt;getlistadescuentos() -&gt;rowCount() - 1 );
+                bud-&gt;getlistadescuentos() -&gt;setProcesarCambios ( FALSE );
+                linea-&gt;setDbValue ( &quot;conceptdfactura&quot;, linea1-&gt;dbValue ( &quot;conceptdalbaran&quot; ) );
+                linea-&gt;setDbValue ( &quot;proporciondfactura&quot;, linea1-&gt;dbValue ( &quot;proporciondalbaran&quot; ) );
+                bud-&gt;getlistadescuentos() -&gt;setProcesarCambios ( TRUE );
+                bud-&gt;getlistadescuentos() -&gt;newRecord();
+            } // end if
+        } // end for
+
+	/// Pintamos y presentamos.
+        bud-&gt;pintar();
+        bud-&gt;calculaypintatotales();
+        bud-&gt;show();
+
+	/// Ponemos el albaran como procesado.
+        fpv-&gt;mui_procesadoalbaran-&gt;setChecked ( TRUE );
+
+    } catch ( ... ) {
+        blMsgInfo ( _ ( &quot;Error inesperado&quot; ), this );
+        if ( cur ) delete cur;
+        if ( bud ) delete bud;
+    } // end try
+
+
+    
+}
+
+
+
+
+// ====================
+
+
+
+///
+/**
+\param pres
+\param ped
+\param alb
+\param fac
+\param parent
+**/
+AgFacQToolButton::AgFacQToolButton ( QWidget *fac , QWidget *parent ) : QToolButton ( parent )
+{
+    BL_FUNC_DEBUG
+    m_object = fac;
+    setBoton();
+    
+}
+
+
+///
+/**
+**/
+AgFacQToolButton::~AgFacQToolButton()
+{
+    BL_FUNC_DEBUG
+    
+}
+
+
+///
+/**
+**/
+void AgFacQToolButton::setBoton()
+{
+    BL_FUNC_DEBUG
+    connect ( this, SIGNAL ( clicked() ), this, SLOT ( click() ) );
+    setObjectName ( QString::fromUtf8 ( &quot;exporta&quot; ) );
+    setStatusTip ( &quot;Agregar a Factura&quot; );
+    setToolTip ( &quot;Agregar a Factura&quot; );
+    setMinimumSize ( QSize ( 32, 32 ) );
+    setMaximumSize ( QSize ( 32, 32 ) );
+    setIcon ( QIcon ( QString::fromUtf8 ( &quot;:/Images/client-delivery-note-add-to-invoice.png&quot; ) ) );
+    setIconSize ( QSize ( 32, 32 ) );
+    setContentsMargins ( 0, 0, 0, 0 );
+    
+}
+
+
+///
+/**
+**/
+void AgFacQToolButton::click()
+{
+    BL_FUNC_DEBUG
+
+    if ( m_object-&gt;objectName() == &quot;TicketClienteBase&quot; ) {
+        generarFactura();
+    }// end if
+
+    
+}
+
+/// Se encarga de generar una factura a partir de un albar&aacute;n.
+/** Primero de todo busca una factura por referencia que tenga este albaran.
+    Si dicha factura existe entonces la cargamos y terminamos.
+    Si no existe dicha factura el sistema avisa y permite crear una poniendo
+    Todos los datos del albaran automaticamente en ella.
+*/
+/**
+\return
+**/
+void AgFacQToolButton::generarFactura()
+{
+    BL_FUNC_DEBUG
+    TicketClienteView *fpv = ( TicketClienteView * ) m_object;
+
+    QDialog *diag = new QDialog ( 0 );
+    diag-&gt;setWindowTitle ( _ ( &quot;Seleccione la factura a la que agregar el albaran.&quot; ) );
+    diag-&gt;setModal ( true );
+
+    /// \TODO: Debe pasar por company la creacion del listado
+    FacturaIVAIncClienteList *fac = new FacturaIVAIncClienteList ( fpv-&gt;mainCompany(), diag, 0, BL_SELECT_MODE );
+    connect ( fac, SIGNAL ( selected ( QString ) ), diag, SLOT ( accept() ) );
+
+    /// Hacemos que las opciones de filtrado del listado ya est&eacute;n bien.
+    fac-&gt;m_cliente-&gt;setId ( fpv-&gt;dbValue ( &quot;idcliente&quot; ) );
+    fac-&gt;on_mui_actualizar_clicked();
+
+    /// Lanzamos el di&aacute;logo.
+    diag-&gt;exec();
+    QString idfactura = fac-&gt;idfactura();
+    delete diag;
+
+    /// Si no hay idfactura es que hemos abortado y por tanto cancelamos la operaci&oacute;n.
+    if ( idfactura == &quot;&quot; )
+        return;
+
+    /// Creamos la factura.
+    FacturaIVAIncClienteView *bud = new FacturaIVAIncClienteView ( ( BfCompany* ) fpv-&gt;mainCompany() );
+    bud-&gt;load ( idfactura );
+
+    /// Agregamos en los comentarios que se ha a&ntilde;adido este albar&aacute;n.
+    bud-&gt;setDbValue ( &quot;comentfactura&quot;, bud-&gt;dbValue ( &quot;comentfactura&quot; ) + _ ( &quot;Num. albaran&quot; ) + fpv-&gt;dbValue ( &quot;numalbaran&quot; ) + &quot;\n&quot; );
+
+    fpv-&gt;mainCompany() -&gt;m_pWorkspace-&gt;addSubWindow ( bud );
+    /// \TODO EN TEORIA SE DEBERIA COMPROBAR QUE LA FACTURA ES DEL MISMO CLIENTE,
+    /// PERO POR AHORA PASAMOS DE HACERLO.
+    QString l;
+    BlDbSubFormRecord *linea, *linea1;
+    for ( int i = 0; i &lt; fpv-&gt;m_listalineas-&gt;rowCount(); ++i ) {
+        linea = fpv-&gt;m_listalineas-&gt;lineaat ( i );
+        if ( linea-&gt;dbValue ( &quot;idarticulo&quot; ) != &quot;&quot; ) {
+            linea1 = bud-&gt;getlistalineas() -&gt;lineaat ( bud-&gt;getlistalineas() -&gt;rowCount() - 1 );
+            bud-&gt;getlistalineas() -&gt;setProcesarCambios ( FALSE );
+            linea1-&gt;setDbValue ( &quot;desclfactura&quot;, linea-&gt;dbValue ( &quot;desclalbaran&quot; ) );
+            linea1-&gt;setDbValue ( &quot;cantlfactura&quot;, linea-&gt;dbValue ( &quot;cantlalbaran&quot; ) );
+            linea1-&gt;setDbValue ( &quot;pvpivainclfactura&quot;, linea-&gt;dbValue ( &quot;pvpivainclalbaran&quot; ) );
+            linea1-&gt;setDbValue ( &quot;descuentolfactura&quot;, linea-&gt;dbValue ( &quot;descuentolalbaran&quot; ) );
+            linea1-&gt;setDbValue ( &quot;idarticulo&quot;, linea-&gt;dbValue ( &quot;idarticulo&quot; ) );
+            linea1-&gt;setDbValue ( &quot;codigocompletoarticulo&quot;, linea-&gt;dbValue ( &quot;codigocompletoarticulo&quot; ) );
+            linea1-&gt;setDbValue ( &quot;nomarticulo&quot;, linea-&gt;dbValue ( &quot;nomarticulo&quot; ) );
+            linea1-&gt;setDbValue ( &quot;ivalfactura&quot;, linea-&gt;dbValue ( &quot;ivalalbaran&quot; ) );
+            bud-&gt;getlistalineas() -&gt;setProcesarCambios ( TRUE );
+            bud-&gt;getlistalineas() -&gt;newRecord();
+        } // end if
+    } // end for
+    bud-&gt;calculaypintatotales();
+    bud-&gt;show();
+
+    /// Procesamos el albaran
+    fpv-&gt;mui_procesadoalbaran-&gt;setChecked ( TRUE );
+
+    
+}
+
+
+
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/genfacqtoolbutton.h b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/genfacqtoolbutton.h
new file mode 100644
index 0000000..2e7aa3f
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/genfacqtoolbutton.h
@@ -0,0 +1,77 @@
+/***************************************************************************
+ *   Copyright (C) 2007 by Tomeu Borras Riera                              *
+ *   <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>                                                  *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+
+#ifndef GENFACQTOOLBUTTON_H
+#define GENFACQTOOLBUTTON_H
+
+#include &lt;QWidget&gt;
+#include &lt;QToolButton&gt;
+#include &lt;QString&gt;
+#include &lt;QtXml/QDomDocument&gt;
+#include &lt;QMap&gt;
+#include &lt;QString&gt;
+
+#include &quot;bfcompany.h&quot;
+#include &quot;blfunctions.h&quot;
+#include &quot;pdefs_pluginbf_clientefacturaivainc.h&quot;
+
+
+class PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT GenFacQToolButton : public QToolButton
+{
+    Q_OBJECT
+
+private:
+    BfCompany *m_companyact;
+    QWidget *m_object;
+
+public:
+    GenFacQToolButton ( QWidget *fac,   QWidget *parent = NULL );
+    ~GenFacQToolButton();
+    void setBoton();
+    void generarFactura();
+
+
+public slots:
+    virtual void click();
+
+};
+
+
+class PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT AgFacQToolButton : public QToolButton
+{
+    Q_OBJECT
+
+private:
+    BfCompany *m_companyact;
+    QWidget *m_object;
+
+public:
+    AgFacQToolButton ( QWidget *fac,   QWidget *parent = NULL );
+    ~AgFacQToolButton();
+    void setBoton();
+    void generarFactura();
+
+public slots:
+    virtual void click();
+
+};
+
+#endif
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/ca_ES/pluginbf_clienteticket-list.png b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/ca_ES/pluginbf_clienteticket-list.png
new file mode 100644
index 0000000..7668613
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/ca_ES/pluginbf_clienteticket-list.png differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/ca_ES/pluginbf_clienteticket-new.png b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/ca_ES/pluginbf_clienteticket-new.png
new file mode 100644
index 0000000..9d7b12d
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/ca_ES/pluginbf_clienteticket-new.png differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/en_EN/pluginbf_clienteticket-list.png b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/en_EN/pluginbf_clienteticket-list.png
new file mode 100644
index 0000000..ffd6d80
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/en_EN/pluginbf_clienteticket-list.png differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/en_EN/pluginbf_clienteticket-new.png b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/en_EN/pluginbf_clienteticket-new.png
new file mode 100644
index 0000000..e9d7ad6
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/en_EN/pluginbf_clienteticket-new.png differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/en_US/pluginbf_clienteticket-list.png b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/en_US/pluginbf_clienteticket-list.png
new file mode 100644
index 0000000..ffd6d80
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/en_US/pluginbf_clienteticket-list.png differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/en_US/pluginbf_clienteticket-new.png b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/en_US/pluginbf_clienteticket-new.png
new file mode 100644
index 0000000..e9d7ad6
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/en_US/pluginbf_clienteticket-new.png differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/es_ES/pluginbf_clienteticket-list.png b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/es_ES/pluginbf_clienteticket-list.png
new file mode 100644
index 0000000..d738259
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/es_ES/pluginbf_clienteticket-list.png differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/es_ES/pluginbf_clienteticket-new.png b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/es_ES/pluginbf_clienteticket-new.png
new file mode 100644
index 0000000..41d72bc
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/es_ES/pluginbf_clienteticket-new.png differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/fr_FR/pluginbf_clienteticket-list.png b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/fr_FR/pluginbf_clienteticket-list.png
new file mode 100644
index 0000000..ffd6d80
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/fr_FR/pluginbf_clienteticket-list.png differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/fr_FR/pluginbf_clienteticket-new.png b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/fr_FR/pluginbf_clienteticket-new.png
new file mode 100644
index 0000000..e9d7ad6
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/images/fr_FR/pluginbf_clienteticket-new.png differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/openreports/ca/facturaIVAINC.rml b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/openreports/ca/facturaIVAINC.rml
new file mode 100644
index 0000000..a0a429c
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/openreports/ca/facturaIVAINC.rml
@@ -0,0 +1,261 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
+&lt;document&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Factura IVA INC&quot; author=&quot;&quot;&gt;
+	&lt;pageTemplate id=&quot;main&quot;&gt;
+		&lt;pageGraphics&gt;
+		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
+
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		
+&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
+		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
+
+		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
+
+		&lt;!--Fecha factura--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
+
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
+		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
+	&lt;/pageGraphics&gt;
+
+
+		&lt;!-- FRAME DE CONTENIDOS --&gt;
+		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+
+		
+	&lt;/pageTemplate&gt;
+
+&lt;/template&gt;
+
+&lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
+
+&lt;story&gt;	
+	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlfactura*pvpivainclfactura*(100-descuentolfactura)/100)::NUMERIC(12,2) AS totallfactura FROM lfactura 
+LEFT JOIN articulo ON lfactura.idarticulo = articulo.idarticulo WHERE idfactura= [idfactura] ORDER BY ordenlfactura&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclfactura]&lt;/td&gt;
+&lt;td&gt;[cantlfactura]&lt;/td&gt;
+&lt;td&gt;[pvpivainclfactura]&lt;/td&gt;
+&lt;td&gt;[totallfactura]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+	
+&lt;!--IF DESCUENTOS--&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;Total dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT conceptdfactura,proporciondfactura, (proporciondfactura * t1.total/100)::NUMERIC(12,1) AS totdesc FROM dfactura LEFT JOIN
+(SELECT idfactura, (SUM(cantlfactura * pvpivainclfactura * (1-descuentolfactura/100)))::NUMERIC(12,2) AS total FROM lfactura WHERE idfactura=4 GROUP BY idfactura) AS t1
+ON t1.idfactura = dfactura.idfactura
+WHERE t1.idfactura = 4&quot;--&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
+			&lt;td&gt;[totdesc]&lt;/td&gt;
+		&lt;/tr&gt;
+		&lt;!--END QUERY--&gt;
+&lt;!--END IF DESCUENTOS--&gt;
+
+ 
+ &lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentfactura,'&lt;','\n') AS comment FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+
+	&lt;/blockTable&gt;
+
+	
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY1=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY1--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY1=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY1--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+					  &lt;!-- QUERY=&quot;SELECT (1-SUM(proporciondfactura/100))::NUMERIC(12,2) AS desctotal FROM dfactura WHERE idfactura=[idfactura]&quot;--&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+						&lt;!--QUERY1=&quot;SELECT (sum(cantlfactura*pvpivainclfactura*[desctotal]*(1-descuentolfactura/100)) / (1+ ivalfactura/100))::NUMERIC(12,2) as bimp, ivalfactura AS tbimp, (sum(cantlfactura*pvpivainclfactura*[desctotal]*(1-descuentolfactura/100)) * (1-1 / (1+ ivalfactura/100)))::NUMERIC(12,2) AS iva  FROM lfactura WHERE idfactura=[idfactura] GROUP BY ivalfactura &quot;--&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY2=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE  ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY2--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY2=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY2--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+							  &lt;td&gt;&lt;!--QUERY1=&quot;SELECT (sum(cantlfactura*pvpivainclfactura*[desctotal]*(1-descuentolfactura/100)) )::NUMERIC(12,2) as total FROM lfactura WHERE idfactura=[idfactura]  &quot;--&gt;[total] ‚Ç¨&lt;!--END QUERY1--&gt;&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+						&lt;!--END QUERY--&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM factura WHERE idfactura=[idfactura] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
+
+&lt;/story&gt;
+&lt;/document&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/openreports/en/facturaIVAINC.rml b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/openreports/en/facturaIVAINC.rml
new file mode 100644
index 0000000..a0a429c
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/openreports/en/facturaIVAINC.rml
@@ -0,0 +1,261 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
+&lt;document&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Factura IVA INC&quot; author=&quot;&quot;&gt;
+	&lt;pageTemplate id=&quot;main&quot;&gt;
+		&lt;pageGraphics&gt;
+		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
+
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		
+&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
+		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
+
+		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
+
+		&lt;!--Fecha factura--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
+
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
+		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
+	&lt;/pageGraphics&gt;
+
+
+		&lt;!-- FRAME DE CONTENIDOS --&gt;
+		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+
+		
+	&lt;/pageTemplate&gt;
+
+&lt;/template&gt;
+
+&lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
+
+&lt;story&gt;	
+	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlfactura*pvpivainclfactura*(100-descuentolfactura)/100)::NUMERIC(12,2) AS totallfactura FROM lfactura 
+LEFT JOIN articulo ON lfactura.idarticulo = articulo.idarticulo WHERE idfactura= [idfactura] ORDER BY ordenlfactura&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclfactura]&lt;/td&gt;
+&lt;td&gt;[cantlfactura]&lt;/td&gt;
+&lt;td&gt;[pvpivainclfactura]&lt;/td&gt;
+&lt;td&gt;[totallfactura]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+	
+&lt;!--IF DESCUENTOS--&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;Total dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT conceptdfactura,proporciondfactura, (proporciondfactura * t1.total/100)::NUMERIC(12,1) AS totdesc FROM dfactura LEFT JOIN
+(SELECT idfactura, (SUM(cantlfactura * pvpivainclfactura * (1-descuentolfactura/100)))::NUMERIC(12,2) AS total FROM lfactura WHERE idfactura=4 GROUP BY idfactura) AS t1
+ON t1.idfactura = dfactura.idfactura
+WHERE t1.idfactura = 4&quot;--&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
+			&lt;td&gt;[totdesc]&lt;/td&gt;
+		&lt;/tr&gt;
+		&lt;!--END QUERY--&gt;
+&lt;!--END IF DESCUENTOS--&gt;
+
+ 
+ &lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentfactura,'&lt;','\n') AS comment FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+
+	&lt;/blockTable&gt;
+
+	
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY1=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY1--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY1=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY1--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+					  &lt;!-- QUERY=&quot;SELECT (1-SUM(proporciondfactura/100))::NUMERIC(12,2) AS desctotal FROM dfactura WHERE idfactura=[idfactura]&quot;--&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+						&lt;!--QUERY1=&quot;SELECT (sum(cantlfactura*pvpivainclfactura*[desctotal]*(1-descuentolfactura/100)) / (1+ ivalfactura/100))::NUMERIC(12,2) as bimp, ivalfactura AS tbimp, (sum(cantlfactura*pvpivainclfactura*[desctotal]*(1-descuentolfactura/100)) * (1-1 / (1+ ivalfactura/100)))::NUMERIC(12,2) AS iva  FROM lfactura WHERE idfactura=[idfactura] GROUP BY ivalfactura &quot;--&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY2=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE  ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY2--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY2=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY2--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+							  &lt;td&gt;&lt;!--QUERY1=&quot;SELECT (sum(cantlfactura*pvpivainclfactura*[desctotal]*(1-descuentolfactura/100)) )::NUMERIC(12,2) as total FROM lfactura WHERE idfactura=[idfactura]  &quot;--&gt;[total] ‚Ç¨&lt;!--END QUERY1--&gt;&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+						&lt;!--END QUERY--&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM factura WHERE idfactura=[idfactura] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
+
+&lt;/story&gt;
+&lt;/document&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/openreports/es/facturaIVAINC.rml b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/openreports/es/facturaIVAINC.rml
new file mode 100644
index 0000000..0241c9e
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/openreports/es/facturaIVAINC.rml
@@ -0,0 +1,261 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
+&lt;document&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Factura IVA INC&quot; author=&quot;&quot;&gt;
+	&lt;pageTemplate id=&quot;main&quot;&gt;
+		&lt;pageGraphics&gt;
+		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
+
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		
+&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
+		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
+
+		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
+
+		&lt;!--Fecha factura--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
+
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
+		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
+	&lt;/pageGraphics&gt;
+
+
+		&lt;!-- FRAME DE CONTENIDOS --&gt;
+		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+
+		
+	&lt;/pageTemplate&gt;
+
+&lt;/template&gt;
+
+&lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
+
+&lt;story&gt;	
+	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlfactura*pvpivainclfactura*(100-descuentolfactura)/100)::NUMERIC(12,2) AS totallfactura FROM lfactura 
+LEFT JOIN articulo ON lfactura.idarticulo = articulo.idarticulo WHERE idfactura= [idfactura] ORDER BY ordenlfactura&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclfactura]&lt;/td&gt;
+&lt;td&gt;[cantlfactura]&lt;/td&gt;
+&lt;td&gt;[pvpivainclfactura]&lt;/td&gt;
+&lt;td&gt;[totallfactura]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+	
+&lt;!--IF QUERY=&quot;SELECT * FROM dfactura WHERE idfactura=[idfactura] &quot;--&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;Total dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT conceptdfactura,proporciondfactura, (proporciondfactura * t1.total/100)::NUMERIC(12,1) AS totdesc FROM dfactura LEFT JOIN
+(SELECT idfactura, (SUM(cantlfactura * pvpivainclfactura * (1-descuentolfactura/100)))::NUMERIC(12,2) AS total FROM lfactura WHERE idfactura=[idfactura] GROUP BY idfactura) AS t1
+ON t1.idfactura = dfactura.idfactura
+WHERE t1.idfactura = [idfactura]&quot;--&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
+			&lt;td&gt;[totdesc]&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+
+ 
+ &lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentfactura,'&lt;','\n') AS comment FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+
+	&lt;/blockTable&gt;
+
+	
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY1=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY1--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY1=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY1--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+					  &lt;!-- QUERY=&quot;SELECT COALESCE((1-SUM(proporciondfactura/100)),1)::NUMERIC(12,2) AS desctotal FROM dfactura WHERE idfactura=[idfactura]&quot;--&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+						&lt;!--QUERY1=&quot;SELECT (sum(cantlfactura*pvpivainclfactura*[desctotal]*(1-descuentolfactura/100)) / (1+ ivalfactura/100))::NUMERIC(12,2) as bimp, ivalfactura AS tbimp, (sum(cantlfactura*pvpivainclfactura*[desctotal]*(1-descuentolfactura/100)) * (1-1 / (1+ ivalfactura/100)))::NUMERIC(12,2) AS iva  FROM lfactura WHERE idfactura=[idfactura] GROUP BY ivalfactura &quot;--&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY2=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE  ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY2--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY2=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY2--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+							  &lt;td&gt;&lt;!--QUERY1=&quot;SELECT (sum(cantlfactura*pvpivainclfactura*[desctotal]*(1-descuentolfactura/100)) )::NUMERIC(12,2) as total FROM lfactura WHERE idfactura=[idfactura]  &quot;--&gt;[total] ‚Ç¨&lt;!--END QUERY1--&gt;&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+						&lt;!--END QUERY--&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM factura WHERE idfactura=[idfactura] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
+
+&lt;/story&gt;
+&lt;/document&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/openreports/fr/facturaIVAINC.rml b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/openreports/fr/facturaIVAINC.rml
new file mode 100644
index 0000000..a0a429c
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/openreports/fr/facturaIVAINC.rml
@@ -0,0 +1,261 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;no&quot; ?&gt;
+&lt;!DOCTYPE document SYSTEM &quot;rml_1_0.dtd&quot;&gt;
+&lt;document&gt;
+&lt;template pageSize=&quot;(21cm, 29.7cm)&quot; leftMargin=&quot;0cm&quot; rightMargin=&quot;0cm&quot; topMargin=&quot;1.0cm&quot; bottomMargin=&quot;2.0cm&quot; title=&quot;Factura IVA INC&quot; author=&quot;&quot;&gt;
+	&lt;pageTemplate id=&quot;main&quot;&gt;
+		&lt;pageGraphics&gt;
+		&lt;include src=&quot;[CONF_DIR_OPENREPORTS]plantilla.rml&quot;/&gt;
+
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;stroke color=&quot;(0,0,0)&quot;/&gt;
+		
+&lt;!--IF QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT * FROM cliente WHERE idcliente = [idcliente] LIMIT 1&quot;--&gt;
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;11&quot;/&gt;
+		&lt;fill color=&quot;(1,1,1)&quot;/&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.53cm&quot;&gt;Datos del cliente:&lt;/drawString&gt;
+
+		&lt;!-- LOS DATOS DEL CLIENTE --&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;26.05cm&quot;&gt;[idcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.6cm&quot;&gt;[nomcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;25.15cm&quot;&gt;[cifcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.7cm&quot;&gt;[dircliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;24.25cm&quot;&gt;[poblcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.8cm&quot;&gt;[telcliente]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;23.35cm&quot;&gt;[mailcliente]&lt;/drawString&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;fill color=&quot;(0,0,0)&quot;/&gt;	
+		&lt;drawString x=&quot;10cm&quot; y=&quot;26.05cm&quot;&gt;N¬∫ Cliente:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.6cm&quot;&gt;Nombre/Empresa:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;25.15cm&quot;&gt;NIF/CIF:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.7cm&quot;&gt;Direcci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;24.25cm&quot;&gt;Poblaci√≥n:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.8cm&quot;&gt;Tel√©fono:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;23.35cm&quot;&gt;Direcci√≥n Email:&lt;/drawString&gt;
+
+		&lt;!--Fecha factura--&gt;
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;11&quot;/&gt;
+
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.95cm&quot;&gt;Fecha factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;10cm&quot; y=&quot;27.5cm&quot;&gt;N¬∫ factura:&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.95cm&quot;&gt;Referencia:&lt;/drawString&gt;
+
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.95cm&quot;&gt;[ffactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;13.5cm&quot; y=&quot;27.5cm&quot;&gt;[codigoserie_factura] / [numfactura]&lt;/drawString&gt;
+		&lt;drawString x=&quot;17.0cm&quot; y=&quot;27.5cm&quot;&gt;[reffactura]&lt;/drawString&gt;
+
+		&lt;!-- INCLUDE FILE=&quot;[CONF_DIR_OPENREPORTS]plantilla_empresa.rml&quot; --&gt;
+
+		&lt;setFont name=&quot;Helvetica-Bold&quot; size=&quot;12&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;26.3cm&quot;&gt;- FACTURA -&lt;/drawCentredString&gt;
+
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;7&quot;/&gt;
+		&lt;drawString x=&quot;15cm&quot; y=&quot;22.7cm&quot;&gt;Los importes est√°n expresados en euros.&lt;/drawString&gt;
+
+		&lt;setFont name=&quot;Helvetica&quot; size=&quot;10&quot;/&gt;
+		&lt;drawCentredString x=&quot;5.3cm&quot; y=&quot;25.85cm&quot;&gt;Forma de pago: &lt;!--QUERY=&quot;SELECT descforma_pago FROM forma_pago WHERE idforma_pago = [idforma_pago] LIMIT 1&quot;--&gt;[descforma_pago]&lt;!--END QUERY--&gt;&lt;/drawCentredString&gt;
+
+	&lt;/pageGraphics&gt;
+
+
+		&lt;!-- FRAME DE CONTENIDOS --&gt;
+		&lt;frame id=&quot;column&quot; x1=&quot;1cm&quot; y1=&quot;8cm&quot; width=&quot;19cm&quot; height=&quot;14.6cm&quot; /&gt;
+
+		
+	&lt;/pageTemplate&gt;
+
+&lt;/template&gt;
+
+&lt;include src=&quot;[CONF_DIR_OPENREPORTS]estilos.rml&quot;/&gt;
+
+&lt;story&gt;	
+	&lt;blockTable style=&quot;tablacontenido&quot; colWidths=&quot;3.00cm, 8.5cm, 1.8cm, 2cm, 2.9cm&quot; splitByRow=&quot;2&quot; rowheights=&quot;2&quot; repeatRows=&quot;1&quot;&gt;
+		&lt;tr&gt;
+			&lt;td&gt;Codigo&lt;/td&gt;
+			&lt;td&gt;Concepto&lt;/td&gt;
+			&lt;td&gt;Unid:&lt;/td&gt;
+			&lt;td&gt;Precio/u:&lt;/td&gt;
+			&lt;td&gt;Subtotal s/iva:&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT *, (cantlfactura*pvpivainclfactura*(100-descuentolfactura)/100)::NUMERIC(12,2) AS totallfactura FROM lfactura 
+LEFT JOIN articulo ON lfactura.idarticulo = articulo.idarticulo WHERE idfactura= [idfactura] ORDER BY ordenlfactura&quot;--&gt;
+&lt;tr&gt;
+&lt;td&gt;[codigocompletoarticulo]&lt;/td&gt;
+&lt;td&gt;[desclfactura]&lt;/td&gt;
+&lt;td&gt;[cantlfactura]&lt;/td&gt;
+&lt;td&gt;[pvpivainclfactura]&lt;/td&gt;
+&lt;td&gt;[totallfactura]&lt;/td&gt;
+&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+	
+&lt;!--IF DESCUENTOS--&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Descuento/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;% Dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2der&quot;&gt;&lt;b&gt;Total dto:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--QUERY=&quot;SELECT conceptdfactura,proporciondfactura, (proporciondfactura * t1.total/100)::NUMERIC(12,1) AS totdesc FROM dfactura LEFT JOIN
+(SELECT idfactura, (SUM(cantlfactura * pvpivainclfactura * (1-descuentolfactura/100)))::NUMERIC(12,2) AS total FROM lfactura WHERE idfactura=4 GROUP BY idfactura) AS t1
+ON t1.idfactura = dfactura.idfactura
+WHERE t1.idfactura = 4&quot;--&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[conceptdfactura]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;[proporciondfactura]%&lt;/td&gt;
+			&lt;td&gt;[totdesc]&lt;/td&gt;
+		&lt;/tr&gt;
+		&lt;!--END QUERY--&gt;
+&lt;!--END IF DESCUENTOS--&gt;
+
+ 
+ &lt;!--IF QUERY=&quot;SELECT comentfactura FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+&lt;!--QUERY=&quot;SELECT replace(comentfactura,'&lt;','\n') AS comment FROM factura WHERE length(comentfactura) &gt; 0 AND idfactura = [idfactura]&quot;--&gt;
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;&lt;b&gt;Comentario/s:&lt;/b&gt;&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+
+		&lt;tr&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;para style=&quot;paragrafo2&quot;&gt;[comment,l]&lt;/para&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+&lt;!--END QUERY--&gt;
+&lt;!--END IF QUERY--&gt;
+
+	&lt;/blockTable&gt;
+
+	
+	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;1cm&quot; y=&quot;4cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;total&quot; colWidths=&quot;16.3cm,2.7cm&quot; &gt;
+				&lt;tr&gt;
+					&lt;td colspan=&quot;2&quot;&gt;
+                                                &lt;blockTable style=&quot;titulo&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm, 2.7cm&quot;&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Base Imponible:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;I.V.A.%:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Tot I.V.A.:&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY1=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;I.R.P.F.%:&lt;!-- END QUERY1--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;&lt;!-- QUERY1=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE AND tasairpf &gt; 0 ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;Tot I.R.P.F.:&lt;!-- END QUERY1--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;Total:&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+				&lt;tr&gt;
+					&lt;td&gt;
+					  &lt;!-- QUERY=&quot;SELECT (1-SUM(proporciondfactura/100))::NUMERIC(12,2) AS desctotal FROM dfactura WHERE idfactura=[idfactura]&quot;--&gt;
+                                                &lt;blockTable style=&quot;contenido&quot; colWidths=&quot;2.65cm, 3.2cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 0.5cm, 1.75cm, 0.5cm, 1.9cm, 1.15cm&quot; &gt;
+						&lt;!--QUERY1=&quot;SELECT (sum(cantlfactura*pvpivainclfactura*[desctotal]*(1-descuentolfactura/100)) / (1+ ivalfactura/100))::NUMERIC(12,2) as bimp, ivalfactura AS tbimp, (sum(cantlfactura*pvpivainclfactura*[desctotal]*(1-descuentolfactura/100)) * (1-1 / (1+ ivalfactura/100)))::NUMERIC(12,2) AS iva  FROM lfactura WHERE idfactura=[idfactura] GROUP BY ivalfactura &quot;--&gt;
+							&lt;tr&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[bimp]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[tbimp]%&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+                                                                &lt;td&gt;[iva]&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY2=&quot;SELECT tasairpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE  ORDER BY fechairpf DESC LIMIT 1&quot; --&gt;[tasairpf] %&lt;!-- END QUERY2--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+								&lt;td&gt;&lt;!-- QUERY2=&quot;SELECT (replace('[bimp]',',','.')::NUMERIC(12,2) * tasairpf/100)::NUMERIC(12,2) AS tmirpf FROM irpf WHERE fechairpf &lt;= '[ffactura]'::DATE ORDER BY fechairpf DESC LIMIT 1&quot;--&gt;[tmirpf]&lt;!-- END QUERY2--&gt;&lt;/td&gt;
+                                                                &lt;td&gt;  &lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;!--END QUERY1--&gt;
+						&lt;/blockTable&gt;
+
+					&lt;/td&gt;
+					&lt;td&gt;
+						&lt;blockTable style=&quot;preciofinal&quot; colWidths=&quot;2.7cm&quot; &gt;
+							&lt;tr&gt;
+							  &lt;td&gt;&lt;!--QUERY1=&quot;SELECT (sum(cantlfactura*pvpivainclfactura*[desctotal]*(1-descuentolfactura/100)) )::NUMERIC(12,2) as total FROM lfactura WHERE idfactura=[idfactura]  &quot;--&gt;[total] ‚Ç¨&lt;!--END QUERY1--&gt;&lt;/td&gt;
+							&lt;/tr&gt;
+						&lt;/blockTable&gt;
+						&lt;!--END QUERY--&gt;
+					&lt;/td&gt;
+				&lt;/tr&gt;
+			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt;
+
+
+
+ &lt;!-- IF QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+ 	&lt;storyPlace x=&quot;0cm&quot; y=&quot;0cm&quot; width=&quot;20cm&quot; height=&quot;1cm&quot;&gt;
+		&lt;place x=&quot;15cm&quot; y=&quot;2cm&quot; width=&quot;19cm&quot; height=&quot;4cm&quot;&gt;
+			&lt;blockTable style=&quot;tablavencimientos&quot; colWidths=&quot;2.3cm,1.7cm&quot; &gt;
+		&lt;tr&gt;
+		  &lt;td&gt;Vencimiento/s:&lt;/td&gt;
+			&lt;td&gt;&lt;/td&gt;
+		&lt;/tr&gt;
+ &lt;!-- QUERY = &quot;SELECT * FROM vencimientoc WHERE idfactura=[idfactura]&quot; --&gt;
+
+				&lt;tr&gt;
+					&lt;td&gt;[fechavencimientoc]&lt;/td&gt;
+					&lt;td&gt;[cantvencimientoc] ‚Ç¨&lt;/td&gt;
+				&lt;/tr&gt;
+
+ &lt;!-- END QUERY--&gt;
+ 			&lt;/blockTable&gt;
+		&lt;/place&gt;
+	&lt;/storyPlace&gt; 
+ &lt;!-- END IF QUERY--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;13.5cm&quot; y=&quot;1cm&quot; width=&quot;10cm&quot; height=&quot;1cm&quot;&gt;
+&lt;barCode code=&quot;code128&quot; height=&quot;1cm&quot;&gt;FAC [idfactura] [numfactura] [reffactura]&lt;/barCode&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+
+&lt;!-- QUERY = &quot;SELECT * FROM factura WHERE idfactura=[idfactura] AND idforma_pago = 8 &quot;--&gt;
+
+&lt;storyPlace x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;1cm&quot;&gt;
+&lt;place x=&quot;1cm&quot; y=&quot;2cm&quot; width=&quot;15cm&quot; height=&quot;2.5cm&quot;&gt;
+  &lt;para&gt;Para transferencias bancarias &quot;La Caixa&quot; ............&lt;/para&gt;
+&lt;/place&gt;
+&lt;/storyPlace&gt;
+
+&lt;!-- END QUERY --&gt;
+
+&lt;/story&gt;
+&lt;/document&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/pdefs_pluginbf_clientefacturaivainc.h b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/pdefs_pluginbf_clientefacturaivainc.h
new file mode 100644
index 0000000..304e87c
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/pdefs_pluginbf_clientefacturaivainc.h
@@ -0,0 +1,21 @@
+#ifndef PDEFS_PLUGINBF_CLIENTEFACTURAIVAINC_H
+#define PDEFS_PLUGINBF_CLIENTEFACTURAIVAINC_H
+
+
+#ifdef Q_OS_WIN32
+
+#ifdef PLUGINBF_CLIENTEFACTURAIVAINC
+#define PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT __declspec(dllexport)
+#else
+#define PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT __declspec(dllimport)
+#endif
+
+#else
+
+#define PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT
+
+#endif
+
+
+#endif
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/pluginbf_clientefacturaivainc.cpp b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/pluginbf_clientefacturaivainc.cpp
new file mode 100644
index 0000000..bcdbcc0
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/pluginbf_clientefacturaivainc.cpp
@@ -0,0 +1,190 @@
+/***************************************************************************
+ *   Copyright (C) 2005 by Tomeu Borras Riera                              *
+ *   <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>                                                  *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+
+#include &lt;stdio.h&gt;
+
+#include &quot;pluginbf_clientefacturaivainc.h&quot;
+#include &quot;blplugins.h&quot;
+#include &quot;bfcompany.h&quot;
+#include &quot;blfunctions.h&quot;
+#include &quot;facturaivaincclienteview.h&quot;
+#include &quot;facturaivaincclientelist.h&quot;
+
+#include &quot;genfacqtoolbutton.h&quot;
+
+
+FacturaIVAIncClienteList *g_facturaClienteList = NULL;
+BfBulmaFact *g_pluginbf_clientefacturaivainc = NULL;
+
+
+
+///
+/**
+\param bges
+\return
+**/
+int entryPoint ( BfBulmaFact *bges )
+{
+    BL_FUNC_DEBUG
+
+    /// Inicializa el sistema de traducciones 'gettext'.
+    setlocale ( LC_ALL, &quot;&quot; );
+    blBindTextDomain ( &quot;pluginbf_clientefacturaivainc&quot;, g_confpr-&gt;value( CONF_DIR_TRADUCCION ).toAscii().constData() );
+
+
+    if ( bges-&gt;company()-&gt;hasTablePrivilege ( &quot;factura&quot;, &quot;SELECT&quot; ) ) {
+
+        /// Miramos si existe un menu Ventas
+        QMenu *pPluginMenu = bges-&gt;newMenu ( _(&quot;&amp;Ventas&quot;), &quot;menuVentas&quot;, &quot;menuMaestro&quot; );
+        pPluginMenu-&gt;addSeparator();
+
+        g_pluginbf_clientefacturaivainc = bges;
+        BlAction *accionA = new BlAction ( _ ( &quot;&amp;FacturaIVAInces a clientes&quot; ), 0 );
+        accionA-&gt;setIcon ( QIcon ( QString::fromUtf8 ( &quot;:/Images/client-delivery-note-list.png&quot; ) ) );
+        accionA-&gt;setStatusTip ( _ ( &quot;FacturaIVAInces a clientes&quot; ) );
+        accionA-&gt;setWhatsThis ( _ ( &quot;FacturaIVAInces a clientes&quot; ) );
+        accionA-&gt;setObjectName(&quot;mui_actionClienteFacturaIVAInc&quot;);
+        pPluginMenu-&gt;addAction ( accionA );
+        bges-&gt;Listados-&gt;addAction ( accionA );
+
+
+        BlAction *accionB = new BlAction ( _ ( &quot;&amp;Nuevo facturaivainc a cliente&quot; ), 0 );
+        accionB-&gt;setIcon ( QIcon ( QString::fromUtf8 ( &quot;:/Images/client-delivery-note.png&quot; ) ) );
+        accionB-&gt;setStatusTip ( _ ( &quot;Nuevo facturaivainc a cliente&quot; ) );
+        accionB-&gt;setWhatsThis ( _ ( &quot;Nuevo facturaivainc a cliente&quot; ) );
+        accionB-&gt;setObjectName(&quot;mui_actionClienteNuevoAlbaran&quot;);
+        pPluginMenu-&gt;addAction ( accionB );
+        bges-&gt;Fichas-&gt;addAction ( accionB );
+
+
+    } // end if
+
+
+    return 0;
+}
+
+
+int BlAction_actionTriggered(BlAction *accion) {
+    if (accion-&gt;objectName() == &quot;mui_actionClienteFacturaIVAInc&quot;) {
+        if ( g_facturaClienteList ) {
+            g_facturaClienteList-&gt;hide();
+            g_facturaClienteList-&gt;show();
+        } // end if
+    } // end if
+
+    if (accion-&gt;objectName() == &quot;mui_actionClienteNuevoAlbaran&quot;) {
+        FacturaIVAIncClienteView * bud = new FacturaIVAIncClienteView ( g_pluginbf_clientefacturaivainc-&gt;company(), NULL );
+        g_pluginbf_clientefacturaivainc-&gt;company()-&gt;m_pWorkspace-&gt;addSubWindow ( bud );
+        bud-&gt;inicializar();
+        bud-&gt;show();
+    } // end if
+    return 0;
+}
+
+
+
+int BfCompany_createMainWindows_Post ( BfCompany *comp )
+{
+    if ( comp-&gt;hasTablePrivilege ( &quot;factura&quot;, &quot;SELECT&quot; ) ) {
+        g_facturaClienteList = new FacturaIVAIncClienteList ( comp, NULL );
+        comp-&gt;m_pWorkspace-&gt;addSubWindow ( g_facturaClienteList );
+        g_facturaClienteList-&gt;hide();
+    }// end if
+    return 0;
+}
+
+
+int ClienteView_ClienteView_Post ( ClienteView *prov )
+{
+    if ( prov-&gt;mainCompany()-&gt;hasTablePrivilege ( &quot;factura&quot;, &quot;SELECT&quot; ) ) {
+        FacturaIVAIncClienteList *facturaesList = new FacturaIVAIncClienteList ( NULL, 0, BL_SELECT_MODE );
+	facturaesList-&gt;setMainCompany(( BfCompany * ) prov-&gt;mainCompany());
+        facturaesList-&gt;setEditMode();
+        facturaesList-&gt;setObjectName ( &quot;listfacturaes&quot; );
+        facturaesList-&gt;hideBusqueda();
+        prov-&gt;mui_tab-&gt;addTab ( facturaesList, &quot;FacturaIVAInces&quot; );
+    }// end if
+    return 0;
+}
+
+int ClienteView_cargarPost_Post ( ClienteView *prov )
+{
+    if ( prov-&gt;mainCompany()-&gt;hasTablePrivilege ( &quot;factura&quot;, &quot;SELECT&quot; ) ) {
+        FacturaIVAIncClienteList *facturaesList = prov-&gt;findChild&lt;FacturaIVAIncClienteList *&gt; ( &quot;listfacturaes&quot; );
+        facturaesList-&gt;setidcliente ( prov-&gt;dbValue ( &quot;idcliente&quot; ) );
+        facturaesList-&gt;presentar();
+    }// end if
+    return 0;
+}// end if
+
+
+int BfBuscarReferencia_on_mui_abrirtodo_clicked_Post ( BfBuscarReferencia *ref )
+{
+    QString SQLQuery = &quot;SELECT * FROM factura WHERE reffactura = '&quot; + ref-&gt;mui_referencia-&gt;text() + &quot;'&quot;;
+    BlDbRecordSet *cur = ref-&gt;mainCompany() -&gt;loadQuery ( SQLQuery );
+    while ( !cur-&gt;eof() ) {
+        FacturaIVAIncClienteView * bud = new FacturaIVAIncClienteView ( ( BfCompany * ) ref-&gt;mainCompany(), NULL );
+        ref-&gt;mainCompany() -&gt;m_pWorkspace-&gt;addSubWindow ( bud );
+        bud-&gt;load ( cur-&gt;value( &quot;idfactura&quot; ) );
+        bud-&gt;show();
+        cur-&gt;nextRecord();
+    } // end while
+    delete cur;
+    return 0;
+}// end if
+
+
+
+///
+/**
+\param l
+\return
+**/
+int TicketClienteView_TicketClienteView ( TicketClienteView *l )
+{
+
+    BL_FUNC_DEBUG
+    GenFacQToolButton *mui_exporta_efactura2 = new GenFacQToolButton ( l, l-&gt;mui_plugbotones );
+    AgFacQToolButton *mui_exporta_efactura = new AgFacQToolButton ( l, l-&gt;mui_plugbotones );
+
+    QHBoxLayout *m_hboxLayout1 = l-&gt;mui_plugbotones-&gt;findChild&lt;QHBoxLayout *&gt; ( &quot;hboxLayout1&quot; );
+
+    if ( !m_hboxLayout1 ) {
+        m_hboxLayout1 = new QHBoxLayout ( l-&gt;mui_plugbotones );
+        m_hboxLayout1-&gt;setSpacing ( 5 );
+        m_hboxLayout1-&gt;setMargin ( 0 );
+        m_hboxLayout1-&gt;setObjectName ( QString::fromUtf8 ( &quot;hboxLayout1&quot; ) );
+    }// end if
+    m_hboxLayout1-&gt;addWidget ( mui_exporta_efactura2 );
+    m_hboxLayout1-&gt;addWidget ( mui_exporta_efactura );
+
+    return 0;
+}
+
+
+/// Esta llamada de plugin es bastante novedosa ya es una llamada que no responde a una funcion
+/// Sino que se llama desde multiples partes del sistema.
+int SNewFacturaIVAIncClienteView ( BfCompany *v )
+{
+    FacturaIVAIncClienteView *h = new FacturaIVAIncClienteView ( v, 0 );
+    g_plugParams = h;
+    return 1;
+}
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/pluginbf_clientefacturaivainc.h b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/pluginbf_clientefacturaivainc.h
new file mode 100644
index 0000000..2195403
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_clientefacturaivainc/pluginbf_clientefacturaivainc.h
@@ -0,0 +1,46 @@
+/***************************************************************************
+ *   Copyright (C) 2005 by Tomeu Borras Riera                              *
+ *   <A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>                                                  *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+
+#ifndef PLUGINBF_CLIENTEFACTURAIVAINC_H
+#define PLUGINBF_CLIENTEFACTURAIVAINC_H
+
+#include &quot;blpostgresqlclient.h&quot;
+#include &quot;bfbulmafact.h&quot;
+#include &quot;blwidget.h&quot;
+#include &quot;bfbuscarreferencia.h&quot;
+#include &quot;ticketclienteview.h&quot;
+#include &quot;clienteview.h&quot;
+#include &quot;facturaivaincclienteview.h&quot;
+#include &quot;bfcompany.h&quot;
+#include &quot;pdefs_pluginbf_clientefacturaivainc.h&quot;
+#include &quot;blaction.h&quot;
+
+
+extern &quot;C&quot; PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT int SNewFacturaIVAIncClienteView (BfCompany *);
+extern &quot;C&quot; PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT int entryPoint ( BfBulmaFact * );
+extern &quot;C&quot; PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT int BfCompany_createMainWindows_Post(BfCompany *);
+extern &quot;C&quot; PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT int ClienteView_ClienteView_Post (ClienteView *);
+extern &quot;C&quot; PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT int ClienteView_cargarPost_Post (ClienteView *);
+extern &quot;C&quot; PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT int BfBuscarReferencia_on_mui_abrirtodo_clicked_Post (BfBuscarReferencia *);
+extern &quot;C&quot; PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT int BlAction_actionTriggered(BlAction *);
+extern &quot;C&quot; PLUGINBF_CLIENTEFACTURAIVAINC_EXPORT int TicketClienteView_TicketClienteView ( TicketClienteView * );
+
+#endif
+
diff --git a/bulmages/bulmafact/plugins/pluginbf_clienteticket/ticketclienteview.cpp b/bulmages/bulmafact/plugins/pluginbf_clienteticket/ticketclienteview.cpp
index 9a6216d..6c46ad8 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clienteticket/ticketclienteview.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_clienteticket/ticketclienteview.cpp
@@ -79,9 +79,12 @@ TicketClienteView::TicketClienteView ( BfCompany *comp, QWidget *parent )
         addDbField ( &quot;procesadoalbaran&quot;, BlDbField::DbBoolean, BlDbField::DbNothing, _ ( &quot;Procesado&quot; ) );
         addDbField ( &quot;descalbaran&quot;, BlDbField::DbVarChar, BlDbField::DbNothing, _ ( &quot;Descripcion&quot; ) );
         addDbField ( &quot;refalbaran&quot;, BlDbField::DbVarChar, BlDbField::DbNothing, _ ( &quot;Referencia&quot; ) );
+        addDbField ( &quot;ticketalbaran&quot;, BlDbField::DbBoolean, BlDbField::DbNothing, _ ( &quot;Ticket&quot; ) );
         addDbField ( &quot;cambiosalbaran&quot;, BlDbField::DbVarChar, BlDbField::DbNothing, _ ( &quot;Sucesos antes de imprimir&quot; ) );
         addDbField ( &quot;cambiospostalbaran&quot;, BlDbField::DbVarChar, BlDbField::DbNothing, _ ( &quot;Sucesos tras imprimir&quot; ) );
 
+	setDbValue(&quot;ticketalbaran&quot;, &quot;TRUE&quot;);
+	
         /// Disparamos los plugins.
         int res = g_plugins-&gt;run ( &quot;TicketClienteView_TicketClienteView&quot;, this );
         if ( res != 0 )
@@ -204,15 +207,7 @@ void TicketClienteView::s_pintaTotales()
 void TicketClienteView::calculaypintatotales() {
   
   if (!m_listalineas) return;
-  //blMsgInfo(&quot;Calculo y pinto los totales&quot;);
-  /*
- *     m_totalBases-&gt;setText ( base.toQString() );
-    m_totalTaxes-&gt;setText ( iva.toQString() );
-    m_totalalbaran-&gt;setText ( total.toQString() );
-    m_totalDiscounts-&gt;setText ( desc.toQString() );
-    m_totalIRPF-&gt;setText ( QString ( irpf.toQString() ) );
-    m_totalReqEq-&gt;setText ( QString ( reqeq.toQString() ) );
-    */
+
   BlFixed total(&quot;0.00&quot;);
   BlFixed impuestos(&quot;0.00&quot;);
   BlFixed bimp(&quot;0.00&quot;);
@@ -340,6 +335,20 @@ int TicketClienteView::afterSave()
     return 0;
 }
 
+/** Pintar un ticket.
+*/
+/**
+\param idbudget
+\return
+**/
+void TicketClienteView::pintarPost ( )
+{
+    BL_FUNC_DEBUG
+
+    /// Escribimos como descripcion el nombre del cliente para que aparezca en el titulo y en el dockwidget
+    setDescripcion( mui_idcliente-&gt;fieldValue(&quot;nomcliente&quot;) + &quot;\n&quot; + mui_fechaalbaran-&gt;text());
+}
+
 
 ///
 /**
diff --git a/bulmages/bulmafact/plugins/pluginbf_clienteticket/ticketclienteview.h b/bulmages/bulmafact/plugins/pluginbf_clienteticket/ticketclienteview.h
index 5adb237..c514e24 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clienteticket/ticketclienteview.h
+++ b/bulmages/bulmafact/plugins/pluginbf_clienteticket/ticketclienteview.h
@@ -49,10 +49,10 @@ public:
     virtual int afterSave();
     virtual int beforeDelete();
     virtual int cargarPost ( QString );
-    TicketClienteView ( BfCompany *, QWidget * );
+    TicketClienteView ( BfCompany *, QWidget *parent = 0 );
     ~TicketClienteView();
     void inicializar();
-
+    virtual void pintarPost();
     void pintatotales ( BlFixed, BlFixed, BlFixed, BlFixed, BlFixed, BlFixed );
     void calculaypintatotales();
 
diff --git a/bulmages/bulmafact/plugins/pluginbf_ivaincluido/dbmodels/pluginbf_ivaincluido.sql b/bulmages/bulmafact/plugins/pluginbf_ivaincluido/dbmodels/pluginbf_ivaincluido.sql
index f764c72..fc7b3e2 100644
--- a/bulmages/bulmafact/plugins/pluginbf_ivaincluido/dbmodels/pluginbf_ivaincluido.sql
+++ b/bulmages/bulmafact/plugins/pluginbf_ivaincluido/dbmodels/pluginbf_ivaincluido.sql
@@ -59,14 +59,14 @@ language 'plpgsql';
 
 CREATE OR REPLACE FUNCTION aux() RETURNS INTEGER AS '
 DECLARE
-	rs RECORD;
+	res RECORD;
 BEGIN
-	SELECT INTO rs * FROM pg_attribute  WHERE attname=''ivaincarticulo'';
+	SELECT INTO res * FROM pg_attribute  WHERE attname=''ivaincarticulo'';
 	IF NOT FOUND THEN
 		ALTER TABLE articulo ADD COLUMN ivaincarticulo BOOLEAN DEFAULT FALSE;
 	END IF;
 
-	SELECT INTO rs * FROM pg_attribute  WHERE attname=''pvpivainclalbaran'';
+	SELECT INTO res * FROM pg_attribute  WHERE attname=''pvpivainclalbaran'';
 	IF NOT FOUND THEN
 		ALTER TABLE lalbaran ADD COLUMN pvpivainclalbaran NUMERIC(12,2) DEFAULT 0;
 		ALTER TABLE lfactura ADD COLUMN pvpivainclfactura NUMERIC(12,2) DEFAULT 0;
@@ -81,19 +81,69 @@ DROP FUNCTION aux() CASCADE;
 \echo &quot;Agregamos el campo booleano ivaincarticulo a la tabla de articulos&quot;
 
 
-
 \echo -n ':: Funcion que calcula el total de un albaran a cliente ... '
 CREATE OR REPLACE FUNCTION calctotalalbaran(integer) RETURNS numeric(12, 2)
 AS $$
 DECLARE
     idp ALIAS FOR $1;
+    totalBImponibleLineas numeric(12, 4);
+    totalIRPF numeric(12, 4);
+    totalIVA numeric(12, 4);
+    totalRE numeric(12, 4);
+    totalTotal numeric(12, 4);
+    totalDesc numeric(12,4);
+    res RECORD;
+
+BEGIN
+    totalBImponibleLineas := 0;
+    totalIRPF := 0;
+    totalIVA := 0;
+    totalRE := 0;
+    totalTotal := 0;
+    totalDesc := 0;
+
+    FOR res IN SELECT proporciondalbaran FROM dalbaran WHERE idalbaran = idp LOOP
+	totalDesc := totalDesc + res.proporciondalbaran;
+    END LOOP;
+
+    FOR res IN SELECT cantlalbaran * pvpivainclalbaran * (1 - descuentolalbaran / 100) * (1 - totalDesc / 100)  AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
+	totalTotal := totalTotal + res.subtotal1;
+    END LOOP;
+
+    FOR res IN SELECT cantlalbaran * pvpivainclalbaran * (1 - descuentolalbaran / 100) * (1 - totalDesc / 100) * (1 - 1 / (1 + ivalalbaran / 100)) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
+	totalIVA := totalIVA + res.subtotal1;
+    END LOOP;
+
+    FOR res IN SELECT cantlalbaran * pvpivainclalbaran * (1 - descuentolalbaran / 100) * (1 - totalDesc / 100) * (1 - 1 / (1 + ivalalbaran / 100)) * (reqeqlalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
+	totalRE := totalRE + res.subtotal1;
+    END LOOP;
+
+    totalBImponibleLineas := totalTotal - totalIVA;
+
+    SELECT INTO res tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fechaalbaran FROM albaran WHERE idalbaran = idp) ORDER BY fechairpf DESC LIMIT 1;
+    IF FOUND THEN
+        totalIRPF := totalBImponibleLineas * (res.tasairpf / 100);
+    END IF;
+
+    totalTotal := totalTotal + totalRE - totalIRPF;
+
+    RETURN totalTotal::numeric(12,2);
+END;
+$$ LANGUAGE plpgsql;
+
+
+\echo -n ':: Funcion que calcula la Base Imponible total de un albaran a cliente ... '
+CREATE OR REPLACE FUNCTION calcbimpalbaran(integer) RETURNS numeric(12, 2)
+AS '
+DECLARE
+    idp ALIAS FOR $1;
     totalBImponibleLineas numeric(12, 2);
     totalIRPF numeric(12, 2);
     totalIVA numeric(12, 2);
     totalRE numeric(12, 2);
     totalTotal numeric(12, 2);
+    totalDesc numeric(12,2);
     res RECORD;
-    res2 RECORD;
 
 BEGIN
     totalBImponibleLineas := 0;
@@ -101,115 +151,247 @@ BEGIN
     totalIVA := 0;
     totalRE := 0;
     totalTotal := 0;
+    totalDesc := 0;
 
-    FOR res IN SELECT cantlalbaran * pvplalbaran * (1 - descuentolalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
-	totalBImponibleLineas := totalBImponibleLineas + res.subtotal1;
+    FOR res IN SELECT proporciondalbaran FROM dalbaran WHERE idalbaran = idp LOOP
+	totalDesc := totalDesc + res.proporciondalbaran;
+    END LOOP;
+
+    FOR res IN SELECT cantlalbaran * pvpivainclalbaran * (1 - descuentolalbaran / 100) * (1 - totalDesc / 100)  AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
+	totalTotal := totalTotal + res.subtotal1;
     END LOOP;
 
-    SELECT INTO res valor::numeric FROM configuracion WHERE LOWER(nombre) = 'irpf';
+    FOR res IN SELECT cantlalbaran * pvpivainclalbaran * (1 - descuentolalbaran / 100) * (1 - totalDesc / 100) * (1 - 1 / (1 + ivalalbaran / 100)) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
+	totalIVA := totalIVA + res.subtotal1;
+    END LOOP;
+
+    FOR res IN SELECT cantlalbaran * pvpivainclalbaran * (1 - descuentolalbaran / 100) * (1 - totalDesc / 100) * (1 - 1 / (1 + ivalalbaran / 100)) * (reqeqlalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
+	totalRE := totalRE + res.subtotal1;
+    END LOOP;
+
+    totalBImponibleLineas := totalTotal - totalIVA;
+
+    SELECT INTO res tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fechaalbaran FROM albaran WHERE idalbaran = idp) ORDER BY fechairpf DESC LIMIT 1;
     IF FOUND THEN
-        totalIRPF := totalBImponibleLineas * (res.valor / 100);
+        totalIRPF := totalBImponibleLineas * (res.tasairpf / 100);
     END IF;
 
-    FOR res IN SELECT cantlalbaran * pvplalbaran * (1 - descuentolalbaran / 100) * (ivalalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
+    totalTotal := totalTotal + totalRE - totalIRPF;
+
+    RETURN totalBImponibleLineas;
+END;
+' LANGUAGE plpgsql;
+
+
+\echo -n ':: Funcion que calcula los impuestos totales de un albaran a cliente ... '
+CREATE OR REPLACE FUNCTION calcimpuestosalbaran(integer) RETURNS numeric(12, 2)
+AS '
+DECLARE
+     idp ALIAS FOR $1;
+    totalBImponibleLineas numeric(12, 2);
+    totalIRPF numeric(12, 2);
+    totalIVA numeric(12, 2);
+    totalRE numeric(12, 2);
+    totalTotal numeric(12, 2);
+    totalDesc numeric(12,2);
+    res RECORD;
+
+BEGIN
+    totalBImponibleLineas := 0;
+    totalIRPF := 0;
+    totalIVA := 0;
+    totalRE := 0;
+    totalTotal := 0;
+    totalDesc := 0;
+
+    FOR res IN SELECT proporciondalbaran FROM dalbaran WHERE idalbaran = idp LOOP
+	totalDesc := totalDesc + res.proporciondalbaran;
+    END LOOP;
+
+    FOR res IN SELECT cantlalbaran * pvpivainclalbaran * (1 - descuentolalbaran / 100) * (1 - totalDesc / 100)  AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
+	totalTotal := totalTotal + res.subtotal1;
+    END LOOP;
+
+    FOR res IN SELECT cantlalbaran * pvpivainclalbaran * (1 - descuentolalbaran / 100) * (1 - totalDesc / 100) * (1 - 1 / (1 + ivalalbaran / 100)) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
 	totalIVA := totalIVA + res.subtotal1;
     END LOOP;
 
-    FOR res IN SELECT cantlalbaran * pvplalbaran * (1 - descuentolalbaran / 100) * (reqeqlalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
+    FOR res IN SELECT cantlalbaran * pvpivainclalbaran * (1 - descuentolalbaran / 100) * (1 - totalDesc / 100) * (1 - 1 / (1 + ivalalbaran / 100)) * (reqeqlalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
 	totalRE := totalRE + res.subtotal1;
     END LOOP;
 
-    FOR res IN SELECT proporciondalbaran FROM dalbaran WHERE idalbaran = idp LOOP
-	totalBImponibleLineas := totalBImponibleLineas * (1 - res.proporciondalbaran / 100);
-	totalIRPF := totalIRPF * (1 - res.proporciondalbaran / 100);
-	totalIVA := totalIVA * (1 - res.proporciondalbaran / 100);
-	totalRE := totalRE * (1 - res.proporciondalbaran / 100);
-    END LOOP;
-
-    totalTotal = totalBImponibleLineas - totalIRPF + totalIVA + totalRE;
-
-    IF totalTotal = 0 THEN
-	    FOR res IN SELECT cantlalbaran * pvpivainclalbaran * (1 - descuentolalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
-		totalTotal := totalTotal + res.subtotal1;
-	    END LOOP;
-	    FOR res IN SELECT proporciondalbaran FROM dalbaran WHERE idalbaran = idp LOOP
-		totalTotal := totalTotal * (1 - res.proporciondalbaran / 100);
-	    END LOOP;
-	    RETURN totalTotal;
-    
+    totalBImponibleLineas := totalTotal - totalIVA;
+
+    SELECT INTO res tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT fechaalbaran FROM albaran WHERE idalbaran = idp) ORDER BY fechairpf DESC LIMIT 1;
+    IF FOUND THEN
+        totalIRPF := totalBImponibleLineas * (res.tasairpf / 100);
     END IF;
 
-    RETURN totalTotal;
+    totalTotal := totalTotal + totalRE - totalIRPF;
+
+    RETURN totalIVA + totalRE;
 END;
-$$ LANGUAGE plpgsql;
+' LANGUAGE plpgsql;
 
 
-\echo -n ':: Funcion que calcula la Base Imponible total de un albaran a cliente ... '
-CREATE OR REPLACE FUNCTION calcbimpalbaran(integer) RETURNS numeric(12, 2)
+
+\echo -n ':: Funcion que calcula el total de una factura ... '
+CREATE OR REPLACE FUNCTION calctotalfactura(integer) RETURNS numeric(12, 2)
 AS '
 DECLARE
     idp ALIAS FOR $1;
-    total numeric(12, 2);
+    totalBImponibleLineas numeric(12, 4);
+    totalIRPF numeric(12, 4);
+    totalIVA numeric(12, 4);
+    totalRE numeric(12, 4);
+    totalTotal numeric(12, 4);
+    totalDesc numeric(12,4);
     res RECORD;
 
 BEGIN
-    total := 0;
+    totalBImponibleLineas := 0;
+    totalIRPF := 0;
+    totalIVA := 0;
+    totalRE := 0;
+    totalTotal := 0;
+    totalDesc := 0;
 
-    FOR res IN SELECT cantlalbaran * pvplalbaran * (1 - descuentolalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
-	total := total + res.subtotal1;
+    FOR res IN SELECT proporciondfactura FROM dfactura WHERE idfactura = idp LOOP
+	totalDesc := totalDesc + res.proporciondfactura;
     END LOOP;
-    FOR res IN SELECT proporciondalbaran FROM dalbaran WHERE idalbaran = idp LOOP
-	total := total * (1 - res.proporciondalbaran / 100);
+
+    FOR res IN SELECT cantlfactura * pvpivainclfactura * (1 - descuentolfactura / 100) * (1 - totalDesc / 100)  AS subtotal1 FROM lfactura WHERE idfactura = idp LOOP
+	totalTotal := totalTotal + res.subtotal1;
     END LOOP;
 
-    IF total = 0 THEN
-	FOR res IN SELECT cantlalbaran * pvpivainclalbaran * (1 - descuentolalbaran / 100) / (1+ ivalalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
-	    total := total + res.subtotal1;
-	END LOOP;
+    FOR res IN SELECT cantlfactura * pvpivainclfactura * (1 - descuentolfactura / 100) * (1 - totalDesc / 100) * (1 - 1 / (1 + ivalfactura / 100)) AS subtotal1 FROM lfactura WHERE idfactura = idp LOOP
+	totalIVA := totalIVA + res.subtotal1;
+    END LOOP;
+
+    FOR res IN SELECT cantlfactura * pvpivainclfactura * (1 - descuentolfactura / 100) * (1 - totalDesc / 100) * (1 - 1 / (1 + ivalfactura / 100)) * (reqeqlfactura / 100) AS subtotal1 FROM lfactura WHERE idfactura = idp LOOP
+	totalRE := totalRE + res.subtotal1;
+    END LOOP;
 
-	FOR res IN SELECT proporciondalbaran FROM dalbaran WHERE idalbaran = idp LOOP
-	    total := total * (1 - res.proporciondalbaran / 100);
-	END LOOP;
+    totalBImponibleLineas := totalTotal - totalIVA;
+
+    SELECT INTO res tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = idp) ORDER BY fechairpf DESC LIMIT 1;
+    IF FOUND THEN
+        totalIRPF := totalBImponibleLineas * (res.tasairpf / 100);
     END IF;
 
-    RETURN total;
+    totalTotal := totalTotal + totalRE - totalIRPF;
+
+    RETURN totalTotal::numeric(12,2);
 END;
 ' LANGUAGE plpgsql;
 
 
-\echo -n ':: Funcion que calcula los impuestos totales de un albaran a cliente ... '
-CREATE OR REPLACE FUNCTION calcimpuestosalbaran(integer) RETURNS numeric(12, 2)
+\echo -n ':: Funcion que calcula la base imponible total de una factura ... '
+CREATE OR REPLACE FUNCTION calcbimpfactura(integer) RETURNS numeric(12, 2)
 AS '
 DECLARE
     idp ALIAS FOR $1;
-    total numeric(12, 2);
+    totalBImponibleLineas numeric(12, 2);
+    totalIRPF numeric(12, 2);
+    totalIVA numeric(12, 2);
+    totalRE numeric(12, 2);
+    totalTotal numeric(12, 2);
+    totalDesc numeric(12,2);
     res RECORD;
 
 BEGIN
-    total := 0;
+    totalBImponibleLineas := 0;
+    totalIRPF := 0;
+    totalIVA := 0;
+    totalRE := 0;
+    totalTotal := 0;
+    totalDesc := 0;
 
-    FOR res IN SELECT cantlalbaran * pvplalbaran * (1 - descuentolalbaran / 100) * (ivalalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
-    	total := total + res.subtotal1;
+    FOR res IN SELECT proporciondfactura FROM dfactura WHERE idfactura = idp LOOP
+	totalDesc := totalDesc + res.proporciondfactura;
     END LOOP;
-    FOR res IN SELECT proporciondalbaran FROM dalbaran WHERE idalbaran = idp LOOP
-    	total := total * (1 - res.proporciondalbaran / 100);
+
+    FOR res IN SELECT cantlfactura * pvpivainclfactura * (1 - descuentolfactura / 100) * (1 - totalDesc / 100)  AS subtotal1 FROM lfactura WHERE idfactura = idp LOOP
+	totalTotal := totalTotal + res.subtotal1;
+    END LOOP;
+
+    FOR res IN SELECT cantlfactura * pvpivainclfactura * (1 - descuentolfactura / 100) * (1 - totalDesc / 100) * (1 - 1 / (1 + ivalfactura / 100)) AS subtotal1 FROM lfactura WHERE idfactura = idp LOOP
+	totalIVA := totalIVA + res.subtotal1;
     END LOOP;
 
-    IF total = 0 THEN
+    FOR res IN SELECT cantlfactura * pvpivainclfactura * (1 - descuentolfactura / 100) * (1 - totalDesc / 100) * (1 - 1 / (1 + ivalfactura / 100)) * (reqeqlfactura / 100) AS subtotal1 FROM lfactura WHERE idfactura = idp LOOP
+	totalRE := totalRE + res.subtotal1;
+    END LOOP;
 
-	FOR res IN SELECT (cantlalbaran * pvpivainclalbaran - cantlalbaran * pvpivainclalbaran / (1+ ivalalbaran / 100)) * (1 - descuentolalbaran / 100) AS subtotal1 FROM lalbaran WHERE idalbaran = idp LOOP
-	    total := total + res.subtotal1;
-	END LOOP;
+    totalBImponibleLineas := totalTotal - totalIVA;
 
-	FOR res IN SELECT proporciondalbaran FROM dalbaran WHERE idalbaran = idp LOOP
-	    total := total * (1 - res.proporciondalbaran / 100);
-	END LOOP;
+    SELECT INTO res tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = idp) ORDER BY fechairpf DESC LIMIT 1;
+    IF FOUND THEN
+        totalIRPF := totalBImponibleLineas * (res.tasairpf / 100);
     END IF;
 
-    RETURN total;
+    totalTotal := totalTotal + totalRE - totalIRPF;
+
+    RETURN totalBImponibleLineas;
 END;
 ' LANGUAGE plpgsql;
 
+
+\echo -n ':: Funcion que calcula los impuestos totales de una factura ... '
+CREATE OR REPLACE FUNCTION calcimpuestosfactura(integer) RETURNS numeric(12, 2)
+AS '
+DECLARE
+     idp ALIAS FOR $1;
+    totalBImponibleLineas numeric(12, 2);
+    totalIRPF numeric(12, 2);
+    totalIVA numeric(12, 2);
+    totalRE numeric(12, 2);
+    totalTotal numeric(12, 2);
+    totalDesc numeric(12,2);
+    res RECORD;
+
+BEGIN
+    totalBImponibleLineas := 0;
+    totalIRPF := 0;
+    totalIVA := 0;
+    totalRE := 0;
+    totalTotal := 0;
+    totalDesc := 0;
+
+    FOR res IN SELECT proporciondfactura FROM dfactura WHERE idfactura = idp LOOP
+	totalDesc := totalDesc + res.proporciondfactura;
+    END LOOP;
+
+    FOR res IN SELECT cantlfactura * pvpivainclfactura * (1 - descuentolfactura / 100) * (1 - totalDesc / 100)  AS subtotal1 FROM lfactura WHERE idfactura = idp LOOP
+	totalTotal := totalTotal + res.subtotal1;
+    END LOOP;
+
+    FOR res IN SELECT cantlfactura * pvpivainclfactura * (1 - descuentolfactura / 100) * (1 - totalDesc / 100) * (1 - 1 / (1 + ivalfactura / 100)) AS subtotal1 FROM lfactura WHERE idfactura = idp LOOP
+	totalIVA := totalIVA + res.subtotal1;
+    END LOOP;
+
+    FOR res IN SELECT cantlfactura * pvpivainclfactura * (1 - descuentolfactura / 100) * (1 - totalDesc / 100) * (1 - 1 / (1 + ivalfactura / 100)) * (reqeqlfactura / 100) AS subtotal1 FROM lfactura WHERE idfactura = idp LOOP
+	totalRE := totalRE + res.subtotal1;
+    END LOOP;
+
+    totalBImponibleLineas := totalTotal - totalIVA;
+
+    SELECT INTO res tasairpf FROM irpf WHERE fechairpf &lt;= (SELECT ffactura FROM factura WHERE idfactura = idp) ORDER BY fechairpf DESC LIMIT 1;
+    IF FOUND THEN
+        totalIRPF := totalBImponibleLineas * (res.tasairpf / 100);
+    END IF;
+
+    totalTotal := totalTotal + totalRE - totalIRPF;
+
+    RETURN totalIVA + totalRE;
+END;
+' LANGUAGE plpgsql;
+
+
+
+
+
+
 \echo &quot;Cambiamos las funciones de calculo de totales para que use la parte de iva incluido en lugar de la parte sin incluir iva&quot;
 
 
@@ -221,14 +403,14 @@ END;
 --
 CREATE OR REPLACE FUNCTION actualizarevision() RETURNS INTEGER AS '
 DECLARE
-	rs RECORD;
+	res RECORD;
 BEGIN
-	SELECT INTO rs * FROM configuracion WHERE nombre=''PluginBf_IVAIncluido'';
+	SELECT INTO res * FROM configuracion WHERE nombre=''PluginBf_IVAIncluido'';
 
 	IF FOUND THEN
-		UPDATE configuracion SET valor=''0.14.1-0000'' WHERE nombre=''PluginBf_IVAIncluido'';
+		UPDATE configuracion SET valor=''0.15.1-0000'' WHERE nombre=''PluginBf_IVAIncluido'';
 	ELSE
-		INSERT INTO configuracion (nombre, valor) VALUES (''PluginBf_IVAIncluido'', ''0.14.1-0000'');
+		INSERT INTO configuracion (nombre, valor) VALUES (''PluginBf_IVAIncluido'', ''0.15.1-0000'');
 	END IF;
 
 	RETURN 0;
diff --git a/bulmages/bulmafact/plugins/pluginbf_ivaincluido/pluginbf_ivaincluido.cpp b/bulmages/bulmafact/plugins/pluginbf_ivaincluido/pluginbf_ivaincluido.cpp
index 8610b12..1fe7e0a 100644
--- a/bulmages/bulmafact/plugins/pluginbf_ivaincluido/pluginbf_ivaincluido.cpp
+++ b/bulmages/bulmafact/plugins/pluginbf_ivaincluido/pluginbf_ivaincluido.cpp
@@ -34,7 +34,7 @@ int entryPoint ( BfBulmaFact *bges )
     BL_FUNC_DEBUG
 
     /// El plugin necesita un parche en la base de datos para funcionar.
-    bges-&gt;company()-&gt;dbPatchVersionCheck(&quot;PluginBf_IVAIncluido&quot;, &quot;0.14.1-0000&quot;);
+    bges-&gt;company()-&gt;dbPatchVersionCheck(&quot;PluginBf_IVAIncluido&quot;, &quot;0.15.1-0000&quot;);
     
     /// Inicializa el sistema de traducciones 'gettext'.
     setlocale ( LC_ALL, &quot;&quot; );
diff --git a/bulmages/bulmafact/src/bfform.cpp b/bulmages/bulmafact/src/bfform.cpp
index 6a0d69b..eecc09e 100644
--- a/bulmages/bulmafact/src/bfform.cpp
+++ b/bulmages/bulmafact/src/bfform.cpp
@@ -978,14 +978,6 @@ int BfForm::generateRML ( void )
 }
 
 
-QString BfForm::templateName ( void )
-{
-    BL_FUNC_DEBUG
-    
-    
-    return tableName();
-}
-
 ///
 /**
 \param arch archivo a generar
diff --git a/bulmages/bulmafact/src/bfform.h b/bulmages/bulmafact/src/bfform.h
index 5cc38bf..0dc13e7 100644
--- a/bulmages/bulmafact/src/bfform.h
+++ b/bulmages/bulmafact/src/bfform.h
@@ -48,7 +48,6 @@ public:
     BfSubForm* getlistalineas();
     BfSubForm* getlistadescuentos();
     virtual void imprimir();
-    virtual QString templateName(void) ;
     virtual int generateRML ( void );
     virtual int generateRML ( const QString &amp;arch );
     virtual void calculaypintatotales();
diff --git a/bulmages/bulmafact/src/bfsubform.cpp b/bulmages/bulmafact/src/bfsubform.cpp
index f530aa9..7a3c082 100644
--- a/bulmages/bulmafact/src/bfsubform.cpp
+++ b/bulmages/bulmafact/src/bfsubform.cpp
@@ -269,6 +269,12 @@ void BfSubForm::editFinished ( int row, int col, BlDbSubFormRecord *rec, BlDbSub
 	BlFixed total = BlFixed(rec-&gt;dbValue(&quot;cant&quot; + m_tablename)) * BlFixed(rec-&gt;dbValue(&quot;pvp&quot; + m_tablename));
 	rec-&gt;setDbValue ( &quot;total&quot; + m_tablename, total.toQString('0',2) );
       } // end if
+      if (existsHeader(&quot;cant&quot; + m_tablename) &amp;&amp; existsHeader(&quot;pvpivainc&quot; + m_tablename) &amp;&amp; existsHeader(&quot;total&quot; + m_tablename) ) {
+	/// El campo total es calculado, asi que tratamos su actualizaci√≥n aqui aunque bien podri
+	BlFixed total = BlFixed(rec-&gt;dbValue(&quot;cant&quot; + m_tablename)) * BlFixed(rec-&gt;dbValue(&quot;pvpivainc&quot; + m_tablename));
+	rec-&gt;setDbValue ( &quot;total&quot; + m_tablename, total.toQString('0',2) );
+      } // end if
+      
     } // end if
     
     /// Refrescamos el registro.
@@ -710,21 +716,32 @@ void BfSubForm::calculaPVP ( BlDbSubFormRecord *rec )
             m_idTarifa = cur3-&gt;value( &quot;idtarifa&quot; );
             if ( cur3-&gt;numregistros() &gt; 0 ) {
                 /// A) Se dispone de tarifa especial.
-                rec-&gt;setDbValue ( &quot;pvp&quot; + m_tablename, cur3-&gt;value( &quot;pvpltarifa&quot; ) );
+                if (rec-&gt;exists(&quot;pvp&quot; + m_tablename))
+		    rec-&gt;setDbValue ( &quot;pvp&quot; + m_tablename, cur3-&gt;value( &quot;pvpltarifa&quot; ) );
+                if (rec-&gt;exists(&quot;pvpivainc&quot; + m_tablename))
+		    rec-&gt;setDbValue ( &quot;pvpivainc&quot; + m_tablename, cur3-&gt;value( &quot;pvpltarifa&quot; ) );
+
                 /// Disparamos los plugins.
                 int res = g_plugins-&gt;run ( &quot;BfSubForm_calculaPVP&quot;, this );
                 if ( res != 0 ) {
-		    
                     return;
                 } // end if
 
             } else {
+	      
                 /// B) No tiene tarifa especial se usa la asignada por defecto.
-                rec-&gt;setDbValue ( &quot;pvp&quot; + m_tablename, cur-&gt;value( &quot;pvparticulo&quot; ) );
+                if (rec-&gt;exists(&quot;pvp&quot; + m_tablename))
+		    rec-&gt;setDbValue ( &quot;pvp&quot; + m_tablename, cur-&gt;value( &quot;pvparticulo&quot; ) );
+                if (rec-&gt;exists(&quot;pvpivainc&quot; + m_tablename))
+		    rec-&gt;setDbValue ( &quot;pvpivainc&quot; + m_tablename, cur-&gt;value( &quot;pvpivaincarticulo&quot; ) );
+		
             } // end if
         } else {
             /// Sin cliente asignado se usa la tarifa asignada por defecto.
-            rec-&gt;setDbValue ( &quot;pvp&quot; + m_tablename, cur-&gt;value( &quot;pvparticulo&quot; ) );
+                if (rec-&gt;exists(&quot;pvp&quot; + m_tablename))
+		    rec-&gt;setDbValue ( &quot;pvp&quot; + m_tablename, cur-&gt;value( &quot;pvparticulo&quot; ) );
+                if (rec-&gt;exists(&quot;pvpivainc&quot; + m_tablename))
+		    rec-&gt;setDbValue ( &quot;pvpivainc&quot; + m_tablename, cur-&gt;value( &quot;pvpivaincarticulo&quot; ) );
         } // end if
 
 
diff --git a/bulmages/bulmafact/src/main.cxx b/bulmages/bulmafact/src/main.cxx
index a89c183..b04fd6c 100644
--- a/bulmages/bulmafact/src/main.cxx
+++ b/bulmages/bulmafact/src/main.cxx
@@ -129,7 +129,7 @@ int main ( int argc, char **argv )
       delete argParser;
 
       /// Verifica la version de la base de datos para funcionar adecuadamente.
-      bges-&gt;company()-&gt;dbVersionCheck(&quot;DatabaseRevision&quot;, &quot;0.14.1-0002&quot;);
+      bges-&gt;company()-&gt;dbVersionCheck(&quot;DatabaseRevision&quot;, &quot;0.14.1-0003&quot;);
 
 
       splashScr-&gt;show();
diff --git a/bulmages/bulmatpv/src/main.cxx b/bulmages/bulmatpv/src/main.cxx
index 1f63cd7..2c90ed4 100644
--- a/bulmages/bulmatpv/src/main.cxx
+++ b/bulmages/bulmatpv/src/main.cxx
@@ -132,7 +132,7 @@ int main ( int argc, char **argv )
         delete argParser;
 
         /// Verifica la version de la base de datos para funcionar adecuadamente.
-        bges-&gt;company()-&gt;dbVersionCheck(&quot;DBRev-BulmaTPV&quot;, &quot;0.14.1-0001&quot;);
+        bges-&gt;company()-&gt;dbVersionCheck(&quot;DBRev-BulmaTPV&quot;, &quot;0.14.1-0002&quot;);
 
         splashScr-&gt;show();
         splashScr-&gt;setMessage ( _( &quot;Leyendo configuracion&quot; ) );
diff --git a/bulmages/installbulmages/dbmodels/actualizar/revf-0.14.sql b/bulmages/installbulmages/dbmodels/actualizar/revf-0.14.sql
index e121d62..8800fa5 100644
--- a/bulmages/installbulmages/dbmodels/actualizar/revf-0.14.sql
+++ b/bulmages/installbulmages/dbmodels/actualizar/revf-0.14.sql
@@ -96,6 +96,16 @@ BEGIN
 
     DELETE FROM configuracion WHERE nombre=''IRPF'';
 
+    SELECT INTO rs * FROM pg_attribute WHERE attname = ''ticketfactura'';
+    IF NOT FOUND THEN
+	ALTER TABLE factura ADD COLUMN ticketfactura boolean DEFAULT FALSE;
+    END IF;
+
+    SELECT INTO rs * FROM pg_attribute WHERE attname = ''ticketalbaran'';
+    IF NOT FOUND THEN
+	ALTER TABLE factura ADD COLUMN ticketfactura boolean DEFAULT FALSE;
+    END IF;
+
    RETURN 0;
 END;
 ' LANGUAGE plpgsql;
@@ -319,9 +329,9 @@ DECLARE
 BEGIN
 	SELECT INTO rs * FROM configuracion WHERE nombre = ''DatabaseRevision'';
 	IF FOUND THEN
-		UPDATE CONFIGURACION SET valor = ''0.14.1-0002'' WHERE nombre = ''DatabaseRevision'';
+		UPDATE CONFIGURACION SET valor = ''0.14.1-0003'' WHERE nombre = ''DatabaseRevision'';
 	ELSE
-		INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''0.14.1-0002'');
+		INSERT INTO configuracion (nombre, valor) VALUES (''DatabaseRevision'', ''0.14.1-0003'');
 	END IF;
 	RETURN 0;
 END;
diff --git a/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql b/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql
index 4d5350b..9bea235 100644
--- a/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql
+++ b/bulmages/installbulmages/dbmodels/crear/bulmafact/bulmafact_schema.sql
@@ -1332,6 +1332,7 @@ CREATE TABLE factura (
     idforma_pago integer REFERENCES forma_pago(idforma_pago),   
     UNIQUE (idalmacen, codigoserie_factura, numfactura),
     idtrabajador integer REFERENCES trabajador(idtrabajador),
+    ticketfactura boolean DEFAULT FALSE,
     totalfactura NUMERIC(12, 2) DEFAULT 0,
     bimpfactura NUMERIC(12, 2) DEFAULT 0,
     impfactura NUMERIC(12, 2) DEFAULT 0
@@ -2337,6 +2338,7 @@ CREATE TABLE albaran (
     totalalbaran NUMERIC(12, 2) DEFAULT 0,
     bimpalbaran NUMERIC(12, 2) DEFAULT 0,
     impalbaran NUMERIC(12, 2) DEFAULT 0,
+    ticketalbaran boolean DEFAULT FALSE,
     UNIQUE (idalmacen, numalbaran)
 );
 
diff --git a/bulmages/installbulmages/dbmodels/crear/bulmatpv/bulmatpv_schema.sql b/bulmages/installbulmages/dbmodels/crear/bulmatpv/bulmatpv_schema.sql
index 82d41d6..d9d1079 100644
--- a/bulmages/installbulmages/dbmodels/crear/bulmatpv/bulmatpv_schema.sql
+++ b/bulmages/installbulmages/dbmodels/crear/bulmatpv/bulmatpv_schema.sql
@@ -73,6 +73,12 @@ BEGIN
 	END IF;
 
 
+
+	SELECT INTO rs * FROM pg_attribute WHERE attname = ''ticketfactura'';
+	IF NOT FOUND THEN
+	    ALTER TABLE factura ADD COLUMN ticketfactura boolean;
+	END IF;
+
 	SELECT INTO rs attname, relname FROM pg_attribute LEFT JOIN pg_class ON pg_attribute.attrelid=pg_class.oid WHERE attname=''idz'' AND relname=''albaran'';
 	IF NOT FOUND THEN
 	    ALTER TABLE albaran ADD COLUMN idz INTEGER;
@@ -105,9 +111,9 @@ DECLARE
 BEGIN
 	SELECT INTO rs * FROM configuracion WHERE nombre=''DBRev-BulmaTPV'';
 	IF FOUND THEN
-		UPDATE CONFIGURACION SET valor=''0.14.1-0001'' WHERE nombre=''DBRev-BulmaTPV'';
+		UPDATE CONFIGURACION SET valor=''0.14.1-0002'' WHERE nombre=''DBRev-BulmaTPV'';
 	ELSE
-		INSERT INTO configuracion (nombre, valor) VALUES (''DBRev-BulmaTPV'', ''0.14.1-0001'');
+		INSERT INTO configuracion (nombre, valor) VALUES (''DBRev-BulmaTPV'', ''0.14.1-0002'');
 	END IF;
 	RETURN 0;
 END;

commit 38098083204b0bcac60ff931d4b94666433c4cb1
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Sat Apr 6 21:03:21 2013 +0200

    Agrego archivos del plugin de biblioteca que me habia dejado

diff --git a/bulmages/bulmafact/plugins/pluginbf_biblioteca/autoforms/asociado.png b/bulmages/bulmafact/plugins/pluginbf_biblioteca/autoforms/asociado.png
new file mode 100644
index 0000000..ae9bd65
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_biblioteca/autoforms/asociado.png differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_biblioteca/autoforms/asociadobase.ui b/bulmages/bulmafact/plugins/pluginbf_biblioteca/autoforms/asociadobase.ui
new file mode 100644
index 0000000..55abafe
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_biblioteca/autoforms/asociadobase.ui
@@ -0,0 +1,203 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;ui version=&quot;4.0&quot;&gt;
+ &lt;class&gt;Form&lt;/class&gt;
+ &lt;widget class=&quot;QWidget&quot; name=&quot;Form&quot;&gt;
+  &lt;property name=&quot;geometry&quot;&gt;
+   &lt;rect&gt;
+    &lt;x&gt;0&lt;/x&gt;
+    &lt;y&gt;0&lt;/y&gt;
+    &lt;width&gt;574&lt;/width&gt;
+    &lt;height&gt;363&lt;/height&gt;
+   &lt;/rect&gt;
+  &lt;/property&gt;
+  &lt;property name=&quot;windowTitle&quot;&gt;
+   &lt;string&gt;Form&lt;/string&gt;
+  &lt;/property&gt;
+  &lt;layout class=&quot;QGridLayout&quot; name=&quot;gridLayout_2&quot;&gt;
+   &lt;item row=&quot;0&quot; column=&quot;0&quot;&gt;
+    &lt;widget class=&quot;QTabWidget&quot; name=&quot;tabWidget&quot;&gt;
+     &lt;property name=&quot;currentIndex&quot;&gt;
+      &lt;number&gt;0&lt;/number&gt;
+     &lt;/property&gt;
+     &lt;widget class=&quot;QWidget&quot; name=&quot;tab&quot;&gt;
+      &lt;attribute name=&quot;title&quot;&gt;
+       &lt;string&gt;Datos personales&lt;/string&gt;
+      &lt;/attribute&gt;
+      &lt;layout class=&quot;QGridLayout&quot; name=&quot;gridLayout&quot;&gt;
+       &lt;item row=&quot;0&quot; column=&quot;0&quot;&gt;
+        &lt;widget class=&quot;QLabel&quot; name=&quot;label&quot;&gt;
+         &lt;property name=&quot;text&quot;&gt;
+          &lt;string&gt;Nombre&lt;/string&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;buddy&quot;&gt;
+          &lt;cstring&gt;mui_nomasociado&lt;/cstring&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;0&quot; column=&quot;2&quot; colspan=&quot;3&quot;&gt;
+        &lt;widget class=&quot;QLineEdit&quot; name=&quot;mui_nomasociado&quot;/&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;1&quot; column=&quot;0&quot;&gt;
+        &lt;widget class=&quot;QLabel&quot; name=&quot;label_2&quot;&gt;
+         &lt;property name=&quot;text&quot;&gt;
+          &lt;string&gt;Primer Apellido&lt;/string&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;buddy&quot;&gt;
+          &lt;cstring&gt;mui_apellido1asociado&lt;/cstring&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;1&quot; column=&quot;2&quot; colspan=&quot;3&quot;&gt;
+        &lt;widget class=&quot;QLineEdit&quot; name=&quot;mui_apellido1asociado&quot;/&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;2&quot; column=&quot;0&quot; colspan=&quot;2&quot;&gt;
+        &lt;widget class=&quot;QLabel&quot; name=&quot;label_3&quot;&gt;
+         &lt;property name=&quot;text&quot;&gt;
+          &lt;string&gt;Segundo Apellido&lt;/string&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;buddy&quot;&gt;
+          &lt;cstring&gt;mui_apellido2asociado&lt;/cstring&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;2&quot; column=&quot;2&quot; colspan=&quot;3&quot;&gt;
+        &lt;widget class=&quot;QLineEdit&quot; name=&quot;mui_apellido2asociado&quot;/&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;3&quot; column=&quot;0&quot; colspan=&quot;2&quot;&gt;
+        &lt;widget class=&quot;QLabel&quot; name=&quot;label_4&quot;&gt;
+         &lt;property name=&quot;text&quot;&gt;
+          &lt;string&gt;Fecha de Nacimiento&lt;/string&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;buddy&quot;&gt;
+          &lt;cstring&gt;mui_fechanacimientoasociado&lt;/cstring&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;3&quot; column=&quot;2&quot;&gt;
+        &lt;spacer name=&quot;horizontalSpacer_2&quot;&gt;
+         &lt;property name=&quot;orientation&quot;&gt;
+          &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;sizeType&quot;&gt;
+          &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+          &lt;size&gt;
+           &lt;width&gt;30&lt;/width&gt;
+           &lt;height&gt;20&lt;/height&gt;
+          &lt;/size&gt;
+         &lt;/property&gt;
+        &lt;/spacer&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;3&quot; column=&quot;3&quot;&gt;
+        &lt;widget class=&quot;BlDateSearch&quot; name=&quot;mui_fechanacimientoasociado&quot;&gt;
+         &lt;property name=&quot;maximumSize&quot;&gt;
+          &lt;size&gt;
+           &lt;width&gt;150&lt;/width&gt;
+           &lt;height&gt;16777215&lt;/height&gt;
+          &lt;/size&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;3&quot; column=&quot;4&quot;&gt;
+        &lt;spacer name=&quot;horizontalSpacer&quot;&gt;
+         &lt;property name=&quot;orientation&quot;&gt;
+          &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+          &lt;size&gt;
+           &lt;width&gt;40&lt;/width&gt;
+           &lt;height&gt;20&lt;/height&gt;
+          &lt;/size&gt;
+         &lt;/property&gt;
+        &lt;/spacer&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;4&quot; column=&quot;0&quot;&gt;
+        &lt;widget class=&quot;QLabel&quot; name=&quot;label_5&quot;&gt;
+         &lt;property name=&quot;text&quot;&gt;
+          &lt;string&gt;Telefono&lt;/string&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;buddy&quot;&gt;
+          &lt;cstring&gt;mui_telasociado&lt;/cstring&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;5&quot; column=&quot;0&quot; colspan=&quot;2&quot;&gt;
+        &lt;widget class=&quot;QLabel&quot; name=&quot;label_6&quot;&gt;
+         &lt;property name=&quot;text&quot;&gt;
+          &lt;string&gt;Correo Electronico&lt;/string&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;buddy&quot;&gt;
+          &lt;cstring&gt;mui_mailasociado&lt;/cstring&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;5&quot; column=&quot;2&quot; colspan=&quot;3&quot;&gt;
+        &lt;widget class=&quot;QLineEdit&quot; name=&quot;mui_mailasociado&quot;/&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;6&quot; column=&quot;0&quot;&gt;
+        &lt;widget class=&quot;QLabel&quot; name=&quot;label_7&quot;&gt;
+         &lt;property name=&quot;text&quot;&gt;
+          &lt;string&gt;Direccion&lt;/string&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;buddy&quot;&gt;
+          &lt;cstring&gt;mui_dirasociado&lt;/cstring&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;6&quot; column=&quot;1&quot; colspan=&quot;4&quot;&gt;
+        &lt;widget class=&quot;QLineEdit&quot; name=&quot;mui_dirasociado&quot;/&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;7&quot; column=&quot;0&quot;&gt;
+        &lt;widget class=&quot;QLabel&quot; name=&quot;label_8&quot;&gt;
+         &lt;property name=&quot;text&quot;&gt;
+          &lt;string&gt;Provincia&lt;/string&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;buddy&quot;&gt;
+          &lt;cstring&gt;mui_idprovincia&lt;/cstring&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;7&quot; column=&quot;1&quot; colspan=&quot;2&quot;&gt;
+        &lt;widget class=&quot;BlComboBox&quot; name=&quot;mui_idprovincia&quot;/&gt;
+       &lt;/item&gt;
+       &lt;item row=&quot;4&quot; column=&quot;2&quot;&gt;
+        &lt;widget class=&quot;QLineEdit&quot; name=&quot;mui_telasociado&quot;/&gt;
+       &lt;/item&gt;
+      &lt;/layout&gt;
+     &lt;/widget&gt;
+     &lt;widget class=&quot;QWidget&quot; name=&quot;tab_2&quot;&gt;
+      &lt;attribute name=&quot;title&quot;&gt;
+       &lt;string&gt;Reservas&lt;/string&gt;
+      &lt;/attribute&gt;
+      &lt;layout class=&quot;QGridLayout&quot; name=&quot;gridLayout_3&quot;&gt;
+       &lt;item row=&quot;0&quot; column=&quot;0&quot;&gt;
+        &lt;widget class=&quot;BlSubForm&quot; name=&quot;mui_list&quot; native=&quot;true&quot;/&gt;
+       &lt;/item&gt;
+      &lt;/layout&gt;
+     &lt;/widget&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+  &lt;/layout&gt;
+ &lt;/widget&gt;
+ &lt;customwidgets&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BlComboBox&lt;/class&gt;
+   &lt;extends&gt;QComboBox&lt;/extends&gt;
+   &lt;header&gt;blcombobox.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BlDateSearch&lt;/class&gt;
+   &lt;extends&gt;QLineEdit&lt;/extends&gt;
+   &lt;header&gt;bldatesearch.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BlSubForm&lt;/class&gt;
+   &lt;extends&gt;QWidget&lt;/extends&gt;
+   &lt;header&gt;blsubform.h&lt;/header&gt;
+   &lt;container&gt;1&lt;/container&gt;
+  &lt;/customwidget&gt;
+ &lt;/customwidgets&gt;
+ &lt;resources/&gt;
+ &lt;connections/&gt;
+&lt;/ui&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_biblioteca/autoforms/prestamolibro.png b/bulmages/bulmafact/plugins/pluginbf_biblioteca/autoforms/prestamolibro.png
new file mode 100644
index 0000000..93d0623
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_biblioteca/autoforms/prestamolibro.png differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_biblioteca/autoforms/prestamolibrobase.ui b/bulmages/bulmafact/plugins/pluginbf_biblioteca/autoforms/prestamolibrobase.ui
new file mode 100644
index 0000000..2946e11
--- /dev/null
+++ b/bulmages/bulmafact/plugins/pluginbf_biblioteca/autoforms/prestamolibrobase.ui
@@ -0,0 +1,116 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;ui version=&quot;4.0&quot;&gt;
+ &lt;class&gt;Form&lt;/class&gt;
+ &lt;widget class=&quot;QWidget&quot; name=&quot;Form&quot;&gt;
+  &lt;property name=&quot;geometry&quot;&gt;
+   &lt;rect&gt;
+    &lt;x&gt;0&lt;/x&gt;
+    &lt;y&gt;0&lt;/y&gt;
+    &lt;width&gt;520&lt;/width&gt;
+    &lt;height&gt;158&lt;/height&gt;
+   &lt;/rect&gt;
+  &lt;/property&gt;
+  &lt;property name=&quot;windowTitle&quot;&gt;
+   &lt;string&gt;Form&lt;/string&gt;
+  &lt;/property&gt;
+  &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout&quot;&gt;
+   &lt;item&gt;
+    &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout&quot;&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;QLabel&quot; name=&quot;label&quot;&gt;
+       &lt;property name=&quot;text&quot;&gt;
+        &lt;string&gt;Socio&lt;/string&gt;
+       &lt;/property&gt;
+      &lt;/widget&gt;
+     &lt;/item&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;BlSearchWidget&quot; name=&quot;mui_idasociado&quot; native=&quot;true&quot;/&gt;
+     &lt;/item&gt;
+    &lt;/layout&gt;
+   &lt;/item&gt;
+   &lt;item&gt;
+    &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_2&quot;&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;QLabel&quot; name=&quot;label_2&quot;&gt;
+       &lt;property name=&quot;text&quot;&gt;
+        &lt;string&gt;Libro&lt;/string&gt;
+       &lt;/property&gt;
+      &lt;/widget&gt;
+     &lt;/item&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;BlSearchWidget&quot; name=&quot;mui_idlibro&quot; native=&quot;true&quot;/&gt;
+     &lt;/item&gt;
+    &lt;/layout&gt;
+   &lt;/item&gt;
+   &lt;item&gt;
+    &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_3&quot;&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;QLabel&quot; name=&quot;label_3&quot;&gt;
+       &lt;property name=&quot;text&quot;&gt;
+        &lt;string&gt;Fecha Inicial Prestamo&lt;/string&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;buddy&quot;&gt;
+        &lt;cstring&gt;mui_fechainprestamolibro&lt;/cstring&gt;
+       &lt;/property&gt;
+      &lt;/widget&gt;
+     &lt;/item&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;BlDateSearch&quot; name=&quot;mui_fechainprestamolibro&quot;/&gt;
+     &lt;/item&gt;
+    &lt;/layout&gt;
+   &lt;/item&gt;
+   &lt;item&gt;
+    &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_4&quot;&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;QLabel&quot; name=&quot;label_4&quot;&gt;
+       &lt;property name=&quot;text&quot;&gt;
+        &lt;string&gt;Fecha Final Prestamo&lt;/string&gt;
+       &lt;/property&gt;
+       &lt;property name=&quot;buddy&quot;&gt;
+        &lt;cstring&gt;mui_fechafinprestamolibro&lt;/cstring&gt;
+       &lt;/property&gt;
+      &lt;/widget&gt;
+     &lt;/item&gt;
+     &lt;item&gt;
+      &lt;widget class=&quot;BlDateSearch&quot; name=&quot;mui_fechafinprestamolibro&quot;/&gt;
+     &lt;/item&gt;
+    &lt;/layout&gt;
+   &lt;/item&gt;
+   &lt;item&gt;
+    &lt;widget class=&quot;QCheckBox&quot; name=&quot;mui_devueltoprestamolibro&quot;&gt;
+     &lt;property name=&quot;text&quot;&gt;
+      &lt;string&gt;Devuelto&lt;/string&gt;
+     &lt;/property&gt;
+    &lt;/widget&gt;
+   &lt;/item&gt;
+   &lt;item&gt;
+    &lt;spacer name=&quot;verticalSpacer&quot;&gt;
+     &lt;property name=&quot;orientation&quot;&gt;
+      &lt;enum&gt;Qt::Vertical&lt;/enum&gt;
+     &lt;/property&gt;
+     &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+      &lt;size&gt;
+       &lt;width&gt;20&lt;/width&gt;
+       &lt;height&gt;22&lt;/height&gt;
+      &lt;/size&gt;
+     &lt;/property&gt;
+    &lt;/spacer&gt;
+   &lt;/item&gt;
+  &lt;/layout&gt;
+ &lt;/widget&gt;
+ &lt;customwidgets&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BlDateSearch&lt;/class&gt;
+   &lt;extends&gt;QLineEdit&lt;/extends&gt;
+   &lt;header&gt;bldatesearch.h&lt;/header&gt;
+  &lt;/customwidget&gt;
+  &lt;customwidget&gt;
+   &lt;class&gt;BlSearchWidget&lt;/class&gt;
+   &lt;extends&gt;QWidget&lt;/extends&gt;
+   &lt;header&gt;blsearchwidget.h&lt;/header&gt;
+   &lt;container&gt;1&lt;/container&gt;
+  &lt;/customwidget&gt;
+ &lt;/customwidgets&gt;
+ &lt;resources/&gt;
+ &lt;connections/&gt;
+&lt;/ui&gt;
diff --git a/bulmages/bulmafact/plugins/pluginbf_biblioteca/images/asociado.png b/bulmages/bulmafact/plugins/pluginbf_biblioteca/images/asociado.png
new file mode 100644
index 0000000..ae9bd65
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_biblioteca/images/asociado.png differ
diff --git a/bulmages/bulmafact/plugins/pluginbf_biblioteca/images/prestamolibro.png b/bulmages/bulmafact/plugins/pluginbf_biblioteca/images/prestamolibro.png
new file mode 100644
index 0000000..93d0623
Binary files /dev/null and b/bulmages/bulmafact/plugins/pluginbf_biblioteca/images/prestamolibro.png differ

commit aff87244fb2225cdbf5207c5457b149b28cb0902
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Sat Apr 6 16:32:55 2013 +0200

    Agregado soporte para la apertura de documentos odt

diff --git a/bulmages/bulmalib/src/blfunctions.cpp b/bulmages/bulmalib/src/blfunctions.cpp
index f52cb6a..7492a97 100644
--- a/bulmages/bulmalib/src/blfunctions.cpp
+++ b/bulmages/bulmalib/src/blfunctions.cpp
@@ -611,6 +611,20 @@ void blCreateODS ( const QString arch )
 	blMsgError(_(&quot;Error al borrar archivo .ods [ blfunctions-&gt;blCreateODS() ]&quot;));
     } // end if
 
+    /// Borramos algun archivo que pudiera haber
+#ifdef Q_OS_WIN32
+    cadena = g_confpr-&gt;value( CONF_DIR_USER );
+    cadena.replace(&quot;/&quot;, &quot;\\&quot;);
+    cadena = &quot;\&quot;del \&quot;&quot; + arch + &quot;.odt\&quot;\&quot;&quot;;
+#else
+    cadena = &quot;rm &quot; + g_confpr-&gt;value( CONF_DIR_USER ) + arch + &quot;.odt&quot;;
+#endif
+    result1 = system ( cadena.toAscii() );
+    if (result1 == -1) {
+	blMsgError(_(&quot;Error al borrar archivo .odt [ blfunctions-&gt;blCreateODS() ]&quot;));
+    } // end if
+    
+    
     /// Hacemos la invocacion del python
 #ifdef Q_OS_WIN32
 
@@ -655,6 +669,25 @@ void blCreateAndLoadODS ( const QString arch )
       } // end if
     } // end if
 
+    if (QFile::exists(g_confpr-&gt;value( CONF_DIR_USER ) + arch + &quot;.odt&quot;)) {
+      QString cadena = &quot;&quot;;
+#ifdef Q_OS_WIN32
+    if (g_confpr-&gt;value( CONF_ODS ).isEmpty()) {
+	    /// Abre con el programa por defecto del sistema.
+	    cadena = &quot;\&quot;start \&quot;\&quot; \&quot;&quot; + g_confpr-&gt;value( CONF_DIR_USER ) + arch +  &quot;.odt&quot; + &quot;\&quot;\&quot;&quot;;
+    } else {
+	    /// Abre con la configuracion forzada.
+	    cadena = &quot;\&quot;start \&quot;\&quot; \&quot;&quot; + g_confpr-&gt;value( CONF_ODS ) + &quot;\&quot; \&quot;&quot; + g_confpr-&gt;value( CONF_DIR_USER ) +  arch + &quot;.odt&quot; + &quot;\&quot;\&quot;&quot;;
+    } // end if
+#else
+      cadena = g_confpr-&gt;value( CONF_ODS ) + &quot; &quot; + g_confpr-&gt;value( CONF_DIR_USER ) + arch + &quot;.odt &amp;&quot;;
+#endif
+      int result = system ( cadena.toAscii() );
+      if (result == -1) {
+	  blMsgError(_(&quot;Error al ejecutar ootext [ blfunctions-&gt;blCreateAndLoadODS() ]&quot;));
+      } // end if
+    } // end if
+    
 }
 
 /// Genera un 'PDF' a partir de un 'RML' usando 'bgtrml2pdf' y adem&aacute;s lo muestra con el visor

commit 4db16281f4210d2a229d10980e48fa83d2bf6734
Author: Tomeu Borras &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bulmages-main">tborras en conetxia.com</A>&gt;
Date:   Sat Apr 6 12:37:20 2013 +0200

    Arreglo la plantilla de presupuesto en hoja de calculo

diff --git a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_excel.pys b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_excel.pys
index 97855a9..87149b4 100644
--- a/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_excel.pys
+++ b/bulmages/bulmafact/plugins/pluginbf_clientepresupuesto/openreports/es/impers_presupuesto_excel.pys
@@ -9,33 +9,65 @@ import ooolib
 # Crea el documento
 doc = ooolib.Calc(&quot;Presupuesto&quot;)
 
-doc.set_column_property(1, 'width', '0.5in')
-doc.set_column_property(2, 'width', '5in')
+doc.set_column_property(1, 'width', '1in')
+doc.set_column_property(2, 'width', '4in')
 doc.set_cell_property('bold', True)
 doc.set_cell_value(2, 2, 'string', 'PRESUPUESTO')
 doc.set_cell_value(3, 2, 'string', u'[numpresupuesto]')
 doc.set_cell_value(4, 2, 'string', u'[refpresupuesto]')
 
-i=4
+i=3
 doc.set_cell_value(1,i,'string','CIF')
 doc.set_cell_value(2,i,'string','NOMBRE')
 doc.set_cell_value(3,i,'string','DIRECCION')
 doc.set_cell_value(4,i,'string','CP')
 doc.set_cell_value(5,i,'string','POBLACION')
-doc.set_cell_value(6,i,'string','BASE')
-doc.set_cell_value(7,i,'string','IMPUESTOS')
-doc.set_cell_value(8,i,'string','TOTAL')
+i = i + 1
+
+&lt;!-- QUERY=&quot;SELECT * FROM cliente WHERE idcliente=[idcliente]&quot;--&gt;
+doc.set_cell_value(1,i,'string','[cifcliente]')
+doc.set_cell_value(2,i,'string','[nomcliente]')
+doc.set_cell_value(3,i,'string','[dircliente]')
+doc.set_cell_value(4,i,'string','[cpcliente]')
+doc.set_cell_value(5,i,'string','[poblcliente]')
+&lt;!-- END QUERY--&gt;
+
+i=6
+doc.set_cell_value(1,i,'string','CODIGO')
+doc.set_cell_value(2,i,'string','NOMBRE')
+doc.set_cell_value(3,i,'string','CANTIDAD')
+doc.set_cell_value(4,i,'string','PVP UND')
+doc.set_cell_value(5,i,'string','IVA')
+doc.set_cell_value(6,i,'string','TOTAL')
 
-#i=7
-&lt;!-- QUERY=&quot;SELECT * FROM lpresupuesto where idpresupuesto=[idpresupuesto]&quot;--&gt;
+i=7
+&lt;!-- QUERY=&quot;SELECT *, (cantlpresupuesto * pvplpresupuesto)::NUMERIC(12,2) AS totallpresupuesto FROM lpresupuesto LEFT JOIN articulo ON lpresupuesto.idarticulo = articulo.idarticulo WHERE idpresupuesto = [idpresupuesto] ORDER BY ordenlpresupuesto&quot;--&gt;
 doc.set_cell_value(1,i,'string', u'[codigocompletoarticulo]')
 doc.set_cell_value(2,i,'string', u'[desclpresupuesto]')
-doc.set_cell_value(3,i,'string', u'[cantlpresupuesto]')
-doc.set_cell_value(4,i,'string', u'[pvplpresupuesto]')
-doc.set_cell_value(6,i,'string', u'[ivalpresupuesto]')
+doc.set_cell_value(3,i,'float', u'[cantlpresupuesto]')
+doc.set_cell_value(4,i,'float', u'[pvplpresupuesto]')
+doc.set_cell_value(5,i,'float', u'[ivalpresupuesto]')
+doc.set_cell_value(6,i,'float', u'[totallpresupuesto]')
 i = i + 1
 &lt;!--END QUERY--&gt;
+j = i
+i =  i + 3
 
+&lt;!-- QUERY=&quot;SELECT ivalpresupuesto::INTEGER, SUM (cantlpresupuesto * pvplpresupuesto)::NUMERIC(12,2) AS bimp FROM lpresupuesto WHERE idpresupuesto = [idpresupuesto] GROUP BY ivalpresupuesto  ORDER BY ivalpresupuesto&quot;--&gt;
+doc.set_cell_value(5,i,'string', u'Base: [ivalpresupuesto]%')
+#doc.set_cell_value(7,i,'formula', u&quot;=SUMAR.SI(E7:E&quot;+str(j)+&quot;;\&quot;=[ivalpresupuesto]\&quot;;F7:F&quot;+str(j)+&quot;)&quot;)
+doc.set_cell_value(6,i,'float', '[bimp]')
+i = i + 1
+&lt;!--END QUERY--&gt;
+
+i =  i +3
+doc.set_row_property(i, 'height', '0.5in')
+doc.set_cell_property('color', '#0000ff')
+#doc.set_cell_property('background', '#ff0000')
+doc.set_cell_property('fontsize', '14')
+doc.set_cell_value(5,i,'string', u'TOTAL')
+doc.set_cell_property('bold', True)
+doc.set_cell_value(6,i,'formula', u'=SUM(F7:F'+str(j-1)+')')
 
 # Guardamos el documento
 doc.save(&quot;impers_presupuesto_excel.ods&quot;)


<A HREF="https://gitorious.org/bulmages">https://gitorious.org/bulmages</A>
------------------------------------------------------------------------

You are receiving this email because you have chosen to be notified by
email whenever this favorite has new activity. You can manage your
favorite subscriptions at <A HREF="https://gitorious.org/favorites">https://gitorious.org/favorites</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Mensaje anterior: <A HREF="007569.html">[BulmaGÈs] [Gitorious] Activity: tborras deleted	branch plantillasim...
</A></li>
	
         <LI> <B>Mensajes ordenados por:</B> 
              <a href="date.html#7570">[ fecha ]</a>
              <a href="thread.html#7570">[ hilo ]</a>
              <a href="subject.html#7570">[ asunto ]</a>
              <a href="author.html#7570">[ autor ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bulmages-main">M·s informaciÛn sobre la lista de distribuciÛn Bulmages-main </a><br>
</body></html>
